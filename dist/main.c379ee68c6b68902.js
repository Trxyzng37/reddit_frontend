(self.webpackChunkangular=self.webpackChunkangular||[]).push([[179],{792:(tc,xa,Mr)=>{"use strict";let Hn=null,ei=1;function _n(e){const o=Hn;return Hn=e,o}function Gc(e){if((!Sn(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==ei)){if(!e.producerMustRecompute(e)&&!ql(e))return e.dirty=!1,void(e.lastCleanEpoch=ei);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=ei}}function ql(e){po(e);for(let o=0;o<e.producerNode.length;o++){const t=e.producerNode[o],r=e.producerLastReadVersion[o];if(r!==t.version||(Gc(t),r!==t.version))return!0}return!1}function Gl(e,o){if(function ti(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),po(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)Gl(e.producerNode[r],e.producerIndexOfThis[r]);const t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[o]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[o]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,o<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[o],i=e.liveConsumerNode[o];po(i),i.producerIndexOfThis[r]=o}}function Sn(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function po(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let ut=null;function an(e){return"function"==typeof e}function Yl(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const fr=Yl(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function zt(e,o){if(e){const t=e.indexOf(o);0<=t&&e.splice(t,1)}}class Pt{constructor(o){this.initialTeardown=o,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let o;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const l of t)l.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(an(r))try{r()}catch(l){o=l instanceof fr?l.errors:[l]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const l of i)try{Om(l)}catch(d){o=o??[],d instanceof fr?o=[...o,...d.errors]:o.push(d)}}if(o)throw new fr(o)}}add(o){var t;if(o&&o!==this)if(this.closed)Om(o);else{if(o instanceof Pt){if(o.closed||o._hasParent(this))return;o._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(o)}}_hasParent(o){const{_parentage:t}=this;return t===o||Array.isArray(t)&&t.includes(o)}_addParent(o){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(o),t):t?[t,o]:o}_removeParent(o){const{_parentage:t}=this;t===o?this._parentage=null:Array.isArray(t)&&zt(t,o)}remove(o){const{_finalizers:t}=this;t&&zt(t,o),o instanceof Pt&&o._removeParent(this)}}Pt.EMPTY=(()=>{const e=new Pt;return e.closed=!0,e})();const Xe=Pt.EMPTY;function ue(e){return e instanceof Pt||e&&"closed"in e&&an(e.remove)&&an(e.add)&&an(e.unsubscribe)}function Om(e){an(e)?e():e.unsubscribe()}const as={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},nt={setTimeout(e,o,...t){const{delegate:r}=nt;return r?.setTimeout?r.setTimeout(e,o,...t):setTimeout(e,o,...t)},clearTimeout(e){const{delegate:o}=nt;return(o?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Kc(e){nt.setTimeout(()=>{const{onUnhandledError:o}=as;if(!o)throw e;o(e)})}function $o(){}const ad=Bi("C",void 0,void 0);function Bi(e,o,t){return{kind:e,value:o,error:t}}let Uo=null;function hr(e){if(as.useDeprecatedSynchronousErrorHandling){const o=!Uo;if(o&&(Uo={errorThrown:!1,error:null}),e(),o){const{errorThrown:t,error:r}=Uo;if(Uo=null,t)throw r}}else e()}class Zc extends Pt{constructor(o){super(),this.isStopped=!1,o?(this.destination=o,ue(o)&&o.add(this)):this.destination=Jr}static create(o,t,r){return new go(o,t,r)}next(o){this.isStopped?nc(function Li(e){return Bi("N",e,void 0)}(o),this):this._next(o)}error(o){this.isStopped?nc(function vn(e){return Bi("E",void 0,e)}(o),this):(this.isStopped=!0,this._error(o))}complete(){this.isStopped?nc(ad,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(o){this.destination.next(o)}_error(o){try{this.destination.error(o)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Jl=Function.prototype.bind;function ri(e,o){return Jl.call(e,o)}class cd{constructor(o){this.partialObserver=o}next(o){const{partialObserver:t}=this;if(t.next)try{t.next(o)}catch(r){cs(r)}}error(o){const{partialObserver:t}=this;if(t.error)try{t.error(o)}catch(r){cs(r)}else cs(o)}complete(){const{partialObserver:o}=this;if(o.complete)try{o.complete()}catch(t){cs(t)}}}class go extends Zc{constructor(o,t,r){let i;if(super(),an(o)||!o)i={next:o??void 0,error:t??void 0,complete:r??void 0};else{let l;this&&as.useDeprecatedNextContext?(l=Object.create(o),l.unsubscribe=()=>this.unsubscribe(),i={next:o.next&&ri(o.next,l),error:o.error&&ri(o.error,l),complete:o.complete&&ri(o.complete,l)}):i=o}this.destination=new cd(i)}}function cs(e){as.useDeprecatedSynchronousErrorHandling?function ka(e){as.useDeprecatedSynchronousErrorHandling&&Uo&&(Uo.errorThrown=!0,Uo.error=e)}(e):Kc(e)}function nc(e,o){const{onStoppedNotification:t}=as;t&&nt.setTimeout(()=>t(e,o))}const Jr={closed:!0,next:$o,error:function or(e){throw e},complete:$o},zn="function"==typeof Symbol&&Symbol.observable||"@@observable";function oc(e){return e}function Da(e){return 0===e.length?oc:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let Zn=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const l=function Vi(e){return e&&e instanceof Zc||function un(e){return e&&an(e.next)&&an(e.error)&&an(e.complete)}(e)&&ue(e)}(t)?t:new go(t,r,i);return hr(()=>{const{operator:d,source:p}=this;l.add(d?d.call(l,p):p?this._subscribe(l):this._trySubscribe(l))}),l}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ld(r))((i,l)=>{const d=new go({next:p=>{try{t(p)}catch(m){l(m),d.unsubscribe()}},error:l,complete:i});this.subscribe(d)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[zn](){return this}pipe(...t){return Da(t)(this)}toPromise(t){return new(t=ld(t))((r,i)=>{let l;this.subscribe(d=>l=d,d=>i(d),()=>r(l))})}}return e.create=o=>new e(o),e})();function ld(e){var o;return null!==(o=e??as.Promise)&&void 0!==o?o:Promise}const Ns=Yl(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let _o=(()=>{class e extends Zn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Do(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Ns}next(t){hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:l}=this;return r||i?Xe:(this.currentObservers=null,l.push(t),new Pt(()=>{this.currentObservers=null,zt(l,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:l}=this;r?t.error(i):l&&t.complete()}asObservable(){const t=new Zn;return t.source=this,t}}return e.create=(o,t)=>new Do(o,t),e})();class Do extends _o{constructor(o,t){super(),this.destination=o,this.source=t}next(o){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,o)}error(o){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,o)}complete(){var o,t;null===(t=null===(o=this.destination)||void 0===o?void 0:o.complete)||void 0===t||t.call(o)}_subscribe(o){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(o))&&void 0!==r?r:Xe}}function Nt(e){return an(e?.lift)}function Ke(e){return o=>{if(Nt(o))return o.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fn(e,o,t,r,i){return new ud(e,o,t,r,i)}class ud extends Zc{constructor(o,t,r,i,l,d){super(o),this.onFinalize=l,this.shouldUnsubscribe=d,this._next=t?function(p){try{t(p)}catch(m){o.error(m)}}:super._next,this._error=i?function(p){try{i(p)}catch(m){o.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(p){o.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var o;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(o=this.onFinalize)||void 0===o||o.call(this))}}}function Mt(e,o){return Ke((t,r)=>{let i=0;t.subscribe(Fn(r,l=>{r.next(e.call(o,l,i++))}))})}function rc(e){return this instanceof rc?(this.v=e,this):new rc(e)}function Lm(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,o=e[Symbol.asyncIterator];return o?o.call(e):(e=function th(e){var o="function"==typeof Symbol&&Symbol.iterator,t=o&&e[o],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=e[l]&&function(d){return new Promise(function(p,m){!function i(l,d,p,m){Promise.resolve(m).then(function(v){l({value:v,done:p})},d)}(p,m,(d=e[l](d)).done,d.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const ji=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function fd(e){return an(e?.then)}function ls(e){return an(e[zn])}function yo(e){return Symbol.asyncIterator&&an(e?.[Symbol.asyncIterator])}function $v(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Vm=function Uv(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function rh(e){return an(e?.[Vm])}function $m(e){return function oh(e,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,o||[]),l=[];return i={},d("next"),d("throw"),d("return"),i[Symbol.asyncIterator]=function(){return this},i;function d(R){r[R]&&(i[R]=function($){return new Promise(function(H,Y){l.push([R,$,H,Y])>1||p(R,$)})})}function p(R,$){try{!function m(R){R.value instanceof rc?Promise.resolve(R.value.v).then(v,w):P(l[0][2],R)}(r[R]($))}catch(H){P(l[0][3],H)}}function v(R){p("next",R)}function w(R){p("throw",R)}function P(R,$){R($),l.shift(),l.length&&p(l[0][0],l[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield rc(t.read());if(i)return yield rc(void 0);yield yield rc(r)}}finally{t.releaseLock()}})}function Um(e){return an(e?.getReader)}function Or(e){if(e instanceof Zn)return e;if(null!=e){if(ls(e))return function jm(e){return new Zn(o=>{const t=e[zn]();if(an(t.subscribe))return t.subscribe(o);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(ji(e))return function _0(e){return new Zn(o=>{for(let t=0;t<e.length&&!o.closed;t++)o.next(e[t]);o.complete()})}(e);if(fd(e))return function Hm(e){return new Zn(o=>{e.then(t=>{o.closed||(o.next(t),o.complete())},t=>o.error(t)).then(null,Kc)})}(e);if(yo(e))return zm(e);if(rh(e))return function jv(e){return new Zn(o=>{for(const t of e)if(o.next(t),o.closed)return;o.complete()})}(e);if(Um(e))return function Hv(e){return zm($m(e))}(e)}throw $v(e)}function zm(e){return new Zn(o=>{(function zv(e,o){var t,r,i,l;return function Rv(e,o,t,r){return new(t||(t=Promise))(function(l,d){function p(w){try{v(r.next(w))}catch(P){d(P)}}function m(w){try{v(r.throw(w))}catch(P){d(P)}}function v(w){w.done?l(w.value):function i(l){return l instanceof t?l:new t(function(d){d(l)})}(w.value).then(p,m)}v((r=r.apply(e,o||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Lm(e);!(r=yield t.next()).done;)if(o.next(r.value),o.closed)return}catch(d){i={error:d}}finally{try{r&&!r.done&&(l=t.return)&&(yield l.call(t))}finally{if(i)throw i.error}}o.complete()})})(e,o).catch(t=>o.error(t))})}function Hi(e,o,t,r=0,i=!1){const l=o.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(l),!i)return l}function Jo(e,o,t=1/0){return an(o)?Jo((r,i)=>Mt((l,d)=>o(r,l,i,d))(Or(e(r,i))),t):("number"==typeof o&&(t=o),Ke((r,i)=>function Wv(e,o,t,r,i,l,d,p){const m=[];let v=0,w=0,P=!1;const R=()=>{P&&!m.length&&!v&&o.complete()},$=Y=>v<r?H(Y):m.push(Y),H=Y=>{l&&o.next(Y),v++;let te=!1;Or(t(Y,w++)).subscribe(Fn(o,_e=>{i?.(_e),l?$(_e):o.next(_e)},()=>{te=!0},void 0,()=>{if(te)try{for(v--;m.length&&v<r;){const _e=m.shift();d?Hi(o,d,()=>H(_e)):H(_e)}R()}catch(_e){o.error(_e)}}))};return e.subscribe(Fn(o,$,()=>{P=!0,R()})),()=>{p?.()}}(r,i,e,t)))}function sc(e=1/0){return Jo(oc,e)}const ii=new Zn(e=>e.complete());function Jc(e){return e[e.length-1]}function Wm(e){return an(Jc(e))?e.pop():void 0}function hd(e){return function Gv(e){return e&&an(e.schedule)}(Jc(e))?e.pop():void 0}function Rs(e,o=0){return Ke((t,r)=>{t.subscribe(Fn(r,i=>Hi(r,e,()=>r.next(i),o),()=>Hi(r,e,()=>r.complete(),o),i=>Hi(r,e,()=>r.error(i),o)))})}function Kv(e,o=0){return Ke((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),o))})}function Zv(e,o){if(!e)throw new Error("Iterable cannot be null");return new Zn(t=>{Hi(t,o,()=>{const r=e[Symbol.asyncIterator]();Hi(t,o,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function bo(e,o){return o?function y0(e,o){if(null!=e){if(ls(e))return function Gm(e,o){return Or(e).pipe(Kv(o),Rs(o))}(e,o);if(ji(e))return function Wi(e,o){return new Zn(t=>{let r=0;return o.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,o);if(fd(e))return function zi(e,o){return Or(e).pipe(Kv(o),Rs(o))}(e,o);if(yo(e))return Zv(e,o);if(rh(e))return function Qc(e,o){return new Zn(t=>{let r;return Hi(t,o,()=>{r=e[Vm](),Hi(t,o,()=>{let i,l;try{({value:i,done:l}=r.next())}catch(d){return void t.error(d)}l?t.complete():t.next(i)},0,!0)}),()=>an(r?.return)&&r.return()})}(e,o);if(Um(e))return function It(e,o){return Zv($m(e),o)}(e,o)}throw $v(e)}(e,o):Or(e)}class ft extends _o{constructor(o){super(),this._value=o}get value(){return this.getValue()}_subscribe(o){const t=super._subscribe(o);return!t.closed&&o.next(this._value),t}getValue(){const{hasError:o,thrownError:t,_value:r}=this;if(o)throw t;return this._throwIfClosed(),r}next(o){super.next(this._value=o)}}function yt(...e){return bo(e,hd(e))}function Km(e={}){const{connector:o=(()=>new _o),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return l=>{let d,p,m,v=0,w=!1,P=!1;const R=()=>{p?.unsubscribe(),p=void 0},$=()=>{R(),d=m=void 0,w=P=!1},H=()=>{const Y=d;$(),Y?.unsubscribe()};return Ke((Y,te)=>{v++,!P&&!w&&R();const _e=m=m??o();te.add(()=>{v--,0===v&&!P&&!w&&(p=sh(H,i))}),_e.subscribe(te),!d&&v>0&&(d=new go({next:le=>_e.next(le),error:le=>{P=!0,R(),p=sh($,t,le),_e.error(le)},complete:()=>{w=!0,R(),p=sh($,r),_e.complete()}}),Or(Y).subscribe(d))})(l)}}function sh(e,o,...t){if(!0===o)return void e();if(!1===o)return;const r=new go({next:()=>{r.unsubscribe(),e()}});return Or(o(...t)).subscribe(r)}function ai(e,o){return Ke((t,r)=>{let i=null,l=0,d=!1;const p=()=>d&&!i&&r.complete();t.subscribe(Fn(r,m=>{i?.unsubscribe();let v=0;const w=l++;Or(e(m,w)).subscribe(i=Fn(r,P=>r.next(o?o(m,P,w,v++):P),()=>{i=null,p()}))},()=>{d=!0,p()}))})}function kD(e,o){return e===o}function de(e){for(let o in e)if(e[o]===de)return o;throw Error("Could not find renamed property on target object.")}function Ta(e,o){for(const t in o)o.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=o[t])}function To(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(To).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const o=e.toString();if(null==o)return""+o;const t=o.indexOf("\n");return-1===t?o:o.substring(0,t)}function ih(e,o){return null==e||""===e?null===o?"":o:null==o||""===o?e:e+" "+o}const ic=de({__forward_ref__:de});function gn(e){return e.__forward_ref__=gn,e.toString=function(){return To(this())},e}function Et(e){return ac(e)?e():e}function ac(e){return"function"==typeof e&&e.hasOwnProperty(ic)&&e.__forward_ref__===gn}function ah(e){return e&&!!e.\u0275providers}const Jv="https://g.co/ng/security#xss";class me extends Error{constructor(o,t){super(function ci(e,o){return`NG0${Math.abs(e)}${o?": "+o:""}`}(o,t)),this.code=o}}const pd=de({\u0275cmp:de}),ch=de({\u0275dir:de}),lh=de({\u0275pipe:de}),Zm=de({\u0275mod:de}),us=de({\u0275fac:de}),nu=de({__NG_ELEMENT_ID__:de}),Ft=de({__NG_ENV_ID__:de});function Lt(e){return"string"==typeof e?e:null==e?"":String(e)}function Ym(e,o){throw new me(-201,!1)}function jo(e,o){null==e&&function xt(e,o,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${o} <=Actual]`))}(o,e,null,"!=")}function Ee(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function mr(e){return{providers:e.providers||[],imports:e.imports||[]}}function Xc(e){return Xm(e,eg)||Xm(e,dh)}function Xm(e,o){return e.hasOwnProperty(o)?e[o]:null}function cc(e){return e&&(e.hasOwnProperty(j)||e.hasOwnProperty(li))?e[j]:null}const eg=de({\u0275prov:de}),j=de({\u0275inj:de}),dh=de({ngInjectableDef:de}),li=de({ngInjectorDef:de});var Yt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Yt||{});let tg;function ng(){return tg}function mt(e){const o=tg;return tg=e,o}function Ki(e,o,t){const r=Xc(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Yt.Optional?null:void 0!==o?o:void Ym(To(e))}const fn=globalThis;class je{constructor(o,t){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const tl={},rg="__NG_DI_FLAG__",_d="ngTempTokenPath",sy=/\n/gm,Ia="__source";let lc;function uc(e){const o=lc;return lc=e,o}function k0(e,o=Yt.Default){if(void 0===lc)throw new me(-203,!1);return null===lc?Ki(e,void 0,o):lc.get(e,o&Yt.Optional?null:void 0,o)}function ie(e,o=Yt.Default){return(ng()||k0)(Et(e),o)}function Be(e,o=Yt.Default){return ie(e,yd(o))}function yd(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ui(e){const o=[];for(let t=0;t<e.length;t++){const r=Et(e[t]);if(Array.isArray(r)){if(0===r.length)throw new me(900,!1);let i,l=Yt.Default;for(let d=0;d<r.length;d++){const p=r[d],m=D0(p);"number"==typeof m?-1===m?i=p.token:l|=m:i=p}o.push(ie(i,l))}else o.push(ie(r))}return o}function di(e,o){return e[rg]=o,e.prototype[rg]=o,e}function D0(e){return e[rg]}function ds(e){return{toString:e}.toString()}var ol=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(ol||{}),gr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(gr||{});const Yi={},nn=[];function ig(e,o,t){let r=e.length;for(;;){const i=e.indexOf(o,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const l=o.length;if(i+l===r||e.charCodeAt(i+l)<=32)return i}t=i+1}}function rl(e,o,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const l=t[r++],d=t[r++],p=t[r++];e.setAttribute(o,d,p,l)}else{const l=i,d=t[++r];cy(l)?e.setProperty(o,l,d):e.setAttribute(o,l,d),r++}}return r}function ag(e){return 3===e||4===e||6===e}function cy(e){return 64===e.charCodeAt(0)}function Rr(e,o){if(null!==o&&0!==o.length)if(null===e||0===e.length)e=o.slice();else{let t=-1;for(let r=0;r<o.length;r++){const i=o[r];"number"==typeof i?t=i:0===t||dc(e,t,i,null,-1===t||2===t?o[++r]:null)}}return e}function dc(e,o,t,r,i){let l=0,d=e.length;if(-1===o)d=-1;else for(;l<e.length;){const p=e[l++];if("number"==typeof p){if(p===o){d=-1;break}if(p>o){d=l-1;break}}}for(;l<e.length;){const p=e[l];if("number"==typeof p)break;if(p===t){if(null===r)return void(null!==i&&(e[l+1]=i));if(r===e[l+1])return void(e[l+2]=i)}l++,null!==r&&l++,null!==i&&l++}-1!==d&&(e.splice(d,0,o),l=d+1),e.splice(l++,0,t),null!==r&&e.splice(l++,0,r),null!==i&&e.splice(l++,0,i)}const yn="ng-template";function ly(e,o,t){let r=0,i=!0;for(;r<e.length;){let l=e[r++];if("string"==typeof l&&i){const d=e[r++];if(t&&"class"===l&&-1!==ig(d.toLowerCase(),o,0))return!0}else{if(1===l){for(;r<e.length&&"string"==typeof(l=e[r++]);)if(l.toLowerCase()===o)return!0;return!1}"number"==typeof l&&(i=!1)}}return!1}function bd(e){return 4===e.type&&e.value!==yn}function cg(e,o,t){return o===(4!==e.type||t?e.value:yn)}function uy(e,o,t){let r=4;const i=e.attrs||[],l=function Yn(e){for(let o=0;o<e.length;o++)if(ag(e[o]))return o;return e.length}(i);let d=!1;for(let p=0;p<o.length;p++){const m=o[p];if("number"!=typeof m){if(!d)if(4&r){if(r=2|1&r,""!==m&&!cg(e,m,t)||""===m&&1===o.length){if(fi(r))return!1;d=!0}}else{const v=8&r?m:o[++p];if(8&r&&null!==e.attrs){if(!ly(e.attrs,v,t)){if(fi(r))return!1;d=!0}continue}const P=Fr(8&r?"class":m,i,bd(e),t);if(-1===P){if(fi(r))return!1;d=!0;continue}if(""!==v){let R;R=P>l?"":i[P+1].toLowerCase();const $=8&r?R:null;if($&&-1!==ig($,v,0)||2&r&&v!==R){if(fi(r))return!1;d=!0}}}}else{if(!d&&!fi(r)&&!fi(m))return!1;if(d&&fi(m))continue;d=!1,r=m|1&r}}return fi(r)||d}function fi(e){return 0==(1&e)}function Fr(e,o,t,r){if(null===o)return-1;let i=0;if(r||!t){let l=!1;for(;i<o.length;){const d=o[i];if(d===e)return i;if(3===d||6===d)l=!0;else{if(1===d||2===d){let p=o[++i];for(;"string"==typeof p;)p=o[++i];continue}if(4===d)break;if(0===d){i+=4;continue}}i+=l?1:2}return-1}return function wd(e,o){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===o)return t;t++}return-1}(o,e)}function Ji(e,o,t=!1){for(let r=0;r<o.length;r++)if(uy(e,o[r],t))return!0;return!1}function y(e,o){return e?":not("+o.trim()+")":o}function C(e){let o=e[0],t=1,r=2,i="",l=!1;for(;t<e.length;){let d=e[t];if("string"==typeof d)if(2&r){const p=e[++t];i+="["+d+(p.length>0?'="'+p+'"':"")+"]"}else 8&r?i+="."+d:4&r&&(i+=" "+d);else""!==i&&!fi(d)&&(o+=y(l,i),i=""),r=d,l=l||!fi(r);t++}return""!==i&&(o+=y(l,i)),o}function ne(e){return ds(()=>{const o=Cd(e),t={...o,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ol.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||gr.Emulated,styles:e.styles||nn,_:null,schemas:e.schemas||null,tView:null,id:""};OD(t);const r=e.dependencies;return t.directiveDefs=Sd(r,!1),t.pipeDefs=Sd(r,!0),t.id=function T0(e){let o=0;const t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of t)o=Math.imul(31,o)+i.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(t),t})}function ot(e){return rn(e)||ir(e)}function Jt(e){return null!==e}function gt(e){return ds(()=>({type:e.type,bootstrap:e.bootstrap||nn,declarations:e.declarations||nn,imports:e.imports||nn,exports:e.exports||nn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function so(e,o){if(null==e)return Yi;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],l=i;Array.isArray(i)&&(l=i[1],i=i[0]),t[i]=r,o&&(o[i]=l)}return t}function wt(e){return ds(()=>{const o=Cd(e);return OD(o),o})}function rn(e){return e[pd]||null}function ir(e){return e[ch]||null}function Lr(e){return e[lh]||null}function Br(e,o){const t=e[Zm]||null;if(!t&&!0===o)throw new Error(`Type ${To(e)} does not have '\u0275mod' property.`);return t}function Cd(e){const o={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:e.inputs||Yi,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||nn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:so(e.inputs,o),outputs:so(e.outputs),debugInfo:null}}function OD(e){e.features?.forEach(o=>o(e))}function Sd(e,o){if(!e)return null;const t=o?Lr:ot;return()=>("function"==typeof e?e():e).map(r=>t(r)).filter(Jt)}const So=0,ze=1,Ct=2,xo=3,Qi=4,Vr=5,fc=6,xd=7,Wt=8,Qr=9,mh=10,jt=11,io=12,gh=13,Jn=14,ao=15,lg=16,_h=17,fs=18,ug=19,AD=20,sl=21,dy=22,au=23,Dt=25,vh=1,_r=7,hc=9,xn=10;var il=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e[e.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",e}(il||{});function $r(e){return Array.isArray(e)&&"object"==typeof e[vh]}function Po(e){return Array.isArray(e)&&!0===e[vh]}function M0(e){return 0!=(4&e.flags)}function Xr(e){return e.componentOffset>-1}function dg(e){return 1==(1&e.flags)}function hi(e){return!!e.template}function ye(e){return 0!=(512&e[Ct])}function hs(e,o){return e.hasOwnProperty(us)?e[us]:null}class vr{constructor(o,t,r){this.previousValue=o,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ho(){return cu}function cu(e){return e.type.prototype.ngOnChanges&&(e.setInput=BD),A0}function A0(){const e=$D(this),o=e?.current;if(o){const t=e.previous;if(t===Yi)e.previous=o;else for(let r in o)t[r]=o[r];e.current=null,this.ngOnChanges(o)}}function BD(e,o,t,r){const i=this.declaredInputs[t],l=$D(e)||function hy(e,o){return e[VD]=o}(e,{previous:Yi,current:null}),d=l.current||(l.current={}),p=l.previous,m=p[i];d[i]=new vr(m&&m.currentValue,o,p===Yi),e[r]=o}Ho.ngInherit=!0;const VD="__ngSimpleChanges__";function $D(e){return e[VD]||null}const Aa=function(e,o,t){};function Qn(e){for(;Array.isArray(e);)e=e[So];return e}function fg(e,o){return Qn(o[e])}function Ur(e,o){return Qn(o[e.index])}function hg(e,o){return e.data[o]}function ps(e,o){const t=o[e];return $r(t)?t:t[So]}function cl(e){return 128==(128&e[Ct])}function Xi(e,o){return null==o?null:e[o]}function UD(e){e[_h]=0}function jD(e){1024&e[Ct]||(e[Ct]|=1024,cl(e)&&py(e))}function $0(e){9216&e[Ct]&&py(e)}function py(e){let o=e[xo];for(;null!==o&&!(Po(o)&&o[Ct]&il.HasChildViewsToRefresh||$r(o)&&8192&o[Ct]);){if(Po(o))o[Ct]|=il.HasChildViewsToRefresh;else if(o[Ct]|=8192,!cl(o))break;o=o[xo]}}function pg(e,o){if(256==(256&e[Ct]))throw new me(911,!1);null===e[sl]&&(e[sl]=[]),e[sl].push(o)}const Rt={lFrame:QD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function GD(){return Rt.bindingsEnabled}function Ce(){return Rt.lFrame.lView}function hn(){return Rt.lFrame.tView}function ce(e){return Rt.lFrame.contextLView=e,e[Wt]}function fe(e){return Rt.lFrame.contextLView=null,e}function Ln(){let e=j0();for(;null!==e&&64===e.type;)e=e.parent;return e}function j0(){return Rt.lFrame.currentTNode}function Na(e,o){const t=Rt.lFrame;t.currentTNode=e,t.isParent=o}function H0(){return Rt.lFrame.isParent}function _y(){Rt.lFrame.isParent=!1}function Ao(){const e=Rt.lFrame;let o=e.bindingRootIndex;return-1===o&&(o=e.bindingRootIndex=e.tView.bindingStartIndex),o}function mc(){return Rt.lFrame.bindingIndex++}function KD(e,o){const t=Rt.lFrame;t.bindingIndex=t.bindingRootIndex=e,K0(o)}function K0(e){Rt.lFrame.currentDirectiveIndex=e}function Z0(e){Rt.lFrame.currentQueryIndex=e}function Y0(e){const o=e[ze];return 2===o.type?o.declTNode:1===o.type?e[Vr]:null}function YD(e,o,t){if(t&Yt.SkipSelf){let i=o,l=e;for(;!(i=i.parent,null!==i||t&Yt.Host||(i=Y0(l),null===i||(l=l[Jn],10&i.type))););if(null===i)return!1;o=i,e=l}const r=Rt.lFrame=JD();return r.currentTNode=o,r.lView=e,!0}function J0(e){const o=JD(),t=e[ze];Rt.lFrame=o,o.currentTNode=t.firstChild,o.lView=e,o.tView=t,o.contextLView=e,o.bindingIndex=t.bindingStartIndex,o.inI18n=!1}function JD(){const e=Rt.lFrame,o=null===e?null:e.child;return null===o?QD(e):o}function QD(e){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=o),o}function mg(){const e=Rt.lFrame;return Rt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const wh=mg;function pi(){const e=mg();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function jr(){return Rt.lFrame.selectedIndex}function uu(e){Rt.lFrame.selectedIndex=e}function Xn(){const e=Rt.lFrame;return hg(e.tView,e.selectedIndex)}let eT=!0;function by(){return eT}function fu(e){eT=e}function gg(e,o){for(let t=o.directiveStart,r=o.directiveEnd;t<r;t++){const l=e.data[t].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:p,ngAfterViewInit:m,ngAfterViewChecked:v,ngOnDestroy:w}=l;d&&(e.contentHooks??=[]).push(-t,d),p&&((e.contentHooks??=[]).push(t,p),(e.contentCheckHooks??=[]).push(t,p)),m&&(e.viewHooks??=[]).push(-t,m),v&&((e.viewHooks??=[]).push(t,v),(e.viewCheckHooks??=[]).push(t,v)),null!=w&&(e.destroyHooks??=[]).push(t,w)}}function _g(e,o,t){Cy(e,o,3,t)}function wy(e,o,t,r){(3&e[Ct])===t&&Cy(e,o,t,r)}function Ed(e,o){let t=e[Ct];(3&t)===o&&(t&=16383,t+=1,e[Ct]=t)}function Cy(e,o,t,r){const l=r??-1,d=o.length-1;let p=0;for(let m=void 0!==r?65535&e[_h]:0;m<d;m++)if("number"==typeof o[m+1]){if(p=o[m],null!=r&&p>=r)break}else o[m]<0&&(e[_h]+=65536),(p<l||-1==l)&&(C3(e,t,o,m),e[_h]=(4294901760&e[_h])+m+2),m++}function nT(e,o){Aa(4,e,o);const t=_n(null);try{o.call(e)}finally{_n(t),Aa(5,e,o)}}function C3(e,o,t,r){const i=t[r]<0,l=t[r+1],p=e[i?-t[r]:t[r]];i?e[Ct]>>14<e[_h]>>16&&(3&e[Ct])===o&&(e[Ct]+=16384,nT(p,l)):nT(p,l)}const Ch=-1;class vg{constructor(o,t,r){this.factory=o,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function kd(e){return e!==Ch}function bg(e){return 32767&e}function Td(e,o){let t=function Dd(e){return e>>16}(e),r=o;for(;t>0;)r=r[Jn],t--;return r}let tS=!0;function Sh(e){const o=tS;return tS=e,o}const xh=255,nS=5;let Ph=0;const Ra={};function wg(e,o){const t=pn(e,o);if(-1!==t)return t;const r=o[ze];r.firstCreatePass&&(e.injectorIndex=o.length,oS(r.data,e),oS(o,null),oS(r.blueprint,null));const i=Sy(e,o),l=e.injectorIndex;if(kd(i)){const d=bg(i),p=Td(i,o),m=p[ze].data;for(let v=0;v<8;v++)o[l+v]=p[d+v]|m[d+v]}return o[l+8]=i,l}function oS(e,o){e.push(0,0,0,0,0,0,0,0,o)}function pn(e,o){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===o[e.injectorIndex+8]?-1:e.injectorIndex}function Sy(e,o){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=o;for(;null!==i;){if(r=ea(i),null===r)return Ch;if(t++,i=i[Jn],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Ch}function rS(e,o,t){!function P3(e,o,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(nu)&&(r=t[nu]),null==r&&(r=t[nu]=Ph++);const i=r&xh;o.data[e+(i>>nS)]|=1<<i}(e,o,t)}function Cg(e,o,t){if(t&Yt.Optional||void 0!==e)return e;Ym()}function sS(e,o,t,r){if(t&Yt.Optional&&void 0===r&&(r=null),!(t&(Yt.Self|Yt.Host))){const i=e[Qr],l=mt(void 0);try{return i?i.get(o,r,t&Yt.Optional):Ki(o,r,t&Yt.Optional)}finally{mt(l)}}return Cg(r,0,t)}function gc(e,o,t,r=Yt.Default,i){if(null!==e){if(2048&o[Ct]&&!(r&Yt.Self)){const d=function S7(e,o,t,r,i){let l=e,d=o;for(;null!==l&&null!==d&&2048&d[Ct]&&!(512&d[Ct]);){const p=No(l,d,t,r|Yt.Self,Ra);if(p!==Ra)return p;let m=l.parent;if(!m){const v=d[AD];if(v){const w=v.get(t,Ra,r);if(w!==Ra)return w}m=ea(d),d=d[Jn]}l=m}return i}(e,o,t,r,Ra);if(d!==Ra)return d}const l=No(e,o,t,r,Ra);if(l!==Ra)return l}return sS(o,t,r,i)}function No(e,o,t,r,i){const l=function Sg(e){if("string"==typeof e)return e.charCodeAt(0)||0;const o=e.hasOwnProperty(nu)?e[nu]:void 0;return"number"==typeof o?o>=0?o&xh:C7:o}(t);if("function"==typeof l){if(!YD(o,e,r))return r&Yt.Host?Cg(i,0,r):sS(o,t,r,i);try{let d;if(d=l(r),null!=d||r&Yt.Optional)return d;Ym()}finally{wh()}}else if("number"==typeof l){let d=null,p=pn(e,o),m=Ch,v=r&Yt.Host?o[ao][Vr]:null;for((-1===p||r&Yt.SkipSelf)&&(m=-1===p?Sy(e,o):o[p+8],m!==Ch&&iS(r,!1)?(d=o[ze],p=bg(m),o=Td(m,o)):p=-1);-1!==p;){const w=o[ze];if(Py(l,p,w.data)){const P=k3(p,o,t,d,r,v);if(P!==Ra)return P}m=o[p+8],m!==Ch&&iS(r,o[ze].data[p+8]===v)&&Py(l,p,o)?(d=w,p=bg(m),o=Td(m,o)):p=-1}}return i}function k3(e,o,t,r,i,l){const d=o[ze],p=d.data[e+8],w=function xy(e,o,t,r,i){const l=e.providerIndexes,d=o.data,p=1048575&l,m=e.directiveStart,w=l>>20,R=i?p+w:e.directiveEnd;for(let $=r?p:p+w;$<R;$++){const H=d[$];if($<m&&t===H||$>=m&&H.type===t)return $}if(i){const $=d[m];if($&&hi($)&&$.type===t)return m}return null}(p,d,t,null==r?Xr(p)&&tS:r!=d&&0!=(3&p.type),i&Yt.Host&&l===p);return null!==w?Md(o,d,w,p):Ra}function Md(e,o,t,r){let i=e[t];const l=o.data;if(function oT(e){return e instanceof vg}(i)){const d=i;d.resolving&&function Ar(e,o){const t=o?`. Dependency path: ${o.join(" > ")} > ${e}`:"";throw new me(-200,`Circular dependency in DI detected for ${e}${t}`)}(function dn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Lt(e)}(l[t]));const p=Sh(d.canSeeViewProviders);d.resolving=!0;const v=d.injectImpl?mt(d.injectImpl):null;YD(e,r,Yt.Default);try{i=e[t]=d.factory(void 0,l,e,r),o.firstCreatePass&&t>=r.directiveStart&&function tT(e,o,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:l}=o.type.prototype;if(r){const d=cu(o);(t.preOrderHooks??=[]).push(e,d),(t.preOrderCheckHooks??=[]).push(e,d)}i&&(t.preOrderHooks??=[]).push(0-e,i),l&&((t.preOrderHooks??=[]).push(e,l),(t.preOrderCheckHooks??=[]).push(e,l))}(t,l[t],o)}finally{null!==v&&mt(v),Sh(p),d.resolving=!1,wh()}}return i}function Py(e,o,t){return!!(t[o+(e>>nS)]&1<<e)}function iS(e,o){return!(e&Yt.Self||e&Yt.Host&&o)}class yr{constructor(o,t){this._tNode=o,this._lView=t}get(o,t,r){return gc(this._tNode,this._lView,o,yd(r),t)}}function C7(){return new yr(Ln(),Ce())}function Hr(e){return ds(()=>{const o=e.prototype.constructor,t=o[us]||rT(o),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const l=i[us]||rT(i);if(l&&l!==t)return l;i=Object.getPrototypeOf(i)}return l=>new l})}function rT(e){return ac(e)?()=>{const o=rT(Et(e));return o&&o()}:hs(e)}function ea(e){const o=e[ze],t=o.type;return 2===t?o.declTNode:1===t?e[Vr]:null}const kh="__parameters__";function Dh(e,o,t){return ds(()=>{const r=function kg(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(o);function i(...l){if(this instanceof i)return r.apply(this,l),this;const d=new i(...l);return p.annotation=d,p;function p(m,v,w){const P=m.hasOwnProperty(kh)?m[kh]:Object.defineProperty(m,kh,{value:[]})[kh];for(;P.length<=w;)P.push(null);return(P[w]=P[w]||[]).push(d),m}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function _c(e,o){e.forEach(t=>Array.isArray(t)?_c(t,o):o(t))}function aT(e,o,t){o>=e.length?e.push(t):e.splice(o,0,t)}function My(e,o){return o>=e.length-1?e.pop():e.splice(o,1)[0]}function Ls(e,o,t){let r=Mg(e,o);return r>=0?e[1|r]=t:(r=~r,function cT(e,o,t,r){let i=e.length;if(i==o)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>o;)e[i]=e[i-2],i--;e[o]=t,e[o+1]=r}}(e,r,o,t)),r}function dl(e,o){const t=Mg(e,o);if(t>=0)return e[1|t]}function Mg(e,o){return function Ig(e,o,t){let r=0,i=e.length>>t;for(;i!==r;){const l=r+(i-r>>1),d=e[l<<t];if(o===d)return l<<t;d>o?i=l:r=l+1}return~(i<<t)}(e,o,1)}const Oy=di(Dh("Optional"),8),Og=di(Dh("SkipSelf"),4),gi=new je("ENVIRONMENT_INITIALIZER"),Vs=new je("INJECTOR",-1),Ay=new je("INJECTOR_DEF_TYPES");class Ny{get(o,t=tl){if(t===tl){const r=new Error(`NullInjectorError: No provider for ${To(o)}!`);throw r.name="NullInjectorError",r}return t}}function uS(...e){return{\u0275providers:uT(0,e),\u0275fromNgModule:!0}}function uT(e,...o){const t=[],r=new Set;let i;const l=d=>{t.push(d)};return _c(o,d=>{const p=d;Ad(p,l,[],r)&&(i||=[],i.push(p))}),void 0!==i&&Fg(i,l),t}function Fg(e,o){for(let t=0;t<e.length;t++){const{ngModule:r,providers:i}=e[t];Lg(i,l=>{o(l,r)})}}function Ad(e,o,t,r){if(!(e=Et(e)))return!1;let i=null,l=cc(e);const d=!l&&rn(e);if(l||d){if(d&&!d.standalone)return!1;i=e}else{const m=e.ngModule;if(l=cc(m),!l)return!1;i=m}const p=r.has(i);if(d){if(p)return!1;if(r.add(i),d.dependencies){const m="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const v of m)Ad(v,o,t,r)}}else{if(!l)return!1;{if(null!=l.imports&&!p){let v;r.add(i);try{_c(l.imports,w=>{Ad(w,o,t,r)&&(v||=[],v.push(w))})}finally{}void 0!==v&&Fg(v,o)}if(!p){const v=hs(i)||(()=>new i);o({provide:i,useFactory:v,deps:nn},i),o({provide:Ay,useValue:i,multi:!0},i),o({provide:gi,useValue:()=>ie(i),multi:!0},i)}const m=l.providers;if(null!=m&&!p){const v=e;Lg(m,w=>{o(w,v)})}}}return i!==e&&void 0!==e.providers}function Lg(e,o){for(let t of e)ah(t)&&(t=t.\u0275providers),Array.isArray(t)?Lg(t,o):o(t)}const dT=de({provide:String,useValue:de});function pu(e){return null!==e&&"object"==typeof e&&dT in e}function Nd(e){return"function"==typeof e}const Rd=new je("Set Injector scope."),gu={},H3={};let fS;function Bg(){return void 0===fS&&(fS=new Ny),fS}class _i{}class Rh extends _i{get destroyed(){return this._destroyed}constructor(o,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hS(o,d=>this.processProvider(d)),this.records.set(Vs,Fd(void 0,this)),i.has("environment")&&this.records.set(_i,Fd(void 0,this));const l=this.records.get(Rd);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Ay,nn,Yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of o)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const t=uc(this),r=mt(void 0);try{return o()}finally{uc(t),mt(r)}}get(o,t=tl,r=Yt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Ft))return o[Ft](this);r=yd(r);const l=uc(this),d=mt(void 0);try{if(!(r&Yt.SkipSelf)){let m=this.records.get(o);if(void 0===m){const v=function pT(e){return"function"==typeof e||"object"==typeof e&&e instanceof je}(o)&&Xc(o);m=v&&this.injectableDefInScope(v)?Fd(Fh(o),gu):null,this.records.set(o,m)}if(null!=m)return this.hydrate(o,m)}return(r&Yt.Self?Bg():this.parent).get(o,t=r&Yt.Optional&&t===tl?null:t)}catch(p){if("NullInjectorError"===p.name){if((p[_d]=p[_d]||[]).unshift(To(o)),l)throw p;return function nl(e,o,t,r){const i=e[_d];throw o[Ia]&&i.unshift(o[Ia]),e.message=function sg(e,o,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=To(o);if(Array.isArray(o))i=o.map(To).join(" -> ");else if("object"==typeof o){let l=[];for(let d in o)if(o.hasOwnProperty(d)){let p=o[d];l.push(d+":"+("string"==typeof p?JSON.stringify(p):To(p)))}i=`{${l.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(sy,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[_d]=null,e}(p,o,"R3InjectorError",this.source)}throw p}finally{mt(d),uc(l)}}resolveInjectorInitializers(){const o=uc(this),t=mt(void 0);try{const i=this.get(gi,nn,Yt.Self);for(const l of i)l()}finally{uc(o),mt(t)}}toString(){const o=[],t=this.records;for(const r of t.keys())o.push(To(r));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(o){let t=Nd(o=Et(o))?o:Et(o&&o.provide);const r=function z3(e){return pu(e)?Fd(void 0,e.useValue):Fd(hT(e),gu)}(o);if(Nd(o)||!0!==o.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Fd(void 0,gu,!0),i.factory=()=>ui(i.multi),this.records.set(t,i)),t=o,i.multi.push(o)}this.records.set(t,r)}hydrate(o,t){return t.value===gu&&(t.value=H3,t.value=t.factory()),"object"==typeof t.value&&t.value&&function q3(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(o){if(!o.providedIn)return!1;const t=Et(o.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(o){const t=this._onDestroyHooks.indexOf(o);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Fh(e){const o=Xc(e),t=null!==o?o.factory:hs(e);if(null!==t)return t;if(e instanceof je)throw new me(204,!1);if(e instanceof Function)return function _u(e){const o=e.length;if(o>0)throw function Mh(e,o){const t=[];for(let r=0;r<e;r++)t.push(o);return t}(o,"?"),new me(204,!1);const t=function S0(e){return e&&(e[eg]||e[dh])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new me(204,!1)}function hT(e,o,t){let r;if(Nd(e)){const i=Et(e);return hs(i)||Fh(i)}if(pu(e))r=()=>Et(e.useValue);else if(function dS(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...ui(e.deps||[]));else if(function mu(e){return!(!e||!e.useExisting)}(e))r=()=>ie(Et(e.useExisting));else{const i=Et(e&&(e.useClass||e.provide));if(!function W3(e){return!!e.deps}(e))return hs(i)||Fh(i);r=()=>new i(...ui(e.deps))}return r}function Fd(e,o,t=!1){return{factory:e,value:o,multi:t?[]:void 0}}function hS(e,o){for(const t of e)Array.isArray(t)?hS(t,o):t&&ah(t)?hS(t.\u0275providers,o):o(t)}function yT(e,o=null,t=null,r){const i=gS(e,o,t,r);return i.resolveInjectorInitializers(),i}function gS(e,o=null,t=null,r,i=new Set){const l=[t||nn,uS(e)];return r=r||("object"==typeof e?void 0:To(e)),new Rh(l,o||Bg(),r||null,i)}let Fy,es=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=tl;static#t=this.NULL=new Ny;static create(t,r){if(Array.isArray(t))return yT({name:""},r,t,"");{const i=t.name??"";return yT({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Ee({token:e,providedIn:"any",factory:()=>ie(Vs)});static#o=this.__NG_ELEMENT_ID__=-1}return e})();function yc(){if(void 0!==Fy)return Fy;if(typeof document<"u")return document;throw new me(210,!1)}const Bh=new je("AppId",{providedIn:"root",factory:()=>bT}),bT="ng",By=new je("Platform Initializer"),vu=new je("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),yS=new je("AnimationModuleType"),hl=new je("CSP nonce",{providedIn:"root",factory:()=>yc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function se(e){return e.ownerDocument.defaultView}function Vh(e){return e.ownerDocument}function gs(e){return e instanceof Function?e():e}function CS(e){return 128==(128&e.flags)}var yu=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(yu||{});const sV=/^>|^->|<!--|-->|--!>|<!-$/g,iV=/(<|>)/g,aV="\u200b$1\u200b";const zy=new Map;let MT=0;const Wy="__ngContext__";function Te(e,o){$r(o)?(e[Wy]=o[ug],function SS(e){zy.set(e[ug],e)}(o)):e[Wy]=o}let Vd;function TS(e,o){return Vd(e,o)}function zg(e){const o=e[xo];return Po(o)?o[xo]:o}function MS(e){return FT(e[io])}function IS(e){return FT(e[Qi])}function FT(e){for(;null!==e&&!Po(e);)e=e[Qi];return e}function $d(e,o,t,r,i){if(null!=r){let l,d=!1;Po(r)?l=r:$r(r)&&(d=!0,r=r[So]);const p=Qn(r);0===e&&null!==t?null==i?NS(o,t,p):Ud(o,t,p,i||null,!0):1===e&&null!==t?Ud(o,t,p,i||null,!0):2===e?function Qy(e,o,t){const r=Hh(e,o);r&&function jh(e,o,t,r){e.removeChild(o,t,r)}(e,r,o,t)}(o,p,d):3===e&&o.destroyNode(p),null!=l&&function YT(e,o,t,r,i){const l=t[_r];l!==Qn(t)&&$d(o,e,r,l,i);for(let p=xn;p<t.length;p++){const m=t[p];qg(m[ze],m,e,o,r,l)}}(o,e,l,t,i)}}function OS(e,o){return e.createComment(function TT(e){return e.replace(sV,o=>o.replace(iV,aV))}(o))}function Gy(e,o,t){return e.createElement(o,t)}function $T(e,o){const t=e[hc],r=t.indexOf(o);t.splice(r,1)}function Wg(e,o){if(e.length<=xn)return;const t=xn+o,r=e[t];if(r){const i=r[lg];null!==i&&i!==e&&$T(i,r),o>0&&(e[t-1][Qi]=r[Qi]);const l=My(e,xn+o);!function gV(e,o){qg(e,o,o[jt],2,null,null),o[So]=null,o[Vr]=null}(r[ze],r);const d=l[fs];null!==d&&d.detachView(l[ze]),r[xo]=null,r[Qi]=null,r[Ct]&=-129}return r}function Ky(e,o){if(!(256&o[Ct])){const t=o[jt];o[au]&&function Ye(e){if(po(e),Sn(e))for(let o=0;o<e.producerNode.length;o++)Gl(e.producerNode[o],e.producerIndexOfThis[o]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(o[au]),t.destroyNode&&qg(e,o,t,3,null,null),function BT(e){let o=e[io];if(!o)return Zy(e[ze],e);for(;o;){let t=null;if($r(o))t=o[io];else{const r=o[xn];r&&(t=r)}if(!t){for(;o&&!o[Qi]&&o!==e;)$r(o)&&Zy(o[ze],o),o=o[xo];null===o&&(o=e),$r(o)&&Zy(o[ze],o),t=o&&o[Qi]}o=t}}(o)}}function Zy(e,o){if(!(256&o[Ct])){o[Ct]&=-129,o[Ct]|=256,function bV(e,o){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=o[t[r]];if(!(i instanceof vg)){const l=t[r+1];if(Array.isArray(l))for(let d=0;d<l.length;d+=2){const p=i[l[d]],m=l[d+1];Aa(4,p,m);try{m.call(p)}finally{Aa(5,p,m)}}else{Aa(4,i,l);try{l.call(i)}finally{Aa(5,i,l)}}}}}(e,o),function yV(e,o){const t=e.cleanup,r=o[xd];if(null!==t)for(let l=0;l<t.length-1;l+=2)if("string"==typeof t[l]){const d=t[l+3];d>=0?r[d]():r[-d].unsubscribe(),l+=2}else t[l].call(r[t[l+1]]);null!==r&&(o[xd]=null);const i=o[sl];if(null!==i){o[sl]=null;for(let l=0;l<i.length;l++)(0,i[l])()}}(e,o),1===o[ze].type&&o[jt].destroy();const t=o[lg];if(null!==t&&Po(o[xo])){t!==o[xo]&&$T(t,o);const r=o[fs];null!==r&&r.detachView(e)}!function lV(e){zy.delete(e[ug])}(o)}}function Yy(e,o,t){return function UT(e,o,t){let r=o;for(;null!==r&&40&r.type;)r=(o=r).parent;if(null===r)return t[So];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:l}=e.data[r.directiveStart+i];if(l===gr.None||l===gr.Emulated)return null}return Ur(r,t)}}(e,o.parent,t)}function Ud(e,o,t,r,i){e.insertBefore(o,t,r,i)}function NS(e,o,t){e.appendChild(o,t)}function jT(e,o,t,r,i){null!==r?Ud(e,o,t,r,i):NS(e,o,t)}function Hh(e,o){return e.parentNode(o)}let RS,eb,nb,zT=function HT(e,o,t){return 40&e.type?Ur(e,t):null};function Jy(e,o,t,r){const i=Yy(e,r,o),l=o[jt],p=function zh(e,o,t){return zT(e,o,t)}(r.parent||o[Vr],r,o);if(null!=i)if(Array.isArray(t))for(let m=0;m<t.length;m++)jT(l,i,t[m],p,!1);else jT(l,i,t,p,!1);void 0!==RS&&RS(l,r,o,t,i)}function jd(e,o){if(null!==o){const t=o.type;if(3&t)return Ur(o,e);if(4&t)return FS(-1,e[o.index]);if(8&t){const r=o.child;if(null!==r)return jd(e,r);{const i=e[o.index];return Po(i)?FS(-1,i):Qn(i)}}if(32&t)return TS(o,e)()||Qn(e[o.index]);{const r=qT(e,o);return null!==r?Array.isArray(r)?r[0]:jd(zg(e[ao]),r):jd(e,o.next)}}return null}function qT(e,o){return null!==o?e[ao][Vr].projection[o.projection]:null}function FS(e,o){const t=xn+e+1;if(t<o.length){const r=o[t],i=r[ze].firstChild;if(null!==i)return jd(r,i)}return o[_r]}function LS(e,o,t,r,i,l,d){for(;null!=t;){const p=r[t.index],m=t.type;if(d&&0===o&&(p&&Te(Qn(p),r),t.flags|=2),32!=(32&t.flags))if(8&m)LS(e,o,t.child,r,i,l,!1),$d(o,e,i,p,l);else if(32&m){const v=TS(t,r);let w;for(;w=v();)$d(o,e,i,w,l);$d(o,e,i,p,l)}else 16&m?ZT(e,o,r,t,i,l):$d(o,e,i,p,l);t=d?t.projectionNext:t.next}}function qg(e,o,t,r,i,l){LS(t,r,e.firstChild,o,i,l,!1)}function ZT(e,o,t,r,i,l){const d=t[ao],m=d[Vr].projection[r.projection];if(Array.isArray(m))for(let v=0;v<m.length;v++)$d(o,e,i,m[v],l);else{let v=m;const w=d[xo];CS(r)&&(v.flags|=128),LS(e,o,v,w,i,l,!0)}}function JT(e,o,t){""===t?e.removeAttribute(o,"class"):e.setAttribute(o,"class",t)}function QT(e,o,t){const{mergedAttrs:r,classes:i,styles:l}=t;null!==r&&rl(e,o,r),null!==i&&JT(e,o,i),null!==l&&function CV(e,o,t){e.setAttribute(o,"style",t)}(e,o,l)}function Wh(e){return function tb(){if(void 0===eb&&(eb=null,fn.trustedTypes))try{eb=fn.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return eb}()?.createHTML(e)||e}function BS(){if(void 0===nb&&(nb=null,fn.trustedTypes))try{nb=fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return nb}function XT(e){return BS()?.createHTML(e)||e}function eM(e){return BS()?.createScriptURL(e)||e}class Hd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Jv})`}}class EV extends Hd{getTypeName(){return"HTML"}}class kV extends Hd{getTypeName(){return"Style"}}class DV extends Hd{getTypeName(){return"Script"}}class TV extends Hd{getTypeName(){return"URL"}}class MV extends Hd{getTypeName(){return"ResourceURL"}}function yi(e){return e instanceof Hd?e.changingThisBreaksApplicationSecurity:e}function bc(e,o){const t=function IV(e){return e instanceof Hd&&e.getTypeName()||null}(e);if(null!=t&&t!==o){if("ResourceURL"===t&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${t} (see ${Jv})`)}return t===o}class FV{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const t=(new window.DOMParser).parseFromString(Wh(o),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(o):(t.removeChild(t.firstChild),t)}catch{return null}}}class oM{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const t=this.inertDocument.createElement("template");return t.innerHTML=Wh(o),t}}const BV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ob(e){return(e=String(e)).match(BV)?e:"unsafe:"+e}function ml(e){const o={};for(const t of e.split(","))o[t]=!0;return o}function Kg(...e){const o={};for(const t of e)for(const r in t)t.hasOwnProperty(r)&&(o[r]=!0);return o}const VS=ml("area,br,col,hr,img,wbr"),rM=ml("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sM=ml("rp,rt"),$S=Kg(VS,Kg(rM,ml("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kg(sM,ml("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kg(sM,rM)),US=ml("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jS=Kg(US,ml("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ml("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),aM=ml("script,style,template");class cM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let t=o.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(o){const t=o.nodeName.toLowerCase();if(!$S.hasOwnProperty(t))return this.sanitizedSomething=!0,!aM.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=o.attributes;for(let i=0;i<r.length;i++){const l=r.item(i),d=l.name,p=d.toLowerCase();if(!jS.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let m=l.value;US[p]&&(m=ob(m)),this.buf.push(" ",d,'="',dM(m),'"')}return this.buf.push(">"),!0}endElement(o){const t=o.nodeName.toLowerCase();$S.hasOwnProperty(t)&&!VS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(o){this.buf.push(dM(o))}checkClobberedElement(o,t){if(t&&(o.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return t}}const lM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,uM=/([^\#-~ |!])/g;function dM(e){return e.replace(/&/g,"&amp;").replace(lM,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(uM,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rb;function fM(e,o){let t=null;try{rb=rb||function nM(e){const o=new oM(e);return function LV(){try{return!!(new window.DOMParser).parseFromString(Wh(""),"text/html")}catch{return!1}}()?new FV(o):o}(e);let r=o?String(o):"";t=rb.getInertBodyElement(r);let i=5,l=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=l,l=t.innerHTML,t=rb.getInertBodyElement(r)}while(r!==l);return Wh((new cM).sanitizeChildren(HS(t)||t))}finally{if(t){const r=HS(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function HS(e){return"content"in e&&function $V(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Cr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Cr||{});function sb(e){const o=zd();return o?XT(o.sanitize(Cr.HTML,e)||""):bc(e,"HTML")?XT(yi(e)):fM(yc(),Lt(e))}function Qe(e){const o=zd();return o?o.sanitize(Cr.URL,e)||"":bc(e,"URL")?yi(e):ob(Lt(e))}function hM(e){const o=zd();if(o)return eM(o.sanitize(Cr.RESOURCE_URL,e)||"");if(bc(e,"ResourceURL"))return eM(yi(e));throw new me(904,!1)}function zd(){const e=Ce();return e&&e[mh].sanitizer}let Jh=(e,o,t)=>null;function Wd(e,o,t=!1){return Jh(e,o,t)}class lb{}class yM{}class JS{resolveComponentFactory(o){throw function bM(e){const o=Error(`No component factory found for ${To(e)}.`);return o.ngComponent=e,o}(o)}}let bi=(()=>{class e{static#e=this.NULL=new JS}return e})();function GV(){return Qh(Ln(),Ce())}function Qh(e,o){return new _s(Ur(e,o))}let _s=(()=>{class e{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=GV}return e})();class ub{}let _l=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function KV(){const e=Ce(),t=ps(Ln().index,e);return($r(t)?t:e)[jt]}()}return e})(),wi=(()=>{class e{static#e=this.\u0275prov=Ee({token:e,providedIn:"root",factory:()=>null})}return e})();class Cc{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const CM=new Cc("17.0.4"),Pu={};function Sc(e){return!!QS(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function QS(e){return null!==e&&("function"==typeof e||"object"==typeof e)}class XS{constructor(){}supports(o){return Sc(o)}create(o){return new fb(o)}}const SM=(e,o)=>o;class fb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||SM}forEachItem(o){let t;for(t=this._itHead;null!==t;t=t._next)o(t)}forEachOperation(o){let t=this._itHead,r=this._removalsHead,i=0,l=null;for(;t||r;){const d=!r||t&&t.currentIndex<EM(r,i,l)?t:r,p=EM(d,i,l),m=d.currentIndex;if(d===r)i--,r=r._nextRemoved;else if(t=t._next,null==d.previousIndex)i++;else{l||(l=[]);const v=p-i,w=m-i;if(v!=w){for(let R=0;R<v;R++){const $=R<l.length?l[R]:l[R]=0,H=$+R;w<=H&&H<v&&(l[R]=$+1)}l[d.previousIndex]=w-v}}p!==m&&o(d,p,m)}}forEachPreviousItem(o){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)o(t)}forEachAddedItem(o){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)o(t)}forEachMovedItem(o){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)o(t)}forEachRemovedItem(o){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)o(t)}forEachIdentityChange(o){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)o(t)}diff(o){if(null==o&&(o=[]),!Sc(o))throw new me(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let i,l,d,t=this._itHead,r=!1;if(Array.isArray(o)){this.length=o.length;for(let p=0;p<this.length;p++)l=o[p],d=this._trackByFn(p,l),null!==t&&Object.is(t.trackById,d)?(r&&(t=this._verifyReinsertion(t,l,d,p)),Object.is(t.item,l)||this._addIdentityChange(t,l)):(t=this._mismatch(t,l,d,p),r=!0),t=t._next}else i=0,function YV(e,o){if(Array.isArray(e))for(let t=0;t<e.length;t++)o(e[t]);else{const t=e[Symbol.iterator]();let r;for(;!(r=t.next()).done;)o(r.value)}}(o,p=>{d=this._trackByFn(i,p),null!==t&&Object.is(t.trackById,d)?(r&&(t=this._verifyReinsertion(t,p,d,i)),Object.is(t.item,p)||this._addIdentityChange(t,p)):(t=this._mismatch(t,p,d,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,t,r,i){let l;return null===o?l=this._itTail:(l=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(o.item,t)||this._addIdentityChange(o,t),this._reinsertAfter(o,l,i)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(o.item,t)||this._addIdentityChange(o,t),this._moveAfter(o,l,i)):o=this._addAfter(new xM(t,r),l,i),o}_verifyReinsertion(o,t,r,i){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==l?o=this._reinsertAfter(l,o._prev,i):o.currentIndex!=i&&(o.currentIndex=i,this._addToMoves(o,i)),o}_truncate(o){for(;null!==o;){const t=o._next;this._addToRemovals(this._unlink(o)),o=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const i=o._prevRemoved,l=o._nextRemoved;return null===i?this._removalsHead=l:i._nextRemoved=l,null===l?this._removalsTail=i:l._prevRemoved=i,this._insertAfter(o,t,r),this._addToMoves(o,r),o}_moveAfter(o,t,r){return this._unlink(o),this._insertAfter(o,t,r),this._addToMoves(o,r),o}_addAfter(o,t,r){return this._insertAfter(o,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,t,r){const i=null===t?this._itHead:t._next;return o._next=i,o._prev=t,null===i?this._itTail=o:i._prev=o,null===t?this._itHead=o:t._next=o,null===this._linkedRecords&&(this._linkedRecords=new PM),this._linkedRecords.put(o),o.currentIndex=r,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const t=o._prev,r=o._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,o}_addToMoves(o,t){return o.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new PM),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,t){return o.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class xM{constructor(o,t){this.item=o,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class JV{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,o))return r;return null}remove(o){const t=o._prevDup,r=o._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class PM{constructor(){this.map=new Map}put(o){const t=o.trackById;let r=this.map.get(t);r||(r=new JV,this.map.set(t,r)),r.add(o)}get(o,t){const i=this.map.get(o);return i?i.get(o,t):null}remove(o){const t=o.trackById;return this.map.get(t).remove(o)&&this.map.delete(t),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EM(e,o,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+o+i}class kM{constructor(){}supports(o){return o instanceof Map||QS(o)}create(){return new DM}}class DM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let t;for(t=this._mapHead;null!==t;t=t._next)o(t)}forEachPreviousItem(o){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)o(t)}forEachChangedItem(o){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)o(t)}forEachAddedItem(o){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)o(t)}forEachRemovedItem(o){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)o(t)}diff(o){if(o){if(!(o instanceof Map||QS(o)))throw new me(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(o,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const l=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,l)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,t){if(o){const r=o._prev;return t._next=o,t._prev=r,o._prev=t,r&&(r._next=t),o===this._mapHead&&(this._mapHead=t),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(o,t){if(this._records.has(o)){const i=this._records.get(o);this._maybeAddToChanges(i,t);const l=i._prev,d=i._next;return l&&(l._next=d),d&&(d._prev=l),i._next=null,i._prev=null,i}const r=new TM(o);return this._records.set(o,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,t){Object.is(t,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=t,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,t){o instanceof Map?o.forEach(t):Object.keys(o).forEach(r=>t(o[r],r))}}class TM{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hb(){return new Xg([new XS])}let Xg=(()=>{class e{static#e=this.\u0275prov=Ee({token:e,providedIn:"root",factory:hb});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||hb()),deps:[[e,new Og,new Oy]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new me(901,!1)}}return e})();function MM(){return new e_([new kM])}let e_=(()=>{class e{static#e=this.\u0275prov=Ee({token:e,providedIn:"root",factory:MM});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||MM()),deps:[[e,new Og,new Oy]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new me(901,!1)}}return e})();function t_(e,o,t,r,i=!1){for(;null!==t;){const l=o[t.index];null!==l&&r.push(Qn(l)),Po(l)&&IM(l,r);const d=t.type;if(8&d)t_(e,o,t.child,r);else if(32&d){const p=TS(t,o);let m;for(;m=p();)r.push(m)}else if(16&d){const p=qT(o,t);if(Array.isArray(p))r.push(...p);else{const m=zg(o[ao]);t_(m[ze],m,p,r,!0)}}t=i?t.projectionNext:t.next}return r}function IM(e,o){for(let t=xn;t<e.length;t++){const r=e[t],i=r[ze].firstChild;null!==i&&t_(r[ze],r,i,o)}e[_r]!==e[So]&&o.push(e[_r])}let js=[];const e1={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{py(e.lView)},consumerOnSignalRead(){this.lView[au]=this}};function t1(e){return e.ngOriginalError}class vl{constructor(){this._console=console}handleError(o){const t=this._findOriginalError(o);this._console.error("ERROR",o),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(o){let t=o&&t1(o);for(;t&&t1(t);)t=t1(t);return t||null}}const qd=new je("",{providedIn:"root",factory:()=>!1}),qt={};function k(e){FM(hn(),Ce(),jr()+e,!1)}function FM(e,o,t,r){if(!r)if(3==(3&o[Ct])){const l=e.preOrderCheckHooks;null!==l&&_g(o,l,t)}else{const l=e.preOrderHooks;null!==l&&wy(o,l,0,t)}uu(t)}function B(e,o=Yt.Default){const t=Ce();return null===t?ie(e,o):gc(Ln(),t,Et(e),o)}function np(e,o,t,r,i,l,d,p,m,v,w){const P=o.blueprint.slice();return P[So]=i,P[Ct]=140|r,(null!==v||e&&2048&e[Ct])&&(P[Ct]|=2048),UD(P),P[xo]=P[Jn]=e,P[Wt]=t,P[mh]=d||e&&e[mh],P[jt]=p||e&&e[jt],P[Qr]=m||e&&e[Qr]||null,P[Vr]=l,P[ug]=function cV(){return MT++}(),P[fc]=w,P[AD]=v,P[ao]=2==o.type?e[ao]:P,P}function op(e,o,t,r,i){let l=e.data[o];if(null===l)l=function a1(e,o,t,r,i){const l=j0(),d=H0(),m=e.data[o]=function Ro(e,o,t,r,i,l){let d=o?o.injectorIndex:-1,p=0;return function bh(){return null!==Rt.skipHydrationRootTNode}()&&(p|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:d,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:p,providerIndexes:0,value:i,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?l:l&&l.parent,t,o,r,i);return null===e.firstChild&&(e.firstChild=m),null!==l&&(d?null==l.child&&null!==m.parent&&(l.child=m):null===l.next&&(l.next=m,m.prev=l)),m}(e,o,t,r,i),function y3(){return Rt.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=t,l.value=r,l.attrs=i;const d=function Pd(){const e=Rt.lFrame,o=e.currentTNode;return e.isParent?o:o.parent}();l.injectorIndex=null===d?-1:d.injectorIndex}return Na(l,!0),l}function rp(e,o,t,r){if(0===t)return-1;const i=o.length;for(let l=0;l<t;l++)o.push(r),e.blueprint.push(r),e.data.push(null);return i}function yl(e,o,t,r,i){const l=jr(),d=2&r;try{uu(-1),d&&o.length>Dt&&FM(e,o,Dt,!1),Aa(d?2:0,i),t(r,i)}finally{uu(l),Aa(d?3:1,i)}}function o_(e,o,t){if(M0(o)){const r=_n(null);try{const l=o.directiveEnd;for(let d=o.directiveStart;d<l;d++){const p=e.data[d];p.contentQueries&&p.contentQueries(1,t[d],d)}}finally{_n(r)}}}function r_(e,o,t){GD()&&(function a$(e,o,t,r){const i=t.directiveStart,l=t.directiveEnd;Xr(t)&&function s_(e,o,t){const r=Ur(o,e),i=c1(t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const p=Cb(e,np(e,i,null,d,r,o,null,e[mh].rendererFactory.createRenderer(r,t),null,null,null));e[o.index]=p}(o,t,e.data[i+t.componentOffset]),e.firstCreatePass||wg(t,o),Te(r,o);const d=t.initialInputs;for(let p=i;p<l;p++){const m=e.data[p],v=Md(o,e,p,t);Te(v,o),null!==d&&c$(0,p-i,v,m,0,d),hi(m)&&(ps(t.index,o)[Wt]=Md(o,e,p,t))}}(e,o,t,Ur(t,o)),64==(64&t.flags)&&HM(e,o,t))}function sp(e,o,t=Ur){const r=o.localNames;if(null!==r){let i=o.index+1;for(let l=0;l<r.length;l+=2){const d=r[l+1],p=-1===d?t(o,e):e[d];e[i++]=p}}}function c1(e){const o=e.tView;return null===o||o.incompleteFirstPass?e.tView=ip(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):o}function ip(e,o,t,r,i,l,d,p,m,v,w){const P=Dt+r,R=P+i,$=function l1(e,o){const t=[];for(let r=0;r<o;r++)t.push(r<e?null:qt);return t}(P,R),H="function"==typeof v?v():v;return $[ze]={type:e,blueprint:$,template:t,queries:null,viewQuery:p,declTNode:o,data:$.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:m,consts:H,incompleteFirstPass:!1,ssrId:w}}let La=e=>null;function LM(e,o,t,r){for(let i in e)if(e.hasOwnProperty(i)){t=null===t?{}:t;const l=e[i];null===r?yb(t,o,i,l):r.hasOwnProperty(i)&&yb(t,o,r[i],l)}return t}function yb(e,o,t,r){e.hasOwnProperty(t)?e[t].push(o,r):e[t]=[o,r]}function ys(e,o,t,r,i,l,d,p){const m=Ur(o,t);let w,v=o.inputs;!p&&null!=v&&(w=v[r])?(m1(e,t,w,r,i),Xr(o)&&function ap(e,o){const t=ps(o,e);16&t[Ct]||(t[Ct]|=64)}(t,o.index)):3&o.type&&(r=function BM(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=d?d(i,o.value||"",r):i,l.setProperty(m,r,i))}function u1(e,o,t,r){if(GD()){const i=null===r?null:{"":-1},l=function WM(e,o){const t=e.directiveRegistry;let r=null,i=null;if(t)for(let l=0;l<t.length;l++){const d=t[l];if(Ji(o,d.selectors,!1))if(r||(r=[]),hi(d))if(null!==d.findHostDirectiveDefs){const p=[];i=i||new Map,d.findHostDirectiveDefs(d,p,i),r.unshift(...p,d),bb(e,o,p.length)}else r.unshift(d),bb(e,o,0);else i=i||new Map,d.findHostDirectiveDefs?.(d,r,i),r.push(d)}return null===r?null:[r,i]}(e,t);let d,p;null===l?d=p=null:[d,p]=l,null!==d&&$M(e,o,t,d,i,p),i&&function qM(e,o,t){if(o){const r=e.localNames=[];for(let i=0;i<o.length;i+=2){const l=t[o[i+1]];if(null==l)throw new me(-301,!1);r.push(o[i],l)}}}(t,r,i)}t.mergedAttrs=Rr(t.mergedAttrs,t.attrs)}function $M(e,o,t,r,i,l){for(let v=0;v<r.length;v++)rS(wg(t,o),e,r[v].type);!function GM(e,o,t){e.flags|=1,e.directiveStart=o,e.directiveEnd=o+t,e.providerIndexes=o}(t,e.data.length,r.length);for(let v=0;v<r.length;v++){const w=r[v];w.providersResolver&&w.providersResolver(w)}let d=!1,p=!1,m=rp(e,o,r.length,null);for(let v=0;v<r.length;v++){const w=r[v];t.mergedAttrs=Rr(t.mergedAttrs,w.hostAttrs),Gd(e,t,o,m,w),wb(m,w,i),null!==w.contentQueries&&(t.flags|=4),(null!==w.hostBindings||null!==w.hostAttrs||0!==w.hostVars)&&(t.flags|=64);const P=w.type.prototype;!d&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),d=!0),!p&&(P.ngOnChanges||P.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),p=!0),m++}!function s$(e,o,t){const i=o.directiveEnd,l=e.data,d=o.attrs,p=[];let m=null,v=null;for(let w=o.directiveStart;w<i;w++){const P=l[w],R=t?t.get(P):null,H=R?R.outputs:null;m=LM(P.inputs,w,m,R?R.inputs:null),v=LM(P.outputs,w,v,H);const Y=null===m||null===d||bd(o)?null:ZM(m,w,d);p.push(Y)}null!==m&&(m.hasOwnProperty("class")&&(o.flags|=8),m.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=p,o.inputs=m,o.outputs=v}(e,t,l)}function HM(e,o,t){const r=t.directiveStart,i=t.directiveEnd,l=t.index,d=function G0(){return Rt.lFrame.currentDirectiveIndex}();try{uu(l);for(let p=r;p<i;p++){const m=e.data[p],v=o[p];K0(p),(null!==m.hostBindings||0!==m.hostVars||null!==m.hostAttrs)&&zM(m,v)}}finally{uu(-1),K0(d)}}function zM(e,o){null!==e.hostBindings&&e.hostBindings(1,o)}function bb(e,o,t){o.componentOffset=t,(e.components??=[]).push(o.index)}function wb(e,o,t){if(t){if(o.exportAs)for(let r=0;r<o.exportAs.length;r++)t[o.exportAs[r]]=e;hi(o)&&(t[""]=e)}}function Gd(e,o,t,r,i){e.data[r]=i;const l=i.factory||(i.factory=hs(i.type)),d=new vg(l,hi(i),B);e.blueprint[r]=d,t[r]=d,function UM(e,o,t,r,i){const l=i.hostBindings;if(l){let d=e.hostBindingOpCodes;null===d&&(d=e.hostBindingOpCodes=[]);const p=~o.index;(function jM(e){let o=e.length;for(;o>0;){const t=e[--o];if("number"==typeof t&&t<0)return t}return 0})(d)!=p&&d.push(p),d.push(t,r,l)}}(e,o,r,rp(e,t,i.hostVars,qt),i)}function xc(e,o,t,r,i,l){const d=Ur(e,o);!function d1(e,o,t,r,i,l,d){if(null==l)e.removeAttribute(o,i,t);else{const p=null==d?Lt(l):d(l,r||"",i);e.setAttribute(o,i,p,t)}}(o[jt],d,l,e.value,t,r,i)}function c$(e,o,t,r,i,l){const d=l[o];if(null!==d)for(let p=0;p<d.length;)KM(r,t,d[p++],d[p++],d[p++])}function KM(e,o,t,r,i){const l=_n(null);try{const d=e.inputTransforms;null!==d&&d.hasOwnProperty(r)&&(i=d[r].call(o,i)),null!==e.setInput?e.setInput(o,i,t,r):o[r]=i}finally{_n(l)}}function ZM(e,o,t){let r=null,i=0;for(;i<t.length;){const l=t[i];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===r&&(r=[]);const d=e[l];for(let p=0;p<d.length;p+=2)if(d[p]===o){r.push(l,d[p+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function YM(e,o,t,r){return[e,!0,0,o,null,r,null,t,null,null]}function f1(e,o){const t=e.contentQueries;if(null!==t){const r=_n(null);try{for(let i=0;i<t.length;i+=2){const d=t[i+1];if(-1!==d){const p=e.data[d];Z0(t[i]),p.contentQueries(2,o[d],d)}}}finally{_n(r)}}}function Cb(e,o){return e[io]?e[gh][Qi]=o:e[io]=o,e[gh]=o,o}function h1(e,o,t){Z0(0);const r=_n(null);try{o(e,t)}finally{_n(r)}}function Sb(e,o){const t=e[Qr],r=t?t.get(vl,null):null;r&&r.handleError(o)}function m1(e,o,t,r,i){for(let l=0;l<t.length;){const d=t[l++],p=t[l++];KM(e.data[d],o[d],r,p,i)}}function QM(e,o,t,r){const i=o[Ct];if(256==(256&i))return;o[mh].inlineEffectRunner?.flush(),J0(o);let d=null,p=null;(function f$(e){return 2!==e.type})(e)&&(p=function j7(e){return e[au]??function pb(e){const o=js.pop()??Object.create(e1);return o.lView=e,o}(e)}(o),d=function Jf(e){return e&&(e.nextProducerIndex=0),_n(e)}(p));try{UD(o),function W0(e){return Rt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&yl(e,o,t,2,r);const m=3==(3&i);if(m){const P=e.preOrderCheckHooks;null!==P&&_g(o,P,null)}else{const P=e.preOrderHooks;null!==P&&wy(o,P,0,null),Ed(o,0)}if(function eI(e){for(let o=MS(e);null!==o;o=IS(o)){if(!(o[Ct]&il.HasTransplantedViews))continue;const t=o[hc];for(let r=0;r<t.length;r++){jD(t[r])}}}(o),XM(o,0),null!==e.contentQueries&&f1(e,o),m){const P=e.contentCheckHooks;null!==P&&_g(o,P)}else{const P=e.contentHooks;null!==P&&wy(o,P,1),Ed(o,1)}!function tp(e,o){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)uu(~i);else{const l=i,d=t[++r],p=t[++r];KD(d,l),p(2,o[l])}}}finally{uu(-1)}}(e,o);const v=e.components;null!==v&&v1(o,v,0);const w=e.viewQuery;if(null!==w&&h1(2,w,r),m){const P=e.viewCheckHooks;null!==P&&_g(o,P)}else{const P=e.viewHooks;null!==P&&wy(o,P,2),Ed(o,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o[dy]){for(const P of o[dy])P();o[dy]=null}o[Ct]&=-73}catch(m){throw py(o),m}finally{null!==p&&(function Wl(e,o){if(_n(o),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Sn(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)Gl(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(p,d),function Xh(e){e.lView[au]!==e&&(e.lView=null,js.push(e))}(p)),pi()}}function XM(e,o){for(let t=MS(e);null!==t;t=IS(t)){t[Ct]&=~il.HasChildViewsToRefresh;for(let r=xn;r<t.length;r++)_1(t[r],o)}}function tI(e,o,t){_1(ps(o,e),t)}function _1(e,o){cl(e)&&nI(e,o)}function nI(e,o){const r=e[ze],i=e[Ct],l=e[au];let d=!!(0===o&&16&i);if(d||=!!(64&i&&0===o),d||=!!(1024&i),d||=!(!l?.dirty||!ql(l)),l&&(l.dirty=!1),e[Ct]&=-9217,d)QM(r,e,r.template,e[Wt]);else if(8192&i){XM(e,1);const p=r.components;null!==p&&v1(e,p,1)}}function v1(e,o,t){for(let r=0;r<o.length;r++)tI(e,o[r],t)}function i_(e){for(;e;){e[Ct]|=64;const o=zg(e);if(ye(e)&&!o)return e;e=o}return null}class lp{get rootNodes(){const o=this._lView,t=o[ze];return t_(t,o,t.firstChild,[])}constructor(o,t,r=!0){this._lView=o,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wt]}set context(o){this._lView[Wt]=o}get destroyed(){return 256==(256&this._lView[Ct])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[xo];if(Po(o)){const t=o[8],r=t?t.indexOf(this):-1;r>-1&&(Wg(o,r),My(t,r))}this._attachedToViewContainer=!1}Ky(this._lView[ze],this._lView)}onDestroy(o){pg(this._lView,o)}markForCheck(){i_(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ct]&=-129}reattach(){$0(this._lView),this._lView[Ct]|=128}detectChanges(){!function g1(e,o=!0){const t=e[mh],r=t.rendererFactory,i=t.afterRenderEventManager;r.begin?.(),i?.begin();try{const d=e[ze];QM(d,e,d.template,e[Wt]),function d$(e){let o=0;for(;9216&e[Ct]||e[au]?.dirty;){if(100===o)throw new me(103,!1);o++,nI(e,1)}}(e)}catch(d){throw o&&Sb(e,d),d}finally{r.end?.(),t.inlineEffectRunner?.flush(),i?.end()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function AS(e,o){qg(e,o,o[jt],2,null,null)}(this._lView[ze],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=o}}let a_=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=h$}return e})();function h$(e){return function y1(e,o,t){if(Xr(e)&&!t){const r=ps(e.index,o);return new lp(r,r)}return 47&e.type?new lp(o[ao],o):null}(Ln(),Ce(),16==(16&e))}let xb=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=Kd;static#t=this.__NG_ENV_ID__=t=>t}return e})();class Fe extends xb{constructor(o){super(),this._lView=o}onDestroy(o){return pg(this._lView,o),()=>function zD(e,o){if(null===e[sl])return;const t=e[sl].indexOf(o);-1!==t&&e[sl].splice(t,1)}(this._lView,o)}}function Kd(){return new Fe(Ce())}const sI=new Set;function Eu(e){sI.has(e)||(sI.add(e),performance?.mark?.("mark_use_counter",{detail:{feature:e}}))}function Zd(e){return o=>{setTimeout(e,void 0,o)}}const Le=class w1 extends _o{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,t,r){let i=o,l=t||(()=>null),d=r;if(o&&"object"==typeof o){const m=o;i=m.next?.bind(m),l=m.error?.bind(m),d=m.complete?.bind(m)}this.__isAsync&&(l=Zd(l),i&&(i=Zd(i)),d&&(d=Zd(d)));const p=super.subscribe({next:i,error:l,complete:d});return o instanceof Pt&&o.add(p),p}};function iI(...e){}class En{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Le(!1),this.onMicrotaskEmpty=new Le(!1),this.onStable=new Le(!1),this.onError=new Le(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function y$(){const e="function"==typeof fn.requestAnimationFrame;let o=fn[e?"requestAnimationFrame":"setTimeout"],t=fn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&t){const r=o[Zone.__symbol__("OriginalDelegate")];r&&(o=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function w$(e){const o=()=>{!function b$(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(fn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,S1(e),e.isCheckStableRunning=!0,C1(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),S1(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,l,d,p)=>{if(function S$(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(p))return t.invokeTask(i,l,d,p);try{return Eb(e),t.invokeTask(i,l,d,p)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&o(),cI(e)}},onInvoke:(t,r,i,l,d,p,m)=>{try{return Eb(e),t.invoke(i,l,d,p,m)}finally{e.shouldCoalesceRunChangeDetection&&o(),cI(e)}},onHasTask:(t,r,i,l)=>{t.hasTask(i,l),r===i&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,S1(e),C1(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(t,r,i,l)=>(t.handleError(i,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!En.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(En.isInAngularZone())throw new me(909,!1)}run(o,t,r){return this._inner.run(o,t,r)}runTask(o,t,r,i){const l=this._inner,d=l.scheduleEventTask("NgZoneEvent: "+i,o,aI,iI,iI);try{return l.runTask(d,t,r)}finally{l.cancelTask(d)}}runGuarded(o,t,r){return this._inner.runGuarded(o,t,r)}runOutsideAngular(o){return this._outer.run(o)}}const aI={};function C1(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function S1(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Eb(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function cI(e){e._nesting--,C1(e)}class C${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Le,this.onMicrotaskEmpty=new Le,this.onStable=new Le,this.onError=new Le}run(o,t,r){return o.apply(t,r)}runGuarded(o,t,r){return o.apply(t,r)}runOutsideAngular(o){return o()}runTask(o,t,r,i){return o.apply(t,r)}}const lI=new je("",{providedIn:"root",factory:uI});function uI(){const e=Be(En);let o=!0;return function Yv(...e){const o=hd(e),t=function qm(e,o){return"number"==typeof Jc(e)?e.pop():o}(e,1/0),r=e;return r.length?1===r.length?Or(r[0]):sc(t)(bo(r,o)):ii}(new Zn(i=>{o=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(o),i.complete()})}),new Zn(i=>{let l;e.runOutsideAngular(()=>{l=e.onStable.subscribe(()=>{En.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(o=!0,i.next(!0))})})});const d=e.onUnstable.subscribe(()=>{En.assertInAngularZone(),o&&(o=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{l.unsubscribe(),d.unsubscribe()}}).pipe(Km()))}var bs=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(bs||{});const c_={destroy(){}};function fI(e,o){!o&&function pS(e){if(!ng()&&!function iy(){return lc}())throw new me(-203,!1)}();const t=o?.injector??Be(es);if(!function br(e){return"browser"===(e??Be(es)).get(vu)}(t))return c_;Eu("NgAfterNextRender");const r=t.get(kb),i=r.handler??=new pI,l=o?.phase??bs.MixedReadWrite,d=()=>{i.unregister(m),p()},p=t.get(xb).onDestroy(d),m=new hI(t,l,()=>{d(),e()});return i.register(m),{destroy:d}}class hI{constructor(o,t,r){this.phase=t,this.callbackFn=r,this.zone=o.get(En),this.errorHandler=o.get(vl,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(o){this.errorHandler?.handleError(o)}}}class pI{constructor(){this.executingCallbacks=!1,this.buckets={[bs.EarlyRead]:new Set,[bs.Write]:new Set,[bs.MixedReadWrite]:new Set,[bs.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new me(102,!1)}register(o){(this.executingCallbacks?this.deferredCallbacks:this.buckets[o.phase]).add(o)}unregister(o){this.buckets[o.phase].delete(o),this.deferredCallbacks.delete(o)}execute(){this.executingCallbacks=!0;for(const o of Object.values(this.buckets))for(const t of o)t.invoke();this.executingCallbacks=!1;for(const o of this.deferredCallbacks)this.buckets[o.phase].add(o);this.deferredCallbacks.clear()}destroy(){for(const o of Object.values(this.buckets))o.clear();this.deferredCallbacks.clear()}}let kb=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth){for(const t of this.internalCallbacks)t();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Ee({token:e,providedIn:"root",factory:()=>new e})}return e})();function P$(e,o){const t=ps(o,e),r=t[ze];!function up(e,o){for(let t=o.length;t<e.blueprint.length;t++)o.push(e.blueprint[t])}(r,t);const i=t[So];null!==i&&null===t[fc]&&(t[fc]=Wd(i,t[Qr])),dp(r,t,t[Wt])}function dp(e,o,t){J0(o);try{const r=e.viewQuery;null!==r&&h1(1,r,t);const i=e.template;null!==i&&yl(e,o,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&f1(e,o),e.staticViewQueries&&h1(2,e.viewQuery,t);const l=e.components;null!==l&&function E$(e,o){for(let t=0;t<o.length;t++)P$(e,o[t])}(o,l)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{o[Ct]&=-5,pi()}}function l_(e,o,t){let r=t?e.styles:null,i=t?e.classes:null,l=0;if(null!==o)for(let d=0;d<o.length;d++){const p=o[d];"number"==typeof p?l=p:1==l?i=ih(i,p):2==l&&(r=ih(r,p+": "+o[++d]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}class mI extends bi{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const t=rn(o);return new fp(t,this.ngModule)}}function Db(e){const o=[];for(let t in e)e.hasOwnProperty(t)&&o.push({propName:e[t],templateName:t});return o}class D${constructor(o,t){this.injector=o,this.parentInjector=t}get(o,t,r){r=yd(r);const i=this.injector.get(o,Pu,r);return i!==Pu||t===Pu?i:this.parentInjector.get(o,t,r)}}class fp extends yM{get inputs(){const o=this.componentDef,t=o.inputTransforms,r=Db(o.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Db(this.componentDef.outputs)}constructor(o,t){super(),this.componentDef=o,this.ngModule=t,this.componentType=o.type,this.selector=function M(e){return e.map(C).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!t}create(o,t,r,i){let l=(i=i||this.ngModule)instanceof _i?i:i?.injector;l&&null!==this.componentDef.getStandaloneInjector&&(l=this.componentDef.getStandaloneInjector(l)||l);const d=l?new D$(o,l):o,p=d.get(ub,null);if(null===p)throw new me(407,!1);const w={rendererFactory:p,sanitizer:d.get(wi,null),inlineEffectRunner:null,afterRenderEventManager:d.get(kb,null)},P=p.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",$=r?function t$(e,o,t,r){const l=r.get(qd,!1)||t===gr.ShadowDom,d=e.selectRootElement(o,l);return function n$(e){La(e)}(d),d}(P,r,this.componentDef.encapsulation,d):Gy(P,R,function k$(e){const o=e.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),te=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let _e=null;null!==$&&(_e=Wd($,d,!0));const le=ip(0,null,null,1,0,null,null,null,null,null,null),Re=np(null,le,null,te,null,null,w,P,d,null,_e);let st,At;J0(Re);try{const tn=this.componentDef;let jn,Qs=null;tn.findHostDirectiveDefs?(jn=[],Qs=new Map,tn.findHostDirectiveDefs(tn,jn,Qs),jn.push(tn)):jn=[tn];const $l=function T$(e,o){const t=e[ze],r=Dt;return e[r]=o,op(t,r,2,"#host",null)}(Re,$),Ul=function gI(e,o,t,r,i,l,d){const p=i[ze];!function M$(e,o,t,r){for(const i of e)o.mergedAttrs=Rr(o.mergedAttrs,i.hostAttrs);null!==o.mergedAttrs&&(l_(o,o.mergedAttrs,!0),null!==t&&QT(r,t,o))}(r,e,o,d);let m=null;null!==o&&(m=Wd(o,i[Qr]));const v=l.rendererFactory.createRenderer(o,t);let w=16;t.signals?w=4096:t.onPush&&(w=64);const P=np(i,c1(t),null,w,i[e.index],e,l,v,null,null,m);return p.firstCreatePass&&bb(p,e,r.length-1),Cb(i,P),i[e.index]=P}($l,$,tn,jn,Re,w,P);At=hg(le,Dt),$&&function _I(e,o,t,r){if(r)rl(e,t,["ng-version",CM.full]);else{const{attrs:i,classes:l}=function G(e){const o=[],t=[];let r=1,i=2;for(;r<e.length;){let l=e[r];if("string"==typeof l)2===i?""!==l&&o.push(l,e[++r]):8===i&&t.push(l);else{if(!fi(i))break;i=l}r++}return{attrs:o,classes:t}}(o.selectors[0]);i&&rl(e,t,i),l&&l.length>0&&JT(e,t,l.join(" "))}}(P,tn,$,r),void 0!==t&&function O$(e,o,t){const r=e.projection=[];for(let i=0;i<o.length;i++){const l=t[i];r.push(null!=l?Array.from(l):null)}}(At,this.ngContentSelectors,t),st=function I$(e,o,t,r,i,l){const d=Ln(),p=i[ze],m=Ur(d,i);$M(p,i,d,t,null,r);for(let w=0;w<t.length;w++)Te(Md(i,p,d.directiveStart+w,d),i);HM(p,i,d),m&&Te(m,i);const v=Md(i,p,d.directiveStart+d.componentOffset,d);if(e[Wt]=i[Wt]=v,null!==l)for(const w of l)w(v,o);return o_(p,d,e),v}(Ul,tn,jn,Qs,Re,[A$]),dp(le,Re,null)}finally{pi()}return new x1(this.componentType,st,Qh(At,Re),Re,At)}}class x1 extends lb{constructor(o,t,r,i,l){super(),this.location=r,this._rootLView=i,this._tNode=l,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new lp(i,void 0,!1),this.componentType=o}setInput(o,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),t))return;const l=this._rootLView;m1(l[ze],l,i,o,t),this.previousInputValues.set(o,t),i_(ps(this._tNode.index,l))}}get injector(){return new yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function A$(){const e=Ln();gg(Ce()[ze],e)}function kn(e){let o=function Tb(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;o;){let i;if(hi(e))i=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new me(903,!1);i=o.\u0275dir}if(i){if(t){r.push(i);const d=e;d.inputs=Yd(e.inputs),d.inputTransforms=Yd(e.inputTransforms),d.declaredInputs=Yd(e.declaredInputs),d.outputs=Yd(e.outputs);const p=i.hostBindings;p&&K7(e,p);const m=i.viewQuery,v=i.contentQueries;if(m&&Ib(e,m),v&&Jd(e,v),Ta(e.inputs,i.inputs),Ta(e.declaredInputs,i.declaredInputs),Ta(e.outputs,i.outputs),null!==i.inputTransforms&&(null===d.inputTransforms&&(d.inputTransforms={}),Ta(d.inputTransforms,i.inputTransforms)),hi(i)&&i.data.animation){const w=e.data;w.animation=(w.animation||[]).concat(i.data.animation)}}const l=i.features;if(l)for(let d=0;d<l.length;d++){const p=l[d];p&&p.ngInherit&&p(e),p===kn&&(t=!1)}}o=Object.getPrototypeOf(o)}!function Mb(e){let o=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=o+=i.hostVars,i.hostAttrs=Rr(i.hostAttrs,t=Rr(t,i.hostAttrs))}}(r)}function Yd(e){return e===Yi?{}:e===nn?[]:e}function Ib(e,o){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{o(r,i),t(r,i)}:o}function Jd(e,o){const t=e.contentQueries;e.contentQueries=t?(r,i,l)=>{o(r,i,l),t(r,i,l)}:o}function K7(e,o){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{o(r,i),t(r,i)}:o}function Ob(e){const o=e.inputConfig,t={};for(const r in o)if(o.hasOwnProperty(r)){const i=o[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}e.inputTransforms=t}function Pc(e,o,t){return e[o]=t}function tr(e,o,t){return!Object.is(e[o],t)&&(e[o]=t,!0)}function ku(e,o,t,r){const i=tr(e,o,t);return tr(e,o+1,r)||i}function nr(e,o,t,r){const i=Ce();return tr(i,mc(),o)&&(hn(),xc(Xn(),i,e,o,t,r)),nr}function hp(e,o,t,r){return tr(e,mc(),t)?o+Lt(t)+r:qt}function d_(e,o){return e<<17|o<<2}function Tu(e){return e>>17&32767}function k1(e){return 2|e}function rf(e){return(131068&e)>>2}function D1(e,o){return-131069&e|o<<2}function T1(e){return 1|e}function V$(e,o,t,r,i){const l=e[t+1],d=null===o;let p=r?Tu(l):rf(l),m=!1;for(;0!==p&&(!1===m||d);){const w=e[p+1];TI(e[p],o)&&(m=!0,e[p+1]=r?T1(w):k1(w)),p=r?Tu(w):rf(w)}m&&(e[t+1]=r?k1(l):T1(l))}function TI(e,o){return null===e||null==o||(Array.isArray(e)?e[1]:e)===o||!(!Array.isArray(e)||"string"!=typeof o)&&Mg(e,o)>=0}function A(e,o,t){const r=Ce();return tr(r,mc(),o)&&ys(hn(),Xn(),r,e,o,r[jt],t,!1),A}function A1(e,o,t,r,i){const d=i?"class":"style";m1(e,t,o.inputs[d],d,r)}function N1(e,o,t){return Va(e,o,t,!1),N1}function Bb(e,o){return Va(e,o,null,!0),Bb}function Va(e,o,t,r){const i=Ce(),l=hn(),d=function ll(e){const o=Rt.lFrame,t=o.bindingIndex;return o.bindingIndex=o.bindingIndex+e,t}(2);l.firstUpdatePass&&function Mu(e,o,t,r){const i=e.data;if(null===i[t+1]){const l=i[jr()],d=function RI(e,o){return o>=e.expandoStartIndex}(e,t);(function f_(e,o){return 0!=(e.flags&(o?8:16))})(l,r)&&null===o&&!d&&(o=!1),o=function FI(e,o,t,r){const i=function vy(e){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:e[o]}(e);let l=r?o.residualClasses:o.residualStyles;if(null===i)0===(r?o.classBindings:o.styleBindings)&&(t=_p(t=Vb(null,e,o,t,r),o.attrs,r),l=null);else{const d=o.directiveStylingLast;if(-1===d||e[d]!==i)if(t=Vb(i,e,o,t,r),null===l){let m=function H$(e,o,t){const r=t?o.classBindings:o.styleBindings;if(0!==rf(r))return e[Tu(r)]}(e,o,r);void 0!==m&&Array.isArray(m)&&(m=Vb(null,e,o,m[1],r),m=_p(m,o.attrs,r),function F1(e,o,t,r){e[Tu(t?o.classBindings:o.styleBindings)]=r}(e,o,r,m))}else l=function z$(e,o,t){let r;const i=o.directiveEnd;for(let l=1+o.directiveStylingLast;l<i;l++)r=_p(r,e[l].hostAttrs,t);return _p(r,o.attrs,t)}(e,o,r)}return void 0!==l&&(r?o.residualClasses=l:o.residualStyles=l),t}(i,l,o,r),function I1(e,o,t,r,i,l){let d=l?o.classBindings:o.styleBindings,p=Tu(d),m=rf(d);e[r]=t;let w,v=!1;if(Array.isArray(t)?(w=t[1],(null===w||Mg(t,w)>0)&&(v=!0)):w=t,i)if(0!==m){const R=Tu(e[p+1]);e[r+1]=d_(R,p),0!==R&&(e[R+1]=D1(e[R+1],r)),e[p+1]=function DI(e,o){return 131071&e|o<<17}(e[p+1],r)}else e[r+1]=d_(p,0),0!==p&&(e[p+1]=D1(e[p+1],r)),p=r;else e[r+1]=d_(m,0),0===p?p=r:e[m+1]=D1(e[m+1],r),m=r;v&&(e[r+1]=k1(e[r+1])),V$(e,w,r,!0),V$(e,w,r,!1),function B$(e,o,t,r,i){const l=i?e.residualClasses:e.residualStyles;null!=l&&"string"==typeof o&&Mg(l,o)>=0&&(t[r+1]=T1(t[r+1]))}(o,w,e,r,l),d=d_(p,m),l?o.classBindings=d:o.styleBindings=d}(i,l,o,t,d,r)}}(l,e,d,r),o!==qt&&tr(i,d,o)&&function VI(e,o,t,r,i,l,d,p){if(!(3&o.type))return;const m=e.data,v=m[p+1],w=function L$(e){return 1==(1&e)}(v)?$I(m,o,t,i,rf(v),d):void 0;vp(w)||(vp(l)||function kI(e){return 2==(2&e)}(v)&&(l=$I(m,null,t,i,p,d)),function Xy(e,o,t,r,i){if(o)i?e.addClass(t,r):e.removeClass(t,r);else{let l=-1===r.indexOf("-")?void 0:yu.DashCase;null==i?e.removeStyle(t,r,l):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),l|=yu.Important),e.setStyle(t,r,i,l))}}(r,d,fg(jr(),t),i,l))}(l,l.data[jr()],i,i[jt],e,i[d+1]=function q$(e,o){return null==e||""===e||("string"==typeof o?e+=o:"object"==typeof e&&(e=To(yi(e)))),e}(o,t),r,d)}function Vb(e,o,t,r,i){let l=null;const d=t.directiveEnd;let p=t.directiveStylingLast;for(-1===p?p=t.directiveStart:p++;p<d&&(l=o[p],r=_p(r,l.hostAttrs,i),l!==e);)p++;return null!==e&&(t.directiveStylingLast=p),r}function _p(e,o,t){const r=t?1:2;let i=-1;if(null!==o)for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?i=d:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Ls(e,d,!!t||o[++l]))}return void 0===e?null:e}function $I(e,o,t,r,i,l){const d=null===o;let p;for(;i>0;){const m=e[i],v=Array.isArray(m),w=v?m[1]:m,P=null===w;let R=t[i+1];R===qt&&(R=P?nn:void 0);let $=P?dl(R,r):w===r?R:void 0;if(v&&!vp($)&&($=dl(m,r)),vp($)&&(p=$,d))return p;const H=e[i+1];i=d?Tu(H):rf(H)}if(null!==o){let m=l?o.residualClasses:o.residualStyles;null!=m&&(p=dl(m,r))}return p}function vp(e){return void 0!==e}function Ru(e,o){return!o||CS(e)}function p_(e,o,t,r=!0){const i=o[ze];if(function vV(e,o,t,r){const i=xn+r,l=t.length;r>0&&(t[i-1][Qi]=o),r<l-xn?(o[Qi]=t[i],aT(t,xn+r,o)):(t.push(o),o[Qi]=null),o[xo]=t;const d=o[lg];null!==d&&t!==d&&function VT(e,o){const t=e[hc];o[ao]!==o[xo][xo][ao]&&(e[Ct]|=il.HasTransplantedViews),null===t?e[hc]=[o]:t.push(o)}(d,o);const p=o[fs];null!==p&&p.insertView(e),$0(o),o[Ct]|=128}(i,o,e,t),r){const l=FS(t,e),d=o[jt],p=Hh(d,e[_r]);null!==p&&function _V(e,o,t,r,i,l){r[So]=i,r[Vr]=o,qg(e,r,t,1,i,l)}(i,e[Vr],d,o,p,l)}}let aa=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=rO}return e})();function rO(){return function aO(e,o){let t;const r=o[e.index];return Po(r)?t=r:(t=YM(r,o,null,e),o[e.index]=t,Cb(o,t)),cO(t,o,e,r),new G1(t,e,o)}(Ln(),Ce())}const sO=aa,G1=class extends sO{constructor(o,t,r){super(),this._lContainer=o,this._hostTNode=t,this._hostLView=r}get element(){return Qh(this._hostTNode,this._hostLView)}get injector(){return new yr(this._hostTNode,this._hostLView)}get parentInjector(){const o=Sy(this._hostTNode,this._hostLView);if(kd(o)){const t=Td(o,this._hostLView),r=bg(o);return new yr(t[ze].data[r+8],t)}return new yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const t=iO(this._lContainer);return null!==t&&t[o]||null}get length(){return this._lContainer.length-xn}createEmbeddedView(o,t,r){let i,l;"number"==typeof r?i=r:null!=r&&(i=r.index,l=r.injector);const p=o.createEmbeddedViewImpl(t||{},l,null);return this.insertImpl(p,i,Ru(this._hostTNode,null)),p}createComponent(o,t,r,i,l){const d=o&&!function Tg(e){return"function"==typeof e}(o);let p;if(d)p=t;else{const H=t||{};p=H.index,r=H.injector,i=H.projectableNodes,l=H.environmentInjector||H.ngModuleRef}const m=d?o:new fp(rn(o)),v=r||this.parentInjector;if(!l&&null==m.ngModule){const Y=(d?v:this.parentInjector).get(_i,null);Y&&(l=Y)}rn(m.componentType??{});const $=m.create(v,i,null,l);return this.insertImpl($.hostView,p,Ru(this._hostTNode,null)),$}insert(o,t){return this.insertImpl(o,t,!0)}insertImpl(o,t,r){const i=o._lView;if(function f3(e){return Po(e[xo])}(i)){const p=this.indexOf(o);if(-1!==p)this.detach(p);else{const m=i[xo],v=new G1(m,m[Vr],m[xo]);v.detach(v.indexOf(o))}}const l=this._adjustIndex(t),d=this._lContainer;return p_(d,i,l,r),o.attachToViewContainerRef(),aT(m_(d),l,o),o}move(o,t){return this.insert(o,t)}indexOf(o){const t=iO(this._lContainer);return null!==t?t.indexOf(o):-1}remove(o){const t=this._adjustIndex(o,-1),r=Wg(this._lContainer,t);r&&(My(m_(this._lContainer),t),Ky(r[ze],r))}detach(o){const t=this._adjustIndex(o,-1),r=Wg(this._lContainer,t);return r&&null!=My(m_(this._lContainer),t)?new lp(r):null}_adjustIndex(o,t=0){return o??this.length+t}};function iO(e){return e[8]}function m_(e){return e[8]||(e[8]=[])}let cO=function lO(e,o,t,r){if(e[_r])return;let i;i=8&t.type?Qn(r):function dU(e,o){const t=e[jt],r=t.createComment(""),i=Ur(o,e);return Ud(t,Hh(t,i),r,function wV(e,o){return e.nextSibling(o)}(t,i),!1),r}(o,t),e[_r]=i},K1=(e,o,t)=>!1;function Pe(e,o,t,r,i,l,d,p){const m=Ce(),v=hn(),w=e+Dt,P=v.firstCreatePass?function hU(e,o,t,r,i,l,d,p,m){const v=o.consts,w=op(o,e,4,d||null,Xi(v,p));u1(o,t,w,Xi(v,m)),gg(o,w);const P=w.tView=ip(2,w,r,i,l,o.directiveRegistry,o.pipeRegistry,null,o.schemas,v,null);return null!==o.queries&&(o.queries.template(o,w),P.queries=o.queries.embeddedTView(w)),w}(w,v,m,o,t,r,i,l,d):v.data[w];Na(P,!1);const R=Gb(v,m,P,e);by()&&Jy(v,m,R,P),Te(R,m);const $=YM(R,m,R,P);return m[w]=$,Cb(m,$),function Z1(e,o,t){return K1(e,o,t)}($,P,m),dg(P)&&r_(v,m,P),null!=d&&sp(m,P,p),Pe}let Gb=function Y1(e,o,t,r){return fu(!0),o[jt].createComment("")};function x(e,o,t,r){const i=Ce(),l=hn(),d=Dt+e,p=i[jt],m=l.firstCreatePass?function RU(e,o,t,r,i,l){const d=o.consts,m=op(o,e,2,r,Xi(d,i));return u1(o,t,m,Xi(d,l)),null!==m.attrs&&l_(m,m.attrs,!1),null!==m.mergedAttrs&&l_(m,m.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,m),m}(d,l,i,o,t,r):l.data[d],v=VO(l,i,m,p,o,e);i[d]=v;const w=dg(m);return Na(m,!0),QT(p,v,m),32!=(32&m.flags)&&by()&&Jy(l,i,v,m),0===function p3(){return Rt.lFrame.elementDepthCount}()&&Te(v,i),function qD(){Rt.lFrame.elementDepthCount++}(),w&&(r_(l,i,m),o_(l,m,i)),null!==r&&sp(i,m),x}function D(){let e=Ln();H0()?_y():(e=e.parent,Na(e,!1));const o=e;(function U0(e){return Rt.skipHydrationRootTNode===e})(o)&&function _3(){Rt.skipHydrationRootTNode=null}(),function m3(){Rt.lFrame.elementDepthCount--}();const t=hn();return t.firstCreatePass&&(gg(t,e),M0(e)&&t.queries.elementEnd(e)),null!=o.classesWithoutHost&&function x3(e){return 0!=(8&e.flags)}(o)&&A1(t,o,Ce(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function X0(e){return 0!=(16&e.flags)}(o)&&A1(t,o,Ce(),o.stylesWithoutHost,!1),D}function Q(e,o,t,r){return x(e,o,t,r),D(),Q}let VO=(e,o,t,r,i,l)=>(fu(!0),Gy(r,i,function yy(){return Rt.lFrame.currentNamespace}()));function S_(e,o,t){const r=Ce(),i=hn(),l=e+Dt,d=i.firstCreatePass?function LU(e,o,t,r,i){const l=o.consts,d=Xi(l,r),p=op(o,e,8,"ng-container",d);return null!==d&&l_(p,d,!0),u1(o,t,p,Xi(l,i)),null!==o.queries&&o.queries.elementStart(o,p),p}(l,i,r,o,t):i.data[l];Na(d,!0);const p=UO(i,r,d,e);return r[l]=p,by()&&Jy(i,r,p,d),Te(p,r),dg(d)&&(r_(i,r,d),o_(i,d,r)),null!=t&&sp(r,d),S_}function lf(){let e=Ln();const o=hn();return H0()?_y():(e=e.parent,Na(e,!1)),o.firstCreatePass&&(gg(o,e),M0(e)&&o.queries.elementEnd(e)),lf}let UO=(e,o,t,r)=>(fu(!0),OS(o[jt],""));function We(){return Ce()}const $u="en-US";let GO=$u;function Mp(e){return!!e&&"function"==typeof e.then}function Ex(e){return!!e&&"function"==typeof e.subscribe}function z(e,o,t,r){const i=Ce(),l=hn(),d=Ln();return function yA(e,o,t,r,i,l,d){const p=dg(r),v=e.firstCreatePass&&function p1(e){return e.cleanup||(e.cleanup=[])}(e),w=o[Wt],P=function cp(e){return e[xd]||(e[xd]=[])}(o);let R=!0;if(3&r.type||d){const Y=Ur(r,o),te=d?d(Y):Y,_e=P.length,le=d?st=>d(Qn(st[r.index])):r.index;let Re=null;if(!d&&p&&(Re=function vj(e,o,t,r){const i=e.cleanup;if(null!=i)for(let l=0;l<i.length-1;l+=2){const d=i[l];if(d===t&&i[l+1]===r){const p=o[xd],m=i[l+2];return p.length>m?p[m]:null}"string"==typeof d&&(l+=2)}return null}(e,o,i,r.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=l,Re.__ngLastListenerFn__=l,R=!1;else{l=lw(r,o,w,l,!1);const st=t.listen(te,i,l);P.push(l,st),v&&v.push(i,le,_e,_e+1)}}else l=lw(r,o,w,l,!1);const $=r.outputs;let H;if(R&&null!==$&&(H=$[i])){const Y=H.length;if(Y)for(let te=0;te<Y;te+=2){const At=o[H[te]][H[te+1]].subscribe(l),tn=P.length;P.push(l,At),v&&v.push(i,r.index,tn,-(tn+1))}}}(l,i,i[jt],d,e,o,r),z}function Dx(e,o,t,r){try{return Aa(6,o,t),!1!==t(r)}catch(i){return Sb(e,i),!1}finally{Aa(7,o,t)}}function lw(e,o,t,r,i){return function l(d){if(d===Function)return r;i_(e.componentOffset>-1?ps(e.index,o):o);let m=Dx(o,t,r,d),v=l.__ngNextListenerFn__;for(;v;)m=Dx(o,t,v,d)&&m,v=v.__ngNextListenerFn__;return i&&!1===m&&d.preventDefault(),m}}function q(e=1){return function XD(e){return(Rt.lFrame.contextLView=function HD(e,o){for(;e>0;)o=o[Jn],e--;return o}(e,Rt.lFrame.contextLView))[Wt]}(e)}function Ot(e,o,t){return In(e,"",o,"",t),Ot}function In(e,o,t,r,i){const l=Ce(),d=hp(l,o,t,r);return d!==qt&&ys(hn(),Xn(),l,e,d,l[jt],i,!1),In}function Gr(e){return function lu(e,o){return e[o]}(function z0(){return Rt.lFrame.contextLView}(),Dt+e)}function L(e,o=""){const t=Ce(),r=hn(),i=e+Dt,l=r.firstCreatePass?op(r,i,1,o,null):r.data[i],d=BA(r,t,l,o,e);t[i]=d,by()&&Jy(r,t,d,l),Na(l,!1)}let BA=(e,o,t,r,i)=>(fu(!0),function qy(e,o){return e.createText(o)}(o[jt],r));function ht(e){return at("",e,""),ht}function at(e,o,t){const r=Ce(),i=hp(r,e,o,t);return i!==qt&&function bl(e,o,t){const r=fg(o,e);!function LT(e,o,t){e.setValue(o,t)}(e[jt],r,t)}(r,jr(),i),at}function Ux(e,o,t,r,i){if(e=Et(e),Array.isArray(e))for(let l=0;l<e.length;l++)Ux(e[l],o,t,r,i);else{const l=hn(),d=Ce(),p=Ln();let m=Nd(e)?e:Et(e.provide);const v=hT(e),w=1048575&p.providerIndexes,P=p.directiveStart,R=p.providerIndexes>>20;if(Nd(e)||!e.multi){const $=new vg(v,i,B),H=Hx(m,o,i?w:w+R,P);-1===H?(rS(wg(p,d),l,m),jx(l,e,o.length),o.push(m),p.directiveStart++,p.directiveEnd++,i&&(p.providerIndexes+=1048576),t.push($),d.push($)):(t[H]=$,d[H]=$)}else{const $=Hx(m,o,w+R,P),H=Hx(m,o,w,w+R),te=H>=0&&t[H];if(i&&!te||!i&&!($>=0&&t[$])){rS(wg(p,d),l,m);const _e=function Sj(e,o,t,r,i){const l=new vg(e,t,B);return l.multi=[],l.index=o,l.componentProviders=0,jA(l,i,r&&!t),l}(i?zA:HA,t.length,i,r,v);!i&&te&&(t[H].providerFactory=_e),jx(l,e,o.length,0),o.push(m),p.directiveStart++,p.directiveEnd++,i&&(p.providerIndexes+=1048576),t.push(_e),d.push(_e)}else jx(l,e,$>-1?$:H,jA(t[i?H:$],v,!i&&r));!i&&r&&te&&t[H].componentProviders++}}}function jx(e,o,t,r){const i=Nd(o),l=function fT(e){return!!e.useClass}(o);if(i||l){const m=(l?Et(o.useClass):o).prototype.ngOnDestroy;if(m){const v=e.destroyHooks||(e.destroyHooks=[]);if(!i&&o.multi){const w=v.indexOf(t);-1===w?v.push(t,[r,m]):v[w+1].push(r,m)}else v.push(t,m)}}}function jA(e,o,t){return t&&e.componentProviders++,e.multi.push(o)-1}function Hx(e,o,t,r){for(let i=t;i<r;i++)if(o[i]===e)return i;return-1}function HA(e,o,t,r){return zx(this.multi,[])}function zA(e,o,t,r){const i=this.multi;let l;if(this.providerFactory){const d=this.providerFactory.componentProviders,p=Md(t,t[ze],this.providerFactory.index,r);l=p.slice(0,d),zx(i,l);for(let m=d;m<p.length;m++)l.push(p[m])}else l=[],zx(i,l);return l}function zx(e,o){for(let t=0;t<e.length;t++)o.push((0,e[t])());return o}function co(e,o=[]){return t=>{t.providersResolver=(r,i)=>function UA(e,o,t){const r=hn();if(r.firstCreatePass){const i=hi(e);Ux(t,r.data,r.blueprint,i,!0),Ux(o,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,o)}}class ff{}class WA{}class T_ extends ff{constructor(o,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mI(this);const i=Br(o);this._bootstrapComponents=gs(i.bootstrap),this._r3Injector=gS(o,t,[{provide:ff,useValue:this},{provide:bi,useValue:this.componentFactoryResolver},...r],To(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class dw extends WA{constructor(o){super(),this.moduleType=o}create(o){return new T_(this.moduleType,o,[])}}class qA extends ff{constructor(o){super(),this.componentFactoryResolver=new mI(this),this.instance=null;const t=new Rh([...o.providers,{provide:ff,useValue:this},{provide:bi,useValue:this.componentFactoryResolver}],o.parent||Bg(),o.debugName,new Set(["environment"]));this.injector=t,o.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function fw(e,o,t=null){return new qA({providers:e,parent:o,debugName:t,runEnvironmentInitializers:!0}).injector}let Ej=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=uT(0,t.type),i=r.length>0?fw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ee({token:e,providedIn:"environment",factory:()=>new e(ie(_i))})}return e})();function Wx(e){Eu("NgStandalone"),e.getStandaloneInjector=o=>o.get(Ej).getOrCreateStandaloneInjector(e)}function ve(e,o,t,r){return function ki(e,o,t,r,i,l){const d=o+t;return tr(e,d,i)?Pc(e,d+1,l?r.call(l,i):r(i)):Sl(e,d+1)}(Ce(),Ao(),e,o,t,r)}function Pi(e,o,t,r,i){return function eN(e,o,t,r,i,l,d){const p=o+t;return ku(e,p,i,l)?Pc(e,p+2,d?r.call(d,i,l):r(i,l)):Sl(e,p+2)}(Ce(),Ao(),e,o,t,r,i)}function Ss(e,o,t,r,i,l){return function Qt(e,o,t,r,i,l,d,p){const m=o+t;return function Ab(e,o,t,r,i){const l=ku(e,o,t,r);return tr(e,o+2,i)||l}(e,m,i,l,d)?Pc(e,m+3,p?r.call(p,i,l,d):r(i,l,d)):Sl(e,m+3)}(Ce(),Ao(),e,o,t,r,i,l)}function Sl(e,o){const t=e[o];return t===qt?void 0:t}Symbol;let xl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=Uj}return e})();const Vj=xl,$j=class extends Vj{constructor(o,t,r){super(),this._declarationLView=o,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,t){return this.createEmbeddedViewImpl(o,t)}createEmbeddedViewImpl(o,t,r){const i=function Nu(e,o,t,r){const i=o.tView,p=np(e,i,t,4096&e[Ct]?4096:16,null,o,null,null,null,r?.injector??null,r?.dehydratedView??null);p[lg]=e[o.index];const v=e[fs];return null!==v&&(p[fs]=v.createEmbeddedView(i)),dp(i,p,t),p}(this._declarationLView,this._declarationTContainer,o,{injector:t,dehydratedView:r});return new lp(i)}};function Uj(){return function O_(e,o){return 4&e.type?new $j(o,e,Qh(e,o)):null}(Ln(),Ce())}const yw=new je("Application Initializer");let bw=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Be(yw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const l=i();if(Mp(l))t.push(l);else if(Ex(l)){const d=new Promise((p,m)=>{l.subscribe({complete:p,error:m})});t.push(d)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),FN=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const Pl=new je("LocaleId",{providedIn:"root",factory:()=>Be(Pl,Yt.Optional|Yt.SkipSelf)||function mP(){return typeof $localize<"u"&&$localize.locale||$u}()});let mf=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ft(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class gP{constructor(o,t){this.ngModuleFactory=o,this.componentFactories=t}}let ww=(()=>{class e{compileModuleSync(t){return new dw(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),l=gs(Br(t).declarations).reduce((d,p)=>{const m=rn(p);return m&&d.push(new fp(m)),d},[]);return new gP(r,l)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const zN=new je(""),xw=new je("");let yP,_P=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yP||(function E5(e){yP=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{En.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let l=-1;r&&r>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==l),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:l,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(ie(En),ie(vP),ie(xw))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),vP=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return yP?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),ju=null;const WN=new je("AllowMultipleToken"),bP=new je("PlatformDestroyListeners"),wP=new je("appBootstrapListener");function CP(e,o,t=[]){const r=`Platform: ${o}`,i=new je(r);return(l=[])=>{let d=xP();if(!d||d.injector.get(WN,!1)){const p=[...t,...l,{provide:i,useValue:!0}];e?e(p):function T5(e){if(ju&&!ju.get(WN,!1))throw new me(400,!1);(function qN(){!function Mm(e){ut=e}(()=>{throw new me(600,!1)})})(),ju=e;const o=e.get(KN);(function GN(e){e.get(By,null)?.forEach(t=>t())})(e)}(function SP(e=[],o){return es.create({name:o,providers:[{provide:Rd,useValue:"platform"},{provide:bP,useValue:new Set([()=>ju=null])},...e]})}(p,r))}return function I5(e){const o=xP();if(!o)throw new me(401,!1);return o}()}}function xP(){return ju?.get(KN)??null}let KN=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function O5(e="zone.js",o){return"noop"===e?new C$:"zone.js"===e?new En(o):e}(r?.ngZone,function PP(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const l=function Pj(e,o,t){return new T_(e,o,t)}(t.moduleType,this.injector,function XN(e){return[{provide:En,useFactory:e},{provide:gi,multi:!0,useFactory:()=>{const o=Be(QN,{optional:!0});return()=>o.initialize()}},{provide:EP,useFactory:A5},{provide:lI,useFactory:uI}]}(()=>i)),d=l.injector.get(vl,null);return i.runOutsideAngular(()=>{const p=i.onError.subscribe({next:m=>{d.handleError(m)}});l.onDestroy(()=>{R_(this._modules,l),p.unsubscribe()})}),function ZN(e,o,t){try{const r=t();return Mp(r)?r.catch(i=>{throw o.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw o.runOutsideAngular(()=>e.handleError(r)),r}}(d,i,()=>{const p=l.injector.get(bw);return p.runInitializers(),p.donePromise.then(()=>(function KO(e){jo(e,"Expected localeId to be defined"),"string"==typeof e&&(GO=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Pl,$u)||$u),this._moduleDoBootstrap(l),l))})})}bootstrapModule(t,r=[]){const i=YN({},r);return function k5(e,o,t){const r=new dw(t);return Promise.resolve(r)}(0,0,t).then(l=>this.bootstrapModuleFactory(l,i))}_moduleDoBootstrap(t){const r=t.injector.get(_f);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new me(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(bP,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(ie(es))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function YN(e,o){return Array.isArray(o)?o.reduce(YN,e):{...e,...o}}let _f=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Be(EP),this.zoneIsStable=Be(lI),this.componentTypes=[],this.components=[],this.isStable=Be(mf).hasPendingTasks.pipe(ai(t=>t?yt(!1):this.zoneIsStable),function ED(e,o=oc){return e=e??kD,Ke((t,r)=>{let i,l=!0;t.subscribe(Fn(r,d=>{const p=o(d);(l||!e(i,p))&&(l=!1,i=p,r.next(d))}))})}(),Km()),this._injector=Be(_i)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof yM;if(!this._injector.get(bw).done)throw!i&&function iu(e){const o=rn(e)||ir(e)||Lr(e);return null!==o&&o.standalone}(t),new me(405,!1);let d;d=i?t:this._injector.get(bi).resolveComponentFactory(t),this.componentTypes.push(d.componentType);const p=function D5(e){return e.isBoundToModule}(d)?void 0:this._injector.get(ff),v=d.create(es.NULL,[],r||d.selector,p),w=v.location.nativeElement,P=v.injector.get(zN,null);return P?.registerApplication(w),v.onDestroy(()=>{this.detachView(v.hostView),R_(this.components,v),P?.unregisterApplication(w)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;R_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(wP,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>R_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new me(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function R_(e,o){const t=e.indexOf(o);t>-1&&e.splice(t,1)}const EP=new je("",{providedIn:"root",factory:()=>Be(vl).handleError.bind(void 0)});function A5(){const e=Be(En),o=Be(vl);return t=>e.runOutsideAngular(()=>o.handleError(t))}let QN=(()=>{class e{constructor(){this.zone=Be(En),this.applicationRef=Be(_f)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const $5=CP(null,"core",[]);let U5=(()=>{class e{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||e)(ie(_f))};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({})}return e})();function Bp(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let VP=null;function zu(){return VP}class h4{}const cr=new je("DocumentToken");let $P=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:()=>Be(p4),providedIn:"platform"})}return e})();const SR=new je("Location Initialized");let p4=(()=>{class e extends $P{constructor(){super(),this._doc=Be(cr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zu().getBaseHref(this._doc)}onPopState(t){const r=zu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=zu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function UP(e,o){if(0==e.length)return o;if(0==o.length)return e;let t=0;return e.endsWith("/")&&t++,o.startsWith("/")&&t++,2==t?e+o.substring(1):1==t?e+o:e+"/"+o}function xR(e){const o=e.match(/#|\?|$/),t=o&&o.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function El(e){return e&&"?"!==e[0]?"?"+e:e}let Cf=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:()=>Be(ER),providedIn:"root"})}return e})();const PR=new je("appBaseHref");let ER=(()=>{class e extends Cf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Be(cr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return UP(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+El(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,l){const d=this.prepareExternalUrl(i+El(l));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,l){const d=this.prepareExternalUrl(i+El(l));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||e)(ie($P),ie(PR,8))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),kR=(()=>{class e extends Cf{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=UP(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,l){let d=this.prepareExternalUrl(i+El(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,l){let d=this.prepareExternalUrl(i+El(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||e)(ie($P),ie(PR,8))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),Vp=(()=>{class e{constructor(t){this._subject=new Le,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function _4(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(xR(DR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+El(r))}normalize(t){return e.stripTrailingSlash(function g4(e,o){if(!e||!o.startsWith(e))return o;const t=o.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:o}(this._basePath,DR(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+El(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+El(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=El;static#t=this.joinWithSlash=UP;static#n=this.stripTrailingSlash=xR;static#o=this.\u0275fac=function(r){return new(r||e)(ie(Cf))};static#r=this.\u0275prov=Ee({token:e,factory:()=>function m4(){return new Vp(ie(Cf))}(),providedIn:"root"})}return e})();function DR(e){return e.replace(/\/index.html$/,"")}function tE(e,o){o=encodeURIComponent(o);for(const t of e.split(";")){const r=t.indexOf("="),[i,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===o)return decodeURIComponent(l)}return null}const Ww=/\s+/,qw=[];let lr=(()=>{class e{constructor(t,r,i,l){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=l,this.initialClasses=qw,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Ww):qw}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Ww):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Ww).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||e)(B(Xg),B(e_),B(_s),B(_l))};static#t=this.\u0275dir=wt({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return e})();class LR{constructor(o,t,r,i){this.$implicit=o,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zr=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,l,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new LR(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===l?void 0:l);else if(null!==l){const p=r.get(l);r.move(p,d),nE(p,i)}});for(let i=0,l=r.length;i<l;i++){const p=r.get(i).context;p.index=i,p.count=l,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{nE(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(B(aa),B(xl),B(Xg))};static#t=this.\u0275dir=wt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function nE(e,o){e.context.$implicit=o.item}let sn=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new U4,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){BR("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){BR("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(B(aa),B(xl))};static#t=this.\u0275dir=wt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class U4{constructor(){this.$implicit=null,this.ngIf=null}}function BR(e,o){if(o&&!o.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${To(o)}'.`)}let Eo=(()=>{class e{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,l]=t.split("."),d=-1===i.indexOf("-")?void 0:yu.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,l?`${r}${l}`:r,d):this._renderer.removeStyle(this._ngEl.nativeElement,i,d)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static#e=this.\u0275fac=function(r){return new(r||e)(B(_s),B(e_),B(_l))};static#t=this.\u0275dir=wt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return e})(),dE=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({})}return e})();const fE="browser";function JR(e){return"server"===e}let oH=(()=>{class e{static#e=this.\u0275prov=Ee({token:e,providedIn:"root",factory:()=>new QR(ie(cr),window)})}return e})();class QR{constructor(o,t){this.document=o,this.window=t,this.offset=()=>[0,0]}setOffset(o){this.offset=Array.isArray(o)?()=>o:o}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(o){this.supportsScrolling()&&this.window.scrollTo(o[0],o[1])}scrollToAnchor(o){if(!this.supportsScrolling())return;const t=function XR(e,o){const t=e.getElementById(o)||e.getElementsByName(o)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const d=l.getElementById(o)||l.querySelector(`[name="${o}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,o);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(o){this.supportsScrolling()&&(this.window.history.scrollRestoration=o)}scrollToElement(o){const t=o.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class e2{}class TH extends h4{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class wE extends TH{static makeCurrent(){!function f4(e){VP||(VP=e)}(new wE)}onAndCancel(o,t,r){return o.addEventListener(t,r),()=>{o.removeEventListener(t,r)}}dispatchEvent(o,t){o.dispatchEvent(t)}remove(o){o.parentNode&&o.parentNode.removeChild(o)}createElement(o,t){return(t=t||this.getDefaultDocument()).createElement(o)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(o){return o.nodeType===Node.ELEMENT_NODE}isShadowRoot(o){return o instanceof DocumentFragment}getGlobalEventTarget(o,t){return"window"===t?window:"document"===t?o:"body"===t?o.body:null}getBaseHref(o){const t=function MH(){return zp=zp||document.querySelector("base"),zp?zp.getAttribute("href"):null}();return null==t?null:function IH(e){Qw=Qw||document.createElement("a"),Qw.setAttribute("href",e);const o=Qw.pathname;return"/"===o.charAt(0)?o:`/${o}`}(t)}resetBaseElement(){zp=null}getUserAgent(){return window.navigator.userAgent}getCookie(o){return tE(document.cookie,o)}}let Qw,zp=null,f2=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();const CE=new je("EventManagerPlugins");let h2=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(l=>l.supports(t)),!r)throw new me(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(ie(CE),ie(En))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();class SE{constructor(o){this._doc=o}}const xE="ng-app-id";let p2=(()=>{class e{constructor(t,r,i,l={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=l,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=JR(l),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${xE}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const l=i.get(t);return l.usage+=r,l.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,l=i?.get(r);if(l?.parentNode===t)return i.delete(r),l.removeAttribute(xE),l;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=r,this.platformIsServer&&d.setAttribute(xE,this.appId),t.appendChild(d),d}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),l=this.styleRef,d=l.get(r)?.elements;d?d.push(i):l.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(cr),ie(Bh),ie(hl,8),ie(vu))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();const rt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xf=/%COMP%/g,v2=new je("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function y2(e,o){return o.map(t=>t.replace(xf,e))}let Xw=(()=>{class e{constructor(t,r,i,l,d,p,m,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=l,this.doc=d,this.platformId=p,this.ngZone=m,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=JR(p),this.defaultRenderer=new EE(t,d,m,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===gr.ShadowDom&&(r={...r,encapsulation:gr.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof b2?i.applyToHost(t):i instanceof eC&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let l=i.get(r.id);if(!l){const d=this.doc,p=this.ngZone,m=this.eventManager,v=this.sharedStylesHost,w=this.removeStylesOnCompDestroy,P=this.platformIsServer;switch(r.encapsulation){case gr.Emulated:l=new b2(m,v,r,this.appId,w,d,p,P);break;case gr.ShadowDom:return new DE(m,v,t,r,d,p,this.nonce,P);default:l=new eC(m,v,r,w,d,p,P)}i.set(r.id,l)}return l}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(ie(h2),ie(p2),ie(Bh),ie(v2),ie(cr),ie(vu),ie(En),ie(hl))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();class EE{constructor(o,t,r,i){this.eventManager=o,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(o,t){return t?this.doc.createElementNS(rt[t]||t,o):this.doc.createElement(o)}createComment(o){return this.doc.createComment(o)}createText(o){return this.doc.createTextNode(o)}appendChild(o,t){(kE(o)?o.content:o).appendChild(t)}insertBefore(o,t,r){o&&(kE(o)?o.content:o).insertBefore(t,r)}removeChild(o,t){o&&o.removeChild(t)}selectRootElement(o,t){let r="string"==typeof o?this.doc.querySelector(o):o;if(!r)throw new me(-5104,!1);return t||(r.textContent=""),r}parentNode(o){return o.parentNode}nextSibling(o){return o.nextSibling}setAttribute(o,t,r,i){if(i){t=i+":"+t;const l=rt[i];l?o.setAttributeNS(l,t,r):o.setAttribute(t,r)}else o.setAttribute(t,r)}removeAttribute(o,t,r){if(r){const i=rt[r];i?o.removeAttributeNS(i,t):o.removeAttribute(`${r}:${t}`)}else o.removeAttribute(t)}addClass(o,t){o.classList.add(t)}removeClass(o,t){o.classList.remove(t)}setStyle(o,t,r,i){i&(yu.DashCase|yu.Important)?o.style.setProperty(t,r,i&yu.Important?"important":""):o.style[t]=r}removeStyle(o,t,r){r&yu.DashCase?o.style.removeProperty(t):o.style[t]=""}setProperty(o,t,r){null!=o&&(o[t]=r)}setValue(o,t){o.nodeValue=t}listen(o,t,r){if("string"==typeof o&&!(o=zu().getGlobalEventTarget(this.doc,o)))throw new Error(`Unsupported event target ${o} for event ${t}`);return this.eventManager.addEventListener(o,t,this.decoratePreventDefault(r))}decoratePreventDefault(o){return t=>{if("__ngUnwrap__"===t)return o;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>o(t)):o(t))&&t.preventDefault()}}}function kE(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class DE extends EE{constructor(o,t,r,i,l,d,p,m){super(o,l,d,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=y2(i.id,i.styles);for(const w of v){const P=document.createElement("style");p&&P.setAttribute("nonce",p),P.textContent=w,this.shadowRoot.appendChild(P)}}nodeOrShadowRoot(o){return o===this.hostEl?this.shadowRoot:o}appendChild(o,t){return super.appendChild(this.nodeOrShadowRoot(o),t)}insertBefore(o,t,r){return super.insertBefore(this.nodeOrShadowRoot(o),t,r)}removeChild(o,t){return super.removeChild(this.nodeOrShadowRoot(o),t)}parentNode(o){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(o)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class eC extends EE{constructor(o,t,r,i,l,d,p,m){super(o,l,d,p),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=m?y2(m,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class b2 extends eC{constructor(o,t,r,i,l,d,p,m){const v=i+"-"+r.id;super(o,t,r,l,d,p,m,v),this.contentAttr=function $q(e){return"_ngcontent-%COMP%".replace(xf,e)}(v),this.hostAttr=function Z_(e){return"_nghost-%COMP%".replace(xf,e)}(v)}applyToHost(o){this.applyStyles(),this.setAttribute(o,this.hostAttr,"")}createElement(o,t){const r=super.createElement(o,t);return super.setAttribute(r,this.contentAttr,""),r}}let AH=(()=>{class e extends SE{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(cr))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();const w2=["alt","control","meta","shift"],NH={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},RH={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let FH=(()=>{class e extends SE{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const l=e.parseEventName(r),d=e.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zu().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=e._normalizeKey(r.pop());let d="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),d="code."),w2.forEach(v=>{const w=r.indexOf(v);w>-1&&(r.splice(w,1),d+=v+".")}),d+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=i,m.fullKey=d,m}static matchEventFullKeyCode(t,r){let i=NH[t.key]||t.key,l="";return r.indexOf("code.")>-1&&(i=t.code,l="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),w2.forEach(d=>{d!==i&&(0,RH[d])(t)&&(l+=d+".")}),l+=i,l===r)}static eventCallback(t,r,i){return l=>{e.matchEventFullKeyCode(l,t)&&i.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||e)(ie(cr))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();const VH=CP($5,"browser",[{provide:vu,useValue:fE},{provide:By,useValue:function S2(){wE.makeCurrent()},multi:!0},{provide:cr,useFactory:function BH(){return function Ly(e){Fy=e}(document),document},deps:[]}]),$H=new je(""),P2=[{provide:xw,useClass:class d2{addToWindow(o){fn.getAngularTestability=(r,i=!0)=>{const l=o.findTestabilityInTree(r,i);if(null==l)throw new me(5103,!1);return l},fn.getAllAngularTestabilities=()=>o.getAllTestabilities(),fn.getAllAngularRootElements=()=>o.getAllRootElements(),fn.frameworkStabilizers||(fn.frameworkStabilizers=[]),fn.frameworkStabilizers.push(r=>{const i=fn.getAllAngularTestabilities();let l=i.length,d=!1;const p=function(m){d=d||m,l--,0==l&&r(d)};i.forEach(m=>{m.whenStable(p)})})}findTestabilityInTree(o,t,r){return null==t?null:o.getTestability(t)??(r?zu().isShadowRoot(t)?this.findTestabilityInTree(o,t.host,!0):this.findTestabilityInTree(o,t.parentElement,!0):null)}},deps:[]},{provide:zN,useClass:_P,deps:[En,vP,xw]},{provide:_P,useClass:_P,deps:[En,vP,xw]}],E2=[{provide:Rd,useValue:"root"},{provide:vl,useFactory:function LH(){return new vl},deps:[]},{provide:CE,useClass:AH,multi:!0,deps:[cr,En,vu]},{provide:CE,useClass:FH,multi:!0,deps:[cr]},Xw,p2,h2,{provide:ub,useExisting:Xw},{provide:e2,useClass:f2,deps:[]},[]];let k2=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:Bh,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(ie($H,12))};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({providers:[...E2,...P2],imports:[dE,U5]})}return e})(),tC=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||e)(ie(cr))};static#t=this.\u0275prov=Ee({token:e,factory:function(r){let i=null;return i=r?new r:function D2(){return new tC(ie(cr))}(),i},providedIn:"root"})}return e})();typeof window<"u"&&window;let Pf=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:function(r){let i=null;return i=r?new(r||e):ie(O2),i},providedIn:"root"})}return e})(),O2=(()=>{class e extends Pf{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Cr.NONE:return r;case Cr.HTML:return bc(r,"HTML")?yi(r):fM(this._doc,String(r)).toString();case Cr.STYLE:return bc(r,"Style")?yi(r):r;case Cr.SCRIPT:if(bc(r,"Script"))return yi(r);throw new me(5200,!1);case Cr.URL:return bc(r,"URL")?yi(r):ob(String(r));case Cr.RESOURCE_URL:if(bc(r,"ResourceURL"))return yi(r);throw new me(5201,!1);default:throw new me(5202,!1)}}bypassSecurityTrustHtml(t){return function OV(e){return new EV(e)}(t)}bypassSecurityTrustStyle(t){return function AV(e){return new kV(e)}(t)}bypassSecurityTrustScript(t){return function tM(e){return new DV(e)}(t)}bypassSecurityTrustUrl(t){return function NV(e){return new TV(e)}(t)}bypassSecurityTrustResourceUrl(t){return function RV(e){return new MV(e)}(t)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(cr))};static#t=this.\u0275prov=Ee({token:e,factory:function(r){let i=null;return i=r?new r:function KH(e){return new O2(e.get(cr))}(ie(es)),i},providedIn:"root"})}return e})();const{isArray:YH}=Array,{getPrototypeOf:JH,prototype:R2,keys:QH}=Object;function F2(e){if(1===e.length){const o=e[0];if(YH(o))return{args:o,keys:null};if(function NE(e){return e&&"object"==typeof e&&JH(e)===R2}(o)){const t=QH(o);return{args:t.map(r=>o[r]),keys:t}}}return{args:e,keys:null}}const{isArray:XH}=Array;function nC(e){return Mt(o=>function ez(e,o){return XH(o)?e(...o):e(o)}(e,o))}function RE(e,o){return e.reduce((t,r,i)=>(t[r]=o[i],t),{})}function FE(...e){const o=hd(e),t=Wm(e),{args:r,keys:i}=F2(e);if(0===r.length)return bo([],o);const l=new Zn(function tz(e,o,t=oc){return r=>{L2(o,()=>{const{length:i}=e,l=new Array(i);let d=i,p=i;for(let m=0;m<i;m++)L2(o,()=>{const v=bo(e[m],o);let w=!1;v.subscribe(Fn(r,P=>{l[m]=P,w||(w=!0,p--),p||r.next(t(l.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,o,i?d=>RE(i,d):oc));return t?l.pipe(nC(t)):l}function L2(e,o,t){e?Hi(t,e,o):o()}const oC=Yl(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function ha(...e){return function B2(){return sc(1)}()(bo(e,hd(e)))}function Y_(e){return new Zn(o=>{Or(e()).subscribe(o)})}function rC(e,o){const t=an(e)?e:()=>e,r=i=>i.error(t());return new Zn(o?i=>o.schedule(r,0,i):r)}function LE(){return Ke((e,o)=>{let t=null;e._refCount++;const r=Fn(o,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,l=t;t=null,i&&(!l||i===l)&&i.unsubscribe(),o.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class V2 extends Zn{constructor(o,t){super(),this.source=o,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Nt(o)&&(this.lift=o.lift)}_subscribe(o){return this.getSubject().subscribe(o)}getSubject(){const o=this._subject;return(!o||o.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:o}=this;this._subject=this._connection=null,o?.unsubscribe()}connect(){let o=this._connection;if(!o){o=this._connection=new Pt;const t=this.getSubject();o.add(this.source.subscribe(Fn(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),o.closed&&(this._connection=null,o=Pt.EMPTY)}return o}refCount(){return LE()(this)}}function Ef(e){return e<=0?()=>ii:Ke((o,t)=>{let r=0;o.subscribe(Fn(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function Wa(e,o){return Ke((t,r)=>{let i=0;t.subscribe(Fn(r,l=>e.call(o,l,i++)&&r.next(l)))})}function J_(e){return Ke((o,t)=>{let r=!1;o.subscribe(Fn(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function oz(e=Xq){return Ke((o,t)=>{let r=!1;o.subscribe(Fn(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function Xq(){return new oC}function to(e,o){const t=arguments.length>=2;return r=>r.pipe(e?Wa((i,l)=>e(i,l,r)):oc,Ef(1),t?J_(o):oz(()=>new oC))}function Ku(e,o){return an(o)?Jo(e,o,1):Jo(e,1)}function os(e,o,t){const r=an(e)||o||t?{next:e,error:o,complete:t}:e;return r?Ke((i,l)=>{var d;null===(d=r.subscribe)||void 0===d||d.call(r);let p=!0;i.subscribe(Fn(l,m=>{var v;null===(v=r.next)||void 0===v||v.call(r,m),l.next(m)},()=>{var m;p=!1,null===(m=r.complete)||void 0===m||m.call(r),l.complete()},m=>{var v;p=!1,null===(v=r.error)||void 0===v||v.call(r,m),l.error(m)},()=>{var m,v;p&&(null===(m=r.unsubscribe)||void 0===m||m.call(r)),null===(v=r.finalize)||void 0===v||v.call(r)}))}):oc}function pa(e){return Ke((o,t)=>{let l,r=null,i=!1;r=o.subscribe(Fn(t,void 0,void 0,d=>{l=Or(e(d,pa(e)(o))),r?(r.unsubscribe(),r=null,l.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,l.subscribe(t))})}function BE(e){return e<=0?()=>ii:Ke((o,t)=>{let r=[];o.subscribe(Fn(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function $2(e){return Mt(()=>e)}function Q_(e){return Ke((o,t)=>{try{o.subscribe(t)}finally{t.add(e)}})}function VE(e){return Ke((o,t)=>{Or(e).subscribe(Fn(t,()=>t.complete(),$o)),!t.closed&&o.subscribe(t)})}const Xt="primary",Wp=Symbol("RouteTitle");class sC{constructor(o){this.params=o||{}}has(o){return Object.prototype.hasOwnProperty.call(this.params,o)}get(o){if(this.has(o)){const t=this.params[o];return Array.isArray(t)?t[0]:t}return null}getAll(o){if(this.has(o)){const t=this.params[o];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qp(e){return new sC(e)}function U2(e,o,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(o.hasChildren()||r.length<e.length))return null;const i={};for(let l=0;l<r.length;l++){const d=r[l],p=e[l];if(d.startsWith(":"))i[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function qa(e,o){const t=e?$E(e):void 0,r=o?$E(o):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let l=0;l<t.length;l++)if(i=t[l],!j2(e[i],o[i]))return!1;return!0}function $E(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function j2(e,o){if(Array.isArray(e)&&Array.isArray(o)){if(e.length!==o.length)return!1;const t=[...e].sort(),r=[...o].sort();return t.every((i,l)=>r[l]===i)}return e===o}function UE(e){return e.length>0?e[e.length-1]:null}function kf(e){return function AE(e){return!!e&&(e instanceof Zn||an(e.lift)&&an(e.subscribe))}(e)?e:Mp(e)?bo(Promise.resolve(e)):yt(e)}const eG={exact:function jE(e,o,t){if(!Ml(e.segments,o.segments)||!X_(e.segments,o.segments,t)||e.numberOfChildren!==o.numberOfChildren)return!1;for(const r in o.children)if(!e.children[r]||!jE(e.children[r],o.children[r],t))return!1;return!0},subset:W2},H2={exact:function cz(e,o){return qa(e,o)},subset:function HE(e,o){return Object.keys(o).length<=Object.keys(e).length&&Object.keys(o).every(t=>j2(e[t],o[t]))},ignored:()=>!0};function z2(e,o,t){return eG[t.paths](e.root,o.root,t.matrixParams)&&H2[t.queryParams](e.queryParams,o.queryParams)&&!("exact"===t.fragment&&e.fragment!==o.fragment)}function W2(e,o,t){return q2(e,o,o.segments,t)}function q2(e,o,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!Ml(i,t)||o.hasChildren()||!X_(i,t,r))}if(e.segments.length===t.length){if(!Ml(e.segments,t)||!X_(e.segments,t,r))return!1;for(const i in o.children)if(!e.children[i]||!W2(e.children[i],o.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),l=t.slice(e.segments.length);return!!(Ml(e.segments,i)&&X_(e.segments,i,r)&&e.children[Xt])&&q2(e.children[Xt],o,l,r)}}function X_(e,o,t){return o.every((r,i)=>H2[t](e[i].parameters,r.parameters))}class Gp{constructor(o=new Vn([],{}),t={},r=null){this.root=o,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qp(this.queryParams)),this._queryParamMap}toString(){return uz.serialize(this)}}class Vn{constructor(o,t){this.segments=o,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return iC(this)}}class ev{constructor(o,t){this.path=o,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qp(this.parameters)),this._parameterMap}toString(){return Jp(this)}}function Ml(e,o){return e.length===o.length&&e.every((t,r)=>t.path===o[r].path)}let Kp=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:()=>new zE,providedIn:"root"})}return e})();class zE{parse(o){const t=new Qp(o);return new Gp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(o){const t=`/${Zp(o.root,!0)}`,r=function fz(e){const o=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${Df(t)}=${Df(i)}`).join("&"):`${Df(t)}=${Df(r)}`}).filter(t=>!!t);return o.length?`?${o.join("&")}`:""}(o.queryParams);return`${t}${r}${"string"==typeof o.fragment?`#${function dz(e){return encodeURI(e)}(o.fragment)}`:""}`}}const uz=new zE;function iC(e){return e.segments.map(o=>Jp(o)).join("/")}function Zp(e,o){if(!e.hasChildren())return iC(e);if(o){const t=e.children[Xt]?Zp(e.children[Xt],!1):"",r=[];return Object.entries(e.children).forEach(([i,l])=>{i!==Xt&&r.push(`${i}:${Zp(l,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function G2(e,o){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===Xt&&(t=t.concat(o(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Xt&&(t=t.concat(o(i,r)))}),t}(e,(r,i)=>i===Xt?[Zp(e.children[Xt],!1)]:[`${i}:${Zp(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Xt]?`${iC(e)}/${t[0]}`:`${iC(e)}/(${t.join("//")})`}}function K2(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Df(e){return K2(e).replace(/%3B/gi,";")}function Yp(e){return K2(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function aC(e){return decodeURIComponent(e)}function cC(e){return aC(e.replace(/\+/g,"%20"))}function Jp(e){return`${Yp(e.path)}${function Z2(e){return Object.keys(e).map(o=>`;${Yp(o)}=${Yp(e[o])}`).join("")}(e.parameters)}`}const Y2=/^[^\/()?;#]+/;function lC(e){const o=e.match(Y2);return o?o[0]:""}const J2=/^[^\/()?;=#]+/,WE=/^[^=?&#]+/,pz=/^[^&#]+/;class Qp{constructor(o){this.url=o,this.remaining=o}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vn([],{}):new Vn([],this.parseChildren())}parseQueryParams(){const o={};if(this.consumeOptional("?"))do{this.parseQueryParam(o)}while(this.consumeOptional("&"));return o}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const o=[];for(this.peekStartsWith("(")||o.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),o.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(o.length>0||Object.keys(t).length>0)&&(r[Xt]=new Vn(o,t)),r}parseSegment(){const o=lC(this.remaining);if(""===o&&this.peekStartsWith(";"))throw new me(4009,!1);return this.capture(o),new ev(aC(o),this.parseMatrixParams())}parseMatrixParams(){const o={};for(;this.consumeOptional(";");)this.parseParam(o);return o}parseParam(o){const t=function hz(e){const o=e.match(J2);return o?o[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=lC(this.remaining);i&&(r=i,this.capture(r))}o[aC(t)]=aC(r)}parseQueryParam(o){const t=function uC(e){const o=e.match(WE);return o?o[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function mz(e){const o=e.match(pz);return o?o[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=cC(t),l=cC(r);if(o.hasOwnProperty(i)){let d=o[i];Array.isArray(d)||(d=[d],o[i]=d),d.push(l)}else o[i]=l}parseParens(o){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=lC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new me(4010,!1);let l;r.indexOf(":")>-1?(l=r.slice(0,r.indexOf(":")),this.capture(l),this.capture(":")):o&&(l=Xt);const d=this.parseChildren();t[l]=1===Object.keys(d).length?d[Xt]:new Vn([],d),this.consumeOptional("//")}return t}peekStartsWith(o){return this.remaining.startsWith(o)}consumeOptional(o){return!!this.peekStartsWith(o)&&(this.remaining=this.remaining.substring(o.length),!0)}capture(o){if(!this.consumeOptional(o))throw new me(4011,!1)}}function qE(e){return e.segments.length>0?new Vn([],{[Xt]:e}):e}function Q2(e){const o={};for(const r of Object.keys(e.children)){const l=Q2(e.children[r]);if(r===Xt&&0===l.segments.length&&l.hasChildren())for(const[d,p]of Object.entries(l.children))o[d]=p;else(l.segments.length>0||l.hasChildren())&&(o[r]=l)}return function X2(e){if(1===e.numberOfChildren&&e.children[Xt]){const o=e.children[Xt];return new Vn(e.segments.concat(o.segments),o.children)}return e}(new Vn(e.segments,o))}function Il(e){return e instanceof Gp}function eF(e){let o;const i=qE(function t(l){const d={};for(const m of l.children){const v=t(m);d[m.outlet]=v}const p=new Vn(l.url,d);return l===e&&(o=p),p}(e.root));return o??i}function tF(e,o,t,r){let i=e;for(;i.parent;)i=i.parent;if(0===o.length)return KE(i,i,i,t,r);const l=function gz(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new oF(!0,0,e);let o=0,t=!1;const r=e.reduce((i,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const p={};return Object.entries(l.outlets).forEach(([m,v])=>{p[m]="string"==typeof v?v.split("/"):v}),[...i,{outlets:p}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===d?(l.split("/").forEach((p,m)=>{0==m&&"."===p||(0==m&&""===p?t=!0:".."===p?o++:""!=p&&i.push(p))}),i):[...i,l]},[]);return new oF(t,o,r)}(o);if(l.toRoot())return KE(i,i,new Vn([],{}),t,r);const d=function _z(e,o,t){if(e.isAbsolute)return new fC(o,!0,0);if(!t)return new fC(o,!1,NaN);if(null===t.parent)return new fC(t,!0,0);const r=dC(e.commands[0])?0:1;return function vz(e,o,t){let r=e,i=o,l=t;for(;l>i;){if(l-=i,r=r.parent,!r)throw new me(4005,!1);i=r.segments.length}return new fC(r,!1,i-l)}(t,t.segments.length-1+r,e.numberOfDoubleDots)}(l,i,e),p=d.processChildren?Ol(d.segmentGroup,d.index,l.commands):sF(d.segmentGroup,d.index,l.commands);return KE(i,d.segmentGroup,p,t,r)}function dC(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Tf(e){return"object"==typeof e&&null!=e&&e.outlets}function KE(e,o,t,r,i){let d,l={};r&&Object.entries(r).forEach(([m,v])=>{l[m]=Array.isArray(v)?v.map(w=>`${w}`):`${v}`}),d=e===o?t:nF(e,o,t);const p=qE(Q2(d));return new Gp(p,l,i)}function nF(e,o,t){const r={};return Object.entries(e.children).forEach(([i,l])=>{r[i]=l===o?t:nF(l,o,t)}),new Vn(e.segments,r)}class oF{constructor(o,t,r){if(this.isAbsolute=o,this.numberOfDoubleDots=t,this.commands=r,o&&r.length>0&&dC(r[0]))throw new me(4003,!1);const i=r.find(Tf);if(i&&i!==UE(r))throw new me(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fC{constructor(o,t,r){this.segmentGroup=o,this.processChildren=t,this.index=r}}function sF(e,o,t){if(e||(e=new Vn([],{})),0===e.segments.length&&e.hasChildren())return Ol(e,o,t);const r=function yz(e,o,t){let r=0,i=o;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return l;const d=e.segments[i],p=t[r];if(Tf(p))break;const m=`${p}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!iF(m,v,d))return l;r+=2}else{if(!iF(m,{},d))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,o,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const l=new Vn(e.segments.slice(0,r.pathIndex),{});return l.children[Xt]=new Vn(e.segments.slice(r.pathIndex),e.children),Ol(l,0,i)}return r.match&&0===i.length?new Vn(e.segments,{}):r.match&&!e.hasChildren()?ZE(e,o,t):r.match?Ol(e,0,i):ZE(e,o,t)}function Ol(e,o,t){if(0===t.length)return new Vn(e.segments,{});{const r=function rF(e){return Tf(e[0])?e[0].outlets:{[Xt]:e}}(t),i={};if(Object.keys(r).some(l=>l!==Xt)&&e.children[Xt]&&1===e.numberOfChildren&&0===e.children[Xt].segments.length){const l=Ol(e.children[Xt],o,t);return new Vn(e.segments,l.children)}return Object.entries(r).forEach(([l,d])=>{"string"==typeof d&&(d=[d]),null!==d&&(i[l]=sF(e.children[l],o,d))}),Object.entries(e.children).forEach(([l,d])=>{void 0===r[l]&&(i[l]=d)}),new Vn(e.segments,i)}}function ZE(e,o,t){const r=e.segments.slice(0,o);let i=0;for(;i<t.length;){const l=t[i];if(Tf(l)){const m=YE(l.outlets);return new Vn(r,m)}if(0===i&&dC(t[0])){r.push(new ev(e.segments[o].path,JE(t[0]))),i++;continue}const d=Tf(l)?l.outlets[Xt]:`${l}`,p=i<t.length-1?t[i+1]:null;d&&p&&dC(p)?(r.push(new ev(d,JE(p))),i+=2):(r.push(new ev(d,{})),i++)}return new Vn(r,{})}function YE(e){const o={};return Object.entries(e).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(o[t]=ZE(new Vn([],{}),0,r))}),o}function JE(e){const o={};return Object.entries(e).forEach(([t,r])=>o[t]=`${r}`),o}function iF(e,o,t){return e==t.path&&qa(o,t.parameters)}const tv="imperative";class Ac{constructor(o,t){this.id=o,this.url=t}}class hC extends Ac{constructor(o,t,r="imperative",i=null){super(o,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ga extends Ac{constructor(o,t,r){super(o,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xp extends Ac{constructor(o,t,r,i){super(o,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class em extends Ac{constructor(o,t,r,i){super(o,t),this.reason=r,this.code=i,this.type=16}}class pC extends Ac{constructor(o,t,r,i){super(o,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class aF extends Ac{constructor(o,t,r,i){super(o,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tG extends Ac{constructor(o,t,r,i){super(o,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bz extends Ac{constructor(o,t,r,i,l){super(o,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cF extends Ac{constructor(o,t,r,i){super(o,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lF extends Ac{constructor(o,t,r,i){super(o,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mC{constructor(o){this.route=o,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class uF{constructor(o){this.route=o,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wz{constructor(o){this.snapshot=o,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cz{constructor(o){this.snapshot=o,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sz{constructor(o){this.snapshot=o,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xz{constructor(o){this.snapshot=o,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dF{constructor(o,t,r){this.routerEvent=o,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class QE{}class XE{constructor(o){this.url=o}}class fF{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new nv,this.attachRef=null}}let nv=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new fF,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class ek{constructor(o){this._root=o}get root(){return this._root.value}parent(o){const t=this.pathFromRoot(o);return t.length>1?t[t.length-2]:null}children(o){const t=tk(o,this._root);return t?t.children.map(r=>r.value):[]}firstChild(o){const t=tk(o,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(o){const t=nk(o,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==o)}pathFromRoot(o){return nk(o,this._root).map(t=>t.value)}}function tk(e,o){if(e===o.value)return o;for(const t of o.children){const r=tk(e,t);if(r)return r}return null}function nk(e,o){if(e===o.value)return[o];for(const t of o.children){const r=nk(e,t);if(r.length)return r.unshift(o),r}return[]}class Ka{constructor(o,t){this.value=o,this.children=t}toString(){return`TreeNode(${this.value})`}}function ma(e){const o={};return e&&e.children.forEach(t=>o[t.value.outlet]=t),o}class ok extends ek{constructor(o,t){super(o),this.snapshot=t,rk(this,o)}toString(){return this.snapshot.toString()}}function tm(e,o){const t=function gC(e,o){const d=new vC([],{},{},"",{},Xt,o,null,{});return new Ez("",new Ka(d,[]))}(0,o),r=new ft([new ev("",{})]),i=new ft({}),l=new ft({}),d=new ft({}),p=new ft(""),m=new $n(r,i,d,p,l,Xt,o,t.root);return m.snapshot=t.root,new ok(new Ka(m,[]),t)}class $n{constructor(o,t,r,i,l,d,p,m){this.urlSubject=o,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=l,this.outlet=d,this.component=p,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(Mt(v=>v[Wp]))??yt(void 0),this.url=o,this.params=t,this.queryParams=r,this.fragment=i,this.data=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Mt(o=>qp(o)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Mt(o=>qp(o)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _C(e,o,t="emptyOnly"){let r;const{routeConfig:i}=e;return r=null===o||"always"!==t&&""!==i?.path&&(o.component||o.routeConfig?.loadComponent)?{params:e.params,data:e.data,resolve:{...e.data,...e._resolvedData??{}}}:{params:{...o.params,...e.params},data:{...o.data,...e.data},resolve:{...e.data,...o.data,...i?.data,...e._resolvedData}},i&&pF(i)&&(r.resolve[Wp]=i.title),r}class vC{get title(){return this.data?.[Wp]}constructor(o,t,r,i,l,d,p,m,v){this.url=o,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=p,this.routeConfig=m,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ez extends ek{constructor(o,t){super(t),this.url=o,rk(this,t)}toString(){return hF(this._root)}}function rk(e,o){o.value._routerState=e,o.children.forEach(t=>rk(e,t))}function hF(e){const o=e.children.length>0?` { ${e.children.map(hF).join(", ")} } `:"";return`${e.value}${o}`}function sk(e){if(e.snapshot){const o=e.snapshot,t=e._futureSnapshot;e.snapshot=t,qa(o.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),o.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),qa(o.params,t.params)||e.paramsSubject.next(t.params),function az(e,o){if(e.length!==o.length)return!1;for(let t=0;t<e.length;++t)if(!qa(e[t],o[t]))return!1;return!0}(o.url,t.url)||e.urlSubject.next(t.url),qa(o.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function ik(e,o){const t=qa(e.params,o.params)&&function lz(e,o){return Ml(e,o)&&e.every((t,r)=>qa(t.parameters,o[r].parameters))}(e.url,o.url);return t&&!(!e.parent!=!o.parent)&&(!e.parent||ik(e.parent,o.parent))}function pF(e){return"string"==typeof e.title||null===e.title}let Gs=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xt,this.activateEvents=new Le,this.deactivateEvents=new Le,this.attachEvents=new Le,this.detachEvents=new Le,this.parentContexts=Be(nv),this.location=Be(aa),this.changeDetector=Be(a_),this.environmentInjector=Be(_i),this.inputBinder=Be(nm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new me(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new me(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new me(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new me(4013,!1);this._activatedRoute=t;const i=this.location,d=t.snapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,m=new ov(t,p,i.injector);this.activated=i.createComponent(d,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=wt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ho]})}return e})();class ov{constructor(o,t,r){this.route=o,this.childContexts=t,this.parent=r}get(o,t){return o===$n?this.route:o===nv?this.childContexts:this.parent.get(o,t)}}const nm=new je("");let mF=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=FE([r.queryParams,r.params,r.data]).pipe(ai(([l,d,p],m)=>(p={...l,...d,...p},0===m?yt(p):Promise.resolve(p)))).subscribe(l=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const d=function d4(e){const o=rn(e);if(!o)return null;const t=new fp(o);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}(r.component);if(d)for(const{templateName:p}of d.inputs)t.activatedComponentRef.setInput(p,l[p]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();function Mf(e,o,t){if(t&&e.shouldReuseRoute(o.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=o.value;const i=function Dz(e,o,t){return o.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Mf(e,r,i);return Mf(e,r)})}(e,o,t);return new Ka(r,i)}{if(e.shouldAttach(o.value)){const l=e.retrieve(o.value);if(null!==l){const d=l.route;return d.value._futureSnapshot=o.value,d.children=o.children.map(p=>Mf(e,p)),d}}const r=function rv(e){return new $n(new ft(e.url),new ft(e.params),new ft(e.queryParams),new ft(e.fragment),new ft(e.data),e.outlet,e.component,e)}(o.value),i=o.children.map(l=>Mf(e,l));return new Ka(r,i)}}const yC="ngNavigationCancelingError";function gF(e,o){const{redirectTo:t,navigationBehaviorOptions:r}=Il(o)?{redirectTo:o,navigationBehaviorOptions:void 0}:o,i=_F(!1,0,o);return i.url=t,i.navigationBehaviorOptions=r,i}function _F(e,o,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[yC]=!0,r.cancellationCode=o,t&&(r.url=t),r}function vF(e){return e&&e[yC]}let yF=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=ne({type:e,selectors:[["ng-component"]],standalone:!0,features:[Wx],decls:1,vars:0,template:function(r,i){1&r&&Q(0,"router-outlet")},dependencies:[Gs],encapsulation:2})}return e})();function ck(e){const o=e.children&&e.children.map(ck),t=o?{...e,children:o}:{...e};return!t.component&&!t.loadComponent&&(o||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=yF),t}function Nc(e){return e.outlet||Xt}function If(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let o=e.parent;o;o=o.parent){const t=o.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class lk{constructor(o,t,r,i,l){this.routeReuseStrategy=o,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=l}activate(o){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,o),sk(this.futureState.root),this.activateChildRoutes(t,r,o)}deactivateChildRoutes(o,t,r){const i=ma(t);o.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,i[d],r),delete i[d]}),Object.values(i).forEach(l=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(o,t,r){const i=o.value,l=t?t.value:null;if(i===l)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(o,t,d.children)}else this.deactivateChildRoutes(o,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(o,t){o.value.component&&this.routeReuseStrategy.shouldDetach(o.value.snapshot)?this.detachAndStoreRouteSubtree(o,t):this.deactivateRouteAndOutlet(o,t)}detachAndStoreRouteSubtree(o,t){const r=t.getContext(o.value.outlet),i=r&&o.value.component?r.children:t,l=ma(o);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],i);if(r&&r.outlet){const d=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(o.value.snapshot,{componentRef:d,route:o,contexts:p})}}deactivateRouteAndOutlet(o,t){const r=t.getContext(o.value.outlet),i=r&&o.value.component?r.children:t,l=ma(o);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(o,t,r){const i=ma(t);o.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new xz(l.value.snapshot))}),o.children.length&&this.forwardEvent(new Cz(o.value.snapshot))}activateRoutes(o,t,r){const i=o.value,l=t?t.value:null;if(sk(i),i===l)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(o,t,d.children)}else this.activateChildRoutes(o,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),sk(p.route.value),this.activateChildRoutes(o,null,d.children)}else{const p=If(i.snapshot);d.attachRef=null,d.route=i,d.injector=p,d.outlet&&d.outlet.activateWith(i,d.injector),this.activateChildRoutes(o,null,d.children)}}else this.activateChildRoutes(o,null,r)}}class SF{constructor(o){this.path=o,this.route=this.path[this.path.length-1]}}class wC{constructor(o,t){this.component=o,this.route=t}}function Fz(e,o,t){const r=e._root;return CC(r,o?o._root:null,t,[r.value])}function om(e,o){const t=Symbol(),r=o.get(e,t);return r===t?"function"!=typeof e||function ny(e){return null!==Xc(e)}(e)?o.get(e):e:r}function CC(e,o,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=ma(o);return e.children.forEach(d=>{(function oG(e,o,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=e.value,d=o?o.value:null,p=t?t.getContext(e.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const m=function xF(e,o,t){if("function"==typeof t)return t(e,o);switch(t){case"pathParamsChange":return!Ml(e.url,o.url);case"pathParamsOrQueryParamsChange":return!Ml(e.url,o.url)||!qa(e.queryParams,o.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ik(e,o)||!qa(e.queryParams,o.queryParams);default:return!ik(e,o)}}(d,l,l.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new SF(r)):(l.data=d.data,l._resolvedData=d._resolvedData),CC(e,o,l.component?p?p.children:null:t,r,i),m&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new wC(p.outlet.component,d))}else d&&sv(o,p,i),i.canActivateChecks.push(new SF(r)),CC(e,null,l.component?p?p.children:null:t,r,i)})(d,l[d.value.outlet],t,r.concat([d.value]),i),delete l[d.value.outlet]}),Object.entries(l).forEach(([d,p])=>sv(p,t.getContext(d),i)),i}function sv(e,o,t){const r=ma(e),i=e.value;Object.entries(r).forEach(([l,d])=>{sv(d,i.component?o?o.children.getContext(l):null:o,t)}),t.canDeactivateChecks.push(new wC(i.component&&o&&o.outlet&&o.outlet.isActivated?o.outlet.component:null,i))}function rm(e){return"function"==typeof e}function EF(e){return e instanceof oC||"EmptyError"===e?.name}const uk=Symbol("INITIAL_VALUE");function iv(){return ai(e=>FE(e.map(o=>o.pipe(Ef(1),function nz(...e){const o=hd(e);return Ke((t,r)=>{(o?ha(e,t,o):ha(e,t)).subscribe(r)})}(uk)))).pipe(Mt(o=>{for(const t of o)if(!0!==t){if(t===uk)return uk;if(!1===t||t instanceof Gp)return t}return!0}),Wa(o=>o!==uk),Ef(1)))}function sm(e){return function Ut(...e){return Da(e)}(os(o=>{if(Il(o))throw gF(0,o)}),Mt(o=>!0===o))}class im{constructor(o){this.segmentGroup=o||null}}class dk extends Error{constructor(o){super(),this.urlTree=o}}function Al(e){return rC(new im(e))}class Yz{constructor(o,t){this.urlSerializer=o,this.urlTree=t}noMatchError(o){return new me(4002,!1)}lineralizeSegments(o,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return yt(r);if(i.numberOfChildren>1||!i.children[Xt])return rC(new me(4e3,!1));i=i.children[Xt]}}applyRedirectCommands(o,t,r){const i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),o,r);if(t.startsWith("/"))throw new dk(i);return i}applyRedirectCreateUrlTree(o,t,r,i){const l=this.createSegmentGroup(o,t.root,r,i);return new Gp(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(o,t){const r={};return Object.entries(o).forEach(([i,l])=>{if("string"==typeof l&&l.startsWith(":")){const p=l.substring(1);r[i]=t[p]}else r[i]=l}),r}createSegmentGroup(o,t,r,i){const l=this.createSegments(o,t.segments,r,i);let d={};return Object.entries(t.children).forEach(([p,m])=>{d[p]=this.createSegmentGroup(o,m,r,i)}),new Vn(l,d)}createSegments(o,t,r,i){return t.map(l=>l.path.startsWith(":")?this.findPosParam(o,l,i):this.findOrReturn(l,r))}findPosParam(o,t,r){const i=r[t.path.substring(1)];if(!i)throw new me(4001,!1);return i}findOrReturn(o,t){let r=0;for(const i of t){if(i.path===o.path)return t.splice(r),i;r++}return o}}const am={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function IF(e,o,t,r,i){const l=SC(e,o,t);return l.matched?(r=function Mz(e,o){return e.providers&&!e._injector&&(e._injector=fw(e.providers,o,`Route: ${e.path}`)),e._injector??o}(o,r),function Kz(e,o,t,r){const i=o.canMatch;return i&&0!==i.length?yt(i.map(d=>{const p=om(d,e);return kf(function PF(e){return e&&rm(e.canMatch)}(p)?p.canMatch(o,t):e.runInContext(()=>p(o,t)))})).pipe(iv(),sm()):yt(!0)}(r,o,t).pipe(Mt(d=>!0===d?l:{...am}))):yt(l)}function SC(e,o,t){if(""===o.path)return"full"===o.pathMatch&&(e.hasChildren()||t.length>0)?{...am}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(o.matcher||U2)(t,e,o);if(!i)return{...am};const l={};Object.entries(i.posParams??{}).forEach(([p,m])=>{l[p]=m.path});const d=i.consumed.length>0?{...l,...i.consumed[i.consumed.length-1].parameters}:l;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:d,positionalParamSegments:i.posParams??{}}}function OF(e,o,t,r){return t.length>0&&function Qz(e,o,t){return t.some(r=>xC(e,o,r)&&Nc(r)!==Xt)}(e,t,r)?{segmentGroup:new Vn(o,Jz(r,new Vn(t,e.children))),slicedSegments:[]}:0===t.length&&function Xz(e,o,t){return t.some(r=>xC(e,o,r))}(e,t,r)?{segmentGroup:new Vn(e.segments,AF(e,0,t,r,e.children)),slicedSegments:t}:{segmentGroup:new Vn(e.segments,e.children),slicedSegments:t}}function AF(e,o,t,r,i){const l={};for(const d of r)if(xC(e,t,d)&&!i[Nc(d)]){const p=new Vn([],{});l[Nc(d)]=p}return{...i,...l}}function Jz(e,o){const t={};t[Xt]=o;for(const r of e)if(""===r.path&&Nc(r)!==Xt){const i=new Vn([],{});t[Nc(r)]=i}return t}function xC(e,o,t){return(!(e.hasChildren()||o.length>0)||"full"!==t.pathMatch)&&""===t.path}class n6{}class FF{constructor(o,t,r,i,l,d,p){this.injector=o,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=l,this.paramsInheritanceStrategy=d,this.urlSerializer=p,this.applyRedirects=new Yz(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(o){return new me(4002,!1)}recognize(){const o=OF(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(o).pipe(Mt(t=>{const r=new vC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,{}),i=new Ka(r,t),l=new Ez("",i),d=function GE(e,o,t=null,r=null){return tF(eF(e),o,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,l.url=this.urlSerializer.serialize(d),this.inheritParamsAndData(l._root,null),{state:l,tree:d}}))}match(o){return this.processSegmentGroup(this.injector,this.config,o,Xt).pipe(pa(r=>{if(r instanceof dk)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof im?this.noMatchError(r):r}))}inheritParamsAndData(o,t){const r=o.value,i=_C(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),o.children.forEach(l=>this.inheritParamsAndData(l,r))}processSegmentGroup(o,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(o,t,r):this.processSegment(o,t,r,r.segments,i,!0).pipe(Mt(l=>l instanceof Ka?[l]:[]))}processChildren(o,t,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return bo(i).pipe(Ku(l=>{const d=r.children[l],p=function Nz(e,o){const t=e.filter(r=>Nc(r)===o);return t.push(...e.filter(r=>Nc(r)!==o)),t}(t,l);return this.processSegmentGroup(o,p,d,l)}),function sz(e,o){return Ke(function rz(e,o,t,r,i){return(l,d)=>{let p=t,m=o,v=0;l.subscribe(Fn(d,w=>{const P=v++;m=p?e(m,w,P):(p=!0,w),r&&d.next(m)},i&&(()=>{p&&d.next(m),d.complete()})))}}(e,o,arguments.length>=2,!0))}((l,d)=>(l.push(...d),l)),J_(null),function iz(e,o){const t=arguments.length>=2;return r=>r.pipe(e?Wa((i,l)=>e(i,l,r)):oc,BE(1),t?J_(o):oz(()=>new oC))}(),Jo(l=>{if(null===l)return Al(r);const d=fk(l);return function o6(e){e.sort((o,t)=>o.value.outlet===Xt?-1:t.value.outlet===Xt?1:o.value.outlet.localeCompare(t.value.outlet))}(d),yt(d)}))}processSegment(o,t,r,i,l,d){return bo(t).pipe(Ku(p=>this.processSegmentAgainstRoute(p._injector??o,t,p,r,i,l,d).pipe(pa(m=>{if(m instanceof im)return yt(null);throw m}))),to(p=>!!p),pa(p=>{if(EF(p))return function t6(e,o,t){return 0===o.length&&!e.children[t]}(r,i,l)?yt(new n6):Al(r);throw p}))}processSegmentAgainstRoute(o,t,r,i,l,d,p){return function e6(e,o,t,r){return!!(Nc(e)===r||r!==Xt&&xC(o,t,e))&&("**"===e.path||SC(o,e,t).matched)}(r,i,l,d)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(o,i,r,l,d):this.allowRedirects&&p?this.expandSegmentAgainstRouteUsingRedirect(o,i,t,r,l,d):Al(i):Al(i)}expandSegmentAgainstRouteUsingRedirect(o,t,r,i,l,d){const{matched:p,consumedSegments:m,positionalParamSegments:v,remainingSegments:w}="**"===i.path?BF(l):SC(t,i,l);if(!p)return Al(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const P=this.applyRedirects.applyRedirectCommands(m,i.redirectTo,v);return this.applyRedirects.lineralizeSegments(i,P).pipe(Jo(R=>this.processSegment(o,r,t,R.concat(w),d,!1)))}matchSegmentAgainstRoute(o,t,r,i,l){let d;return"**"===r.path?(d=yt(BF(i)),t.children={}):d=IF(t,r,i,o),d.pipe(ai(p=>p.matched?this.getChildConfig(o=r._injector??o,r,i).pipe(ai(({routes:m})=>{const v=r._loadedInjector??o,{consumedSegments:w,remainingSegments:P,parameters:R}=p,$=new vC(w,R,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function LF(e){return e.data||{}}(r),Nc(r),r.component??r._loadedComponent??null,r,function i6(e){return e.resolve||{}}(r)),{segmentGroup:H,slicedSegments:Y}=OF(t,w,P,m);if(0===Y.length&&H.hasChildren())return this.processChildren(v,m,H).pipe(Mt(_e=>null===_e?null:new Ka($,_e)));if(0===m.length&&0===Y.length)return yt(new Ka($,[]));const te=Nc(r)===l;return this.processSegment(v,m,H,Y,te?Xt:l,!0).pipe(Mt(_e=>new Ka($,_e instanceof Ka?[_e]:[])))})):Al(t)))}getChildConfig(o,t,r){return t.children?yt({routes:t.children,injector:o}):t.loadChildren?void 0!==t._loadedRoutes?yt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Gz(e,o,t,r){const i=o.canLoad;return void 0===i||0===i.length?yt(!0):yt(i.map(d=>{const p=om(d,e);return kf(function Vz(e){return e&&rm(e.canLoad)}(p)?p.canLoad(o,t):e.runInContext(()=>p(o,t)))})).pipe(iv(),sm())}(o,t,r).pipe(Jo(i=>i?this.configLoader.loadChildren(o,t).pipe(os(l=>{t._loadedRoutes=l.routes,t._loadedInjector=l.injector})):function Ii(e){return rC(_F(!1,3))}())):yt({routes:[],injector:o})}}function r6(e){const o=e.value.routeConfig;return o&&""===o.path}function fk(e){const o=[],t=new Set;for(const r of e){if(!r6(r)){o.push(r);continue}const i=o.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):o.push(r)}for(const r of t){const i=fk(r.children);o.push(new Ka(r.value,i))}return o.filter(r=>!t.has(r))}function BF(e){return{matched:!0,parameters:e.length>0?UE(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function VF(e,o){return Jo(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return yt(t);const l=i.map(v=>v.route),d=new Set(l),p=$F(l[0].parent).slice(1);let m=0;return bo(p).pipe(Ku(v=>d.has(v)?function c6(e,o,t,r){const i=e.routeConfig,l=e._resolve;return void 0!==i?.title&&!pF(i)&&(l[Wp]=i.title),function l6(e,o,t,r){const i=$E(e);if(0===i.length)return yt({});const l={};return bo(i).pipe(Jo(d=>function u6(e,o,t,r){const i=If(o)??r,l=om(e,i);return kf(l.resolve?l.resolve(o,t):i.runInContext(()=>l(o,t)))}(e[d],o,t,r).pipe(to(),os(p=>{l[d]=p}))),BE(1),$2(l),pa(d=>EF(d)?ii:rC(d)))}(l,e,o,r).pipe(Mt(d=>(e._resolvedData=d,e.data=_C(e,e.parent,t).resolve,null)))}(v,r,e,o):(v.data=_C(v,v.parent,e).resolve,yt(void 0))),os(()=>m++),BE(1),Jo(v=>m===p.length?yt(t):ii))})}function $F(e){const o=e.children.map(t=>$F(t)).flat();return[e,...o]}function hk(e){return ai(o=>{const t=e(o);return t?bo(t).pipe(Mt(()=>o)):yt(o)})}let UF=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(l=>l.outlet===Xt);return r}getResolvedTitleForRoute(t){return t.data[Wp]}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:()=>Be(d6),providedIn:"root"})}return e})(),d6=(()=>{class e extends UF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(tC))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const cm=new je("",{providedIn:"root",factory:()=>({})}),lm=new je("ROUTES");let pk=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Be(ww)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return yt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=kf(t.loadComponent()).pipe(Mt(HF),os(l=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=l}),Q_(()=>{this.componentLoaders.delete(t)})),i=new V2(r,()=>new _o).pipe(LE());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return yt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const l=function jF(e,o,t,r){return kf(e.loadChildren()).pipe(Mt(HF),Jo(i=>i instanceof WA||Array.isArray(i)?yt(i):bo(o.compileModuleAsync(i))),Mt(i=>{r&&r(e);let l,d,p=!1;return Array.isArray(i)?(d=i,!0):(l=i.create(t).injector,d=l.get(lm,[],{optional:!0,self:!0}).flat()),{routes:d.map(ck),injector:l}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Q_(()=>{this.childrenLoaders.delete(r)})),d=new V2(l,()=>new _o).pipe(LE());return this.childrenLoaders.set(r,d),d}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function HF(e){return function f6(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let av=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:()=>Be(h6),providedIn:"root"})}return e})(),h6=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const cv=new je(""),zF=new je("");function WF(e,o,t){const r=e.get(zF),i=e.get(cr);return e.get(En).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let l;const d=new Promise(v=>{l=v}),p=i.startViewTransition(()=>(l(),function p6(e){return new Promise(o=>{fI(o,{injector:e})})}(e))),{onViewTransitionCreated:m}=r;return m&&function G3(e,o){e instanceof Rh&&e.assertNotDestroyed();const r=uc(e),i=mt(void 0);try{return o()}finally{uc(r),mt(i)}}(e,()=>m({transition:p,from:o,to:t})),d})}let PC=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _o,this.transitionAbortSubject=new _o,this.configLoader=Be(pk),this.environmentInjector=Be(_i),this.urlSerializer=Be(Kp),this.rootContexts=Be(nv),this.location=Be(Vp),this.inputBindingEnabled=null!==Be(nm,{optional:!0}),this.titleStrategy=Be(UF),this.options=Be(cm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Be(av),this.createViewTransition=Be(cv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>yt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new uF(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new mC(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new ft({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:tv,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Wa(l=>0!==l.id),Mt(l=>({...l,extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),ai(l=>{this.currentTransition=l;let d=!1,p=!1;return yt(l).pipe(os(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ai(m=>{const v=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!v&&"reload"!==(m.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const P="";return this.events.next(new em(m.id,this.urlSerializer.serialize(m.rawUrl),P,0)),m.resolve(null),ii}if(this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return yt(m).pipe(ai(P=>{const R=this.transitions?.getValue();return this.events.next(new hC(P.id,this.urlSerializer.serialize(P.extractedUrl),P.source,P.restoredState)),R!==this.transitions?.getValue()?ii:Promise.resolve(P)}),function a6(e,o,t,r,i,l){return Jo(d=>function NF(e,o,t,r,i,l,d="emptyOnly"){return new FF(e,o,t,r,i,d,l).recognize()}(e,o,t,r,d.extractedUrl,i,l).pipe(Mt(({state:p,tree:m})=>({...d,targetSnapshot:p,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),os(P=>{l.targetSnapshot=P.targetSnapshot,l.urlAfterRedirects=P.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:P.urlAfterRedirects};const R=new aF(P.id,this.urlSerializer.serialize(P.extractedUrl),this.urlSerializer.serialize(P.urlAfterRedirects),P.targetSnapshot);this.events.next(R)}));if(v&&this.urlHandlingStrategy.shouldProcessUrl(m.currentRawUrl)){const{id:P,extractedUrl:R,source:$,restoredState:H,extras:Y}=m,te=new hC(P,this.urlSerializer.serialize(R),$,H);this.events.next(te);const _e=tm(0,this.rootComponentType).snapshot;return this.currentTransition=l={...m,targetSnapshot:_e,urlAfterRedirects:R,extras:{...Y,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=R,yt(l)}{const P="";return this.events.next(new em(m.id,this.urlSerializer.serialize(m.extractedUrl),P,1)),m.resolve(null),ii}}),os(m=>{const v=new tG(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}),Mt(m=>(this.currentTransition=l={...m,guards:Fz(m.targetSnapshot,m.currentSnapshot,this.rootContexts)},l)),function kF(e,o){return Jo(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:d}}=t;return 0===d.length&&0===l.length?yt({...t,guardsResult:!0}):function DF(e,o,t,r){return bo(e).pipe(Jo(i=>function MF(e,o,t,r,i){const l=o&&o.routeConfig?o.routeConfig.canDeactivate:null;return l&&0!==l.length?yt(l.map(p=>{const m=If(o)??i,v=om(p,m);return kf(function jz(e){return e&&rm(e.canDeactivate)}(v)?v.canDeactivate(e,o,t,r):m.runInContext(()=>v(e,o,t,r))).pipe(to())})).pipe(iv()):yt(!0)}(i.component,i.route,t,o,r)),to(i=>!0!==i,!0))}(d,r,i,e).pipe(Jo(p=>p&&function Bz(e){return"boolean"==typeof e}(p)?function zz(e,o,t,r){return bo(o).pipe(Ku(i=>ha(function Ks(e,o){return null!==e&&o&&o(new wz(e)),yt(!0)}(i.route.parent,r),function Wz(e,o){return null!==e&&o&&o(new Sz(e)),yt(!0)}(i.route,r),function TF(e,o,t){const r=o[o.length-1],l=o.slice(0,o.length-1).reverse().map(d=>function Lz(e){const o=e.routeConfig?e.routeConfig.canActivateChild:null;return o&&0!==o.length?{node:e,guards:o}:null}(d)).filter(d=>null!==d).map(d=>Y_(()=>yt(d.guards.map(m=>{const v=If(d.node)??t,w=om(m,v);return kf(function Uz(e){return e&&rm(e.canActivateChild)}(w)?w.canActivateChild(r,e):v.runInContext(()=>w(r,e))).pipe(to())})).pipe(iv())));return yt(l).pipe(iv())}(e,i.path,t),function qz(e,o,t){const r=o.routeConfig?o.routeConfig.canActivate:null;if(!r||0===r.length)return yt(!0);const i=r.map(l=>Y_(()=>{const d=If(o)??t,p=om(l,d);return kf(function $z(e){return e&&rm(e.canActivate)}(p)?p.canActivate(o,e):d.runInContext(()=>p(o,e))).pipe(to())}));return yt(i).pipe(iv())}(e,i.route,t))),to(i=>!0!==i,!0))}(r,l,e,o):yt(p)),Mt(p=>({...t,guardsResult:p})))})}(this.environmentInjector,m=>this.events.next(m)),os(m=>{if(l.guardsResult=m.guardsResult,Il(m.guardsResult))throw gF(0,m.guardsResult);const v=new bz(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.events.next(v)}),Wa(m=>!!m.guardsResult||(this.cancelNavigationTransition(m,"",3),!1)),hk(m=>{if(m.guards.canActivateChecks.length)return yt(m).pipe(os(v=>{const w=new cF(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(w)}),ai(v=>{let w=!1;return yt(v).pipe(VF(this.paramsInheritanceStrategy,this.environmentInjector),os({next:()=>w=!0,complete:()=>{w||this.cancelNavigationTransition(v,"",2)}}))}),os(v=>{const w=new lF(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(w)}))}),hk(m=>{const v=w=>{const P=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&P.push(this.configLoader.loadComponent(w.routeConfig).pipe(os(R=>{w.component=R}),Mt(()=>{})));for(const R of w.children)P.push(...v(R));return P};return FE(v(m.targetSnapshot.root)).pipe(J_(),Ef(1))}),hk(()=>this.afterPreactivation()),ai(()=>{const{currentSnapshot:m,targetSnapshot:v}=l,w=this.createViewTransition?.(this.environmentInjector,m.root,v.root);return w?bo(w).pipe(Mt(()=>l)):yt(l)}),Mt(m=>{const v=function kz(e,o,t){const r=Mf(e,o._root,t?t._root:void 0);return new ok(r,o)}(t.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return this.currentTransition=l={...m,targetRouterState:v},this.currentNavigation.targetRouterState=v,l}),os(()=>{this.events.next(new QE)}),((e,o,t,r)=>Mt(i=>(new lk(o,i.targetRouterState,i.currentRouterState,t,r).activate(e),i)))(this.rootContexts,t.routeReuseStrategy,m=>this.events.next(m),this.inputBindingEnabled),Ef(1),os({next:m=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ga(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects))),this.titleStrategy?.updateTitle(m.targetRouterState.snapshot),m.resolve(!0)},complete:()=>{d=!0}}),VE(this.transitionAbortSubject.pipe(os(m=>{throw m}))),Q_(()=>{d||p||this.cancelNavigationTransition(l,"",1),this.currentNavigation?.id===l.id&&(this.currentNavigation=null)}),pa(m=>{if(p=!0,vF(m))this.events.next(new Xp(l.id,this.urlSerializer.serialize(l.extractedUrl),m.message,m.cancellationCode)),function Tz(e){return vF(e)&&Il(e.url)}(m)?this.events.next(new XE(m.url)):l.resolve(!1);else{this.events.next(new pC(l.id,this.urlSerializer.serialize(l.extractedUrl),m,l.targetSnapshot??void 0));try{l.resolve(t.errorHandler(m))}catch(v){l.reject(v)}}return ii}))}))}cancelNavigationTransition(t,r,i){const l=new Xp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(l),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function iG(e){return e!==tv}let m6=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:()=>Be(mk),providedIn:"root"})}return e})();class g6{shouldDetach(o){return!1}store(o,t){}shouldAttach(o){return!1}retrieve(o){return null}shouldReuseRoute(o,t){return o.routeConfig===t.routeConfig}}let mk=(()=>{class e extends g6{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(e)))(i||e)}})();static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qF=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:()=>Be(EC),providedIn:"root"})}return e})(),EC=(()=>{class e extends qF{constructor(){super(...arguments),this.location=Be(Vp),this.urlSerializer=Be(Kp),this.options=Be(cm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Be(av),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Gp,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=tm(0,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof hC)this.stateMemento=this.createStateMemento();else if(t instanceof em)this.rawUrlTree=r.initialUrl;else if(t instanceof aF){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof QE?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Xp&&(3===t.code||2===t.code)?this.restoreHistory(r):t instanceof pC?this.restoreHistory(r,!0):t instanceof Ga&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const d={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",d)}else{const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",l)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-this.browserPageId;0!==l?this.location.historyGo(l):this.currentUrlTree===t.finalUrl&&0===l&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(e)))(i||e)}})();static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var um=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(um||{});function gk(e,o){e.events.pipe(Wa(t=>t instanceof Ga||t instanceof Xp||t instanceof pC||t instanceof em),Mt(t=>t instanceof Ga||t instanceof em?um.COMPLETE:t instanceof Xp&&(0===t.code||1===t.code)?um.REDIRECTING:um.FAILED),Wa(t=>t!==um.REDIRECTING),Ef(1)).subscribe(()=>{o()})}function _k(e){throw e}const _6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vt=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Be(FN),this.stateManager=Be(qF),this.options=Be(cm,{optional:!0})||{},this.pendingTasks=Be(mf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Be(PC),this.urlSerializer=Be(Kp),this.location=Be(Vp),this.urlHandlingStrategy=Be(av),this._events=new _o,this.errorHandler=this.options.errorHandler||_k,this.navigated=!1,this.routeReuseStrategy=Be(m6),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Be(lm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Be(nm,{optional:!0}),this.eventsSubscription=new Pt,this.isNgZoneEnabled=Be(En)instanceof En&&En.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,l=this.navigationTransitions.currentNavigation;if(null!==i&&null!==l)if(this.stateManager.handleRouterEvent(r,l),r instanceof Xp&&0!==r.code&&1!==r.code)this.navigated=!0;else if(r instanceof Ga)this.navigated=!0;else if(r instanceof XE){const d=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),p={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||iG(i.source)};this.scheduleNavigation(d,tv,null,p,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function v6(e){return!(e instanceof QE||e instanceof XE)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),tv,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)}))}navigateToSyncWithBrowser(t,r,i){const l={replaceUrl:!0},d=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(l.state=m)}const p=this.parseUrl(t);this.scheduleNavigation(p,r,d,l)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ck),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:l,fragment:d,queryParamsHandling:p,preserveFragment:m}=r,v=m?this.currentUrlTree.fragment:d;let P,w=null;switch(p){case"merge":w={...this.currentUrlTree.queryParams,...l};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=l||null}null!==w&&(w=this.removeEmptyProps(w));try{P=eF(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),P=this.currentUrlTree.root}return tF(P,t,w,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Il(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,tv,null,r)}navigate(t,r={skipLocationChange:!1}){return function KF(e){for(let o=0;o<e.length;o++)if(null==e[o])throw new me(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{..._6}:!1===r?{...GF}:r,Il(t))return z2(this.currentUrlTree,t,i);const l=this.parseUrl(t);return z2(this.currentUrlTree,l,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const l=t[i];return null!=l&&(r[i]=l),r},{})}scheduleNavigation(t,r,i,l,d){if(this.disposed)return Promise.resolve(!1);let p,m,v;d?(p=d.resolve,m=d.reject,v=d.promise):v=new Promise((P,R)=>{p=P,m=R});const w=this.pendingTasks.add();return gk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:l,resolve:p,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(P=>Promise.reject(P))}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Zu=(()=>{class e{constructor(t,r,i,l,d,p){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=l,this.el=d,this.locationStrategy=p,this.href=null,this.commands=null,this.onChanges=new _o,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const m=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof Ga&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,l,d){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||l||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function qh(e,o,t){return function mM(e,o){return"src"===o&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===o&&("base"===e||"link"===e)?hM:Qe}(o,t)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,l=this.el.nativeElement;null!==r?i.setAttribute(l,t,r):i.removeAttribute(l,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||e)(B(Vt),B($n),function Qo(e){return function E3(e,o){if("class"===o)return e.classes;if("style"===o)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const l=t[i];if(ag(l))break;if(0===l)i+=2;else if("number"==typeof l)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(l===o)return t[i+1];i+=2}}}return null}(Ln(),e)}("tabindex"),B(_l),B(_s),B(Cf))};static#t=this.\u0275dir=wt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&z("click",function(d){return i.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),2&r&&nr("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Bp],skipLocationChange:["skipLocationChange","skipLocationChange",Bp],replaceUrl:["replaceUrl","replaceUrl",Bp],routerLink:"routerLink"},standalone:!0,features:[Ob,Ho]})}return e})();class ZF{}let YF=(()=>{class e{constructor(t,r,i,l,d){this.router=t,this.injector=i,this.preloadingStrategy=l,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Wa(t=>t instanceof Ga),Ku(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const l of r){l.providers&&!l._injector&&(l._injector=fw(l.providers,t,`Route: ${l.path}`));const d=l._injector??t,p=l._loadedInjector??d;(l.loadChildren&&!l._loadedRoutes&&void 0===l.canLoad||l.loadComponent&&!l._loadedComponent)&&i.push(this.preloadConfig(d,l)),(l.children||l._loadedRoutes)&&i.push(this.processRoutes(p,l.children??l._loadedRoutes))}return bo(i).pipe(sc())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):yt(null);const l=i.pipe(Jo(d=>null===d?yt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));return r.loadComponent&&!r._loadedComponent?bo([l,this.loader.loadComponent(r)]).pipe(sc()):l})}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Vt),ie(ww),ie(_i),ie(ZF),ie(pk))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const dm=new je("");let kC=(()=>{class e{constructor(t,r,i,l,d={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=l,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ga?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof em&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof dF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function vb(){throw new Error("invalid")}()};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();function Za(e,o){return{\u0275kind:e,\u0275providers:o}}function QF(){const e=Be(es);return o=>{const t=e.get(_f);if(o!==t.components[0])return;const r=e.get(Vt),i=e.get(XF);1===e.get(lv)&&r.initialNavigation(),e.get(eL,null,Yt.Optional)?.setUpPreloading(),e.get(dm,null,Yt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const XF=new je("",{factory:()=>new _o}),lv=new je("",{providedIn:"root",factory:()=>1}),eL=new je("");function tL(e){return Za(0,[{provide:eL,useExisting:YF},{provide:ZF,useExisting:e}])}function D6(e){return Za(9,[{provide:cv,useValue:WF},{provide:zF,useValue:{skipNextTransition:!!e?.skipInitialTransition,...e}}])}const nL=new je("ROUTER_FORROOT_GUARD"),M6=[Vp,{provide:Kp,useClass:zE},Vt,nv,{provide:$n,useFactory:function JF(e){return e.routerState.root},deps:[Vt]},pk,[]];let oL=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[M6,[],{provide:lm,multi:!0,useValue:t},{provide:nL,useFactory:O6,deps:[[Vt,new Oy,new Og]]},{provide:cm,useValue:r||{}},r?.useHash?{provide:Cf,useClass:kR}:{provide:Cf,useClass:ER},{provide:dm,useFactory:()=>{const e=Be(oH),o=Be(En),t=Be(cm),r=Be(PC),i=Be(Kp);return t.scrollOffset&&e.setOffset(t.scrollOffset),new kC(i,r,e,o,t)}},r?.preloadingStrategy?tL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?A6(r):[],r?.bindToComponentInputs?Za(8,[mF,{provide:nm,useExisting:mF}]).\u0275providers:[],r?.enableViewTransitions?D6().\u0275providers:[],[{provide:rL,useFactory:QF},{provide:wP,multi:!0,useExisting:rL}]]}}static forChild(t){return{ngModule:e,providers:[{provide:lm,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||e)(ie(nL,8))};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({})}return e})();function O6(e){return"guarded"}function A6(e){return["disabled"===e.initialNavigation?Za(3,[{provide:yw,multi:!0,useFactory:()=>{const o=Be(Vt);return()=>{o.setUpLocationChangeListener()}}},{provide:lv,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Za(2,[{provide:lv,useValue:0},{provide:yw,multi:!0,deps:[es],useFactory:o=>{const t=o.get(SR,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=o.get(Vt),l=o.get(XF);gk(i,()=>{r(!0)}),o.get(PC).afterPreactivation=()=>(r(!0),l.closed?yt(void 0):l),i.initialNavigation()}))}}]).\u0275providers:[]]}const rL=new je("");function Sr(e){return e.map(o=>(...t)=>Be(o).canActivate(...t))}let Sk=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||e)(B(_l),B(_s))};static#t=this.\u0275dir=wt({type:e})}return e})(),Zs=(()=>{class e extends Sk{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(e)))(i||e)}})();static#t=this.\u0275dir=wt({type:e,features:[kn]})}return e})();const ga=new je("NgValueAccessor"),L6={provide:ga,useExisting:gn(()=>Rc),multi:!0},V6=new je("CompositionEventMode");let Rc=(()=>{class e extends Sk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function B6(){const e=zu()?zu().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||e)(B(_l),B(_s),B(V6,8))};static#t=this.\u0275dir=wt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&z("input",function(d){return i._handleInput(d.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(d){return i._compositionEnd(d.target.value)})},features:[co([L6]),kn]})}return e})();function Yu(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function xk(e){return null!=e&&"number"==typeof e.length}const rs=new je("NgValidators"),Ju=new je("NgAsyncValidators"),Pk=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class On{static min(o){return function iL(e){return o=>{if(Yu(o.value)||Yu(e))return null;const t=parseFloat(o.value);return!isNaN(t)&&t<e?{min:{min:e,actual:o.value}}:null}}(o)}static max(o){return function aL(e){return o=>{if(Yu(o.value)||Yu(e))return null;const t=parseFloat(o.value);return!isNaN(t)&&t>e?{max:{max:e,actual:o.value}}:null}}(o)}static required(o){return cL(o)}static requiredTrue(o){return function lL(e){return!0===e.value?null:{required:!0}}(o)}static email(o){return function uL(e){return Yu(e.value)||Pk.test(e.value)?null:{email:!0}}(o)}static minLength(o){return function Ek(e){return o=>Yu(o.value)||!xk(o.value)?null:o.value.length<e?{minlength:{requiredLength:e,actualLength:o.value.length}}:null}(o)}static maxLength(o){return kk(o)}static pattern(o){return function Dk(e){if(!e)return DC;let o,t;return"string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),o=new RegExp(t)):(t=e.toString(),o=e),r=>{if(Yu(r.value))return null;const i=r.value;return o.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(o)}static nullValidator(o){return null}static compose(o){return Mk(o)}static composeAsync(o){return gL(o)}}function cL(e){return Yu(e.value)?{required:!0}:null}function kk(e){return o=>xk(o.value)&&o.value.length>e?{maxlength:{requiredLength:e,actualLength:o.value.length}}:null}function DC(e){return null}function Tk(e){return null!=e}function dL(e){return Mp(e)?bo(e):e}function fL(e){let o={};return e.forEach(t=>{o=null!=t?{...o,...t}:o}),0===Object.keys(o).length?null:o}function hL(e,o){return o.map(t=>t(e))}function mL(e){return e.map(o=>function pL(e){return!e.validate}(o)?o:t=>o.validate(t))}function Mk(e){if(!e)return null;const o=e.filter(Tk);return 0==o.length?null:function(t){return fL(hL(t,o))}}function Ik(e){return null!=e?Mk(mL(e)):null}function gL(e){if(!e)return null;const o=e.filter(Tk);return 0==o.length?null:function(t){return function Ck(...e){const o=Wm(e),{args:t,keys:r}=F2(e),i=new Zn(l=>{const{length:d}=t;if(!d)return void l.complete();const p=new Array(d);let m=d,v=d;for(let w=0;w<d;w++){let P=!1;Or(t[w]).subscribe(Fn(l,R=>{P||(P=!0,v--),p[w]=R},()=>m--,void 0,()=>{(!m||!P)&&(v||l.next(r?RE(r,p):p),l.complete())}))}});return o?i.pipe(nC(o)):i}(hL(t,o).map(dL)).pipe(Mt(fL))}}function Ok(e){return null!=e?gL(mL(e)):null}function _L(e,o){return null===e?[o]:Array.isArray(e)?[...e,o]:[e,o]}function vL(e){return e._rawValidators}function yL(e){return e._rawAsyncValidators}function Ak(e){return e?Array.isArray(e)?e:[e]:[]}function uv(e,o){return Array.isArray(e)?e.includes(o):e===o}function bL(e,o){const t=Ak(o);return Ak(e).forEach(i=>{uv(t,i)||t.push(i)}),t}function wL(e,o){return Ak(o).filter(t=>!uv(e,t))}class CL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(o){this._rawValidators=o||[],this._composedValidatorFn=Ik(this._rawValidators)}_setAsyncValidators(o){this._rawAsyncValidators=o||[],this._composedAsyncValidatorFn=Ok(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(o){this._onDestroyCallbacks.push(o)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(o=>o()),this._onDestroyCallbacks=[]}reset(o=void 0){this.control&&this.control.reset(o)}hasError(o,t){return!!this.control&&this.control.hasError(o,t)}getError(o,t){return this.control?this.control.getError(o,t):null}}class Es extends CL{get formDirective(){return null}get path(){return null}}class Qu extends CL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class SL{constructor(o){this._cd=o}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xu=(()=>{class e extends SL{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||e)(B(Qu,2))};static#t=this.\u0275dir=wt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Bb("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[kn]})}return e})(),Nl=(()=>{class e extends SL{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||e)(B(Es,10))};static#t=this.\u0275dir=wt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Bb("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[kn]})}return e})();const dv="VALID",AC="INVALID",Of="PENDING",fm="DISABLED";function Nk(e){return(NC(e)?e.validators:e)||null}function Rk(e,o){return(NC(o)?o.asyncValidators:e)||null}function NC(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class DL{constructor(o,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(o),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(o){this._rawValidators=this._composedValidatorFn=o}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(o){this._rawAsyncValidators=this._composedAsyncValidatorFn=o}get parent(){return this._parent}get valid(){return this.status===dv}get invalid(){return this.status===AC}get pending(){return this.status==Of}get disabled(){return this.status===fm}get enabled(){return this.status!==fm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(o){this._assignValidators(o)}setAsyncValidators(o){this._assignAsyncValidators(o)}addValidators(o){this.setValidators(bL(o,this._rawValidators))}addAsyncValidators(o){this.setAsyncValidators(bL(o,this._rawAsyncValidators))}removeValidators(o){this.setValidators(wL(o,this._rawValidators))}removeAsyncValidators(o){this.setAsyncValidators(wL(o,this._rawAsyncValidators))}hasValidator(o){return uv(this._rawValidators,o)}hasAsyncValidator(o){return uv(this._rawAsyncValidators,o)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(o={}){this.touched=!0,this._parent&&!o.onlySelf&&this._parent.markAsTouched(o)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(o=>o.markAllAsTouched())}markAsUntouched(o={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!o.onlySelf&&this._parent._updateTouched(o)}markAsDirty(o={}){this.pristine=!1,this._parent&&!o.onlySelf&&this._parent.markAsDirty(o)}markAsPristine(o={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!o.onlySelf&&this._parent._updatePristine(o)}markAsPending(o={}){this.status=Of,!1!==o.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!o.onlySelf&&this._parent.markAsPending(o)}disable(o={}){const t=this._parentMarkedDirty(o.onlySelf);this.status=fm,this.errors=null,this._forEachChild(r=>{r.disable({...o,onlySelf:!0})}),this._updateValue(),!1!==o.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...o,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(o={}){const t=this._parentMarkedDirty(o.onlySelf);this.status=dv,this._forEachChild(r=>{r.enable({...o,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:o.emitEvent}),this._updateAncestors({...o,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(o){this._parent&&!o.onlySelf&&(this._parent.updateValueAndValidity(o),o.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(o){this._parent=o}getRawValue(){return this.value}updateValueAndValidity(o={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dv||this.status===Of)&&this._runAsyncValidator(o.emitEvent)),!1!==o.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!o.onlySelf&&this._parent.updateValueAndValidity(o)}_updateTreeValidity(o={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(o)),this.updateValueAndValidity({onlySelf:!0,emitEvent:o.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fm:dv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(o){if(this.asyncValidator){this.status=Of,this._hasOwnPendingAsyncValidator=!0;const t=dL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:o})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(o,t={}){this.errors=o,this._updateControlsErrors(!1!==t.emitEvent)}get(o){let t=o;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(o,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[o]:null}hasError(o,t){return!!this.getError(o,t)}get root(){let o=this;for(;o._parent;)o=o._parent;return o}_updateControlsErrors(o){this.status=this._calculateStatus(),o&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(o)}_initObservables(){this.valueChanges=new Le,this.statusChanges=new Le}_calculateStatus(){return this._allControlsDisabled()?fm:this.errors?AC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Of)?Of:this._anyControlsHaveStatus(AC)?AC:dv}_anyControlsHaveStatus(o){return this._anyControls(t=>t.status===o)}_anyControlsDirty(){return this._anyControls(o=>o.dirty)}_anyControlsTouched(){return this._anyControls(o=>o.touched)}_updatePristine(o={}){this.pristine=!this._anyControlsDirty(),this._parent&&!o.onlySelf&&this._parent._updatePristine(o)}_updateTouched(o={}){this.touched=this._anyControlsTouched(),this._parent&&!o.onlySelf&&this._parent._updateTouched(o)}_registerOnCollectionChange(o){this._onCollectionChange=o}_setUpdateStrategy(o){NC(o)&&null!=o.updateOn&&(this._updateOn=o.updateOn)}_parentMarkedDirty(o){return!o&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(o){return null}_assignValidators(o){this._rawValidators=Array.isArray(o)?o.slice():o,this._composedValidatorFn=function H6(e){return Array.isArray(e)?Ik(e):e||null}(this._rawValidators)}_assignAsyncValidators(o){this._rawAsyncValidators=Array.isArray(o)?o.slice():o,this._composedAsyncValidatorFn=function z6(e){return Array.isArray(e)?Ok(e):e||null}(this._rawAsyncValidators)}}class Fc extends DL{constructor(o,t,r){super(Nk(t),Rk(r,t)),this.controls=o,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(o,t){return this.controls[o]?this.controls[o]:(this.controls[o]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(o,t,r={}){this.registerControl(o,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(o,t={}){this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),delete this.controls[o],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(o,t,r={}){this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),delete this.controls[o],t&&this.registerControl(o,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(o){return this.controls.hasOwnProperty(o)&&this.controls[o].enabled}setValue(o,t={}){(function Fk(e,o,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new me(1002,"")})})(this,0,o),Object.keys(o).forEach(r=>{(function kL(e,o,t){const r=e.controls;if(!(o?Object.keys(r):r).length)throw new me(1e3,"");if(!r[t])throw new me(1001,"")})(this,!0,r),this.controls[r].setValue(o[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(o,t={}){null!=o&&(Object.keys(o).forEach(r=>{const i=this.controls[r];i&&i.patchValue(o[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(o={},t={}){this._forEachChild((r,i)=>{r.reset(o?o[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(o,t,r)=>(o[r]=t.getRawValue(),o))}_syncPendingControls(){let o=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return o&&this.updateValueAndValidity({onlySelf:!0}),o}_forEachChild(o){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&o(r,t)})}_setUpControls(){this._forEachChild(o=>{o.setParent(this),o._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(o){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&o(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(o,t){let r=o;return this._forEachChild((i,l)=>{r=t(r,i,l)}),r}_allControlsDisabled(){for(const o of Object.keys(this.controls))if(this.controls[o].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(o){return this.controls.hasOwnProperty(o)?this.controls[o]:null}}const Lc=new je("CallSetDisabledState",{providedIn:"root",factory:()=>hm}),hm="always";function fv(e,o,t=hm){pm(e,o),o.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&o.valueAccessor.setDisabledState?.(e.disabled),function TL(e,o){o.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Vk(e,o)})}(e,o),function G6(e,o){const t=(r,i)=>{o.valueAccessor.writeValue(r),i&&o.viewToModelUpdate(r)};e.registerOnChange(t),o._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,o),function ML(e,o){o.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Vk(e,o),"submit"!==e.updateOn&&e.markAsTouched()})}(e,o),function q6(e,o){if(o.valueAccessor.setDisabledState){const t=r=>{o.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),o._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,o)}function FC(e,o,t=!0){const r=()=>{};o.valueAccessor&&(o.valueAccessor.registerOnChange(r),o.valueAccessor.registerOnTouched(r)),hv(e,o),e&&(o._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function LC(e,o){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(o)})}function pm(e,o){const t=vL(e);null!==o.validator?e.setValidators(_L(t,o.validator)):"function"==typeof t&&e.setValidators([t]);const r=yL(e);null!==o.asyncValidator?e.setAsyncValidators(_L(r,o.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();LC(o._rawValidators,i),LC(o._rawAsyncValidators,i)}function hv(e,o){let t=!1;if(null!==e){if(null!==o.validator){const i=vL(e);if(Array.isArray(i)&&i.length>0){const l=i.filter(d=>d!==o.validator);l.length!==i.length&&(t=!0,e.setValidators(l))}}if(null!==o.asyncValidator){const i=yL(e);if(Array.isArray(i)&&i.length>0){const l=i.filter(d=>d!==o.asyncValidator);l.length!==i.length&&(t=!0,e.setAsyncValidators(l))}}}const r=()=>{};return LC(o._rawValidators,r),LC(o._rawAsyncValidators,r),t}function Vk(e,o){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),o.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function $k(e,o){pm(e,o)}function IL(e,o){e._syncPendingControls(),o.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const X6={provide:Es,useExisting:gn(()=>$C)},pv=(()=>Promise.resolve())();let $C=(()=>{class e extends Es{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Le,this.form=new Fc({},Ik(t),Ok(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){pv.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),fv(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){pv.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){pv.then(()=>{const r=this._findContainer(t.path),i=new Fc({});$k(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){pv.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){pv.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,IL(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||e)(B(rs,10),B(Ju,10),B(Lc,8))};static#t=this.\u0275dir=wt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&z("submit",function(d){return i.onSubmit(d)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[co([X6]),kn]})}return e})();function OL(e,o){const t=e.indexOf(o);t>-1&&e.splice(t,1)}function AL(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const xr=class extends DL{constructor(o=null,t,r){super(Nk(t),Rk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(o),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),NC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=AL(o)?o.value:o)}setValue(o,t={}){this.value=this._pendingValue=o,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(o,t={}){this.setValue(o,t)}reset(o=this.defaultValue,t={}){this._applyFormState(o),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(o){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(o){this._onChange.push(o)}_unregisterOnChange(o){OL(this._onChange,o)}registerOnDisabledChange(o){this._onDisabledChange.push(o)}_unregisterOnDisabledChange(o){OL(this._onDisabledChange,o)}_forEachChild(o){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(o){AL(o)?(this.value=this._pendingValue=o.value,o.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=o}};let Bc=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=wt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return e})(),HC=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({})}return e})();const mm=new je("NgModelWithFormControlWarning"),l8={provide:Es,useExisting:gn(()=>Vc)};let Vc=(()=>{class e extends Es{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Le,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return fv(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){FC(t.control||null,t,!1),function J6(e,o){const t=e.indexOf(o);t>-1&&e.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,IL(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(FC(r||null,t),(e=>e instanceof xr)(i)&&(fv(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);$k(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function K6(e,o){return hv(e,o)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pm(this.form,this),this._oldForm&&hv(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||e)(B(rs,10),B(Ju,10),B(Lc,8))};static#t=this.\u0275dir=wt({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&z("submit",function(d){return i.onSubmit(d)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[co([l8]),kn,Ho]})}return e})();const jL={provide:Qu,useExisting:gn(()=>Rl)};let Rl=(()=>{class e extends Qu{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,l,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.name=null,this.update=new Le,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function VC(e,o){if(!o)return null;let t,r,i;return Array.isArray(o),o.forEach(l=>{l.constructor===Rc?t=l:function Y6(e){return Object.getPrototypeOf(e.constructor)===Zs}(l)?r=l:i=l}),i||r||t||null}(0,l)}ngOnChanges(t){this._added||this._setUpControl(),function jk(e,o){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(o,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function RC(e,o){return[...o.path,e]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||e)(B(Es,13),B(rs,10),B(Ju,10),B(ga,10),B(mm,8))};static#n=this.\u0275dir=wt({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[co([jL]),kn,Ho]})}return e})();let Nf=(()=>{class e{constructor(){this._validator=DC}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):DC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=wt({type:e,features:[Ho]})}return e})();const v8={provide:rs,useExisting:gn(()=>Rf),multi:!0};let Rf=(()=>{class e extends Nf{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Bp,this.createValidator=t=>cL}enabled(t){return t}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(e)))(i||e)}})();static#t=this.\u0275dir=wt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&nr("required",i._enabled?"":null)},inputs:{required:"required"},features:[co([v8]),kn]})}return e})();const C8={provide:rs,useExisting:gn(()=>Ff),multi:!0};let Ff=(()=>{class e extends Nf{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function qL(e){return"number"==typeof e?e:parseInt(e,10)}(t),this.createValidator=t=>kk(t)}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(e)))(i||e)}})();static#t=this.\u0275dir=wt({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&nr("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[co([C8]),kn]})}return e})(),eB=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({imports:[HC]})}return e})(),nB=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Lc,useValue:t.callSetDisabledState??hm}]}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({imports:[eB]})}return e})(),Zk=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:mm,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Lc,useValue:t.callSetDisabledState??hm}]}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({imports:[eB]})}return e})();const Yk=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),oB=e=>encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent),Jk=decodeURIComponent,_v=e=>('"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function rB(e,o,t){const r=/(?:^|; )([^=]*)=([^;]*)/g,i={};let l;for(;null!=(l=r.exec(document.cookie));)try{const d=t(l[1]);if(i[d]=o(l[2],d),e===d)break}catch{}return null!=e?i[e]:i}const sB=Object.freeze({decodeName:Jk,decodeValue:_v,encodeName:Yk,encodeValue:oB}),Qk=Object.freeze({path:"/"});function iB(e,o,t=Qk,{encodeValue:r=oB,encodeName:i=Yk}={}){return document.cookie=`${i(e)}=${r(o,e)}${function D8(e){return"number"==typeof(e=Object.assign({},e)).expires&&(e.expires=new Date(Date.now()+864e5*e.expires)),null!=e.expires&&(e.expires=e.expires.toUTCString()),Object.entries(e).filter(([o,t])=>null!=t&&!1!==t).map(([o,t])=>!0===t?`; ${o}`:`; ${o}=${t.split(";")[0]}`).join("")}(t)}`}function Lf(e,{decodeValue:o=_v,decodeName:t=Jk}={}){return rB(e,o,t)}!function Xk(e,o){const t={set:function(i,l,d){return iB(i,l,Object.assign({},this.attributes,d),{encodeValue:this.converter.write})},get:function(i){return 0===arguments.length?function T8({decodeValue:e=_v,decodeName:o=Jk}={}){return rB(void 0,e,o)}(this.converter.read):null!=i?Lf(i,this.converter.read):void 0},remove:function(i,l){!function M8(e,o=Qk){iB(e,"",Object.assign({},o,{expires:-1}))}(i,Object.assign({},this.attributes,l))},withAttributes:function(i){return Xk(this.converter,Object.assign({},this.attributes,i))},withConverter:function(i){return Xk(Object.assign({},this.converter,i),this.attributes)}},r={attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(e)}};return Object.create(t,r)}({read:sB.decodeValue,write:sB.encodeValue},Qk);var I8=Mr(519),Ne=Mr.n(I8);class vv{}class WC{}class et{constructor(o){this.normalizedNames=new Map,this.lazyUpdate=null,o?"string"==typeof o?this.lazyInit=()=>{this.headers=new Map,o.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),l=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(d):this.headers.set(l,[d])}})}:typeof Headers<"u"&&o instanceof Headers?(this.headers=new Map,o.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(o).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(o){return this.init(),this.headers.has(o.toLowerCase())}get(o){this.init();const t=this.headers.get(o.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(o){return this.init(),this.headers.get(o.toLowerCase())||null}append(o,t){return this.clone({name:o,value:t,op:"a"})}set(o,t){return this.clone({name:o,value:t,op:"s"})}delete(o,t){return this.clone({name:o,value:t,op:"d"})}maybeSetNormalizedName(o,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,o)}init(){this.lazyInit&&(this.lazyInit instanceof et?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(o=>this.applyUpdate(o)),this.lazyUpdate=null))}copyFrom(o){o.init(),Array.from(o.headers.keys()).forEach(t=>{this.headers.set(t,o.headers.get(t)),this.normalizedNames.set(t,o.normalizedNames.get(t))})}clone(o){const t=new et;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof et?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([o]),t}applyUpdate(o){const t=o.name.toLowerCase();switch(o.op){case"a":case"s":let r=o.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(o.name,t);const i=("a"===o.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const l=o.value;if(l){let d=this.headers.get(t);if(!d)return;d=d.filter(p=>-1===l.indexOf(p)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(o,t){const r=(Array.isArray(t)?t:[t]).map(l=>l.toString()),i=o.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(o,i)}forEach(o){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>o(this.normalizedNames.get(t),this.headers.get(t)))}}class O8{encodeKey(o){return uB(o)}encodeValue(o){return uB(o)}decodeKey(o){return decodeURIComponent(o)}decodeValue(o){return decodeURIComponent(o)}}const Bf=/%(\d[a-f0-9])/gi,lB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function uB(e){return encodeURIComponent(e).replace(Bf,(o,t)=>lB[t]??o)}function qC(e){return`${e}`}class ed{constructor(o={}){if(this.updates=null,this.cloneFrom=null,this.encoder=o.encoder||new O8,o.fromString){if(o.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function A8(e,o){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const l=i.indexOf("="),[d,p]=-1==l?[o.decodeKey(i),""]:[o.decodeKey(i.slice(0,l)),o.decodeValue(i.slice(l+1))],m=t.get(d)||[];m.push(p),t.set(d,m)}),t}(o.fromString,this.encoder)}else o.fromObject?(this.map=new Map,Object.keys(o.fromObject).forEach(t=>{const r=o.fromObject[t],i=Array.isArray(r)?r.map(qC):[qC(r)];this.map.set(t,i)})):this.map=null}has(o){return this.init(),this.map.has(o)}get(o){this.init();const t=this.map.get(o);return t?t[0]:null}getAll(o){return this.init(),this.map.get(o)||null}keys(){return this.init(),Array.from(this.map.keys())}append(o,t){return this.clone({param:o,value:t,op:"a"})}appendAll(o){const t=[];return Object.keys(o).forEach(r=>{const i=o[r];Array.isArray(i)?i.forEach(l=>{t.push({param:r,value:l,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(o,t){return this.clone({param:o,value:t,op:"s"})}delete(o,t){return this.clone({param:o,value:t,op:"d"})}toString(){return this.init(),this.keys().map(o=>{const t=this.encoder.encodeKey(o);return this.map.get(o).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(o=>""!==o).join("&")}clone(o){const t=new ed({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(o),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(o=>this.map.set(o,this.cloneFrom.map.get(o))),this.updates.forEach(o=>{switch(o.op){case"a":case"s":const t=("a"===o.op?this.map.get(o.param):void 0)||[];t.push(qC(o.value)),this.map.set(o.param,t);break;case"d":if(void 0===o.value){this.map.delete(o.param);break}{let r=this.map.get(o.param)||[];const i=r.indexOf(qC(o.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(o.param,r):this.map.delete(o.param)}}}),this.cloneFrom=this.updates=null)}}class dB{constructor(){this.map=new Map}set(o,t){return this.map.set(o,t),this}get(o){return this.map.has(o)||this.map.set(o,o.defaultValue()),this.map.get(o)}delete(o){return this.map.delete(o),this}has(o){return this.map.has(o)}keys(){return this.map.keys()}}function fB(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function hB(e){return typeof Blob<"u"&&e instanceof Blob}function pB(e){return typeof FormData<"u"&&e instanceof FormData}class yv{constructor(o,t,r,i){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=o.toUpperCase(),function N8(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,l=i):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params),this.transferCache=l.transferCache),this.headers||(this.headers=new et),this.context||(this.context=new dB),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+d}}else this.params=new ed,this.urlWithParams=t}serializeBody(){return null===this.body?null:fB(this.body)||hB(this.body)||pB(this.body)||function R8(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ed?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pB(this.body)?null:hB(this.body)?this.body.type||null:fB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ed?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(o={}){const t=o.method||this.method,r=o.url||this.url,i=o.responseType||this.responseType,l=void 0!==o.body?o.body:this.body,d=void 0!==o.withCredentials?o.withCredentials:this.withCredentials,p=void 0!==o.reportProgress?o.reportProgress:this.reportProgress;let m=o.headers||this.headers,v=o.params||this.params;const w=o.context??this.context;return void 0!==o.setHeaders&&(m=Object.keys(o.setHeaders).reduce((P,R)=>P.set(R,o.setHeaders[R]),m)),o.setParams&&(v=Object.keys(o.setParams).reduce((P,R)=>P.set(R,o.setParams[R]),v)),new yv(t,r,l,{params:v,headers:m,context:w,reportProgress:p,responseType:i,withCredentials:d})}}var td=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(td||{});class eD{constructor(o,t=200,r="OK"){this.headers=o.headers||new et,this.status=void 0!==o.status?o.status:t,this.statusText=o.statusText||r,this.url=o.url||null,this.ok=this.status>=200&&this.status<300}}class GC extends eD{constructor(o={}){super(o),this.type=td.ResponseHeader}clone(o={}){return new GC({headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}class Vf extends eD{constructor(o={}){super(o),this.type=td.Response,this.body=void 0!==o.body?o.body:null}clone(o={}){return new Vf({body:void 0!==o.body?o.body:this.body,headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}class $f extends eD{constructor(o){super(o,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${o.url||"(unknown url)"}`:`Http failure response for ${o.url||"(unknown url)"}: ${o.status} ${o.statusText}`,this.error=o.error||null}}function KC(e,o){return{body:o,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}let ZC=(()=>{class e{constructor(t){this.handler=t}request(t,r,i={}){let l;if(t instanceof yv)l=t;else{let m,v;m=i.headers instanceof et?i.headers:new et(i.headers),i.params&&(v=i.params instanceof ed?i.params:new ed({fromObject:i.params})),l=new yv(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const d=yt(l).pipe(Ku(m=>this.handler.handle(m)));if(t instanceof yv||"events"===i.observe)return d;const p=d.pipe(Wa(m=>m instanceof Vf));switch(i.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return p.pipe(Mt(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return p.pipe(Mt(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return p.pipe(Mt(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return p.pipe(Mt(m=>m.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ed).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,KC(i,r))}post(t,r,i={}){return this.request("POST",t,KC(i,r))}put(t,r,i={}){return this.request("PUT",t,KC(i,r))}static#e=this.\u0275fac=function(r){return new(r||e)(ie(vv))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();function gB(e,o){return o(e)}function V8(e,o){return(t,r)=>o.intercept(t,{handle:i=>e(i,r)})}const U8=new je(""),Cv=new je(""),_B=new je(""),vB=new je("");function j8(){let e=null;return(o,t)=>{null===e&&(e=(Be(U8,{optional:!0})??[]).reduceRight(V8,gB));const r=Be(mf),i=r.add();return e(o,t).pipe(Q_(()=>r.remove(i)))}}let yB=(()=>{class e extends vv{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Be(mf);const i=Be(vB,{optional:!0});this.backend=i??t}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Cv),...this.injector.get(_B,[])]));this.chain=i.reduceRight((l,d)=>function $8(e,o,t){return(r,i)=>t.runInContext(()=>o(r,l=>e(l,i)))}(l,d,this.injector),gB)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Q_(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||e)(ie(WC),ie(_i))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();const K8=/^\)\]\}',?\n/;let wB=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new me(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?bo(r.\u0275loadImpl()):yt(null)).pipe(ai(()=>new Zn(l=>{const d=r.build();if(d.open(t.method,t.urlWithParams),t.withCredentials&&(d.withCredentials=!0),t.headers.forEach((Y,te)=>d.setRequestHeader(Y,te.join(","))),t.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Y=t.detectContentTypeHeader();null!==Y&&d.setRequestHeader("Content-Type",Y)}if(t.responseType){const Y=t.responseType.toLowerCase();d.responseType="json"!==Y?Y:"text"}const p=t.serializeBody();let m=null;const v=()=>{if(null!==m)return m;const Y=d.statusText||"OK",te=new et(d.getAllResponseHeaders()),_e=function Z8(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(d)||t.url;return m=new GC({headers:te,status:d.status,statusText:Y,url:_e}),m},w=()=>{let{headers:Y,status:te,statusText:_e,url:le}=v(),Re=null;204!==te&&(Re=typeof d.response>"u"?d.responseText:d.response),0===te&&(te=Re?200:0);let st=te>=200&&te<300;if("json"===t.responseType&&"string"==typeof Re){const At=Re;Re=Re.replace(K8,"");try{Re=""!==Re?JSON.parse(Re):null}catch(tn){Re=At,st&&(st=!1,Re={error:tn,text:Re})}}st?(l.next(new Vf({body:Re,headers:Y,status:te,statusText:_e,url:le||void 0})),l.complete()):l.error(new $f({error:Re,headers:Y,status:te,statusText:_e,url:le||void 0}))},P=Y=>{const{url:te}=v(),_e=new $f({error:Y,status:d.status||0,statusText:d.statusText||"Unknown Error",url:te||void 0});l.error(_e)};let R=!1;const $=Y=>{R||(l.next(v()),R=!0);let te={type:td.DownloadProgress,loaded:Y.loaded};Y.lengthComputable&&(te.total=Y.total),"text"===t.responseType&&d.responseText&&(te.partialText=d.responseText),l.next(te)},H=Y=>{let te={type:td.UploadProgress,loaded:Y.loaded};Y.lengthComputable&&(te.total=Y.total),l.next(te)};return d.addEventListener("load",w),d.addEventListener("error",P),d.addEventListener("timeout",P),d.addEventListener("abort",P),t.reportProgress&&(d.addEventListener("progress",$),null!==p&&d.upload&&d.upload.addEventListener("progress",H)),d.send(p),l.next({type:td.Sent}),()=>{d.removeEventListener("error",P),d.removeEventListener("abort",P),d.removeEventListener("load",w),d.removeEventListener("timeout",P),t.reportProgress&&(d.removeEventListener("progress",$),null!==p&&d.upload&&d.upload.removeEventListener("progress",H)),d.readyState!==d.DONE&&d.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||e)(ie(e2))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();const oD=new je("XSRF_ENABLED"),YC=new je("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),SB=new je("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class xB{}let J8=(()=>{class e{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=tE(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||e)(ie(cr),ie(vu),ie(YC))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();function Q8(e,o){const t=e.url.toLowerCase();if(!Be(oD)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return o(e);const r=Be(xB).getToken(),i=Be(SB);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),o(e)}var nd=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(nd||{});function X8(...e){const o=[ZC,wB,yB,{provide:vv,useExisting:yB},{provide:WC,useExisting:wB},{provide:Cv,useValue:Q8,multi:!0},{provide:oD,useValue:!0},{provide:xB,useClass:J8}];for(const t of e)o.push(...t.\u0275providers);return function Rg(e){return{\u0275providers:e}}(o)}const PB=new je("LEGACY_INTERCEPTOR_FN");function e9(){return function Uf(e,o){return{\u0275kind:e,\u0275providers:o}}(nd.LegacyInterceptors,[{provide:PB,useFactory:j8},{provide:Cv,useExisting:PB,multi:!0}])}let n9=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({providers:[X8(e9())]})}return e})();class i9{constructor(o,t){this.username=o,this.password=t}}let jf=(()=>{class e{constructor(){this.url="https://reddit-backend-qxfc.onrender.com:8080"}getUrl(){return this.url}createFullUrl(t){return this.url+t}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Io=(()=>{class e{constructor(t,r){this.serverurl=t,this.http=r,this.serverUrl=this.serverurl.getUrl()}post(t,r,i,l){const d=this.serverUrl+t;return console.log("Full url: "+d),console.log("Request type: post"),console.log("Body: "+i),this.http.post(d,i,l?{headers:r,observe:"body",responseType:"json",withCredentials:!0}:{headers:r,observe:"body",responseType:"json"})}static#e=this.\u0275fac=function(r){return new(r||e)(ie(jf),ie(ZC))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),a9=(()=>{class e{constructor(t,r){this.http=t,this.postService=r,this.endpoint="/signin/username-password"}signinByUsernamePassword(t,r){const i=new i9(t,r),l=JSON.stringify(i),d=new et;return d.append("Content-Type","application/json"),this.postService.post(this.endpoint,d,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ZC),ie(Io))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ct=(()=>{class e{constructor(){}setItem(t,r){localStorage.setItem(t,r)}getItem(t){return localStorage.getItem(t)||""}removeItem(t){localStorage.removeItem(t)}setVoteOfPostInStorage(t,r){let i=""==this.getItem("posts")?[]:JSON.parse(this.getItem("posts"));for(let l of i)l.vote==r&&(l.vote=r);this.setItem("posts",JSON.stringify(i))}setJoinCommunityOfPostInStorage(t,r){let i=""==this.getItem("posts")?[]:JSON.parse(this.getItem("posts"));for(let l of i)l.community_id==t&&(l.join=r);this.setItem("posts",JSON.stringify(i))}setSaveStatusOfPostInStorage(t,r){let i=""==this.getItem("posts")?[]:JSON.parse(this.getItem("posts"));for(let l of i)l.post_id==t&&(l.save=r);this.setItem("posts",JSON.stringify(i))}setVoteTypeOfPostInStorage(t,r){let i=""==this.getItem("posts")?[]:JSON.parse(this.getItem("posts"));for(let l of i)l.post_id==t&&(l.voteType=r);this.setItem("posts",JSON.stringify(i))}setAllowOfPostInStorage(t,r){let i=""==this.getItem("posts")?[]:JSON.parse(this.getItem("posts"));for(let l of i)l.post_id==t&&(l.allow=r);this.setItem("posts",JSON.stringify(i))}setDeleteOfPostInStorage(t,r){let i=""==this.getItem("posts")?[]:JSON.parse(this.getItem("posts"));for(let l of i)l.post_id==t&&(l.deleted=r);this.setItem("posts",JSON.stringify(i))}removePostInStorage(t){let r=""==this.getItem("posts")?[]:JSON.parse(this.getItem("posts"));r=r.filter(i=>i.post_id!==t),this.setItem("posts",JSON.stringify(r))}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class c9{constructor(o,t){this.uid=o,this.visit_id=t}}let ks=(()=>{class e{constructor(t,r){this.serverurl=t,this.http=r,this.serverUrl=this.serverurl.getUrl()}get(t,r,i){const l=this.serverUrl+t;return console.log("Request type: get"),this.http.get(l,i?{headers:r,observe:"body",responseType:"json",withCredentials:!0}:{headers:r,observe:"body",responseType:"json"})}static#e=this.\u0275fac=function(r){return new(r||e)(ie(jf),ie(ZC))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gm=(()=>{class e{constructor(t,r){this.postService=t,this.getService=r}setRecentVisit(t,r,i){const l=JSON.stringify(new c9(r,i));let d=new et;return d=d.append("Accept","application/json"),d=d.append("Content-Type","application/json"),this.postService.post(t,d,l,!0)}getRecentVisitCommunity(t){const r="/get-recent-visit-community?uid="+t,i=new et;return this.getService.get(r,i,!0)}getRecentVisitPost(t){const r="/get-recent-visit-post?uid="+t,i=new et;return this.getService.get(r,i,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(ks))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ys=(()=>{class e{constructor(t){this.storageService=t,this.primary_background_color_light="#ffffff",this.primary_background_color_dark="#0E1113",this.secondary_color_light="#000000",this.secondary_color_dark="#ffffff",this.neutral_light="#F9FAFA",this.neutral_dark="#0E1113",this.link_light="#0045AC",this.link_dark="#629FFF",this.border_light="#00000033",this.border_dark="#ffffff33",this.search_light="#E5EBEE",this.search_dark="#2A3236",this.header_light="#ffffff",this.header_dark="#0E1113",this.info_light="#F9FAFA",this.info_dark="#000000",this.txt_light="#2A3C42",this.txt_dark="#B8C5C9",this.icon_light="#000000",this.icon_dark="#ffffff",this.nav_btn_light="#F6F8F9",this.nav_btn_dark="#181C1F",this.bg_hover_light="#F6F8F9",this.bg_hover_dark="#181C1F",this.btn_selected_light="#D2DADD",this.btn_selected_dark="#33464C"}useDarkMode(){1==("1"==this.storageService.getItem("mode")?1:0)?(document.body.style.setProperty("--primary_background_color",this.primary_background_color_dark),document.body.style.setProperty("--neutral",this.neutral_dark),document.body.style.setProperty("--secondary_color",this.secondary_color_dark),document.body.style.setProperty("--link",this.link_dark),document.body.style.setProperty("--search",this.search_dark),document.body.style.setProperty("--header",this.header_dark),document.body.style.setProperty("--info",this.info_dark),document.body.style.setProperty("--txt",this.txt_dark),document.body.style.setProperty("--icon",this.icon_dark),document.body.style.setProperty("--border",this.border_dark),document.body.style.setProperty("--nav_hover",this.nav_btn_dark),document.body.style.setProperty("--bg_hover",this.bg_hover_dark),document.body.style.setProperty("--btn_selected",this.btn_selected_dark)):(this.storageService.setItem("mode","0"),document.body.style.setProperty("--primary_background_color",this.primary_background_color_light),document.body.style.setProperty("--neutral",this.neutral_light),document.body.style.setProperty("--secondary_color",this.secondary_color_light),document.body.style.setProperty("--link",this.link_light),document.body.style.setProperty("--search",this.search_light),document.body.style.setProperty("--header",this.header_light),document.body.style.setProperty("--info",this.info_light),document.body.style.setProperty("--txt",this.txt_light),document.body.style.setProperty("--icon",this.icon_light),document.body.style.setProperty("--border",this.border_light),document.body.style.setProperty("--nav_hover",this.nav_btn_light),document.body.style.setProperty("--bg_hover",this.bg_hover_light),document.body.style.setProperty("--btn_selected",this.btn_selected_light))}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ct))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Js=(()=>{class e{constructor(){this.txt_load="Load data. Please wait..."}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=ne({type:e,selectors:[["loading"]],inputs:{txt_load:"txt_load"},decls:5,vars:1,consts:[["id","load_container"],["id","load_block"],[1,"loader"],[2,"padding-top","15px","font-size","20px","font-weight","500","color","var(--icon)"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1),Q(2,"div",2),x(3,"p",3),L(4),D()()()),2&r&&(k(4),at("",i.txt_load,"..."))},styles:["#load_container[_ngcontent-%COMP%]{width:100vw;height:100vh;background-color:#0003;position:fixed;display:flex;flex-direction:column;justify-content:center;align-items:center;left:0;top:0;z-index:9999}#load_container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--icon)!important}#load_block[_ngcontent-%COMP%]{padding:50px;background-color:var(--primary_background_color);display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px;min-width:250px}.loader[_ngcontent-%COMP%]{border:10px solid var(--search);border-top:10px solid #D93900;border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}return e})();function aD(e,o){1&e&&Q(0,"loading",17),2&e&&A("txt_load","Signing in. Please wait")}let _m=(()=>{class e{constructor(t,r,i,l,d,p){this.usernamePasswordService=t,this.serverUrlService=r,this.router=i,this.storageService=l,this.recentVisitService=d,this.darkmodeService=p,this.serverUrl=this.serverUrlService.getUrl(),this.signInForm=new Fc({username:new xr("",[On.required,On.minLength(2),On.maxLength(16),On.pattern("^[0-9a-zA-Z]{2,16}$")]),password:new xr("",[On.required,On.minLength(8),On.maxLength(20),On.pattern("^[0-9a-zA-Z ~`!@#$%^&*()_+={[}]|\\:;\"'<,>.?/-]{8,20}$")])}),this.isLoad=!1}ngOnInit(){const t=Lf("GoogleSignIn")||"",r="0"==Lf("uid")?0:Number.parseInt(Lf("uid")||"0");if(""===t)console.log("No cookie signin");else try{JSON.parse(t).isGoogleSignIn?(this.storageService.setItem("uid",r.toString()),this.onSignIn()):Ne().fire({title:"No account with this email",icon:"error",footer:"<b><a href='/signup'>Click here to create an account</a></b>"})}catch{Ne().fire("Error signin using google. Please try again.","","error")}}SignInUsingGoogle(){window.location.href=`${this.serverUrl}/signin/google`}SignInFormSubmit(){"VALID"==this.signInForm.status&&(this.isLoad=!0,this.usernamePasswordService.signinByUsernamePassword(this.signInForm.value.username,this.signInForm.value.password).subscribe({next:l=>{l.isSignIn&&(this.storageService.setItem("uid",l.uid.toString()),this.onSignIn(),this.isLoad=!1),l.passwordError&&(this.isLoad=!1,Ne().fire("Wrong username or password","","warning"))},error:l=>{this.isLoad=!1,Ne().fire("Error sign in. Please try again","","error")}}))}onSignIn(){const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.darkmodeService.useDarkMode();const r=""==this.storageService.getItem("recent_posts")?[]:JSON.parse("["+this.storageService.getItem("recent_posts")+"]");for(let l of r)this.recentVisitService.setRecentVisit("/set-recent-visit-post",t,l).subscribe();this.storageService.removeItem("recent_posts");const i=""==this.storageService.getItem("recent_communities")?[]:JSON.parse("["+this.storageService.getItem("recent_communities")+"]");for(let l of i)this.recentVisitService.setRecentVisit("/set-recent-visit-community",t,l).subscribe();this.storageService.removeItem("recent_communities"),window.location.href="/home"}static#e=this.\u0275fac=function(r){return new(r||e)(B(a9),B(jf),B(Vt),B(ct),B(gm),B(Ys))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-signin"]],decls:29,vars:3,consts:[["id","signin_container"],["id","main_logo","src","assets/icon/logo.png","alt","logo"],[2,"color","black !important"],[3,"formGroup","ngSubmit"],["id","lbl_username","for","username",2,"color","black !important"],["id","username","name","username","type","text","formControlName","username","required","",2,"color","black !important"],["id","forgot_pass"],["for","password",2,"color","black !important"],["routerLink","/forgot-password"],["id","password","name","password","type","password","formControlName","password","required","",2,"color","black !important"],["type","submit","id","btnSignIn",2,"color","black !important",3,"disabled"],["id","google_login","type","button",3,"click"],["id","google_logo","src","assets/icon/google.png","alt","google logo"],["id","create_account"],[2,"font-size","20px !important","color","black !important"],["routerLink","/signup",2,"font-size","20px !important"],[3,"txt_load",4,"ngIf"],[3,"txt_load"]],template:function(r,i){1&r&&(x(0,"div",0),Q(1,"img",1),x(2,"b")(3,"h2",2),L(4,"Sign in to Reddit"),D()(),x(5,"form",3),z("ngSubmit",function(){return i.SignInFormSubmit()}),x(6,"label",4),L(7,"Username"),D(),Q(8,"input",5),x(9,"div",6)(10,"label",7),L(11,"Password"),D(),x(12,"a",8),L(13,"Forgot password?"),D()(),Q(14,"input",9),x(15,"button",10),L(16,"Login"),D()(),x(17,"p",2),L(18,"Or"),D(),x(19,"button",11),z("click",function(){return i.SignInUsingGoogle()}),Q(20,"img",12),x(21,"p",2),L(22,"Signin using Google"),D()(),x(23,"div",13)(24,"p",14),L(25,"New user?"),D(),x(26,"a",15),L(27,"Create an account"),D()()(),Pe(28,aD,1,1,"loading",16)),2&r&&(k(5),A("formGroup",i.signInForm),k(10),A("disabled","INVALID"==i.signInForm.status),k(13),A("ngIf",i.isLoad))},dependencies:[sn,Zu,Bc,Rc,Xu,Nl,Rf,Vc,Rl,Js],styles:["[_nghost-%COMP%]{--signin_length: 300px;height:100vh;width:100vw;overflow-x:hidden;overflow-y:auto;background-color:#fff}#signin_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px;overflow:hidden;position:relative;top:80px;padding-bottom:30px}#signin_container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0}#main_logo[_ngcontent-%COMP%]{width:60px;aspect-ratio:1/1}.p[_ngcontent-%COMP%]{font-size:large;font-weight:400}form[_ngcontent-%COMP%]{width:var(--signin_length);height:auto;display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px solid black;border-radius:5px;background-color:#fff}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0 0}form[_ngcontent-%COMP%] > input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{margin:5px 0 10px;border:1px solid black;border-radius:5px;width:90%;height:auto;padding:5px}input[type=password][_ngcontent-%COMP%]:focus, #username[_ngcontent-%COMP%]:focus{border:2px solid black}#forgot_pass[_ngcontent-%COMP%]{width:90%;display:flex;flex-direction:row;align-items:center;justify-content:space-between}#lbl_username[_ngcontent-%COMP%]{align-self:flex-start;position:relative;left:5%}a[_ngcontent-%COMP%]{text-decoration:none;padding-left:5px;color:#0045ac!important;font-size:16px}p[_ngcontent-%COMP%]{font-size:16px!important}#btnSignIn[_ngcontent-%COMP%]{background-color:var(--main_color);font-size:16px;width:auto;height:auto;padding:5px 20px;border:1px black solid;border-radius:20px;margin-bottom:10px;color:#000}#google_login[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:var(--signin_length);height:50px;justify-content:center;align-items:center;border:1px black solid;border-radius:5px;background-color:#fff}#google_login[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:5px}#google_login[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:18px!important}#google_login[_ngcontent-%COMP%]:hover{background-color:var(--main_color)}#google_logo[_ngcontent-%COMP%]{width:35px;aspect-ratio:1/1}#create_account[_ngcontent-%COMP%]{display:flex;align-content:space-between}button[_ngcontent-%COMP%]{background-color:#fff;border:1px solid black;width:50px;height:30px}#login-success[_ngcontent-%COMP%]{position:absolute;background-color:var(--allow);z-index:10}.is_login[_ngcontent-%COMP%]{z-index:10;display:flex;justify-content:center;align-items:center;width:200px;height:200px;background-color:var(--allow);position:absolute}"]})}return e})();const cD=(e,o)=>t=>{const r=t.get(e)?.value,i=t.get(o)?.value;return r===i?null:{is_same_password:!0}};class QC{constructor(o,t,r){this.username=o,this.password=t,this.email=r}}let Hf=(()=>{class e{constructor(t,r){this.serverurl=t,this.postService=r,this.endpoint="/signup/username-password",this.fullUrl=this.serverurl.getUrl()+this.endpoint}UsernamePasswordSignUp(t,r,i){const l=new QC(t,r,i),d=JSON.stringify(l);let p=new et;return p=p.append("Accept","application/json"),p=p.append("Content-Type","application/json"),this.postService.post(this.endpoint,p,d,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(jf),ie(Io))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function XC(e,o){1&e&&Q(0,"loading",24),2&e&&A("txt_load","Signing up. Please wait")}let l9=(()=>{class e{constructor(t,r,i,l){this.signUpService=t,this.serverUrlService=r,this.router=i,this.storageService=l,this.signUpForm=new Fc({email:new xr("",[On.required,On.email]),username:new xr("",[On.required,On.minLength(2),On.maxLength(16),On.pattern("^[0-9a-zA-Z]{2,16}$")]),password:new xr("",[On.required,On.minLength(8),On.maxLength(20),On.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[`~!@#$%^&*()_\\-+=\\[\\]{};:'\",.<>?/\\\\|])[A-Za-z\\d`~!@#$%^&*()_\\-+=\\[\\]{};:'\",.<>?/\\\\|]{8,20}$")]),confirm_password:new xr("",[On.required,On.minLength(8),On.maxLength(20),On.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[`~!@#$%^&*()_\\-+=\\[\\]{};:'\",.<>?/\\\\|])[A-Za-z\\d`~!@#$%^&*()_\\-+=\\[\\]{};:'\",.<>?/\\\\|]{8,20}$")])},{validators:cD("password","confirm_password")}),this.serverUrl=this.serverUrlService.getUrl(),this.email_status="INVALID",this.username_status="INVALID",this.password_status="INVALID",this.confirm_password_status="INVALID",this.isLoad=!1}ngOnInit(){this.signUpForm.get("email").valueChanges.subscribe(()=>{this.email_status=this.signUpForm.get("email").status,console.log("email: ",this.email_status)}),this.signUpForm.get("username").valueChanges.subscribe(()=>{this.username_status=this.signUpForm.get("username").status,console.log("username: ",this.username_status)}),this.signUpForm.get("password").valueChanges.subscribe(()=>{this.password_status=this.signUpForm.get("password").status,console.log("password: ",this.password_status)}),this.signUpForm.get("confirm_password").valueChanges.subscribe(()=>{this.confirm_password_status=this.signUpForm.get("confirm_password").status,console.log("confirm_password: ",this.confirm_password_status)});const t=Lf("signup")||"";if(""!==t)try{JSON.parse(t).isSignUp?Ne().fire("Sign up using google successfully","","success").then(i=>{i.isConfirmed&&(this.storageService.setItem("signup_google_email",Lf("signup_google_email")),window.location.href="/choose-username")}):Ne().fire("A user with this email has already exist. \nPlease use a different email","","error")}catch{Ne().fire("Error signup using goolge. Please try to sign-up again","","error")}}SignUpFormSubmit(){if("VALID"==this.signUpForm.status){const t=this.signUpForm.value.username,r=this.signUpForm.value.password,i=this.signUpForm.value.email;this.isLoad=!0,this.signUpService.UsernamePasswordSignUp(t,r,i).subscribe({next:d=>{d.isSignUp?(this.storageService.setItem("signup-email",i),this.router.navigate(["/check-sign-up-passcode"])):(1==d.emailError&&Ne().fire({icon:"warning",title:"An account with this email has already exist"}),1==d.usernameError&&Ne().fire("Username already exist","","warning")),this.isLoad=!1},error:d=>{Ne().fire("Error sign up. Please try again","","error"),this.isLoad=!1}})}}SignUpUsingGoogle(){window.location.href=`${this.serverUrl}/signup/google`}static#e=this.\u0275fac=function(r){return new(r||e)(B(Hf),B(jf),B(Vt),B(ct))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-signup"]],decls:40,vars:7,consts:[["id","signup_container"],["id","main_logo","src","assets/icon/logo.png","alt","logo"],[2,"color","black !important"],[3,"formGroup","ngSubmit"],["id","lbl_email","for","email",2,"color","black !important"],["id","email","name","email","type","text","formControlName","email","placeholder","",2,"color","black !important"],["id","email_ok",3,"ngClass"],["id","lbl_username","for","username",2,"color","black !important"],["id","username","name","username","type","text","formControlName","username","placeholder","",2,"color","black !important"],["id","username_ok",3,"ngClass"],["id","lbl_password","for","password",2,"color","black !important"],["id","password","name","password","type","password","formControlName","password","placeholder","",2,"color","black !important"],["id","password_ok",3,"ngClass"],["id","lbl_confirm_password","for","confirm_password",2,"color","black !important"],["id","confirm_password","name","confirm_password","type","password","formControlName","confirm_password","placeholder","",2,"color","black !important"],["id","confirm_password_ok",3,"ngClass"],["type","submit","id","btnSignUp",2,"color","black !important",3,"disabled"],[2,"font-size","20px !important","color","black !important"],["id","google_login","type","button",3,"click"],["id","google_logo","src","assets/icon/google.png","alt","google logo"],["id","txt_GoogleSignUp",2,"color","black !important"],["id","signin"],["routerLink","/signin",2,"font-size","20px !important"],[3,"txt_load",4,"ngIf"],[3,"txt_load"]],template:function(r,i){1&r&&(x(0,"div",0),Q(1,"img",1),x(2,"b")(3,"h2",2),L(4,"Create an account"),D()(),x(5,"form",3),z("ngSubmit",function(){return i.SignUpFormSubmit()}),x(6,"label",4),L(7,"Email"),D(),Q(8,"input",5),x(9,"p",6),L(10,"Your email address"),D(),x(11,"label",7),L(12,"Username"),D(),Q(13,"input",8),x(14,"p",9),L(15,"Contain a-z A-Z 0-9, 2 to 16 characters"),D(),x(16,"label",10),L(17,"Password"),D(),Q(18,"input",11),x(19,"p",12),L(20,"Contain a-z A-Z 0-9 symbol, 8 to 20 characters"),D(),x(21,"label",13),L(22,"Confirm password"),D(),Q(23,"input",14),x(24,"p",15),L(25,"Re-enter your password"),D(),x(26,"button",16),L(27,"Sign up"),D()(),x(28,"p",17),L(29,"Or"),D(),x(30,"button",18),z("click",function(){return i.SignUpUsingGoogle()}),Q(31,"img",19),x(32,"p",20),L(33,"Sign up using Google"),D()(),x(34,"div",21)(35,"p",17),L(36,"Already have an account?"),D(),x(37,"a",22),L(38,"Sign in"),D()()(),Pe(39,XC,1,1,"loading",23)),2&r&&(k(5),A("formGroup",i.signUpForm),k(4),A("ngClass","VALID"===i.email_status?"email_ok":"email_not_ok"),k(5),A("ngClass","VALID"===i.username_status?"username_ok":"username_not_ok"),k(5),A("ngClass","VALID"===i.password_status?"password_ok":"password_not_ok"),k(5),A("ngClass","VALID"===i.confirm_password_status?"confirm_password_ok":"confirm_password_not_ok"),k(2),A("disabled","INVALID"==i.signUpForm.status),k(13),A("ngIf",i.isLoad))},dependencies:[lr,sn,Zu,Bc,Rc,Xu,Nl,Vc,Rl,Js],styles:["[_nghost-%COMP%]{height:100vh;width:100vw;overflow-y:auto;overflow-x:hidden;padding-bottom:30px;background-color:#fff}#signup_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px;position:relative;top:15px}#signup_container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0}#main_logo[_ngcontent-%COMP%]{height:60px;aspect-ratio:1/1}.p[_ngcontent-%COMP%]{font-size:large;font-weight:400}form[_ngcontent-%COMP%]{width:var(--form_length);height:auto;display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px black solid;border-radius:5px;background-color:#fff}form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{align-self:flex-start;position:relative;left:5%;bottom:7px;font-size:13px}form[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{margin:5px 0 10px;border:1px solid black;border-radius:5px;width:90%;height:auto;padding:5px 0 5px 5px}input[type=text][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border:2px solid black}label[_ngcontent-%COMP%]{align-self:flex-start;position:relative;left:5%}a[_ngcontent-%COMP%]{text-decoration:none;color:#0045ac!important;margin-left:5px}#btnSignUp[_ngcontent-%COMP%]{font-size:medium;width:auto;height:auto;padding:5px 20px;border:1px black solid;border-radius:20px;margin-top:5px;margin-bottom:10px;background-color:var(--main_color);color:#000}#txt_GoogleSignUp[_ngcontent-%COMP%]{font-size:18px}#google_login[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:var(--form_length);height:50px;justify-content:center;align-items:center;border:1px black solid;border-radius:5px;background-color:#fff}#google_login[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:5px}#google_login[_ngcontent-%COMP%]:hover{background-color:var(--main_color)}#google_logo[_ngcontent-%COMP%]{width:30px;height:30px}#signin[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start}#lbl_email[_ngcontent-%COMP%]{margin-top:10px}.email_ok[_ngcontent-%COMP%], .username_ok[_ngcontent-%COMP%], .password_ok[_ngcontent-%COMP%], .confirm_password_ok[_ngcontent-%COMP%]{display:block;color:green}.email_not_ok[_ngcontent-%COMP%], .username_not_ok[_ngcontent-%COMP%], .password_not_ok[_ngcontent-%COMP%], .confirm_password_not_ok[_ngcontent-%COMP%]{display:block;color:red}"]})}return e})(),lD=(()=>{class e{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-error"]],decls:4,vars:0,template:function(r,i){1&r&&(x(0,"h1"),L(1,"ERROR 404"),D(),x(2,"h1"),L(3,"PAGE NOT FOUND"),D())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;background-color:var(--primary_background_color)}h1[_ngcontent-%COMP%]{font-weight:400;color:var(--secondary_color)}"]})}return e})(),zf=(()=>{class e{constructor(t){this.getService=t,this.signOuttEndpoint="/sign-out"}removeRefreshToken(){let t=new et;return this.getService.get(this.signOuttEndpoint,t,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Rn=(()=>{class e{constructor(t,r,i){this.getService=t,this.storageService=r,this.removeRefreshTokenService=i,this.checkRefreshTokenEndpoint="/check-refresh-token"}checkRefreshToken(){const t=new et;return this.getService.get(this.checkRefreshTokenEndpoint,t,!0)}runCheckRefreshToken(){this.checkRefreshToken().subscribe({next:t=>{0!=t&&this.storageService.setItem("uid",t.toString())},error:t=>{this.storageService.removeItem("uid"),this.storageService.setItem("mode","0"),this.removeRefreshTokenService.removeRefreshToken().subscribe(),Ne().fire({title:"You need to sign-in to do this action",icon:"error",showConfirmButton:!0,confirmButtonText:"OK",footer:'<a href="signin" style="color:red;font-size: 18px"><b>Click here to go to sign-in page<b/></a>'}).then(r=>{r.isDismissed&&window.location.reload()})}})}runCheckRefreshTokenWithoutNotification(){this.checkRefreshToken().subscribe({next:t=>{0!=t&&this.storageService.setItem("uid",t.toString())},error:t=>{this.storageService.removeItem("uid"),this.storageService.setItem("mode","0"),this.removeRefreshTokenService.removeRefreshToken().subscribe()}})}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks),ie(ct),ie(zf))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class u9{constructor(o,t,r){this.uid=o,this.community_id=t,this.subscribed=r}}class d9{constructor(o,t,r){this.id=o,this.uid=t,this.deleted=r}}let Pr=(()=>{class e{constructor(t,r,i,l){this.getService=t,this.postService=r,this.checkRefreshToken=i,this.storageService=l,this.endpoint="/find-community"}searchCommunities(t){const i=this.endpoint+"?name="+t,l=new et;return this.getService.get(i,l,!0)}getCommunityInfoById(t){const i="/get-community-info?id="+t,l=new et;return this.getService.get(i,l,!0)}getAllCommunitiesInfo(){const t=new et;return this.getService.get("/get-all-communities-info",t,!0)}getCommunityModerateByUid(t){const i="/get-community-info-by-uid?uid="+t,l=new et;return this.getService.get(i,l,!0)}getSubscribedCommunitiesByUid(t){const i="/get-subscribed-communities?uid="+t,l=new et;return this.getService.get(i,l,!0)}joinCommunity(t,r,i){this.checkRefreshToken.runCheckRefreshToken();const d=JSON.stringify(new u9(t,r,i));let p=new et;return p=p.append("Accept","application/json"),p=p.append("Content-Type","application/json"),this.postService.post("/join-community",p,d,!0)}checkJoinCommunityStatus(t,r){const i="/check-join-community?uid="+t+"&cid="+r,l=new et;return this.getService.get(i,l,!0)}deleteCommunity(t,r,i){this.checkRefreshToken.runCheckRefreshToken();const d=JSON.stringify(new d9(t,r,i));let p=new et;return p=p.append("Accept","application/json"),p=p.append("Content-Type","application/json"),this.postService.post("/delete-community",p,d,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks),ie(Io),ie(Rn),ie(ct))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class uD{constructor(o,t,r,i,l,d,p,m,v,w,P,R,$,H){this.post_id=o,this.type=t,this.uid=r,this.username=i,this.username_icon=l,this.community_id=d,this.community_name=p,this.community_icon=m,this.title=v,this.content=w,this.created_at=P,this.vote=R,this.allow=$,this.deleted=H}}class _a extends uD{constructor(){super(0,"",0,"","",0,"","","","","",0,0,0),this.join=null,this.voteType=null,this.save=null,this.communityOwner=0,this.deleted_by=0,this.deleted_at=null,this.allowed_at=null,this.editted=0,this.editted_at=null}}class Wf{constructor(o,t,r,i,l){this.post_id=o,this.allow=t,this.deleted=r,this.allowed_at=i,this.deleted_at=l}}class vm{constructor(o,t){this.first=o,this.last=t}}let Er=(()=>{class e{constructor(){this.detail_posts=new ft([]),this.detail_posts$=this.detail_posts.asObservable(),this.post_id_arr=new ft([]),this.post_id_arr$=this.post_id_arr.asObservable(),this.cur_view_post_id=new ft(0),this.cur_view_post_id$=this.cur_view_post_id.asObservable(),this.home_post_id_arr=new ft([]),this.home_post_id_arr$=this.home_post_id_arr.asObservable(),this.home_detail_posts=new ft([]),this.home_detail_posts$=this.home_detail_posts.asObservable(),this.cur_home_view_post_id=new ft(0),this.cur_home_view_post_id$=this.cur_home_view_post_id.asObservable(),this.home_search_option=new ft("hot"),this.home_search_option$=this.home_search_option.asObservable(),this.popular_post_id_arr=new ft([]),this.popular_post_id_arr$=this.popular_post_id_arr.asObservable(),this.popular_detail_posts=new ft([]),this.popular_detail_posts$=this.popular_detail_posts.asObservable(),this.cur_popular_view_post_id=new ft(0),this.cur_popular_view_post_id$=this.cur_popular_view_post_id.asObservable(),this.popular_search_option=new ft("hot"),this.popular_search_option$=this.popular_search_option.asObservable(),this.community_post_id_arr=new ft([]),this.community_post_id_arr$=this.community_post_id_arr.asObservable(),this.community_detail_posts=new ft([]),this.community_detail_posts$=this.community_detail_posts.asObservable(),this.cur_community_view_post_id=new ft(0),this.cur_community_view_post_id$=this.cur_community_view_post_id.asObservable(),this.community_search_option=new ft("hot"),this.community_search_option$=this.community_search_option.asObservable(),this.subscribed_communities=new ft([]),this.subscribed_communities$=this.subscribed_communities.asObservable(),this.saved_detail_posts=new ft([]),this.saved_detail_posts$=this.saved_detail_posts.asObservable(),this.saved_post_id_arr=new ft([]),this.saved_post_id_arr$=this.saved_post_id_arr.asObservable(),this.cur_saved_view_post_id=new ft(0),this.cur_saved_view_post_id$=this.cur_saved_view_post_id.asObservable(),this.user_detail_posts=new ft([]),this.user_detail_posts$=this.user_detail_posts.asObservable(),this.user_post_id_arr=new ft([]),this.user_post_id_arr$=this.user_post_id_arr.asObservable(),this.user_post_search_option=new ft("new"),this.user_post_search_option$=this.user_post_search_option.asObservable(),this.cur_user_post_view_post_id=new ft(0),this.cur_user_post_view_post_id$=this.cur_user_post_view_post_id.asObservable(),this.wait_for_approve_detail_posts=new ft([]),this.wait_for_approve_detail_posts$=this.wait_for_approve_detail_posts.asObservable(),this.wait_approve_post_id_arr=new ft([]),this.wait_approve_post_id_arr$=this.wait_approve_post_id_arr.asObservable(),this.cur_wait_approve_view_post_id=new ft(0),this.cur_wait_approve_view_post_id$=this.cur_wait_approve_view_post_id.asObservable(),this.search_post_detail_posts=new ft([]),this.search_post_detail_posts$=this.search_post_detail_posts.asObservable(),this.search_post_post_id_arr=new ft([]),this.search_post_post_id_arr$=this.search_post_post_id_arr.asObservable(),this.search_post_post_search_option=new ft("new"),this.search_post_post_search_option$=this.search_post_post_search_option.asObservable(),this.cur_search_post_view_post_id=new ft(0),this.cur_search_post_view_post_id$=this.cur_search_post_view_post_id.asObservable(),this.comments_infos=new ft([]),this.comments_infos$=this.comments_infos.asObservable(),this.comment_id_arr=new ft([]),this.comment_id_arr$=this.comment_id_arr.asObservable(),this.comment_search_option=new ft("new"),this.comment_search_option$=this.comment_search_option.asObservable(),this.cur_comment_view_id=new ft(0),this.cur_comment_view_id$=this.cur_comment_view_id.asObservable(),this.review_post_id_arr=new ft([]),this.review_post_id_arr$=this.review_post_id_arr.asObservable(),this.review_detail_posts=new ft([]),this.review_detail_posts$=this.review_detail_posts.asObservable(),this.cur_review_view_post_id=new ft(0),this.cur_review_view_post_id$=this.cur_review_view_post_id.asObservable(),this.review_search_option=new ft("hot"),this.review_search_option$=this.review_search_option.asObservable(),this.profile_option=new ft("posts"),this.profile_option$=this.profile_option.asObservable(),this.mod_option=new ft("review"),this.mod_option$=this.mod_option.asObservable(),this.mod_detail_post=new ft(new _a),this.mod_detail_post$=this.mod_detail_post.asObservable(),this.changed_post=new ft(new Wf(0,0,0,"","")),this.changed_post$=this.changed_post.asObservable(),this.mod_selected_post_id=new ft(0),this.mod_selected_post_id$=this.mod_selected_post_id.asObservable(),this.first_last=new ft(new vm(0,0)),this.first_last$=this.first_last.asObservable()}setDetailPosts(t){this.detail_posts.next(t)}setPostIdArr(t){this.post_id_arr.next(t)}setCurViewPostId(t){this.cur_view_post_id.next(t)}setHomePostIdArr(t){this.home_post_id_arr.next(t)}setHomeDetailPosts(t){this.home_detail_posts.next(t)}setHomeCurViewPostId(t){this.cur_home_view_post_id.next(t)}setHomeSearchOption(t){this.home_search_option.next(t)}setPopularPostIdArr(t){this.popular_post_id_arr.next(t)}setPopularDetailPosts(t){this.popular_detail_posts.next(t)}setPopularCurViewPostId(t){this.cur_popular_view_post_id.next(t)}setPopularSearchOption(t){this.popular_search_option.next(t)}setCommunityPostIdArr(t){this.community_post_id_arr.next(t)}setCommunityDetailPosts(t){this.community_detail_posts.next(t)}setCommunityCurViewPostId(t){this.cur_community_view_post_id.next(t)}setCommunitySearchOption(t){this.community_search_option.next(t)}setJoinCommunityOfDetailPosts(t,r){let i=this.detail_posts.getValue();for(let l of i)l.community_id==t&&(l.join=r);this.setDetailPosts(i)}setVoteOfDetailPosts(t,r){let i=this.detail_posts.getValue();for(let l of i)l.post_id==t&&(l.vote=r);this.setDetailPosts(i)}setVoteTypeOfDetailPosts(t,r){let i=this.detail_posts.getValue();for(let l of i)l.post_id==t&&(l.voteType=r);this.setDetailPosts(i)}setAllowOfDetailPosts(t,r){let i=this.detail_posts.getValue();for(let l of i)l.post_id==t&&(l.allow=r);this.setDetailPosts(i)}setDeleteOfDetailPosts(t,r){let i=this.detail_posts.getValue();for(let l of i)l.post_id==t&&(l.deleted=r);this.setDetailPosts(i)}setSaveStatusOfDetailPosts(t,r){let i=this.detail_posts.getValue();for(let l of i)l.post_id==t&&(l.save=r);this.setDetailPosts(i)}setSubscribedCommunities(t){this.subscribed_communities.next(t)}setSavedDetailPosts(t){this.saved_detail_posts.next(t)}setSavedPostIds(t){this.saved_post_id_arr.next(t)}setSavedCurViewPostId(t){this.cur_saved_view_post_id.next(t)}setUserDetailPosts(t){this.user_detail_posts.next(t)}setUserPostIds(t){this.user_post_id_arr.next(t)}setUserPostSearchOption(t){this.user_post_search_option.next(t)}setUserPostCurViewPostId(t){this.cur_user_post_view_post_id.next(t)}setWaitForApproveDetailPosts(t){this.wait_for_approve_detail_posts.next(t)}setWaitApprovePostIds(t){this.wait_approve_post_id_arr.next(t)}setWaitForApproveCurViewPostId(t){this.cur_wait_approve_view_post_id.next(t)}setSearchPostsDetailPosts(t){this.search_post_detail_posts.next(t)}setSearchPostsPostIds(t){this.search_post_post_id_arr.next(t)}setSearchPostsSearchOption(t){this.search_post_post_search_option.next(t)}setSearchPostsCurViewPostId(t){this.cur_search_post_view_post_id.next(t)}setCommentsInfos(t){this.comments_infos.next(t)}setCommentIds(t){this.comment_id_arr.next(t)}setCommentSearchOption(t){this.comment_search_option.next(t)}setCommentCurViewId(t){this.cur_comment_view_id.next(t)}setReviewPostIdArr(t){this.review_post_id_arr.next(t)}setReviewDetailPosts(t){this.review_detail_posts.next(t)}setReviewCurViewPostId(t){this.cur_review_view_post_id.next(t)}setReviewSearchOption(t){this.review_search_option.next(t)}setProfileOption(t){this.profile_option.next(t)}setModOption(t){this.mod_option.next(t)}setModDetailPost(t){this.mod_detail_post.next(t)}setChangedPost(t){console.log(t),this.changed_post.next(t)}setModSelectedPostId(t){this.mod_selected_post_id.next(t)}setFirstLast(t){this.first_last.next(t)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function f9(e,o){if(1&e&&(x(0,"a",11),Q(1,"img",12),x(2,"pre"),L(3),D()()),2&e){const t=o.$implicit;In("routerLink","r/",t.id,""),k(1),Ot("src",t.avatar,Qe),k(2),at("r/",t.name,"")}}const Sv=e=>({display:e});function h9(e,o){if(1&e){const t=We();x(0,"nav")(1,"button",7),z("click",function(){return ce(t),fe(q().change_moderation_status())}),x(2,"span"),L(3,"Moderation"),D(),Q(4,"span",8),D(),x(5,"div",9),Pe(6,f9,4,3,"a",10),D()()}if(2&e){const t=q();k(4),A("ngClass",t.moderation_status?"pi-chevron-down":"pi-chevron-up"),k(1),A("ngStyle",ve(3,Sv,t.moderation_status?"none":"block")),k(1),A("ngForOf",t.moderationCommunities)}}function p9(e,o){if(1&e&&(x(0,"a",14),Q(1,"img",12),x(2,"pre"),L(3),D()()),2&e){const t=o.$implicit;In("href","r/",t.id,"",Qe),k(1),Ot("src",t.avatar,Qe),k(2),at("r/",t.name,"")}}function m9(e,o){if(1&e){const t=We();x(0,"nav")(1,"button",7),z("click",function(){return ce(t),fe(q().change_recent_status())}),x(2,"span"),L(3,"Recent"),D(),Q(4,"span",8),D(),x(5,"div",9),Pe(6,p9,4,3,"a",13),D()()}if(2&e){const t=q();k(4),A("ngClass","up"===t.recent_status?"pi-chevron-down":"pi-chevron-up"),k(1),A("ngStyle",ve(3,Sv,"up"===t.recent_status?"none":"block")),k(1),A("ngForOf",t.recentVisitCommunities)}}function dD(e,o){if(1&e&&(x(0,"a",14),Q(1,"img",12),x(2,"pre"),L(3),D()()),2&e){const t=o.$implicit;In("href","r/",t.id,"",Qe),k(1),Ot("src",t.avatar,Qe),k(2),at("r/",t.name,"")}}const fD=e=>({"margin-bottom":e});function g9(e,o){if(1&e){const t=We();x(0,"nav")(1,"button",7),z("click",function(){return ce(t),fe(q().change_favorite_status())}),x(2,"span"),L(3,"Communities"),D(),Q(4,"span",8),D(),x(5,"nav",9)(6,"button",15),z("click",function(){return ce(t),fe(q().showCreateCommunityForm())}),Q(7,"i",16),x(8,"pre"),L(9,"Create a community"),D()()(),x(10,"div",9),Pe(11,dD,4,3,"a",13),D()()}if(2&e){const t=q();k(4),A("ngClass","up"===t.favorite_status?"pi-chevron-down":"pi-chevron-up"),k(1),A("ngStyle",ve(5,Sv,"up"===t.favorite_status?"none":"block")),k(1),A("ngStyle",ve(7,fD,t.favoriteCommunities.length>0?"0":"10px")),k(4),A("ngStyle",ve(9,Sv,"up"===t.favorite_status?"none":"block")),k(1),A("ngForOf",t.favoriteCommunities)}}const hD=e=>({selected_page:e});let _9=(()=>{class e{constructor(t,r,i,l,d,p){this.communityService=t,this.storageService=r,this.recentVisitService=i,this.darkmodeSerive=l,this.shareDataService=d,this.route=p,this.isOpen=!0,this.isUser=!1,this.recent_status="down",this.favorite_status="down",this.moderation_status=!1,this.showCommunityFormEvent=new Le,this.favoriteCommunities=[],this.recentVisitCommunities=[],this.moderationCommunities=[],this.isHomePage=window.location.href.includes("/home"),this.isPopularPage=window.location.href.includes("/popular")}ngOnInit(){this.darkmodeSerive.useDarkMode(),this.shareDataService.subscribed_communities$.subscribe(r=>{this.favoriteCommunities=r});const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));if(this.isUser=0!=t,0!=t)this.communityService.getCommunityModerateByUid(t).subscribe({next:r=>{this.moderationCommunities=r}}),this.recentVisitService.getRecentVisitCommunity(t).subscribe({next:r=>{this.recentVisitCommunities=r}}),0==this.favoriteCommunities.length&&this.communityService.getSubscribedCommunitiesByUid(t).subscribe({next:r=>{this.favoriteCommunities=r,this.shareDataService.setSubscribedCommunities(this.favoriteCommunities)}});else{let r=""==this.storageService.getItem("recent_communities")?[]:JSON.parse("["+this.storageService.getItem("recent_communities")+"]");for(let i of r)this.communityService.getCommunityInfoById(i.toString()).subscribe({next:l=>{this.recentVisitCommunities.push(l)}})}setInterval(()=>{window.location.href.includes("/home")?(this.isHomePage=!0,this.isPopularPage=!1):window.location.href.includes("/popular")?(this.isPopularPage=!0,this.isHomePage=!1):(this.isHomePage=!1,this.isPopularPage=!1)},100)}ngAfterViewInit(){this.darkmodeSerive.useDarkMode()}change_recent_status(){this.recent_status="up"===this.recent_status?"down":"up",this.isOpen=!this.isOpen}change_favorite_status(){this.favorite_status="up"===this.favorite_status?"down":"up"}change_moderation_status(){this.moderation_status=!this.moderation_status}showCreateCommunityForm(){this.showCommunityFormEvent.emit(!0)}goToHome(){this.shareDataService.setHomeCurViewPostId(0),this.shareDataService.setHomeSearchOption("hot"),this.shareDataService.setPopularDetailPosts([]),this.shareDataService.setPopularPostIdArr([])}goToPopular(){this.shareDataService.setPopularCurViewPostId(0),this.shareDataService.setPopularSearchOption("hot"),this.shareDataService.setHomeDetailPosts([]),this.shareDataService.setHomePostIdArr([])}static#e=this.\u0275fac=function(r){return new(r||e)(B(Pr),B(ct),B(gm),B(Ys),B(Er),B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-navigation-bar"]],outputs:{showCommunityFormEvent:"showCommunityFormEvent"},decls:13,vars:9,consts:[["id","navigation_bar",1,"scrollbar_width"],["id","main_navigation"],["routerLink","/home",3,"ngClass","click"],[1,"icon","pi","pi-home"],["id","btn_popular","routerLink","/popular",3,"ngClass","click"],[1,"icon","pi","pi-chart-line"],[4,"ngIf"],["type","button",1,"btn_change_status",3,"click"],[1,"pi","btn_icon",3,"ngClass"],[3,"ngStyle"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],["id","img_community_icon","alt","",3,"src"],[3,"href",4,"ngFor","ngForOf"],[3,"href"],["type","button",3,"ngStyle","click"],[1,"pi","pi-plus"]],template:function(r,i){1&r&&(x(0,"nav",0)(1,"nav",1)(2,"a",2),z("click",function(){return i.goToHome()}),Q(3,"span",3),x(4,"span"),L(5,"Home"),D()(),x(6,"a",4),z("click",function(){return i.goToPopular()}),Q(7,"span",5),x(8,"span"),L(9,"Popular"),D()()(),Pe(10,h9,7,5,"nav",6)(11,m9,7,5,"nav",6)(12,g9,12,11,"nav",6),D()),2&r&&(k(2),A("ngClass",ve(5,hD,i.isHomePage)),k(4),A("ngClass",ve(7,hD,i.isPopularPage)),k(4),A("ngIf",i.moderationCommunities.length>0),k(1),A("ngIf",i.recentVisitCommunities.length>0),k(1),A("ngIf",i.isUser))},dependencies:[lr,Zr,sn,Eo,Zu],styles:["[_nghost-%COMP%]{position:relative;background-color:var(--header)}.selected_page[_ngcontent-%COMP%]{background-color:var(--search)!important}#main_navigation[_ngcontent-%COMP%]{margin-top:20px}#navigation_bar[_ngcontent-%COMP%]{width:calc(100% - 15px);height:100%;display:block;overflow:hidden;scrollbar-gutter:stable;margin-left:15px}#navigation_bar[_ngcontent-%COMP%]:hover{overflow-y:auto}#navigation_bar[_ngcontent-%COMP%] > nav[_ngcontent-%COMP%]{width:90%;height:auto;border-bottom:1px solid var(--border)}#navigation_bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;height:50px;background-color:var(--header);display:flex;flex-direction:row;justify-content:flex-start;align-items:center;font-size:14px;color:var(--icon)!important;border-radius:10px}#navigation_bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, button[_ngcontent-%COMP%]:hover{background-color:var(--nav_hover)!important}span[_ngcontent-%COMP%]{position:relative;left:20px}.icon[_ngcontent-%COMP%]{margin-right:10px;font-size:1.5rem}#btn_popular[_ngcontent-%COMP%]{margin-bottom:10px}.btn_change_status[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;margin:10px 0}.btn_icon.pi-chevron-up[_ngcontent-%COMP%]:before, .pi-chevron-down[_ngcontent-%COMP%]:before{position:relative;right:40px}#trademark[_ngcontent-%COMP%]{text-align:center}#img_community_icon[_ngcontent-%COMP%], button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;margin-left:20px;margin-right:5px}button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:25px}@media only screen and (max-width: 1200px){#navigation_bar[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}nav[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:last-child{margin-bottom:10px}"]})}return e})();class ym{constructor(o,t,r,i,l,d,p){this.uid=o,this.username=t,this.description=r,this.created_at=i,this.post_karma=l,this.comment_karma=d,this.avatar=p}}let jc=(()=>{class e{constructor(t){this.getService=t,this.endpoint="/find-user-profile",this.uid_endpoint="/get-user-info-by-uid"}searchUserProfile(t){const i=this.endpoint+"?name="+t,l=new et;return this.getService.get(i,l,!0)}getUserProfileByName(t,r){const l=t+"?username="+r,d=new et;return this.getService.get(l,d,!0)}getUserProfileByUid(t){const i=this.uid_endpoint+"?uid="+t,l=new et;return this.getService.get(i,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),va=(()=>{class e{constructor(){}transformNumber(t){return t>=1e6?`${(Math.round(t/1e6*10)/10).toFixed(1).replace(".0","")}M`:t>=1e4?`${(Math.round(t/1e3*10)/10).toFixed(0)}K`:t>=1e3?`${(Math.round(t/1e3*10)/10).toFixed(1).replace(".0","")}K`:t.toString()}formatKarma(t){if(0==t)return"0";const r=t.toString(),i=[];for(let l=0;l<r.length;l+=3)i.unshift(r.slice(l,l+3).replace(/^0+/,""));return i.join(",")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bm=(()=>{class e{constructor(t){this.storageService=t,this.upvote="",this.downvote="",this.upvote_light="../../../../assets/icon/upvote-light.svg",this.upvote_dark="../../../../assets/icon/upvote-dark.svg",this.upvote_fill="../../../../../assets/icon/upvote-fill.png",this.downvote_fill="../../../../../assets/icon/downvote-fill.png",this.downvote_light="../../../../assets/icon/downvote-light.svg",this.downvote_dark="../../../../assets/icon/downvote-dark.svg"}selectUpVoteImg(){this.upvote=0==("0"==this.storageService.getItem("mode")?0:1)?"../../../../assets/icon/upvote-dark.svg":"../../../../assets/icon/upvote-light.svg"}selectDownVoteImg(){this.downvote=0==("0"==this.storageService.getItem("mode")?0:1)?"../../../../assets/icon/downvote-dark.svg":"../../../../assets/icon/downvote-light.svg"}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ct))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const od=e=>({"background-color":e});function MB(e,o){if(1&e){const t=We();x(0,"button",16),z("click",function(i){return ce(t),fe(q().opeNavigation(i))}),Q(1,"i",17),D()}if(2&e){const t=q();A("ngStyle",ve(1,od,t.isOpen?"var(--neutral)":"transparent"))}}function v9(e,o){if(1&e&&(x(0,"a",18),Q(1,"img",19),x(2,"div")(3,"p",20),L(4),D(),x(5,"p",21),L(6),D()()()),2&e){const t=o.$implicit,r=q();In("href","/r/",t.id,"",Qe),k(1),Ot("src",t.avatar,Qe),k(3),at("r/",t.name,""),k(2),at("",r.presentationService.transformNumber(t.subscriber_count)," members")}}function e0(e,o){if(1&e&&(x(0,"a",18),Q(1,"img",19),x(2,"div")(3,"p",20),L(4),D(),x(5,"p",21),L(6),D()()()),2&e){const t=o.$implicit,r=q();In("href","r/",t.id,"",Qe),k(1),Ot("src",t.avatar,Qe),k(3),at("r/",t.username,""),k(2),at("",r.presentationService.transformNumber(t.post_karma+t.comment_karma)," karma")}}const Ya=e=>({display:e});function t0(e,o){if(1&e&&(x(0,"div",22)(1,"a",23),L(2,"login"),D(),x(3,"a",24),L(4,"register"),D()()),2&e){const t=q();A("ngStyle",ve(1,Ya,!0===t.isSignIn?"none":"flex"))}}const IB=e=>({"box-shadow":e});function n0(e,o){if(1&e){const t=We();x(0,"div",25)(1,"button",26),z("click",function(){return ce(t),fe(q().createPost())}),Q(2,"i",27),L(3,"Create"),D(),x(4,"button",28)(5,"img",29),z("click",function(i){return ce(t),fe(q().openProfileMenu(i))}),D()(),x(6,"div",30)(7,"p",31),L(8),D(),x(9,"button",32),z("click",function(){return ce(t),fe(q().navigateToUserProfile())}),Q(10,"i",33),L(11,"View profile"),D(),x(12,"button",34),z("click",function(){return ce(t),fe(q().useDarkMode())}),Q(13,"i",35),L(14),D(),x(15,"button",36),z("click",function(i){return ce(t),fe(q().logOut(i))}),Q(16,"i",37),L(17,"Log Out"),D()()()}if(2&e){const t=q();A("ngStyle",ve(8,Ya,!0===t.isSignIn?"flex":"none")),k(4),A("ngStyle",ve(10,IB,t.isProfileMenuOpen?"var(--box_shadow)":"none"))("ngStyle",ve(12,od,t.isProfileMenuOpen?"var(--neutral)":"var(--primary_background_color)")),k(1),Ot("src",t.userInfo.avatar,Qe),k(1),A("ngStyle",ve(14,Ya,!0===t.isProfileMenuOpen?"block":"none")),k(2),ht(t.userInfo.username),k(4),In("title","Switch to ",t.background_mode,""),k(2),ht(t.background_mode)}}const ss=e=>({top:e}),o0=e=>({box_search:e});let pD=(()=>{class e{constructor(t,r,i,l,d,p,m,v,w,P){this.storageService=t,this.searchCommunitiesService=r,this.searchUserProfileService=i,this.userProfileService=l,this.router=d,this.presentationService=p,this.voteImgService=m,this.removeRefreshTokenService=v,this.checkRefreshToken=w,this.darkmodeService=P,this.openNavigationEvent=new Le,this.isSignIn=!1,this.isModPage=window.location.href.includes("mod/"),this.isProfileMenuOpen=!1,this.communities_result=[],this.user_profile_result=[],this.userInfo=new ym(0,"","","",0,0,""),this.background_mode="Dark mode",this.isSearch=!1,this.wait=!1,this.isOpen=!1}ngOnInit(){if(this.checkRefreshToken.checkRefreshToken().subscribe({next:r=>{this.isSignIn=""!=this.storageService.getItem("uid")&&"0"!=this.storageService.getItem("uid");const i=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));setInterval(()=>{this.checkRefreshToken.checkRefreshToken().subscribe({next:l=>{this.isSignIn=""!=this.storageService.getItem("uid")&&"0"!=this.storageService.getItem("uid")},error:l=>{this.isSignIn=!1,this.storageService.removeItem("uid"),Ne().fire({title:"Error checking refresh token",icon:"error"}).then(d=>{d.isConfirmed&&window.location.reload()})}})},1e4),this.userProfileService.getUserProfileByUid(i).subscribe({next:l=>{this.wait=!0,this.userInfo=l}})},error:r=>{this.isSignIn=!1,this.wait=!0}}),document.getElementById("txt_username")?.addEventListener("click",r=>{r.stopPropagation()}),window.innerWidth<900&&(this.isOpen=!1,this.openNavigationEvent.emit({data:this.isOpen})),window.location.href.includes("/search/")){const i=window.location.href.match("/search/([^*]+)");if(null!=i){let l=i[1];document.getElementById("search_box").value=l,this.onChange(l)}}}onClick(){this.isSignIn=!this.isSignIn,console.log(this.storageService.getItem("isSignIn"))}onChange(t){console.log(t.replace(" ","")),this.isSearch=t.length>0,""!=t.replace(" ","")?(null!=this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchCommunitiesService.searchCommunities(t).subscribe({next:r=>{this.communities_result=r.slice(0,4)},error:r=>{console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}}),this.searchUserProfileService.searchUserProfile(t).subscribe({next:r=>{console.log(r),this.user_profile_result=r.slice(0,4)},error:r=>{console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})},250)):(this.communities_result=[],this.user_profile_result=[])}openProfileMenu(t){this.isProfileMenuOpen=!this.isProfileMenuOpen,console.log("profile meneu open"),t.stopPropagation()}closeProfileMenu(t){this.isProfileMenuOpen=!1,"Range"===document.getSelection()?.type&&t.stopPropagation()}logOut(t){t.stopPropagation(),Ne().fire({title:"Are you sure you want to log out?",icon:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Log out"}).then(r=>{r.isConfirmed?this.removeRefreshTokenService.removeRefreshToken().subscribe({next:i=>{this.storageService.removeItem("uid"),this.storageService.removeItem("mode"),window.location.href="/signin"},error:i=>{this.storageService.removeItem("uid"),this.storageService.removeItem("mode"),window.location.href="/signin"}}):this.isProfileMenuOpen=!1})}navigateToUserProfile(){window.location.href="/user/"+this.userInfo.username+"/posts"}createPost(){this.router.navigate(["/create-post"])}opeNavigation(t){t.stopPropagation(),this.isOpen=!this.isOpen,this.openNavigationEvent.emit({data:this.isOpen})}useDarkMode(){const t="1"==this.storageService.getItem("mode")?1:0;this.storageService.setItem("mode",1==t?"0":"1"),this.darkmodeService.useDarkMode(),this.isProfileMenuOpen=!1,this.voteImgService.selectDownVoteImg(),this.voteImgService.selectUpVoteImg()}goToMainPage(){window.location.href=this.isSignIn?"/home":"/popular"}static#e=this.\u0275fac=function(r){return new(r||e)(B(ct),B(Pr),B(jc),B(jc),B(Vt),B(va),B(bm),B(zf),B(Rn),B(Ys))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-header-bar"]],hostBindings:function(r,i){1&r&&z("click",function(d){return i.closeProfileMenu(d)},0,Vh)},outputs:{openNavigationEvent:"openNavigationEvent"},decls:27,vars:22,consts:[["id","header"],["id","main_logo_block","title","Go to home page",3,"click"],["type","button","title","Open navigation",3,"ngStyle","click",4,"ngIf"],["id","main_logo","src","assets/icon/logo.png","alt","logo"],["id","txt_name",2,"font-size","28px","margin-left","10px","font-family","monospace"],["id","search_block","title","Search"],[1,"pi","pi-search",2,"color","var(--icon)",3,"ngStyle"],["id","search_box","type","text","placeholder","Search",1,"search_box",3,"ngClass","input"],["input",""],["id","search_result_list"],[1,"communities_id",3,"ngStyle"],["class","search_result_link",3,"href",4,"ngFor","ngForOf"],["id","btn_search",3,"ngStyle","href"],[1,"pi","pi-search",2,"color","var(--icon)"],["id","signin_signup_block",3,"ngStyle",4,"ngIf"],["id","logged_in_block",3,"ngStyle",4,"ngIf"],["type","button","title","Open navigation",3,"ngStyle","click"],["id","icon_open_nav",1,"pi","pi-bars"],[1,"search_result_link",3,"href"],[1,"seach_result_icon",3,"src"],[1,"community_name"],[1,"member_count"],["id","signin_signup_block",3,"ngStyle"],["href","/signin","title","login"],["href","/signup","title","register"],["id","logged_in_block",3,"ngStyle"],["id","btn_create_post","type","button","title","Create a new post",3,"click"],[1,"pi","pi-plus",2,"color","var(--secondary_color) !important"],["id","btn_profile","type","button",3,"ngStyle"],["id","user_logo","title","open profile menu",3,"src","click"],["id","menu",3,"ngStyle"],["id","txt_username"],["id","btn_1","type","button","title","View your profile info",1,"btn_profile_menu",3,"click"],[1,"pi","pi-user",2,"color","var(--secondary_color) !important"],["type","button",1,"btn_profile_menu",3,"title","click"],[1,"pi","pi-moon",2,"color","var(--secondary_color) !important"],["id","btn_3","type","button","title","Log out of this account",1,"btn_profile_menu",3,"click"],[1,"pi","pi-upload","logout",2,"transform","rotate(90deg)","color","var(--secondary_color) !important"]],template:function(r,i){if(1&r){const l=We();x(0,"header",0)(1,"div",1),z("click",function(){return i.goToMainPage()}),Pe(2,MB,2,3,"button",2),x(3,"a"),Q(4,"img",3),D(),x(5,"a",4)(6,"b"),L(7,"reddit"),D()()(),x(8,"div",5),Q(9,"i",6),x(10,"input",7,8),z("input",function(){ce(l);const p=Gr(11);return fe(i.onChange(p.value))}),D(),x(12,"div",9)(13,"p",10)(14,"b"),L(15,"Communities"),D()(),Pe(16,v9,7,4,"a",11),x(17,"p",10)(18,"b"),L(19,"People"),D()(),Pe(20,e0,7,4,"a",11),x(21,"a",12),Q(22,"i",13),x(23,"p"),L(24),D()()()(),Pe(25,t0,5,3,"div",14)(26,n0,18,16,"div",15),D()}if(2&r){const l=Gr(11);k(2),A("ngIf",!i.isModPage),k(7),A("ngStyle",ve(12,ss,i.isSearch?"14px":"10px")),k(1),A("ngClass",ve(14,o0,i.isSearch)),k(3),A("ngStyle",ve(16,Ya,i.communities_result.length>0?"block":"none")),k(3),A("ngForOf",i.communities_result),k(1),A("ngStyle",ve(18,Ya,i.user_profile_result.length>0?"block":"none")),k(3),A("ngForOf",i.user_profile_result),k(1),In("href","search/",l.value,"",Qe),A("ngStyle",ve(20,Ya,l.value.length>0?"flex":"none")),k(3),at('Search for "',l.value,'"'),k(1),A("ngIf",!i.isSignIn&&i.wait),k(1),A("ngIf",i.isSignIn)}},dependencies:[lr,Zr,sn,Eo],styles:["#header[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:fixed;justify-content:space-between;align-items:center;width:100%;height:var(--header_size);background-color:var(--header);z-index:100;box-sizing:border-box;border-bottom:1px solid var(--border)}a[_ngcontent-%COMP%]{color:var(--secondary_color)!important}#main_logo_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:auto;height:40px;margin-left:var(--margin_home)}#main_logo_block[_ngcontent-%COMP%]:hover{cursor:pointer}#main_logo_block[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){font-size:30px}#main_logo[_ngcontent-%COMP%]{width:30px;height:30px;position:relative;top:2px;left:5px}#search_block[_ngcontent-%COMP%]{width:40%;height:36px;position:absolute;left:calc(30vw + 20px)}.search_box[_ngcontent-%COMP%]{width:100%;height:36px;box-sizing:border-box;border-radius:20px;font-size:16px;color:var(--icon);background-color:var(--search);padding:12px 20px 12px 44px}.search_box[_ngcontent-%COMP%]:focus{background-color:var(--search);box-shadow:var(--box_shadow)}.search_box[_ngcontent-%COMP%]:not(:focus-within){background-color:var(--search);border-radius:20px;box-shadow:none;height:36px;border:none}.search_box[_ngcontent-%COMP%]:hover{background-color:var(--search)}#search_block[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{position:absolute;top:10px;left:18px}.box_search[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;height:calc(var(--header_size) - 6px);border-bottom:1px solid var(--border);box-shadow:var(--box_shadow);background-position:15px 12px}#search_block[_ngcontent-%COMP%]:not(:focus-within)   #search_result_list[_ngcontent-%COMP%]{display:none}#search_block[_ngcontent-%COMP%]:not(:focus-within)   i[_ngcontent-%COMP%]{top:10px!important}#search_result_list[_ngcontent-%COMP%]{display:block;width:100%;height:auto;max-height:365px;position:relative;top:0;border-bottom-left-radius:15px;border-bottom-right-radius:15px;overflow:auto;box-sizing:border-box;box-shadow:var(--box_shadow);background-color:var(--search)}#btn_search[_ngcontent-%COMP%]{padding:15px 20px;width:auto;border-top:1px solid var(--light_border);border-bottom-left-radius:20px;border-bottom-right-radius:20px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;background-color:var(--search)}#btn_search[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-right:10px}#btn_search[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{width:auto}#btn_search[_ngcontent-%COMP%]:hover{background-color:var(--primary_background_color)}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--primary_background_color)}.communities_id[_ngcontent-%COMP%]{background-color:var(--search);height:auto;width:100%;padding:10px;font-weight:500;box-sizing:border-box;color:var(--icon)}.community_name[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.member_count[_ngcontent-%COMP%]{font-size:14px}.search_result_link[_ngcontent-%COMP%]{background-color:var(--search);display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:100%;height:auto;padding:10px 0}.search_result_link[_ngcontent-%COMP%]:hover{background-color:var(--primary_background_color)}#signin_signup_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:auto;height:40px;font-size:20px}#signin_signup_block[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{width:auto;padding:4px 10px;border-radius:20px;background-color:transparent}#signin_signup_block[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:var(--search)}#logged_in_block[_ngcontent-%COMP%]{width:auto;height:100%;display:flex;flex-direction:row;justify-content:center;align-items:center}#logged_in_block[_ngcontent-%COMP%] > .seach_result_icon[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%}#btn_profile[_ngcontent-%COMP%]{width:40px;aspect-ratio:1/1;border-radius:50%;background-color:var(--primary_background_color);display:flex;justify-content:center;align-items:center}#btn_profile[_ngcontent-%COMP%]:hover{background-color:var(--search)!important}#user_logo[_ngcontent-%COMP%], .seach_result_icon[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%}#signin_signup_block[_ngcontent-%COMP%], #logged_in_block[_ngcontent-%COMP%], #logged_in_block[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{margin-right:var(--margin_home)}.seach_result_icon[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px}#menu[_ngcontent-%COMP%]{height:auto;width:210px;position:absolute;background-color:var(--primary_background_color);top:50px;right:15px;box-shadow:var(--menu_box_shadow);border:1px solid var(--search);border-radius:10px;z-index:999}#menu[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:18px;text-align:center;font-weight:500;color:var(--secondary_color);padding:15px 0 10px}#btn_3[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}.btn_profile_menu[_ngcontent-%COMP%]{width:100%;height:50px;text-align:start;padding-left:35px;box-sizing:border-box;display:flex;justify-content:flex-start;align-items:center;font-size:16px;background-color:var(--primary_background_color);color:var(--secondary_color)!important}.btn_profile_menu[_ngcontent-%COMP%]:hover{background-color:var(--search)}.btn_profile_menu[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;font-size:20px}#btn_create_post[_ngcontent-%COMP%]{width:auto;height:auto;padding:5px 10px;display:flex;flex-direction:row;justify-content:center;align-items:center;font-size:16px;background-color:transparent;border-radius:20px;color:var(--secondary_color)!important}#btn_create_post[_ngcontent-%COMP%]:hover{background-color:var(--search)}#btn_create_post[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-right:5px;width:25px;height:25px;display:flex;justify-content:center;align-items:center;font-size:23px}#main_logo_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-color:transparent;border-radius:50%;width:45px;aspect-ratio:1/1;margin-right:10px;display:none}#icon_open_nav[_ngcontent-%COMP%]{font-size:25px;border-radius:50%;width:45px;aspect-ratio:1/1;display:flex;justify-content:center;align-items:center;color:var(--icon)}#icon_open_nav[_ngcontent-%COMP%]:hover{background-color:var(--search)}@media only screen and (max-width: 1200px){#search_block[_ngcontent-%COMP%]{position:relative;left:0}#txt_name[_ngcontent-%COMP%]{display:none}#main_logo[_ngcontent-%COMP%]{margin-right:15px}#btn_create_post[_ngcontent-%COMP%]{margin-left:10px}#main_logo_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block}}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--search)}"]})}return e})();class OB{constructor(o,t,r,i,l,d){this.uid=o,this.name=t,this.description=r,this.avatar=i,this.banner=l,this.scope=d}}let y9=(()=>{class e{constructor(t,r,i){this.postService=t,this.storageService=r,this.checkRefreshToken=i,this.endpoint="/create-community"}createCommunity(t,r,i,l,d,p){this.checkRefreshToken.runCheckRefreshToken();const m=new OB(t,r,i,l,d,p),v=JSON.stringify(m);let w=new et;return w=w.append("Accept","application/json"),w=w.append("Content-Type","application/json"),this.postService.post(this.endpoint,w,v,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(ct),ie(Rn))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const b9=e=>({color:e});function rd(e,o){if(1&e&&(x(0,"p",38),L(1,"Name should be between 3 and 21 characters"),D()),2&e){const t=q();A("ngStyle",ve(1,b9,"VALID"==t.name_status?"green":"#f2112f"))}}function tK(e,o){if(1&e&&(x(0,"p",39),L(1),D()),2&e){q();const t=Gr(11);k(1),at("r/",t.value," is already taken")}}function w9(e,o){1&e&&(x(0,"p"),L(1,"Create community"),D())}function AB(e,o){if(1&e&&(x(0,"p"),L(1),D()),2&e){q();const t=Gr(11);k(1),at("Create r/",t.value,"")}}let wm=(()=>{class e{constructor(t,r,i,l){this.storageService=t,this.createCommunityService=r,this.communityService=i,this.route=l,this.createCommunityForm=new Fc({name:new xr("",[On.required,On.minLength(3),On.maxLength(21),On.pattern("^[0-9a-zA-Z ~`!@#$%^&*()_+={[}]|\\:;\"'<,>.?/-]$")])}),this.closeFormEvent=new Le,this.name_status="INVALID",this.characterCount=0,this.description="",this.scope=0,this.avatar_url="../../../assets/icon/dashed_circle.png",this.banner_url="../../../assets/banner/default_banner.jpg",this.allowSubmit=!1,this.isNameTaken=!1}ngOnInit(){this.createCommunityForm.get("name").valueChanges.subscribe(()=>{this.name_status=this.createCommunityForm.get("name").status,this.AllowSubmit()})}AllowSubmit(){this.allowSubmit="VALID"==this.name_status&&this.description.length>=0&&"../../../assets/icon/dashed_circle.png"!=this.avatar_url&&"../../../assets/banner/default_banner.jpg"!=this.banner_url,console.log(this.allowSubmit)}closeForm(){this.closeFormEvent.emit(!1)}onInputName(){this.isNameTaken=!1}onInputDescription(t){const r=t.target;r.value=r.value.replace(/(\r\n|\n|\r)/gm,""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,this.characterCount=r.value.length,""===r.value&&(r.style.height="48px",this.characterCount=0),this.description=r.value,this.AllowSubmit()}upLoadImg(t){this.onImageUpload(t.target.files[0])}onImageUpload(t){const r=new FileReader;r.readAsDataURL(t),r.addEventListener("loadend",()=>{this.avatar_url=r.result,this.AllowSubmit()})}upLoadBanner(t){this.onBannerUpload(t.target.files[0])}onBannerUpload(t){const r=new FileReader;r.readAsDataURL(t),r.addEventListener("loadend",()=>{this.banner_url=r.result,this.AllowSubmit()})}selectScope(t){this.scope=t,this.AllowSubmit()}submit(){const t=""===this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.createCommunityService.createCommunity(t,this.createCommunityForm.value.name,this.description,this.avatar_url,this.banner_url,this.scope).subscribe({next:r=>{this.isNameTaken=!1,Ne().fire("Create community successfully","","success").then(i=>{i.isConfirmed&&this.closeForm(),this.communityService.joinCommunity(t,r.community_id,1).subscribe({next:l=>{setTimeout(()=>{window.location.href="/r/"+r.community_id},100)}})})},error:r=>{1==r.error.error_code&&(this.isNameTaken=!0)}})}static#e=this.\u0275fac=function(r){return new(r||e)(B(ct),B(y9),B(Pr),B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["create-community"]],outputs:{closeFormEvent:"closeFormEvent"},decls:55,vars:9,consts:[["id","community_container"],[3,"formGroup"],["id","header"],["id","header_icon","src","../../../assets/icon/create_community_header_icon.png"],[2,"color","var(--icon)"],["id","btn_close",3,"click"],[1,"pi","pi-times-circle"],[2,"color","var(--icon)","margin-top","10px"],["type","text","placeholder","Name","maxlength","21","formControlName","name",3,"input"],["community_name",""],["style","font-size: 13px;",3,"ngStyle",4,"ngIf"],["style","font-size: 13px; color: rgb(216, 9, 9);",4,"ngIf"],["id","post_title_block"],["id","input_post_title","maxlength","300","required","","placeholder","Enter description for your community",3,"input"],["id","character_count"],["id","input_upload_img","type","file","accept","image/*",3,"change"],["input_img",""],["id","upload_img_container"],["id","avatar_container"],["id","avatar_display",3,"src"],["id","btn_upload_img","type","button",3,"click"],["id","input_upload_banner","type","file","accept","image/*",3,"change"],["input_banner",""],["id","upload_banner_container"],["id","banner_container"],["id","banner_display",3,"src"],["id","btn_upload_banner","type","button",3,"click"],["id","scope_block"],[2,"color","var(--icon)","font-size","15px"],[1,"radio_block"],["id","input_public","type","radio","name","scope","value","0","checked","checked",3,"click"],["for","input_public"],["id","input_moderate","type","radio","name","scope","value","1",3,"click"],["for","input_moderate"],["id","button_container"],["id","btn_cancel","type","button",3,"click"],["id","btn_submit","type","submit",3,"disabled","click"],[4,"ngIf"],[2,"font-size","13px",3,"ngStyle"],[2,"font-size","13px","color","rgb(216, 9, 9)"]],template:function(r,i){if(1&r){const l=We();x(0,"div",0)(1,"form",1)(2,"div",2),Q(3,"img",3),x(4,"h2",4),L(5,"Create community"),D(),x(6,"button",5),z("click",function(){return i.closeForm()}),Q(7,"i",6),D()(),x(8,"p",7),L(9,"Build and grow a community about something you care about."),D(),x(10,"input",8,9),z("input",function(){return i.onInputName()}),D(),Pe(12,rd,2,3,"p",10)(13,tK,2,1,"p",11),x(14,"div",12)(15,"textarea",13),z("input",function(p){return i.onInputDescription(p)}),D(),x(16,"span",14),L(17),D()(),x(18,"input",15,16),z("change",function(p){return i.upLoadImg(p)}),D(),x(20,"div",17)(21,"div",18),Q(22,"img",19),D(),x(23,"button",20),z("click",function(){return ce(l),fe(Gr(19).click())}),L(24,"Upload your community avatar"),D()(),x(25,"input",21,22),z("change",function(p){return i.upLoadBanner(p)}),D(),x(27,"div",23)(28,"div",24),Q(29,"img",25),D(),x(30,"button",26),z("click",function(){return ce(l),fe(Gr(26).click())}),L(31,"Upload your community banner"),D()(),x(32,"div",27)(33,"b",28),L(34,"Select your community scope"),D(),x(35,"div",29)(36,"input",30),z("click",function(){return i.selectScope(0)}),D(),x(37,"label",31)(38,"p",4)(39,"b",4),L(40,"Public"),D(),L(41," (Everyone can post)"),D()()(),x(42,"div",29)(43,"input",32),z("click",function(){return i.selectScope(1)}),D(),x(44,"label",33)(45,"p",4)(46,"b",4),L(47,"Protected"),D(),L(48," (Moderator need to accept post before it can be view)"),D()()()(),x(49,"div",34)(50,"button",35),z("click",function(){return i.closeForm()}),L(51,"Cancel"),D(),x(52,"button",36),z("click",function(){return i.submit()}),Pe(53,w9,2,0,"p",37)(54,AB,2,1,"p",37),D()()()()}2&r&&(k(1),A("formGroup",i.createCommunityForm),k(11),A("ngIf",!i.isNameTaken),k(1),A("ngIf",i.isNameTaken),k(4),at("",i.characterCount,"/300"),k(5),A("src",i.avatar_url,Qe),k(7),A("src",i.banner_url,Qe),k(23),A("disabled",!i.allowSubmit),k(1),A("ngIf","INVALID"==i.name_status),k(1),A("ngIf","VALID"==i.name_status))},dependencies:[sn,Eo,Bc,Rc,Xu,Nl,Ff,Vc,Rl],styles:["[_nghost-%COMP%]{width:100vw;min-width:500px;--avatar_width: 100px;--banner_width: 100%}#community_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:transparent}#header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start;align-items:center}#header[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{margin-right:10px}#header_icon[_ngcontent-%COMP%], #btn_close[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;font-size:40px;color:var(--secondary_color);display:flex;justify-content:center;align-items:center;background-color:transparent}#btn_close[_ngcontent-%COMP%], #btn_close[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%}#btn_close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;width:auto;height:auto;background-color:transparent}form[_ngcontent-%COMP%]{width:50%;min-width:450px;height:auto;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:20px 10px;position:relative;background-color:var(--primary_background_color)}p[_ngcontent-%COMP%]{white-space:initial}input[_ngcontent-%COMP%]{background-color:var(--primary_background_color);border:1px solid var(--secondary_color)}input[_ngcontent-%COMP%]:focus{border:2px solid var(--secondary_color)}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:5px;border:1px solid var(--secondary_color);padding-left:10px;margin-top:10px;color:var(--secondary_color);font-size:14px!important}#post_title_block[_ngcontent-%COMP%]{align-self:center;width:100%;display:flex;flex-direction:column;margin-top:10px}#input_post_title[_ngcontent-%COMP%]{width:100%;height:48px;text-align:left;padding:5px 55px 8px 10px;box-sizing:border-box;overflow:hidden;resize:none}#character_count[_ngcontent-%COMP%]{position:relative;bottom:22px;right:5px;align-self:flex-end;font-size:11px;font-weight:400;color:var(--icon)}#input_upload_img[_ngcontent-%COMP%], #input_upload_banner[_ngcontent-%COMP%]{width:0px;height:0px;display:none}#btn_upload_img[_ngcontent-%COMP%], #btn_upload_banner[_ngcontent-%COMP%]{width:auto;height:40px;text-align:center;display:inline-block;background-color:var(--allow);border:1px solid var(--icon);border-radius:20px;vertical-align:bottom;margin:10px 0 30px;padding:0 20px;font-size:14px;color:var(--icon)}#upload_img_container[_ngcontent-%COMP%], #upload_banner_container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-bottom:15px}#upload_img_container[_ngcontent-%COMP%]{margin-top:20px}#scope_block[_ngcontent-%COMP%]{width:100%;height:auto;padding:10px}.radio_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-left:20px;margin-top:10px}#input_public[_ngcontent-%COMP%], #input_moderate[_ngcontent-%COMP%]{width:20px;aspect-ratio:1/1;margin:0;color:var(--icon)}.radio_block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:10px}#avatar_container[_ngcontent-%COMP%]{width:calc(var(--avatar_width) + 5px);aspect-ratio:1/1;border:3px solid var(--secondary_color);border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#00000080}#avatar_display[_ngcontent-%COMP%]{width:var(--avatar_width);aspect-ratio:1/1;border-radius:50%}#banner_container[_ngcontent-%COMP%]{width:calc(var(--banner_width));height:100px;display:flex;flex-direction:column;justify-content:center;align-items:center;border:3px solid var(--secondary_color)}#banner_display[_ngcontent-%COMP%]{width:100%;height:100%}#button_container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:flex-end;align-items:flex-end}#btn_cancel[_ngcontent-%COMP%]{width:auto;height:40px;padding:0 20px;margin-right:20px;font-size:16px;border-radius:20px;border:1px solid var(--secondary_color);color:var(--secondary_color);background-color:var(--primary_background_color)}#btn_submit[_ngcontent-%COMP%]{width:auto;height:40px;background-color:var(--allow);align-self:flex-end;margin-top:20px;padding:0 20px;font-size:16px;border-radius:20px;border:1px solid var(--secondary_color);color:var(--secondary_color)}"]})}return e})();function r0(e,o){if(1&e){const t=We();x(0,"div",4)(1,"create-community",5),z("closeFormEvent",function(){return ce(t),fe(q().openCreateCommunityForm())}),D()()}}const NB=e=>({display:e});let C9=(()=>{class e{constructor(t,r,i){this.storageService=t,this.checkRefreshTokenService=r,this.darkmodeService=i,this.recent_status="down",this.favorite_status="down",this.isCreateCommunityFormShow=!1,this.isNavigationOpen=!0}ngOnInit(){this.darkmodeService.useDarkMode(),this.checkRefreshTokenService.runCheckRefreshTokenWithoutNotification(),this.isNavigationOpen=window.innerWidth>1200}change_recent_status(){this.recent_status="up"===this.recent_status?"down":"up",console.log(this.recent_status)}change_favorite_status(){this.favorite_status="up"===this.favorite_status?"down":"up",console.log(this.favorite_status)}openCreateCommunityForm(){this.isCreateCommunityFormShow=!this.isCreateCommunityFormShow}openNavigation(t){this.isNavigationOpen=t.data}onResize(t){this.isNavigationOpen=t.target.innerWidth>1200}static#e=this.\u0275fac=function(r){return new(r||e)(B(ct),B(Rn),B(Ys))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-home"]],hostBindings:function(r,i){1&r&&z("resize",function(d){return i.onResize(d)},0,se)},decls:5,vars:4,consts:[[3,"openNavigationEvent"],[3,"ngStyle","showCommunityFormEvent"],["id","outlet"],["id","create_community_container",4,"ngIf"],["id","create_community_container"],[3,"closeFormEvent"]],template:function(r,i){1&r&&(x(0,"app-header-bar",0),z("openNavigationEvent",function(d){return i.openNavigation(d)}),D(),x(1,"app-navigation-bar",1),z("showCommunityFormEvent",function(){return i.openCreateCommunityForm()}),D(),x(2,"div",2),Q(3,"router-outlet"),D(),Pe(4,r0,2,0,"div",3)),2&r&&(k(1),A("ngStyle",ve(2,NB,i.isNavigationOpen?"block":"none")),k(3),A("ngIf",i.isCreateCommunityFormShow))},dependencies:[sn,Eo,Gs,_9,pD,wm],styles:["[_nghost-%COMP%]{height:100%;width:100%;position:relative}#outlet[_ngcontent-%COMP%]{width:calc(100% - 2vw - 300px);height:calc(100vh - var(--header_size));position:relative;top:50px;left:calc(300px + 2vw)}app-navigation-bar[_ngcontent-%COMP%]{position:fixed;height:calc(100vh - var(--header_size));left:0;width:300px;top:var(--header_size);border-right:1px solid var(--border)}app-recent-visited-post[_ngcontent-%COMP%]{position:fixed;height:calc(100vh - var(--header_size));width:21vw;top:var(--header_size);right:var(--margin_home)}app-navigation-bar[_ngcontent-%COMP%]:hover, app-recent-visited-post[_ngcontent-%COMP%]:hover{overflow-y:auto}#create_community_container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100vw;height:100vh;z-index:999;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#000000d9;overflow-x:hidden;overflow-y:hidden}create-community[_ngcontent-%COMP%]{height:90vh;min-height:400px;overflow-y:auto;scrollbar-gutter:stable;border-radius:10px}@media only screen and (max-width: 1200px){app-navigation-bar[_ngcontent-%COMP%]{position:fixed;left:0;width:300px;z-index:999;background-color:var(--primary_background_color);display:none}#outlet[_ngcontent-%COMP%]{left:0;width:100%}}@media only screen and (min-width: 1200px){app-navigation-bar[_ngcontent-%COMP%]{display:none}}"]})}return e})(),S9=(()=>{class e{constructor(t){this.getService=t,this.endpoint="/is-email-exist"}isEmailExist(t){const i=this.endpoint+"?email="+t,l=new et;return this.getService.get(i,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),xv=(()=>{class e{goBack(){window.history.back()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=ne({type:e,selectors:[["back-button"]],decls:2,vars:0,consts:[["id","btn_back"],["title","back",1,"pi","pi-arrow-left",3,"click"]],template:function(r,i){1&r&&(x(0,"button",0)(1,"i",1),z("click",function(){return i.goBack()}),D()())},styles:["#btn_back[_ngcontent-%COMP%]{width:35px;aspect-ratio:1/1;background-color:var(--search);border-radius:50%;display:flex;justify-content:center;align-items:center}#btn_back[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:20px;color:var(--icon)!important}#btn_back[_ngcontent-%COMP%]:hover{cursor:pointer}"]})}return e})();function x9(e,o){1&e&&Q(0,"loading",8),2&e&&A("txt_load","Checking email address. Please wait")}let Cm=(()=>{class e{constructor(t,r,i){this.router=t,this.emailExistService=r,this.storageService=i,this.ForgotPasswordForm=new Fc({email:new xr("",[On.required,On.email])}),this.isLoad=!1}ngOnInit(){}ForgotPasswordFormSubmit(){if("VALID"==this.ForgotPasswordForm.status){const t=this.ForgotPasswordForm.value.email;this.isLoad=!0,this.emailExistService.isEmailExist(t).subscribe({next:i=>{i.emailExist&&0==i.googleEmail&&(this.storageService.setItem("forgot-password-email",t),this.router.navigate(["/forgot-password-pass-code"])),i.emailExist&&i.googleEmail&&Ne().fire("This email sign-up using goole email. Can not change password","","error"),i.emailExist||Ne().fire("No user with this email exist","","warning"),this.isLoad=!1},error:i=>{this.isLoad=!1,Ne().fire("Error send passcode. Plase try again","","error"),console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error)}})}else Ne().fire("Incorrect email address format","","warning")}static#e=this.\u0275fac=function(r){return new(r||e)(B(Vt),B(S9),B(ct))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-forgot-password"]],decls:13,vars:3,consts:[["id","forgot_container"],["id","main_logo","src","assets/icon/logo.png","alt","logo"],[3,"formGroup","ngSubmit"],["id","lbl_email","for","input_email"],["id","input_email","type","text","formControlName","email","required",""],["id","button_container"],["id","btnForgotPassword","type","submit",3,"disabled"],[3,"txt_load",4,"ngIf"],[3,"txt_load"]],template:function(r,i){1&r&&(x(0,"div",0),Q(1,"img",1),x(2,"h2"),L(3,"Forgot password"),D(),x(4,"form",2),z("ngSubmit",function(){return i.ForgotPasswordFormSubmit()}),x(5,"label",3),L(6,"Enter your email address"),D(),Q(7,"input",4),x(8,"div",5),Q(9,"back-button"),x(10,"button",6),L(11,"Send passcode"),D()()()(),Pe(12,x9,1,1,"loading",7)),2&r&&(k(4),A("formGroup",i.ForgotPasswordForm),k(6),A("disabled","INVALID"==i.ForgotPasswordForm.status),k(2),A("ngIf",i.isLoad))},dependencies:[sn,Bc,Rc,Xu,Nl,Rf,Vc,Rl,xv,Js],styles:["[_nghost-%COMP%]{width:100vw;overflow-y:auto;overflow-x:hidden;--signin_length: 300px;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center}#forgot_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px;padding-bottom:30px}#forgot_container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0}#main_logo[_ngcontent-%COMP%]{width:60px;aspect-ratio:1/1}form[_ngcontent-%COMP%]{width:var(--signin_length);height:auto;padding:10px 0;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;border:1px black solid;border-radius:5px;background-color:#fff}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0 0}#input_email[_ngcontent-%COMP%]{border:1px solid black;border-radius:5px;width:90%;height:auto;padding:5px;text-align:center;font-size:16px}#input_email[_ngcontent-%COMP%]:focus{border:2px solid black}#btnForgotPassword[_ngcontent-%COMP%]{background-color:var(--main_color);font-size:16px;width:auto;height:auto;padding:5px 20px;border:1px black solid;border-radius:20px;margin-right:15px;color:#000}#button_container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}back-button[_ngcontent-%COMP%]{margin-left:15px}"]})}return e})();class P9{constructor(o,t,r){this.email=o,this.passcode=t,this.sendAt=r}}let Ds=(()=>{class e{constructor(){}getCurrentDateTime(){const t=new Date;return t.setMilliseconds(0),t}findDateComponentFromDateString(t){const i=t.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);let l,d,p,m,v,w;return i?(l=parseInt(i[1]),d=parseInt(i[2]),p=parseInt(i[3]),m=parseInt(i[4]),v=parseInt(i[5]),w=parseInt(i[6]),[l,d,p,m,v,w]):[]}getTimeByCompareCreatedAtAndCurrentDate(t){const r=new Date,i=new Date(t),l=r.getTime()-i.getTime(),d=6e4,p=60*d,m=24*p,v=30*m,w=12*v;let P="";if(l>=w){const R=Math.floor(l/w);P=`${R} year${R>1?"s":""} ago`}else if(l>=v){const R=Math.floor(l/v);P=`${R} month${R>1?"s":""} ago`}else if(l>=m){const R=Math.floor(l/m);P=`${R} day${R>1?"s":""} ago`}else if(l>=p){const R=Math.floor(l/p);P=`${R} hour${R>1?"s":""} ago`}else if(l>=d){const R=Math.floor(l/d);P=`${R} minute${R>1?"s":""} ago`}else P="1 minute ago";return P}getStringRepresentDateTime(t){const r=new Date(t),i=r.getUTCDate(),l=r.getUTCFullYear();return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r.getUTCMonth()]}, ${i}, ${l}`}CompareDateTime(t,r){const i=new Date(t),l=new Date(r);return Math.abs(i.getTime()-l.getTime())/3e4>1}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),E9=(()=>{class e{constructor(t,r,i){this.postService=t,this.dateTimeService=r,this.storageService=i,this.endpoint="/check-passcode"}checkPasscode(t){const r=this.storageService.getItem("forgot-password-email"),i=this.dateTimeService.getCurrentDateTime(),l=new P9(r,t,i),d=JSON.stringify(l),p=new et;return this.postService.post(this.endpoint,p,d,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(Ds),ie(ct))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class nK{constructor(o){this.email=o}}let RB=(()=>{class e{constructor(t,r,i,l){this.serverurl=t,this.postService=r,this.dateTimeService=i,this.storageService=l,this.endpoint="/check-confirm-email-passcode",this.fullUrl=this.serverurl.getUrl()+this.endpoint}checkConfirmEmailPasscode(t){const r=this.storageService.getItem("signup-email"),i=t,l=this.dateTimeService.getCurrentDateTime(),d=new P9(r,i,l),p=JSON.stringify(d);let m=new et;return m=m.append("Accept","application/json"),m=m.append("Content-Type","application/json"),this.postService.post(this.endpoint,m,p,!0)}reSendPasscode(t,r){const i=new nK(r),l=JSON.stringify(i);let d=new et;return d=d.append("Accept","application/json"),d=d.append("Content-Type","application/json"),this.postService.post(t,d,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(jf),ie(Io),ie(Ds),ie(ct))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function k9(e,o){if(1&e&&(x(0,"p",11),L(1),D()),2&e){const t=q();k(1),at("(",t.resend_count,"s)")}}function Pv(e,o){1&e&&Q(0,"loading",12),2&e&&A("txt_load","Verifying passcode. Please wait")}function D9(e,o){1&e&&Q(0,"loading",12),2&e&&A("txt_load","Sending new passcode. Please wait")}let T9=(()=>{class e{constructor(t,r,i,l){this.checkPasscodeService=t,this.confirmEmailService=r,this.storageService=i,this.router=l,this.email=this.storageService.getItem("forgot-password-email"),this.isLoad=!1,this.isResendPasscode=!1,this.resend_count=0,this.PasscodeForm=new Fc({passcode:new xr("",[On.pattern("^[0-9]{6}$")])})}ngOnInit(){setInterval(()=>{this.resend_count<=0?this.resend_count=0:this.resend_count--},1e3)}onSubmit(){"VALID"===this.PasscodeForm.status&&(this.isLoad=!0,this.checkPasscodeService.checkPasscode(this.PasscodeForm.value.passcode).subscribe({next:i=>{this.isLoad=!1,0==i.isPasscodeMatch&&Ne().fire("Incorrect passcode","","warning"),0==i.isPasscodeExpired?Ne().fire("Passcode expired","","warning"):i.isPasscodeMatch?(this.PasscodeForm.reset(),this.storageService.setItem("change-password","true"),this.router.navigate(["/change-password"])):Ne().fire("Incorrect passcode","","warning")},error:i=>{Ne().fire("Error checking passcode. Please try again","","error"),console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error)}}))}reSendPasscode(){this.resend_count=60,this.isResendPasscode=!0,this.confirmEmailService.reSendPasscode("/resend-change-password-passcode",this.email).subscribe({next:r=>{this.isResendPasscode=!1,r.createdNewPasscode?Ne().fire("New Passcode has been sent to your email","","success"):Ne().fire("Error create new passcode. Please try again","","error")},error:r=>{this.isResendPasscode=!1,Ne().fire("Error create new passcode. Please try again","","error")}})}static#e=this.\u0275fac=function(r){return new(r||e)(B(E9),B(RB),B(ct),B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-pass-code"]],decls:21,vars:7,consts:[["id","passcode_container"],["id","main_logo","src","assets/icon/logo.png","alt","logo"],[3,"formGroup","ngSubmit"],[2,"font-size","16px"],["id","lbl_passcode","for","input_passcode",2,"margin-top","20px"],["id","input_passcode","name","passcode","type","text","formControlName","passcode","maxlength","6","required",""],["type","submit","id","btn_submit",3,"disabled"],["id","div_resend"],["id","btn_resend_passcode","type","button",3,"disabled","click"],["style","display: inline;",4,"ngIf"],[3,"txt_load",4,"ngIf"],[2,"display","inline"],[3,"txt_load"]],template:function(r,i){1&r&&(x(0,"div",0),Q(1,"img",1),x(2,"form",2),z("ngSubmit",function(){return i.onSubmit()}),Q(3,"back-button"),x(4,"p",3),L(5,"A pass-code had been sent to the email address:"),D(),x(6,"b"),L(7),D(),x(8,"label",4),L(9,"Enter passcode"),D(),Q(10,"input",5),x(11,"button",6),L(12,"Check passcode"),D(),x(13,"div",7)(14,"p"),L(15,"Passcode expried?"),D(),x(16,"button",8),z("click",function(){return i.reSendPasscode()}),L(17,"Re-send"),Pe(18,k9,2,1,"p",9),D()()()(),Pe(19,Pv,1,1,"loading",10)(20,D9,1,1,"loading",10)),2&r&&(k(2),A("formGroup",i.PasscodeForm),k(5),ht(i.email),k(4),A("disabled","INVALID"===i.PasscodeForm.status),k(5),A("disabled",i.resend_count>0),k(2),A("ngIf",i.resend_count>0),k(1),A("ngIf",i.isLoad),k(1),A("ngIf",i.isResendPasscode))},dependencies:[sn,Bc,Rc,Xu,Nl,Rf,Ff,Vc,Rl,xv,Js],styles:["[_nghost-%COMP%]{height:100vh;width:100vw;overflow-y:auto;overflow-x:hidden;--signin_length: 400px}#passcode_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px;overflow:hidden;position:relative;top:100px;padding-bottom:30px}#passcode_container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0}#main_logo[_ngcontent-%COMP%]{width:70px;height:70px}form[_ngcontent-%COMP%]{width:var(--signin_length);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;border:1px black solid;border-radius:5px;background-color:#fff;padding:20px}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0 0}input[_ngcontent-%COMP%]{border:1px solid black;border-radius:5px;width:150px;height:auto;padding:10px;margin-bottom:10px;text-align:center;font-size:26px;font-weight:600}input[_ngcontent-%COMP%]:focus{border:2px solid black}#btn_submit[_ngcontent-%COMP%]{background-color:var(--main_color);font-size:16px;width:auto;height:auto;padding:5px 20px;border:1px black solid;border-radius:20px;position:relative;margin-top:20px;color:#000}#div_resend[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:100%;margin-top:30px}#btn_resend_passcode[_ngcontent-%COMP%]{width:auto;background-color:var(--primary_background_color);font-size:14px;font-weight:500;padding:5px 20px;margin:0 10px;border:1px solid black;border-radius:20px;color:#000}back-button[_ngcontent-%COMP%]{align-self:flex-start}"]})}return e})();class FB{constructor(o,t){this.email=o,this.newPassword=t}}let M9=(()=>{class e{constructor(t,r){this.postService=t,this.storageService=r,this.endpoint="/change-password"}changePassword(t,r){const i=new FB(t,r),l=JSON.stringify(i),d=new et;return this.postService.post(this.endpoint,d,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(ct))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function oK(e,o){1&e&&Q(0,"loading",10),2&e&&A("txt_load","Changing password. Please wait")}let n=(()=>{class e{constructor(t,r,i){this.router=t,this.changePasswordService=r,this.storageService=i,this.password_status=!1,this.password="",this.re_enter_password="",this.allowSubmit=!1,this.isLoad=!1}ngOnInit(){}inputPassword(t){const r=t.target.value;this.password=r,console.log(this.password),this.password_status=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[`~!@#$%^&*()_\-+=\[\]{};:'",.<>?\/\\|])[A-Za-z\d!`~@#$%^&*()_\-+=\[\]{};:'",.<>?\/\\|]{8,20}$/.test(r),console.log(this.password_status),this.canSubmit()}inputRecheck(t){this.re_enter_password=t.target.value,this.canSubmit()}canSubmit(){this.allowSubmit=this.re_enter_password==this.password}onSubmit(){if(this.allowSubmit){const t=this.storageService.getItem("forgot-password-email");""===t?Ne().fire("Error changing password. Please try again","","error"):(this.isLoad=!0,this.changePasswordService.changePassword(t,this.password).subscribe({next:i=>{this.isLoad=!1,i.isPasswordChange&&Ne().fire("Change password successfully","","success").then(l=>{l.isConfirmed&&(this.storageService.removeItem("forgot-password-email"),this.storageService.removeItem("change-password"),this.router.navigate(["/signin"]))}),i.isPasswordChange||Ne().fire("Old and new password can not be the same","","warning")},error:i=>{this.isLoad=!1,Ne().fire("Error changing password. Please try again","","error"),console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error)}}))}else Ne().fire("Field value is not the same","","warning")}static#e=this.\u0275fac=function(r){return new(r||e)(B(Vt),B(M9),B(ct))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-change-password"]],decls:16,vars:3,consts:[["id","changepass_container"],["id","main_logo","src","assets/icon/logo.png","alt","logo"],[3,"ngSubmit"],["id","lblNewPassowrd","for","inputNewPassword"],["id","inputNewPassword","type","password","autocomplete","off","required","",2,"margin-bottom","0",3,"input"],["id","password_ok",2,"font-size","13px","margin-left","13px","margin-top","3px",3,"ngClass"],["id","lblRecheck","for","inputRecheck"],["id","inputRecheck","type","password","autocomplete","off","required","",3,"input"],["id","btnChangePassword","type","submit",3,"disabled"],[3,"txt_load",4,"ngIf"],[3,"txt_load"]],template:function(r,i){1&r&&(x(0,"div",0),Q(1,"img",1),x(2,"h2"),L(3,"Change password"),D(),x(4,"form",2),z("ngSubmit",function(){return i.onSubmit()}),x(5,"label",3),L(6,"Enter your new password"),D(),x(7,"input",4),z("input",function(d){return i.inputPassword(d)}),D(),x(8,"p",5),L(9,"Contain a-z A-Z 0-9 symbol, 8 to 20 characters"),D(),x(10,"label",6),L(11,"Re-enter the new password"),D(),x(12,"input",7),z("input",function(d){return i.inputRecheck(d)}),D(),x(13,"button",8),L(14,"Change password"),D()()(),Pe(15,oK,1,1,"loading",9)),2&r&&(k(8),A("ngClass",i.password_status?"password_ok":"password_not_ok"),k(5),A("disabled",!i.allowSubmit),k(2),A("ngIf",i.isLoad))},dependencies:[lr,sn,Bc,Nl,$C,Js],styles:["[_nghost-%COMP%]{height:100vh;width:100vw;overflow-y:auto;overflow-x:hidden}#changepass_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px;overflow:hidden;position:relative;top:100px;padding-bottom:30px}#changepass_container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0}#main_logo[_ngcontent-%COMP%]{width:70px;height:70px}form[_ngcontent-%COMP%]{width:var(--form_length);display:flex;flex-direction:column;align-items:flex-start;justify-content:center;border:1px black solid;border-radius:5px;background-color:#fff;padding-bottom:10px}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0 0}form[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:relative;margin-left:13px}form[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:1px solid black;border-radius:5px;width:270px;height:auto;padding:5px;margin-left:13px;margin-bottom:10px}form[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus{border:2px solid black}#btnChangePassword[_ngcontent-%COMP%]{background-color:var(--main_color);font-size:16px;width:auto;height:auto;padding:5px 20px;border:1px black solid;border-radius:20px;margin:20px 0 10px 75px;color:#000}.password_ok[_ngcontent-%COMP%]{display:block;color:green}.password_not_ok[_ngcontent-%COMP%]{display:block;color:red}"]})}return e})();function s(e,o){if(1&e&&(x(0,"p",10),L(1),D()),2&e){const t=q();k(1),at("(",t.resend_count,"s)")}}function a(e,o){1&e&&Q(0,"loading",11),2&e&&A("txt_load","Checking passcode. Please wait")}function c(e,o){1&e&&Q(0,"loading",11),2&e&&A("txt_load","Creating new passcode. Please wait")}let u=(()=>{class e{constructor(t,r,i,l){this.dateTimeService=t,this.router=r,this.confirmEmailService=i,this.storageService=l,this.isLoad=!1,this.isResendPasscode=!1,this.resend_count=0,this.confirmEmailPasscodeForm=new Fc({passcode:new xr("",[On.pattern("^[0-9]{6}$")])}),this.email=this.storageService.getItem("signup-email")||"xxx@xxx"}ngOnInit(){setInterval(()=>{this.resend_count<=0?this.resend_count=0:this.resend_count--},1e3)}confirmEmailPasscodeFormSubmit(){"VALID"===this.confirmEmailPasscodeForm.status&&(this.isLoad=!0,this.confirmEmailService.checkConfirmEmailPasscode(this.confirmEmailPasscodeForm.value.passcode).subscribe({next:i=>{this.isLoad=!1,i.isPasscodeExpired?Ne().fire("Passcode has expired","","warning"):i.isPasscodeMatch?Ne().fire({text:"Passcode is correct. \nSign up successfully",icon:"success"}).then(l=>{this.storageService.removeItem("signup-email"),window.location.href="/signin"}):Ne().fire("Passcode does not match","","warning")},error:i=>{this.isLoad=!1,Ne().fire("An unknown error has happen. Please try to sign-up again","","error")}}))}reSendPasscode(){this.resend_count=60,this.isResendPasscode=!0,this.confirmEmailService.reSendPasscode("/resend-confirm-email-passcode",this.email).subscribe({next:r=>{this.isResendPasscode=!1,r.createdNewPasscode?Ne().fire("New Passcode has been sent to your email","","success"):Ne().fire("Error create new passcode. Please try again","","error")},error:r=>{this.isResendPasscode=!1,Ne().fire("Error create new passcode. Please try again","","error")}})}static#e=this.\u0275fac=function(r){return new(r||e)(B(Ds),B(Vt),B(RB),B(ct))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-confirm-email"]],decls:22,vars:8,consts:[["id","main_logo","src","assets/icon/logo.png","alt","logo"],["id","confirm_container"],[3,"formGroup","ngSubmit"],["id","lbl_passcode","for","input_passcode"],["id","input_passcode","name","passcode","type","text","formControlName","passcode","required","",3,"maxLength"],["type","submit","id","btn_submit",3,"disabled"],["id","div_resend"],["id","btn_resend_passcode","type","button",3,"disabled","click"],["style","display: inline;",4,"ngIf"],[3,"txt_load",4,"ngIf"],[2,"display","inline"],[3,"txt_load"]],template:function(r,i){1&r&&(Q(0,"img",0),x(1,"div",1)(2,"form",2),z("ngSubmit",function(){return i.confirmEmailPasscodeFormSubmit()}),x(3,"h2"),L(4,"Thanks for signing up"),D(),x(5,"p"),L(6,"A 6-digits pass-code had been send to the email address:"),D(),x(7,"b"),L(8),D(),x(9,"label",3),L(10,"Enter pass-code"),D(),Q(11,"input",4),x(12,"button",5),L(13,"Check passcode"),D()(),x(14,"div",6)(15,"p"),L(16,"Problem with passcode?"),D(),x(17,"button",7),z("click",function(){return i.reSendPasscode()}),L(18,"Re-send "),Pe(19,s,2,1,"p",8),D()()(),Pe(20,a,1,1,"loading",9)(21,c,1,1,"loading",9)),2&r&&(k(2),A("formGroup",i.confirmEmailPasscodeForm),k(6),ht(i.email),k(3),A("maxLength",6),k(1),A("disabled","INVALID"===i.confirmEmailPasscodeForm.status),k(5),A("disabled",i.resend_count>0),k(2),A("ngIf",i.resend_count>0),k(1),A("ngIf",i.isLoad),k(1),A("ngIf",i.isResendPasscode))},dependencies:[sn,Bc,Rc,Xu,Nl,Rf,Vc,Rl,Js],styles:["[_nghost-%COMP%]{width:100vw;height:100vh;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column;justify-content:center;align-items:center}#main_logo[_ngcontent-%COMP%]{width:60px;aspect-ratio:1/1;margin-bottom:10px}#confirm_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px;padding-bottom:30px}#confirm_container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0}form[_ngcontent-%COMP%]{width:500px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;border:1px solid black;border-radius:5px;background-color:#fff}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px 0 0}input[_ngcontent-%COMP%]{border:1px solid black;border-radius:5px;width:150px;height:auto;padding:10px;margin-bottom:10px;text-align:center;font-size:26px;font-weight:600}#btn_submit[_ngcontent-%COMP%]{background-color:var(--main_color);font-size:medium;width:auto;height:auto;padding:5px 20px;border:1px black solid;border-radius:20px;position:relative;margin-bottom:20px;color:#000}#div_resend[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:100%;margin-left:18%}#btn_resend_passcode[_ngcontent-%COMP%]{background-color:#fff;font-size:14px;font-weight:500;padding:5px 20px;margin-left:10px;border:1px solid black;border-radius:20px}"]})}return e})();class f{constructor(o){this.data=o,this.caption="",this.link=""}}class h{constructor(o,t,r,i,l,d,p,m,v,w){this.id=o,this.name=t,this.uid=r,this.description=i,this.created_at=l,this.subscriber_count=d,this.avatar=p,this.banner=m,this.scope=v,this.deleted=w}}var g=Mr(617),_=Mr.n(g);class b{constructor(o,t,r,i,l,d,p){this.type=o,this.community_id=r,this.uid=t,this.title=i,this.content=l,this.created_at=d,this.allow=p}}let S=(()=>{class e{constructor(t,r,i){this.postService=t,this.storageService=r,this.checkRefreshToken=i,this.endpoint="/create-post"}createPost(t,r,i,l,d,p){this.checkRefreshToken.runCheckRefreshToken();const m=""===this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid")),v=new b(t,m,r,i,l,d,p),w=JSON.stringify(v);let P=new et;return P=P.append("Accept","application/json"),P=P.append("Content-Type","application/json"),this.postService.post(this.endpoint,P,w,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(ct),ie(Rn))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const E=["addListener","removeListener"],T=["addEventListener","removeEventListener"],N=["on","off"];function V(e,o,t,r){if(an(t)&&(r=t,t=void 0),r)return V(e,o,t).pipe(nC(r));const[i,l]=function Z(e){return an(e.addEventListener)&&an(e.removeEventListener)}(e)?T.map(d=>p=>e[d](o,p,t)):function U(e){return an(e.addListener)&&an(e.removeListener)}(e)?E.map(F(e,o)):function W(e){return an(e.on)&&an(e.off)}(e)?N.map(F(e,o)):[];if(!i&&ji(e))return Jo(d=>V(d,o,t))(Or(e));if(!i)throw new TypeError("Invalid event target");return new Zn(d=>{const p=(...m)=>d.next(1<m.length?m:m[0]);return i(p),()=>l(p)})}function F(e,o){return t=>r=>e[t](o,r)}const K={now:()=>(K.delegate||Date).now(),delegate:void 0};class J extends _o{constructor(o=1/0,t=1/0,r=K){super(),this._bufferSize=o,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,o),this._windowTime=Math.max(1,t)}next(o){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:l,_windowTime:d}=this;t||(r.push(o),!i&&r.push(l.now()+d)),this._trimBuffer(),super.next(o)}_subscribe(o){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(o),{_infiniteTimeWindow:r,_buffer:i}=this,l=i.slice();for(let d=0;d<l.length&&!o.closed;d+=r?1:2)o.next(l[d]);return this._checkFinalizedStatuses(o),t}_trimBuffer(){const{_bufferSize:o,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,l=(i?1:2)*o;if(o<1/0&&l<r.length&&r.splice(0,r.length-l),!i){const d=t.now();let p=0;for(let m=1;m<r.length&&r[m]<=d;m+=2)p=m;p&&r.splice(0,p+1)}}}function we(e,o){}const ke=()=>{const e=typeof window<"u"?window:void 0;return e&&e.tinymce?e.tinymce:null};let ge=(()=>{class e{constructor(){this.onBeforePaste=new Le,this.onBlur=new Le,this.onClick=new Le,this.onContextMenu=new Le,this.onCopy=new Le,this.onCut=new Le,this.onDblclick=new Le,this.onDrag=new Le,this.onDragDrop=new Le,this.onDragEnd=new Le,this.onDragGesture=new Le,this.onDragOver=new Le,this.onDrop=new Le,this.onFocus=new Le,this.onFocusIn=new Le,this.onFocusOut=new Le,this.onKeyDown=new Le,this.onKeyPress=new Le,this.onKeyUp=new Le,this.onMouseDown=new Le,this.onMouseEnter=new Le,this.onMouseLeave=new Le,this.onMouseMove=new Le,this.onMouseOut=new Le,this.onMouseOver=new Le,this.onMouseUp=new Le,this.onPaste=new Le,this.onSelectionChange=new Le,this.onActivate=new Le,this.onAddUndo=new Le,this.onBeforeAddUndo=new Le,this.onBeforeExecCommand=new Le,this.onBeforeGetContent=new Le,this.onBeforeRenderUI=new Le,this.onBeforeSetContent=new Le,this.onChange=new Le,this.onClearUndos=new Le,this.onDeactivate=new Le,this.onDirty=new Le,this.onExecCommand=new Le,this.onGetContent=new Le,this.onHide=new Le,this.onInit=new Le,this.onInitNgModel=new Le,this.onLoadContent=new Le,this.onNodeChange=new Le,this.onPostProcess=new Le,this.onPostRender=new Le,this.onPreInit=new Le,this.onPreProcess=new Le,this.onProgressState=new Le,this.onRedo=new Le,this.onRemove=new Le,this.onReset=new Le,this.onResizeEditor=new Le,this.onSaveContent=new Le,this.onSetAttrib=new Le,this.onObjectResizeStart=new Le,this.onObjectResized=new Le,this.onObjectSelected=new Le,this.onSetContent=new Le,this.onShow=new Le,this.onSubmit=new Le,this.onUndo=new Le,this.onVisualAid=new Le}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=wt({type:e,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),e})();const re=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],ae=(e,o,t)=>V(e,o).pipe(VE(t)),it=(e,o)=>"string"==typeof e?e.split(",").map(t=>t.trim()):Array.isArray(e)?e:o;let bt=0;const en=e=>typeof e<"u"&&"textarea"===e.tagName.toLowerCase(),ln=e=>typeof e>"u"||""===e?[]:Array.isArray(e)?e:e.split(" "),Ko=(e,o)=>ln(e).concat(ln(o)),on=()=>{},xe=e=>null==e,Me=(()=>{let e={script$:null};return{load:(r,i)=>e.script$||(e.script$=Y_(()=>{const l=r.createElement("script");return l.referrerPolicy="origin",l.type="application/javascript",l.src=i,r.head.appendChild(l),V(l,"load").pipe(Ef(1),$2(void 0))}).pipe(function he(e,o,t){let r,i=!1;return e&&"object"==typeof e?({bufferSize:r=1/0,windowTime:o=1/0,refCount:i=!1,scheduler:t}=e):r=e??1/0,Km({connector:()=>new J(r,o,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}({bufferSize:1,refCount:!0}))),reinitialize:()=>{e={script$:null}}}})(),Ze=new je("TINYMCE_SCRIPT_SRC"),pt={provide:ga,useExisting:gn(()=>De),multi:!0};let De=(()=>{class e extends ge{constructor(t,r,i,l){super(),this.platformId=i,this.tinymceScriptSrc=l,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=on,this.destroy$=new _o,this.initialise=()=>{const d={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:Ko(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:p=>{this._editor=p,ae(p,"init",this.destroy$).subscribe(()=>{this.initEditor(p)}),((e,o,t)=>{(e=>{const o=it(e.ignoreEvents,[]);return it(e.allowedEvents,re).filter(r=>re.includes(r)&&!o.includes(r))})(e).forEach(i=>{const l=e[i];ae(o,i.substring(2),t).subscribe(d=>{l.observers.length>0&&e.ngZone.run(()=>l.emit({event:d,editor:o}))})})})(this,p,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(p)}};en(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{ke().init(d)})},this._elementRef=t,this.ngZone=r}set disabled(t){this._disabled=t,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(t?"readonly":"design"):this._editor.setMode(t?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(t){this._editor&&this._editor.initialized?this._editor.setContent(xe(t)?"":t):this.initialValue=null===t?void 0:t}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.disabled=t}ngAfterViewInit(){(function hE(e){return e===fE})(this.platformId)&&(this.id=this.id||(e=>{const t=(new Date).getTime(),r=Math.floor(1e9*Math.random());return bt++,"tiny-angular_"+r+bt+String(t)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==ke()?this.initialise():this._element&&this._element.ownerDocument&&Me.load(this._element.ownerDocument,this.getScriptSrc()).pipe(VE(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==ke()&&ke().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,en(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return xe(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(t){ae(t,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),ae(t,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(t))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{t.setContent(this.initialValue),t.getContent()!==this.initialValue&&this.emitOnChange(t),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(t)})}emitOnChange(t){this.onChangeCallback&&this.onChangeCallback(t.getContent({format:this.outputFormat}))}}return e.\u0275fac=function(t){return new(t||e)(B(_s),B(En),B(vu),B(Ze,8))},e.\u0275cmp=ne({type:e,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[co([pt]),kn,Wx],decls:1,vars:0,template:function(t,r){1&t&&Pe(0,we,0,0,"ng-template")},dependencies:[dE,nB],styles:["[_nghost-%COMP%]{display:block}"]}),e})(),dt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=gt({type:e}),e.\u0275inj=mr({imports:[De]}),e})();const _t=e=>({btn_img_clicked:e});let uo=(()=>{class e{constructor(){this.img="",this.id=0,this.selected_id=-1,this.arr=[],this.selectImgOutput=new Le,this.deleteImgOutput=new Le}selectImg(){this.selectImgOutput.emit(this.id),this.selected_id=1===this.arr.length?-1:this.id}deleteImage(){this.deleteImgOutput.emit(this.id)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-img-uploaded"]],inputs:{img:"img",id:"id",selected_id:"selected_id",arr:"arr"},outputs:{selectImgOutput:"selectImgOutput",deleteImgOutput:"deleteImgOutput"},decls:5,vars:4,consts:[["id","container","draggable","false"],["type","button","draggable","false",1,"btn_img_selected",3,"ngClass","click"],["id","img_block","draggable","false"],["draggable","false",3,"src"],["id","btn_img_delete","type","button",3,"click"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"button",1),z("click",function(){return(-1!==i.selected_id||1!==i.arr.length)&&i.selectImg()}),x(2,"div",2),Q(3,"img",3),D(),x(4,"button",4),z("click",function(){return i.deleteImage()}),D()()()),2&r&&(k(1),A("ngClass",ve(2,_t,i.selected_id===i.id)),k(2),Ot("src",i.img,Qe))},dependencies:[lr],styles:["#container[_ngcontent-%COMP%]{width:100px;height:100px;display:inline-block;margin-bottom:10px;margin-left:10px;vertical-align:bottom}.btn_img_selected[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;opacity:.4}.btn_img_selected[_ngcontent-%COMP%]:hover{opacity:1}#img_block[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}img[_ngcontent-%COMP%]{width:100%;height:100%}.btn_img_clicked[_ngcontent-%COMP%]{opacity:1}.btn_img_clicked[_ngcontent-%COMP%]   #img_block[_ngcontent-%COMP%]{border:2px solid var(--secondary_color);opacity:1}.btn_img_clicked[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:calc(100% - 15px);height:calc(100% - 15px)}#btn_img_delete[_ngcontent-%COMP%]{width:20px;height:20px;visibility:hidden;position:absolute;top:10px;right:10px;background-image:url(delete_img.a8476089dc49ea5b.png);background-size:cover;background-repeat:no-repeat;border-radius:50%}.btn_img_selected[_ngcontent-%COMP%]:hover   #btn_img_delete[_ngcontent-%COMP%]{visibility:visible}"]})}return e})(),Gt=(()=>{class e{constructor(){this.img=new f(""),this.imgOutput=new Le,this.form=new Fc({caption:new xr(""),link:new xr("")}),this.characterCount=0,this.characterCountLink=0}ngOnChanges(){let t=document.getElementById("txt_caption");t.value=this.img.caption,t.value=t.value.replace(/\r?\n|\r/g,""),t.style.height="auto",t.style.height=t.scrollHeight<30?"30px":`${t.scrollHeight}px`,this.characterCount=t.value.length;let r=document.getElementById("txt_link");r.value=this.img.link,r.value=r.value.replace(/\r?\n|\r/g,""),r.style.height="auto",r.style.height=r.scrollHeight<30?"30px":`${r.scrollHeight}px`,this.characterCountLink=r.value.length}onTextAreaInput(t){const r=t.target;r.value=r.value.replace(/\r?\n|\r/g,""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,this.characterCount=r.value.length,""===r.value&&(r.style.height="30px",this.characterCount=0),this.changeCaption()}changeCaption(){this.img.caption=this.form.value.caption,this.imgOutput.emit(this.img)}onTextAreaInputLink(t){const r=t.target;r.value=r.value.replace(/\r?\n|\r/g,""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,this.characterCountLink=r.value.length,""===r.value&&(r.style.height="30px",this.characterCountLink=0),this.changeLink()}changeLink(){this.img.link=this.form.value.link,this.imgOutput.emit(this.img)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-img-caption"]],inputs:{img:"img"},outputs:{imgOutput:"imgOutput"},features:[Ho],decls:12,vars:6,consts:[[1,"post_img_description_block"],[1,"img_view"],["draggable","false",3,"src"],[1,"img_caption_block",3,"formGroup"],["id","txt_caption","maxlength","300","placeholder","Add a caption","formControlName","caption",3,"value","input"],[1,"character_count"],["id","txt_link","maxlength","300","placeholder","Add a link","formControlName","link",3,"value","input"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1),Q(2,"img",2),D(),x(3,"div",3)(4,"textarea",4),z("input",function(d){return i.onTextAreaInput(d)}),L(5,"        "),D(),x(6,"span",5),L(7),D(),x(8,"textarea",6),z("input",function(d){return i.onTextAreaInputLink(d)}),L(9,"        "),D(),x(10,"span",5),L(11),D()()()),2&r&&(k(2),Ot("src",i.img.data,Qe),k(1),A("formGroup",i.form),k(1),Ot("value",i.img.caption),k(3),at("",i.characterCount,"/300"),k(1),Ot("value",i.img.link),k(3),at("",i.characterCountLink,"/300"))},dependencies:[Rc,Xu,Nl,Ff,Vc,Rl],styles:[".post_img_description_block[_ngcontent-%COMP%]{height:auto;width:100%;position:relative;display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin:10px 0}.img_view[_ngcontent-%COMP%]{aspect-ratio:1/1;width:50%;margin-left:10px}.img_view[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;background-color:#00000080}.img_caption_block[_ngcontent-%COMP%]{width:calc(50% - 30px);height:100%;display:flex;position:absolute;top:0;right:0;flex-direction:column;justify-content:flex-start;align-items:flex-start;margin-left:10px;box-sizing:border-box;margin-right:10px}#txt_link[_ngcontent-%COMP%], #txt_caption[_ngcontent-%COMP%]{width:100%;height:30px;text-align:left;border:1px solid var(--secondary_color);background-color:var(--primary_background_color);padding:0 10px;margin-bottom:10px;resize:none;color:var(--secondary_color);font-size:14px!important}#txt_link[_ngcontent-%COMP%]:focus, #txt_caption[_ngcontent-%COMP%]:focus{border:1px solid var(--secondary_color)!important}#txt_caption[_ngcontent-%COMP%], #txt_link[_ngcontent-%COMP%]{width:100%;height:30px;text-align:left;padding:5px 60px 8px 10px;border:1px solid var(--secondary_color);box-sizing:border-box;overflow:hidden;resize:none}.character_count[_ngcontent-%COMP%]{position:relative;bottom:32px;right:8px;align-self:flex-end;font-size:11px;font-weight:400}"]})}return e})(),fo=(()=>{class e{constructor(t){this.getService=t,this.endpoint="/get-user-info"}getUserInfo(t){const i=this.endpoint+"?uid="+t,l=new et;return this.getService.get(i,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Oi(e,o){1&e&&(x(0,"p",16),L(1,"Joined"),D())}function Ja(e,o){1&e&&(x(0,"p",17),L(1,"Join"),D())}const kr=(e,o)=>({"background-color":e,border:o});function Ts(e,o){if(1&e){const t=We();x(0,"button",13),z("click",function(i){return ce(t),fe(q().joinCommunity(i))}),Pe(1,Oi,2,0,"p",14)(2,Ja,2,0,"p",15),D()}if(2&e){const t=q();A("ngStyle",Pi(3,kr,t.isJoinCommunity?"var(--primary_background_color)":"var(--join)",t.isJoinCommunity?"1px solid var(--secondary_color)":"none")),k(1),A("ngIf",t.isJoinCommunity),k(1),A("ngIf",!t.isJoinCommunity)}}function Ai(e,o){if(1&e){const t=We();x(0,"div",18),z("click",function(){return ce(t),fe(q().editCommunity())}),x(1,"button",19),L(2,"Community management"),D()()}}function Ms(e,o){if(1&e){const t=We();x(0,"div",20),z("click",function(){return ce(t),fe(q().controlPosts())}),x(1,"button",21),L(2,"Control posts"),D()()}}let Is=(()=>{class e{constructor(t,r,i,l,d,p){this.userInfoService=t,this.communityService=r,this.storageService=i,this.presentationService=l,this.darkmodeSerive=d,this.shareDataService=p,this.community_info=new h(0,"",0,"","",0,"","",0,0),this.userInfo=new ym(0,"","","",0,0,""),this.isJoinCommunity=!1,this.isCommunityPage=!1,this.isControlPostPage=!1,this.isCreatePostPage=!1,this.isPostPage=!1,this.isOwner=!1,this.joinText=this.isJoinCommunity?"Joined":"Join",this.subscribed_communities=[]}ngOnInit(){this.darkmodeSerive.useDarkMode(),this.isCommunityPage=window.location.href.includes("/r/"),this.isControlPostPage=window.location.href.includes("/control-posts/"),this.isCreatePostPage=window.location.href.includes("/create-post"),this.isPostPage=window.location.href.includes("/post/"),this.shareDataService.subscribed_communities$.subscribe(t=>{this.subscribed_communities=t})}ngOnChanges(){const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));0!==this.community_info.uid&&(this.isOwner=t==this.community_info.uid,this.userInfoService.getUserInfo(this.community_info.uid).subscribe({next:r=>{this.userInfo=r}})),0!==t&&this.communityService.checkJoinCommunityStatus(t,this.community_info.id).subscribe({next:r=>{this.isJoinCommunity=0!=r.join_community,this.joinText=this.isJoinCommunity?"Joined":"Join"}})}joinCommunity(t){t.stopPropagation();const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.communityService.joinCommunity(r,this.community_info.id,0==this.isJoinCommunity?1:0).subscribe({next:i=>{this.isJoinCommunity=0!=i.join_community,this.joinText=this.isJoinCommunity?"Joined":"Join",1==i.join_community?this.subscribed_communities.unshift(this.community_info):this.subscribed_communities=this.subscribed_communities.filter(l=>l.id!=this.community_info.id),this.shareDataService.setSubscribedCommunities(this.subscribed_communities),this.shareDataService.setJoinCommunityOfDetailPosts(this.community_info.id,i.join_community)},error:i=>{console.log("error join community")}})}editCommunity(){window.location.href="/edit-community/"+this.community_info.id}controlPosts(){window.location.href="/mod/"+this.community_info.id+"/review"}static#e=this.\u0275fac=function(r){return new(r||e)(B(fo),B(Pr),B(ct),B(va),B(Ys),B(Er))};static#t=this.\u0275cmp=ne({type:e,selectors:[["community-info"]],inputs:{community_info:"community_info"},features:[Ho],decls:22,vars:9,consts:[[1,"info_block"],["id","join_block"],["id","txt_community_name"],["id","btn_join",3,"ngStyle","click",4,"ngIf"],["id","description"],["id","block_container",2,"padding-top","10px"],["id","member_block"],[1,"info_block",2,"border-top","1px solid var(--light_border)"],["id","owner_block"],["id","avatar",3,"src"],[3,"href"],["class","btn_block",3,"click",4,"ngIf"],["id","btn_control","class","btn_block",3,"click",4,"ngIf"],["id","btn_join",3,"ngStyle","click"],["id","txt_joined",4,"ngIf"],["id","txt_join",4,"ngIf"],["id","txt_joined"],["id","txt_join"],[1,"btn_block",3,"click"],[1,"btn"],["id","btn_control",1,"btn_block",3,"click"],[1,"btn",2,"margin-bottom","10px"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1)(2,"b",2),L(3),D(),Pe(4,Ts,3,6,"button",3),D(),x(5,"p",4),L(6),D(),x(7,"div",5)(8,"div",6)(9,"b"),L(10),D(),x(11,"pre"),L(12," Members"),D()()()(),x(13,"div",7)(14,"b"),L(15,"Moderator"),D(),x(16,"div",8),Q(17,"img",9),x(18,"a",10),L(19),D()()(),Pe(20,Ai,3,0,"div",11)(21,Ms,3,0,"div",12)),2&r&&(k(3),at("r/",i.community_info.name,""),k(1),A("ngIf",!i.isCommunityPage&&!i.isControlPostPage&&!i.isCreatePostPage),k(2),ht(i.community_info.description),k(4),ht(i.presentationService.transformNumber(i.community_info.subscriber_count)),k(7),Ot("src",i.userInfo.avatar,Qe),k(1),In("href","/user/",i.userInfo.username,"/posts",Qe),k(1),at("u/",i.userInfo.username,""),k(1),A("ngIf",i.isOwner&&!i.isCreatePostPage&&!i.isPostPage),k(1),A("ngIf",!i.isCreatePostPage&&!i.isPostPage&&i.isOwner))},dependencies:[sn,Eo],styles:["[_nghost-%COMP%]{background-color:var(--info);border-radius:15px;width:100%;height:auto;display:block}a[_ngcontent-%COMP%]{font-size:16px;margin-left:5px;color:var(--secondary_color)!important}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.info_block[_ngcontent-%COMP%]{padding:15px 10px}.info_block[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--icon)}#description[_ngcontent-%COMP%]{word-wrap:break-word}#join_block[_ngcontent-%COMP%]{width:100%;height:30px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:10px}#txt_community_name[_ngcontent-%COMP%]{font-size:17px;width:100%}#btn_join[_ngcontent-%COMP%]{width:80px;height:100%;padding:0 20px;background-color:var(--join);border:1px solid var(--secondary_color);border-radius:15px;margin-right:5px;font-weight:500;text-align:center}#btn_join[_ngcontent-%COMP%]:hover{background-color:#e7be88}#txt_join[_ngcontent-%COMP%]{color:#fff!important}#txt_joined[_ngcontent-%COMP%]{color:var(--secondary_color)!important}#block_container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;justify-content:flex-start;align-items:center}#member_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start}#owner_block[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-top:10px}#avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.btn_block[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;justify-content:center;align-items:center;padding-top:10px;padding-bottom:10px}.btn[_ngcontent-%COMP%]{height:40px;width:100%;min-width:60px;margin:0 10px;border-radius:20px;font-size:medium;border:2px solid var(--secondary_color);background-color:var(--primary_background_color);color:var(--secondary_color)}.btn[_ngcontent-%COMP%]:hover{background-color:var(--neutral)}#btn_control[_ngcontent-%COMP%]{padding-bottom:20px}"]})}return e})();function Ge(e,o){if(1&e){const t=We();x(0,"div",44)(1,"div",45),Q(2,"img",46),D(),x(3,"button",47),z("click",function(){return ce(t),fe(q().openSearchCommunity())}),L(4),D(),x(5,"button",48)(6,"span",49),z("click",function(i){return ce(t),fe(q().onDropDownSearchClick(i))}),D()()()}if(2&e){const t=q();k(2),A("src",t.selected_community.avatar,Qe),k(2),ht(t.selected_community.name)}}function kt(e,o){if(1&e){const t=We();x(0,"input",55,56),z("focus",function(i){return ce(t),fe(q(2).onInputSearchComunityFocus(i))})("input",function(){ce(t);const i=Gr(1);return fe(q(2).searchCommunities(i.value))}),D()}2&e&&A("value",q(2).community)}function wn(e,o){if(1&e){const t=We();x(0,"button",57),z("click",function(){const l=ce(t).$implicit;return fe(q(2).selectCommunity(l))}),Q(1,"img",46),x(2,"div")(3,"p",58),L(4),D(),x(5,"p",59),L(6),D()()()}if(2&e){const t=o.$implicit;k(1),Ot("src",t.avatar,Qe),k(3),at("r/",t.name,""),k(2),at("",t.subscriber_count," members")}}const cn=e=>({display:e});function no(e,o){if(1&e){const t=We();x(0,"div",50)(1,"div",51),Q(2,"img",46),D(),Pe(3,kt,2,1,"input",52),x(4,"button",48)(5,"span",49),z("click",function(i){return ce(t),fe(q().onDropDownSearchClick(i))}),D()(),x(6,"div",53),Pe(7,wn,7,3,"button",54),D()()}if(2&e){const t=q();k(2),Ot("src",t.avatar,Qe),k(1),A("ngIf",t.isShowSearchCommunity),k(3),A("ngStyle",ve(4,cn,t.isCommunitySearchDropdownOpen?"flex":"none")),k(1),A("ngForOf",t.communities)}}function Bo(e,o){if(1&e){const t=We();x(0,"app-img-uploaded",60),z("deleteImgOutput",function(i){return ce(t),fe(q().deleteImg(i))})("selectImgOutput",function(i){return ce(t),fe(q().selectImg(i))}),D()}if(2&e){const t=o.$implicit,r=o.index,i=q();A("img",t.data)("id",r)("selected_id",i.selected_id)("arr",i.imgArr)}}function Gn(e,o){1&e&&(x(0,"p",61),L(1,"Incorrect link"),D())}function Kn(e,o){1&e&&(x(0,"p",62),L(1,"Valid link"),D())}function Dr(e,o){1&e&&Q(0,"loading",63),2&e&&A("txt_load","Create new post. Please wait")}function ya(e,o){if(1&e&&(x(0,"div",64),Q(1,"community-info",65),D()),2&e){const t=q();k(1),A("community_info",t.selected_community)}}const Os=e=>({btn_post_type_selected:e}),ba=e=>({"justify-content":e}),Ni=(e,o)=>({display:e,"background-color":o});let Fl=(()=>{class e{constructor(t,r,i,l,d,p,m){this.searchCommunitiesService=t,this.sendPostService=r,this.storageService=i,this.dateTimeService=l,this.communityService=d,this.route=p,this.darkmodeService=m,this.img=new f(""),this.selected_id=0,this.communities=[],this.selected_community=new h(0,"Select a community",0,"","",0,"../../assets/icon/dashed_circle.png","",0,0),this.avatar="../../assets/icon/dashed_circle.png",this.isPostOpen=!0,this.isPostImageOpen=!1,this.isPostVideoOpen=!1,this.isPostLinkOpen=!1,this.isImgUpload=!1,this.isCommunitySearchDropdownOpen=!1,this.characterCount=0,this.isLoad=!1,this.isShowSearchCommunity=!1,this.title="",this.community="",this.editorContent="",this.imgArr=[],this.videoContent="",this.linkContent="",this.community_id=0,this.allow=0,this.editorAllowed=!0,this.imgAllowed=!0,this.videoAllowed=!0,this.linkAllowed=!0,this.isSearch=!1,this.editorSettings={base_url:"/tinymce",suffix:".min",plugins:"link lists codesample image",toolbar:"bold italic underline strikethrough subscript superscript removeformat numlist bullist alignleft aligncenter alignright alignjustify link blockquote codesample image",toolbar_mode:"wrap",placeholder:"(Optional)",automatic_uploads:!0,file_picker_types:"image",images_file_types:"jpg,svg,webp,png,jpeg",images_reuse_filename:!0,image_dimensions:!1,image_caption:!0,image_description:!1,statusbar:!0,elementpath:!1,branding:!1,resize:!0,width:"100%",height:"40vh",menubar:!1,draggable_modal:!1,object_resizing:!1,inline_boundaries:!1,contenteditable:!1,paste_data_images:!1,paste_block_drop:!1,color_default_foreground:"#E03E2D",color_default_background:"#000000",color_map_background:["000000","Black"],textcolor_map:["#E03E2D","Red"],custom_colors:!1,content_css:"tinymce-5",content_style:"html body { overflow: auto; }p { margin: 0; } img { display: block; margin: 0 auto; out-line: 0; max-width: 100%; max-height: 100%}body {line-height: normal}pre[class*=language-] {font-family: Consolas}",file_picker_callback:(v,w,P)=>{const R=document.createElement("input");R.setAttribute("type","file"),R.setAttribute("accept","image/*"),R.addEventListener("change",$=>{const H=$.target.files[0],Y=new FileReader;Y.addEventListener("load",()=>{const te=H.name,_e=_().activeEditor.editorUpload.blobCache,le=Y.result.split(",")[1],Re=_e.create(te,H,le);_e.add(Re),v(Re.blobUri(),{title:H.name})}),Y.readAsDataURL(H)}),R.click()}},this.onContentChanged=v=>{this.editorContent=v.editor.getContent({format:"html"})}}ngOnInit(){this.darkmodeService.useDarkMode();const t=window.location.href.match("cid=([0-9]+)");null!=t&&this.communityService.getCommunityInfoById(t[1]).subscribe({next:r=>{this.community_id=r.id,this.community=r.name,this.avatar=r.avatar,this.allow=0==r.scope?1:0,this.selected_community=r,this.AllowSubmit()}})}AllowSubmit(){console.log(0===this.community.length&&0===this.title.length),this.editorAllowed=!(0!=this.community.length&&0!=this.title.length),this.imgAllowed=!(""!==this.community&&""!==this.title&&this.imgArr.length>0),this.linkAllowed=!(""!==this.community&&""!==this.title&&""!==this.linkContent),this.videoAllowed=!(""!==this.community&&""!==this.title&&""!==this.videoContent)}onDrop(t){t.preventDefault(),t.stopPropagation();const i=t.dataTransfer.files;for(let d=0;d<i.length;d++)this.onImageUpload(i[d]);document.getElementById("post_img_block").style.border="none",this.AllowSubmit()}onDragEnter(t){console.log("drag"),t.preventDefault(),t.stopPropagation(),document.getElementById("post_img_block").style.border="2px dashed black"}onDragLeave(t){t.preventDefault(),t.stopPropagation(),document.getElementById("post_img_block").style.border="none"}upLoadImg(t){const i=t.target.files[0];this.selected_id=0,this.onImageUpload(i),this.AllowSubmit()}onImageUpload(t){const r=new FileReader;r.readAsDataURL(t),r.addEventListener("loadend",()=>{const i=r.result,d=((window.URL||window.webkitURL).createObjectURL(t),new f(i));console.log(d),this.imgArr.push(d),this.isImgUpload=!(this.imgArr.length<=1),this.img=d,this.selected_id=1===this.imgArr.length?-1:this.imgArr.length-1,this.AllowSubmit()}),this.AllowSubmit()}deleteImg(t){this.imgArr.splice(t,1),document.getElementById("input_upload_img").value="",0===t&&0===this.imgArr.length?(this.img=new f(""),this.selected_id=-1,this.imgArr=[],this.isImgUpload=!1):t<=1&&1===this.imgArr.length?(this.img=new f(""),this.selected_id=-1,this.isImgUpload=!1):0===t&&this.imgArr.length>1?(this.img=this.imgArr[t],this.selected_id=t):(this.img=this.imgArr[t-1],this.selected_id=t-1),this.AllowSubmit()}selectImg(t){this.img=this.imgArr[t],this.selected_id=t}onVideoUpload(t){const r=t.target.files,i=new FileReader;i.readAsDataURL(r[0]),i.addEventListener("loadend",()=>{const l=i.result;l.length>67e5?(Ne().fire("Maximum video size is 5MB","","warning"),this.AllowSubmit()):(this.videoContent=l,this.AllowSubmit())})}deleteVideo(){this.videoContent="",document.getElementById("input_upload_video").value="",this.AllowSubmit()}onInputChange(t){this.imgArr[this.selected_id]=t}onInputSearchComunityFocus(t){this.isCommunitySearchDropdownOpen=!0,t.stopPropagation()}onDropDownSearchClick(t){this.isCommunitySearchDropdownOpen=!this.isCommunitySearchDropdownOpen,this.isShowSearchCommunity=!this.isShowSearchCommunity,t.stopPropagation()}searchCommunities(t){""!=t.replace(" ","")?(this.community=t,console.log("community: "+t),null!=this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchCommunitiesService.searchCommunities(t).subscribe({next:r=>{this.communities=r},error:r=>{console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})},250)):(this.communities=[],this.community="",this.avatar="../../assets/icon/dashed_circle.png"),this.AllowSubmit()}openSearchCommunity(){this.isShowSearchCommunity=!this.isShowSearchCommunity,this.isShowSearchCommunity&&document.getElementById("input_search_community")?.focus()}selectCommunity(t){this.selected_community=t,this.isShowSearchCommunity=!this.isShowSearchCommunity,this.isCommunitySearchDropdownOpen=!1,this.community=t.name,this.avatar=t.avatar,this.community_id=t.id,this.allow=0==t.scope?1:0,this.AllowSubmit(),console.log("scope of community: "+this.allow)}inputTitle(t){const r=t.target;r.value=r.value.replace(/(\r\n|\n|\r)/gm,""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,this.characterCount=r.value.length,""===r.value&&(r.style.height="30px",this.characterCount=0),this.title=r.value,this.AllowSubmit()}inputLink(t){const r=t.target;r.value=r.value.replace(/(\r\n|\n|\r)/gm,""),r.value=r.value.replace(" ",""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,""===r.value&&(r.style.height="40px"),this.linkContent=r.value,console.log("link content: "+this.linkContent),this.AllowSubmit(),this.isValidHttpUrl(r.value)}isValidHttpUrl(t){try{const r=new URL(t);this.linkAllowed=!("http:"===r.protocol||"https:"===r.protocol),console.log(r.protocol)}catch{this.linkAllowed=!0}}createPost(t,r){const i=this.title,l=this.dateTimeService.getCurrentDateTime();console.log("Post type: "+t),this.isLoad=!0,this.sendPostService.createPost(t,this.community_id,i,r,l,this.allow).subscribe({next:d=>{!0===d.CREATED?(this.isLoad=!1,Ne().fire("Create post successfully","","success").then(p=>{p.isConfirmed&&this.route.navigate(["/post/"+d.POST_ID])})):(this.isLoad=!1,Ne().fire("Error create post. Please try again","","error"))},error:d=>{this.isLoad=!1,console.log("HttpServletResponse: "+d.error.message+"\nResponseEntity: "+d.error)}})}createImgPost(t,r){const l=this.title,d=JSON.stringify(r),p=this.dateTimeService.getCurrentDateTime();console.log("Post type: "+t),this.isLoad=!0,this.sendPostService.createPost(t,this.community_id,l,d,p,this.allow).subscribe({next:m=>{!0===m.CREATED?(this.isLoad=!1,Ne().fire("Create post successfully","","success").then(v=>{v.isConfirmed&&this.route.navigate(["/post/"+m.POST_ID])})):(this.isLoad=!1,Ne().fire("Error create post. Please try again","","error"))},error:m=>{this.isLoad=!1,console.log("HttpServletResponse: "+m.error.message+"\nResponseEntity: "+m.error)}})}createLinkPost(t,r){const l=this.title,d=this.dateTimeService.getCurrentDateTime();console.log("Post type: "+t),this.isLoad=!0,this.sendPostService.createPost(t,this.community_id,l,r,d,this.allow).subscribe({next:p=>{!0===p.CREATED?(this.isLoad=!1,Ne().fire("Create post successfully","","success").then(m=>{m.isConfirmed&&this.route.navigate(["/post/"+p.POST_ID])})):(this.isLoad=!1,Ne().fire("Error create post. Please try again","","error"))},error:p=>{this.isLoad=!1,console.log("HttpServletResponse: "+p.error.message+"\nResponseEntity: "+p.error)}})}createVideoPost(t,r){const l=this.title,d=this.dateTimeService.getCurrentDateTime();console.log("Post type: "+t),this.isLoad=!0,this.sendPostService.createPost(t,this.community_id,l,r,d,this.allow).subscribe({next:p=>{!0===p.CREATED?(this.isLoad=!1,Ne().fire("Create post successfully","","success").then(m=>{m.isConfirmed&&this.route.navigate(["/post/"+p.POST_ID])})):(this.isLoad=!1,Ne().fire("Error create post. Please try again","","error"))},error:p=>{this.isLoad=!1,console.log("HttpServletResponse: "+p.error.message+"\nResponseEntity: "+p.error)}})}static#e=this.\u0275fac=function(r){return new(r||e)(B(Pr),B(S),B(ct),B(Ds),B(Pr),B(Vt),B(Ys))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-test"]],inputs:{img:"img",selected_id:"selected_id"},decls:60,vars:61,consts:[["id","main"],["id","container"],[2,"color","var(--icon)","margin-bottom","10px","margin-top","20px"],["id","form"],["id","selected_community_block",4,"ngIf"],["id","search_community_block",4,"ngIf"],["id","post_type_block"],["type","button",1,"btn_post_type",3,"ngClass","click"],["id","btn_select_last","type","button",1,"btn_post_type",3,"ngClass","click"],["id","post_title_block"],["id","input_post_title","maxlength","300","required","","placeholder","Title (required)",3,"input"],["id","character_count"],["id","post_content_block"],["id","post_post_block",3,"ngStyle"],[3,"init","onSelectionChange"],["type","button",1,"btn_create_post",3,"disabled","click"],["id","post_img_block",3,"ngStyle","dragover","drop","dragenter","dragleave"],["id","upload_img_block",3,"ngStyle"],[2,"color","var(--icon)",3,"ngStyle"],["id","img_uploaded_result"],[3,"img","id","selected_id","arr","deleteImgOutput","selectImgOutput",4,"ngFor","ngForOf"],["id","input_upload_img","type","file","accept","image/*",3,"change"],["input_img",""],["id","btn_upload_img","type","button",3,"click"],["src","../../assets/icon/upload.png",2,"width","50px","height","50px"],[3,"img","ngStyle","imgOutput"],["id","btn_create_post_img","type","button",1,"btn_create_post",3,"disabled","click"],["id","post_video_block",3,"ngStyle"],["id","input_upload_video","type","file","accept",".mp4, .mov, .wmv, .WebM",3,"change"],["input_video",""],[2,"margin-right","10px","color","var(--icon)",3,"ngStyle"],["id","btn_upload_video","type","button",3,"ngStyle","click"],["id","video_block",3,"ngStyle"],["preload","none","poster","","controls","true","disablepictureinpicture","true",2,"align-self","flex-start",3,"src"],["id","btn_delete_video","type","button","title","Delete video",3,"click"],[1,"pi","pi-trash",2,"color","var(--icon)"],["id","btn_create_post_video","type","button",3,"disabled","ngStyle","click"],["id","post_link_block",3,"ngStyle"],["placeholder","Enter a full link start with http or https",2,"border","1px solid var(--icon)",3,"input"],["style","font-size: 13px; color: red; margin-top: 3px;",4,"ngIf"],["style","font-size: 13px; color: green; margin-top: 3px;",4,"ngIf"],["id","btn_create_post_link","type","button",3,"disabled","click"],[3,"txt_load",4,"ngIf"],["id","community_info_block",4,"ngIf"],["id","selected_community_block"],["id","selected_community_icon"],[3,"src"],["id","btn_selected_community",3,"click"],["id","btn_search_community_dropdown","type","button"],[1,"pi","pi-chevron-down",2,"color","var(--icon)",3,"click"],["id","search_community_block"],["id","search_community_icon"],["id","input_search_community","type","text","placeholder","Search communities",3,"value","focus","input",4,"ngIf"],["id","search_community_result_block",3,"ngStyle"],["class","btn_select_community","type","button",3,"click",4,"ngFor","ngForOf"],["id","input_search_community","type","text","placeholder","Search communities",3,"value","focus","input"],["input_community",""],["type","button",1,"btn_select_community",3,"click"],["id","community_name"],[2,"color","var(--txt)","font-size","13px"],[3,"img","id","selected_id","arr","deleteImgOutput","selectImgOutput"],[2,"font-size","13px","color","red","margin-top","3px"],[2,"font-size","13px","color","green","margin-top","3px"],[3,"txt_load"],["id","community_info_block"],[3,"community_info"]],template:function(r,i){if(1&r){const l=We();x(0,"div",0)(1,"div",1),Q(2,"back-button"),x(3,"h2",2),L(4,"Create a post"),D(),x(5,"div",3),Pe(6,Ge,7,2,"div",4)(7,no,8,6,"div",5),x(8,"div",6)(9,"button",7),z("click",function(){return i.isPostOpen=!0,i.isPostImageOpen=!1,i.isPostLinkOpen=!1,i.isPostVideoOpen=!1}),L(10,"Post"),D(),x(11,"button",7),z("click",function(){return i.isPostOpen=!1,i.isPostImageOpen=!0,i.isPostLinkOpen=!1,i.isPostVideoOpen=!1}),L(12,"Image"),D(),x(13,"button",7),z("click",function(){return i.isPostOpen=!1,i.isPostImageOpen=!1,i.isPostLinkOpen=!1,i.isPostVideoOpen=!0}),L(14,"Video"),D(),x(15,"button",8),z("click",function(){return i.isPostOpen=!1,i.isPostImageOpen=!1,i.isPostLinkOpen=!0,i.isPostVideoOpen=!1}),L(16,"Link"),D()(),x(17,"div",9)(18,"textarea",10),z("input",function(p){return i.inputTitle(p)}),D(),x(19,"span",11),L(20),D()(),x(21,"div",12)(22,"div",13)(23,"editor",14),z("onSelectionChange",function(p){return i.onContentChanged(p)}),D(),x(24,"button",15),z("click",function(){return i.createPost("editor",i.editorContent)}),L(25,"Post"),D()(),x(26,"div",16),z("dragover",function(p){return i.onDragEnter(p)})("drop",function(p){return i.onDrop(p)})("dragenter",function(p){return i.onDragEnter(p)})("dragleave",function(p){return i.onDragLeave(p)}),x(27,"div",17)(28,"pre",18),L(29,"  Drag and drop image or click the button "),D(),x(30,"div",19),Pe(31,Bo,1,4,"app-img-uploaded",20),x(32,"input",21,22),z("change",function(p){return i.upLoadImg(p)}),D(),x(34,"button",23),z("click",function(){return ce(l),fe(Gr(33).click())}),Q(35,"img",24),D()()(),x(36,"app-img-caption",25),z("imgOutput",function(p){return i.onInputChange(p)}),D(),x(37,"button",26),z("click",function(){return i.createImgPost("img",i.imgArr)}),L(38,"Post"),D()(),x(39,"div",27)(40,"input",28,29),z("change",function(p){return i.onVideoUpload(p)}),D(),x(42,"p",30),L(43,"Click button to upload video"),D(),x(44,"button",31),z("click",function(){return ce(l),fe(Gr(41).click())}),Q(45,"img",24),D(),x(46,"div",32),Q(47,"video",33),x(48,"button",34),z("click",function(){return i.deleteVideo()}),Q(49,"i",35),D()()(),x(50,"button",36),z("click",function(){return i.createVideoPost("video",i.videoContent)}),L(51,"Post"),D(),x(52,"div",37)(53,"textarea",38),z("input",function(p){return i.inputLink(p)}),D(),Pe(54,Gn,2,0,"p",39)(55,Kn,2,0,"p",40),x(56,"button",41),z("click",function(){return i.createLinkPost("link",i.linkContent)}),L(57,"Post"),D()()()()()(),Pe(58,Dr,1,1,"loading",42)(59,ya,2,1,"div",43)}2&r&&(k(6),A("ngIf",!i.isShowSearchCommunity),k(1),A("ngIf",i.isShowSearchCommunity),k(2),A("ngClass",ve(30,Os,i.isPostOpen)),k(2),A("ngClass",ve(32,Os,i.isPostImageOpen)),k(2),A("ngClass",ve(34,Os,i.isPostVideoOpen)),k(2),A("ngClass",ve(36,Os,i.isPostLinkOpen)),k(5),at("",i.characterCount,"/300"),k(2),A("ngStyle",ve(38,cn,i.isPostOpen?"block":"none")),k(1),A("init",i.editorSettings),k(1),A("disabled",i.editorAllowed),k(2),A("ngStyle",ve(40,cn,i.isPostImageOpen?"flex":"none")),k(1),A("ngStyle",ve(42,ba,i.imgArr.length>0?"flex-start":"center")),k(1),A("ngStyle",ve(44,cn,i.imgArr.length>0?"none":"block")),k(3),A("ngForOf",i.imgArr),k(5),A("img",i.img)("ngStyle",ve(46,cn,i.isImgUpload?"block":"none")),k(1),A("disabled",i.imgAllowed),k(2),A("ngStyle",Pi(48,Ni,i.isPostVideoOpen?"flex":"none",0==i.videoContent.length?"var(--primary_background_color)":"transparent")),k(3),A("ngStyle",ve(51,cn,0==i.videoContent.length?"block":"none")),k(2),A("ngStyle",ve(53,cn,0==i.videoContent.length?"block":"none")),k(2),A("ngStyle",ve(55,cn,i.videoContent.length>0?"block":"none")),k(1),Ot("src",i.videoContent,Qe),k(3),A("disabled",i.videoAllowed)("ngStyle",ve(57,cn,i.isPostVideoOpen?"block":"none")),k(2),A("ngStyle",ve(59,cn,i.isPostLinkOpen?"block":"none")),k(2),A("ngIf",i.linkAllowed&&0!=i.linkContent.length),k(1),A("ngIf",!i.linkAllowed),k(1),A("disabled",i.linkAllowed),k(2),A("ngIf",i.isLoad),k(1),A("ngIf",0!=i.selected_community.id))},dependencies:[lr,Zr,sn,Eo,De,uo,Gt,Is,xv,Js],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}#main[_ngcontent-%COMP%]{width:100%;height:100%;background-color:var(--primary_background_color);--input_height: 40px;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;overflow-y:auto;overflow-x:hidden}app-header-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0}#container[_ngcontent-%COMP%]{position:relative;top:20px;width:100%;min-width:450px;background-color:var(--primary_background_color)}hr[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:15px;border:1px solid var(--secondary_color)!important}#form[_ngcontent-%COMP%]{width:calc(100% - 380px);background-color:var(--primary_background_color);display:flex;min-width:450px;flex-direction:column;justify-content:center;align-items:flex-start;padding-top:10px;padding-bottom:50px;margin-bottom:20px;height:auto}#form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:20px}div.tox-menubar[_ngcontent-%COMP%]{display:none}hr[_ngcontent-%COMP%]{border:1px solid var(--secondary_color)}#search_community_block[_ngcontent-%COMP%], #selected_community_block[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;height:var(--input_height);position:relative}#search_community_icon[_ngcontent-%COMP%], #selected_community_icon[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;justify-content:center;align-items:center;background-color:var(--search);border-top:1px solid var(--border);border-left:1px solid var(--border);border-bottom:1px solid var(--border)}#search_community_icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], #selected_community_icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%}#input_search_community[_ngcontent-%COMP%], #btn_selected_community[_ngcontent-%COMP%]{width:40%;height:100%;background-color:var(--search);border-top:1px solid var(--border);border-bottom:1px solid var(--border);box-sizing:border-box;font-size:16px;color:var(--icon);padding-left:10px}#btn_selected_community[_ngcontent-%COMP%]{width:auto;border-left:0;text-align:start;padding:0 10px}#input_search_community[_ngcontent-%COMP%]:focus{outline:none}#btn_search_community_dropdown[_ngcontent-%COMP%]{width:30px;height:100%;background-color:var(--search);border-top:1px solid var(--border);border-right:1px solid var(--border);border-bottom:1px solid var(--border);box-sizing:border-box}#search_community_result_block[_ngcontent-%COMP%]{width:calc(40% + 25px);height:auto;display:flex;flex-direction:column;position:absolute;top:48px;left:18px;box-sizing:border-box;box-shadow:var(--search_communities_shadow)}#search_community_result_block[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--icon)}#search_community_result_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;height:50px;padding:10px 5px;background-color:var(--search);z-index:100;text-align:left;display:flex;justify-content:flex-start;align-items:center}#search_community_result_block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;margin-right:10px}#search_community_result_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{background-color:var(--nav_hover)}#post_type_block[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-evenly}.btn_post_type[_ngcontent-%COMP%]{width:33.33%;height:50px;box-sizing:border-box;background-color:var(--primary_background_color);color:var(--icon);font-size:16px;font-weight:600}.btn_post_type[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)}.btn_post_type_selected[_ngcontent-%COMP%]{border-bottom:3px solid var(--icon)}#post_title_block[_ngcontent-%COMP%]{align-self:center;width:100%;display:flex;flex-direction:column}#input_post_title[_ngcontent-%COMP%]{width:100%;height:30px;text-align:left;padding:5px 55px 8px 10px;border:1px solid var(--icon);box-sizing:border-box;overflow:hidden;resize:none;margin-bottom:10px}#character_count[_ngcontent-%COMP%]{position:relative;bottom:34px;right:7px;align-self:flex-end;font-size:11px;font-weight:400;color:var(--icon)!important}#post_content_block[_ngcontent-%COMP%]{width:100%;height:auto;position:relative;bottom:15px;align-self:center;box-sizing:border-box}#post_post_block[_ngcontent-%COMP%]{height:auto;width:100%}#post_img_block[_ngcontent-%COMP%]{height:auto;min-height:20vh;width:100%;display:none;flex-direction:column;justify-content:center;align-items:center;background-color:var(--primary_background_color);border:1px solid var(--secondary_color)}#post_img_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(button){width:100%;height:100%}#upload_img_block[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;margin:10px 0 0;background-color:var(--primary_background_color)}#img_uploaded_result[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:auto}#input_upload_img[_ngcontent-%COMP%]{width:0px;height:0px;display:none}#btn_upload_img[_ngcontent-%COMP%]{width:100px;height:100px;display:inline-block;background-color:var(--search);border:2px dashed var(--icon);border-radius:5px;vertical-align:bottom;margin-left:10px;margin-right:20px;margin-bottom:10px}#post_video_block[_ngcontent-%COMP%]{min-height:25vh;height:auto;width:100%;background-color:var(--primary_background_color);display:flex;flex-direction:row;justify-content:center;align-items:center;border:1px solid var(--secondary_color)}#input_upload_video[_ngcontent-%COMP%]{width:0px;height:0px;display:none}#video_block[_ngcontent-%COMP%]{position:relative;width:100%}video[_ngcontent-%COMP%]{width:100%;height:35vh;min-height:350px;background-color:#000}#btn_upload_video[_ngcontent-%COMP%]{width:100px;height:100px;background-color:var(--search);border:2px dashed var(--icon);border-radius:5px}#btn_delete_video[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;justify-content:center;align-items:center;border-radius:50%;position:absolute;top:10px;right:10px;background-color:transparent}#btn_delete_video[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)}#btn_delete_video[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--primary_background_color)}#post_link_block[_ngcontent-%COMP%]{height:auto;width:100%}#post_link_block[_ngcontent-%COMP%] > textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid var(--border);overflow:hidden}.btn_create_post[_ngcontent-%COMP%]{width:auto;height:30px;padding:7px 20px;border-radius:20px;font-weight:500;position:absolute;bottom:-60px;right:0}#btn_create_post_img[_ngcontent-%COMP%]{bottom:-50px}#btn_create_post_link[_ngcontent-%COMP%]{width:auto;height:30px;padding:0 20px;border-radius:20px;font-weight:500;position:relative;top:30px;left:calc(100% - 70px)}#btn_create_post_video[_ngcontent-%COMP%]{width:auto;height:30px;padding:0 20px;border-radius:20px;font-weight:500;position:relative;left:calc(100% - 70px);top:40px}.btn_create_post[_ngcontent-%COMP%], #btn_create_post_link[_ngcontent-%COMP%], #btn_create_post_video[_ngcontent-%COMP%]{background-color:var(--post_btn);color:#fff;font-weight:600}@media only screen and (max-width: 1200px){#main[_ngcontent-%COMP%]{margin-left:50px;width:calc(100% - 50px)}}@media only screen and (max-width: 850px){#community_info_block[_ngcontent-%COMP%]{display:none}}#community_info_block[_ngcontent-%COMP%]{position:fixed;height:calc(100vh - var(--header_size));top:calc(var(--header_size) + 10px);overflow:auto;width:300px;right:40px}"]})}return e})(),ur=(()=>{class e{constructor(t){this.getService=t,this.endpoint="/get-post",this.detailPostEndpoint="/get-detail-post"}getPostByPostId(t){const r=this.endpoint+"?pid="+t,i=new et;return this.getService.get(r,i,!0)}getDetailPostByUidAndPostId(t,r){const i=this.detailPostEndpoint+"?uid="+t+"&pid="+r,l=new et;return this.getService.get(i,l,!0)}getDetailPostByUidAndPostIds(t,r){const i=r.join(",");console.log(i);const l="/get-detail-post-by-post-id?uid="+t+"&pid="+i,d=new et;return this.getService.get(l,d,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ri=(()=>{class e{constructor(t){this.getService=t,this.endpoint="/get-comments",this.getCommentsByUserEndPoint="/get-comments-by-uid",this.countCommentsEndpoint="/count-comments"}getComments(t){const r=this.endpoint+"?id="+t;let i=new et;return this.getService.get(r,i,!0)}getCommentsByUser(t,r){const i=this.getCommentsByUserEndPoint+"?uid="+t+"&sort="+r;let l=new et;return this.getService.get(i,l,!0)}countComments(t){const r=this.countCommentsEndpoint+"?pid="+t;let i=new et;return this.getService.get(r,i,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function mD(e,o){if(1&e&&(x(0,"div",17),Q(1,"img",11),D()),2&e){const t=q().index,r=q(2);k(1),Ot("src",r.img[t],Qe)}}function Ll(e,o){if(1&e&&(x(0,"p",18),L(1),D()),2&e){const t=q().$implicit,r=q(2);k(1),at("",r.presentationService.transformNumber(t.vote)," upvote")}}function s0(e,o){if(1&e&&(x(0,"p",18),L(1),D()),2&e){const t=q().$implicit,r=q(2);k(1),at("",r.presentationService.transformNumber(t.vote)," upvotes")}}function LB(e,o){if(1&e&&(x(0,"p",18),L(1),D()),2&e){const t=q().$implicit,r=q(2);k(1),at("",r.presentationService.transformNumber(t.vote)," vote")}}function dr(e,o){if(1&e&&(x(0,"p",18),L(1),D()),2&e){const t=q().$implicit,r=q(2);k(1),at("",r.presentationService.transformNumber(t.vote)," downvote")}}function qf(e,o){if(1&e&&(x(0,"p",18),L(1),D()),2&e){const t=q().$implicit,r=q(2);k(1),at("",r.presentationService.transformNumber(t.vote)," downvotes")}}function BB(e,o){1&e&&(x(0,"p",18),L(1,"0 comment"),D())}function gD(e,o){if(1&e&&(x(0,"p",18),L(1),D()),2&e){const t=q(3);k(1),at("",t.presentationService.transformNumber(t.comment_count)," comment")}}function Hc(e,o){if(1&e&&(x(0,"p",18),L(1),D()),2&e){const t=q(3);k(1),at("",t.presentationService.transformNumber(t.comment_count)," comments")}}const Ev=(e,o)=>({width:e,height:o});function X(e,o){if(1&e&&(x(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"a",10),Q(5,"img",11),x(6,"p",12),L(7),D()()(),x(8,"a",10)(9,"p",13),L(10),D()()(),Pe(11,mD,2,1,"div",14),D(),x(12,"div",15),Pe(13,Ll,2,1,"p",16)(14,s0,2,1,"p",16)(15,LB,2,1,"p",16)(16,dr,2,1,"p",16)(17,qf,2,1,"p",16),x(18,"pre"),L(19," \xb7 "),D(),Pe(20,BB,2,0,"p",16)(21,gD,2,1,"p",16)(22,Hc,2,1,"p",16),D()()),2&e){const t=o.$implicit,r=o.index,i=q(2);k(2),A("ngStyle",Pi(15,Ev,0!=i.img[r].length?"70%":"auto",0!=i.img[r].length?"100%":"auto")),k(2),In("href","post/",t.post_id,"",Qe),k(1),Ot("src",t.community_icon,Qe),k(2),at("r/",t.community_name,""),k(1),In("href","post/",t.post_id,"",Qe),k(2),ht(t.title),k(1),A("ngIf",0!=i.img[r].length),k(2),A("ngIf",1==t.vote),k(1),A("ngIf",t.vote>1),k(1),A("ngIf",0==t.vote),k(1),A("ngIf",-1==t.vote),k(1),A("ngIf",t.vote<-1),k(3),A("ngIf",0==i.comment_count),k(1),A("ngIf",1==i.comment_count),k(1),A("ngIf",i.comment_count>1)}}function ee(e,o){if(1&e&&(x(0,"nav",1)(1,"div",2)(2,"b",3),L(3,"RECENT POSTS"),D(),Q(4,"div",4),Pe(5,X,23,18,"div",5),D()()),2&e){const t=q();k(5),A("ngForOf",t.posts)}}let Se=(()=>{class e{constructor(t,r,i,l,d){this.recentVisitPostService=t,this.storageService=r,this.presentationService=i,this.getPostService=l,this.commentService=d,this.posts=[],this.img=[],this.comment_count=0}ngOnInit(){const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));if(0==t){const r=""==this.storageService.getItem("recent_posts")?[]:JSON.parse("["+this.storageService.getItem("recent_posts")+"]");for(let i of r)this.getPostService.getDetailPostByUidAndPostId(0,i).subscribe({next:l=>{this.posts.push(l);const d=l;if("link"==d.type&&this.img.push(JSON.parse(d.content).image),"img"==d.type&&this.img.push(JSON.parse(d.content)[0].data),"video"==d.type&&this.img.push("../../../../assets/banner/video_icon.png"),"editor"==d.type){const p=d.content.match('src="([^"]*)"');this.img.push(p?p[1]:"")}this.commentService.countComments(i).subscribe({next:p=>{this.comment_count=p},error:p=>{this.comment_count=0}})}})}else this.recentVisitPostService.getRecentVisitPost(t).subscribe({next:r=>{this.posts=r;for(let i in this.posts){const l=this.posts[i];if("link"==l.type&&this.img.push(JSON.parse(l.content).image),"img"==l.type&&this.img.push(JSON.parse(l.content)[0].data),"video"==l.type&&this.img.push("../../../../assets/banner/video_icon.png"),"editor"==l.type){const d=l.content.match('src="([^"]*)"');this.img.push(d?d[1]:"")}}}})}static#e=this.\u0275fac=function(r){return new(r||e)(B(gm),B(ct),B(va),B(ur),B(Ri))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-recent-visited-post"]],decls:1,vars:1,consts:[["id","recent_visited_post_bar",4,"ngIf"],["id","recent_visited_post_bar"],["id","recent_post_info"],["id","txt_recent",2,"color","var(--txt)"],[2,"height","15px","width","100%"],["class","block",4,"ngFor","ngForOf"],[1,"block"],["id","post_block"],["id","info_lock",3,"ngStyle"],["id","community_block"],[3,"href"],[3,"src"],[2,"margin-left","5px","color","var(--txt)"],[2,"font-size","14px","color","var(--txt)","font-weight","550"],["id","img_block",4,"ngIf"],["id","vote_block"],["class","txt_vote",4,"ngIf"],["id","img_block"],[1,"txt_vote"]],template:function(r,i){1&r&&Pe(0,ee,6,1,"nav",0),2&r&&A("ngIf",0!=i.posts.length)},dependencies:[Zr,sn,Eo],styles:["#recent_visited_post_bar[_ngcontent-%COMP%]{width:100%;height:auto;display:block;background-color:var(--info);border-radius:15px;margin:30px 0;padding-top:15px}#recent_post_info[_ngcontent-%COMP%]{height:auto;min-height:100%;background-color:var(--info);background-clip:content-box;box-sizing:border-box;border-radius:10px}#recent_post_info[_ngcontent-%COMP%]:nth-child(2){border:0}#txt_recent[_ngcontent-%COMP%]{font-size:13px;font-weight:530;color:var(--txt);width:100%;height:auto;padding:0 10px}a[_ngcontent-%COMP%]{color:var(--secondary_color)!important}#recent_visited_post_bar[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{display:block;width:100%;height:auto;padding:10px}a[_ngcontent-%COMP%]{display:block}a[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.block[_ngcontent-%COMP%]{width:100%;height:auto;padding:10px;border-top:1px solid var(--border)}#post_block[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;justify-content:flex-start}#info_lock[_ngcontent-%COMP%]{width:70%;height:auto}#info_lock[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{width:100%;height:auto;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-top:5px}#community_block[_ngcontent-%COMP%]{width:100%;height:25px}#community_block[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{width:100%;height:100%}#community_block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%}#community_block[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;font-size:14px}#img_block[_ngcontent-%COMP%]{width:30%;height:75px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-left:10px}#img_block[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px;border:1px solid var(--light_border)}#vote_block[_ngcontent-%COMP%]{width:70%;height:auto;margin-top:3px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.txt_vote[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:var(--txt)}"]})}return e})();function be(e,o){1&e&&Q(0,"img",20),2&e&&Ot("src",q(2).community.banner,Qe)}function Je(e,o){1&e&&Q(0,"img",21)}function St(e,o){1&e&&(x(0,"p",22),L(1,"Joined"),D())}function Cn(e,o){1&e&&(x(0,"p",23),L(1,"Join"),D())}const wa=(e,o)=>({"background-color":e,border:o});function a0(e,o){if(1&e){const t=We();x(0,"div",5)(1,"div",6)(2,"div",7),Pe(3,be,1,1,"img",8)(4,Je,1,0,"img",9),D(),x(5,"div",10)(6,"p",11),L(7),D(),x(8,"div",12)(9,"button",13),z("click",function(){return ce(t),fe(q().createPost())}),Q(10,"i",14),x(11,"p",15),L(12,"Create post"),D()(),x(13,"button",16),z("click",function(){return ce(t),fe(q().joinCommunity())}),Pe(14,St,2,0,"p",17)(15,Cn,2,0,"p",18),D()()(),Q(16,"img",19),D()()}if(2&e){const t=q();k(3),A("ngIf",null!=t.community.banner),k(1),A("ngIf",null==t.community.banner),k(2),In("title","r/",t.community.name,""),k(1),at("r/",t.community.name,""),k(6),A("ngStyle",Pi(8,wa,t.isJoinCommunity?"var(--neutral)":"var(--join)",t.isJoinCommunity?"1px solid var(--secondary_color)":"none")),k(1),A("ngIf",t.isJoinCommunity),k(1),A("ngIf",!t.isJoinCommunity),k(1),Ot("src",t.community.avatar,Qe)}}function I9(e,o){1&e&&(x(0,"div",24)(1,"p",25),L(2,"Select which post you want to allow in your community"),D()())}function c0(e,o){1&e&&(x(0,"div",26),Q(1,"app-recent-visited-post"),D())}function Bl(e,o){if(1&e&&(x(0,"div",27),Q(1,"community-info",28),D()),2&e){const t=q();k(1),A("community_info",t.community)}}let VB=(()=>{class e{constructor(t,r,i,l,d,p,m,v){this.communityService=t,this.storageService=r,this.getPostService=i,this.checkRefreshTokenService=l,this.removeRefreshTokenService=d,this.route=p,this.activeRoute=m,this.titleService=v,this.isCommunityPage=!1,this.isViewPostPage=!1,this.isJoinCommunity=!1,this.isControlPage=!1,this.isEditCommunityPage=!1,this.isUserSettingPage=!1,this.isUserPage=!1,this.isOwner=!1,this.isUser=!1,this.isEditPostPage=window.location.href.includes("/edit-post/"),this.community_id=0,this.community=new h(0,"",0,"","",0,"","",0,0),this.banner_url="../../../assets/banner/lol.png",this.avatar_url="../../../assets/icon/tft.jpg",this.joinText=this.isJoinCommunity?"Joined":"Join"}ngOnInit(){this.route.events.pipe(Wa(r=>r instanceof Ga)).subscribe(()=>{this.isCommunityPage=this.route.url.includes("/r/");const i=window.location.href.match(this.isCommunityPage?"/r/([0-9]+)":"/edit-community/([0-9]+)");null!=i&&(this.community_id=Number.parseInt(i[1]),this.communityService.getCommunityInfoById(i[1]).subscribe({next:l=>{this.activeRoute.paramMap.subscribe(d=>{this.titleService.setTitle(l.name)}),this.community=l,this.isOwner=t==this.community.uid,1==this.community.deleted&&Ne().fire("The community\nr/"+this.community.name+"\nhas been deleted","","warning").then(d=>{d.isConfirmed&&window.history.back()})}}),this.communityService.checkJoinCommunityStatus(t,this.community_id).subscribe({next:l=>{this.isJoinCommunity=0!=l.join_community,this.joinText=this.isJoinCommunity?"Joined":"Join"}}))}),setInterval(()=>{this.isCommunityPage=window.location.href.includes("/r/"),this.isUserSettingPage=window.location.href.includes("/setting/"),this.isViewPostPage=window.location.href.includes("/post/"),this.isControlPage=window.location.href.includes("/control-posts/"),this.isUserPage=window.location.href.includes("/user/"),this.isEditCommunityPage=window.location.href.includes("/edit-community/")},50);const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));if(this.isUser=0!=t,this.isCommunityPage=window.location.href.includes("/r/"),this.isUserSettingPage=window.location.href.includes("/setting/"),this.isViewPostPage=window.location.href.includes("/post/"),this.isControlPage=window.location.href.includes("/control-posts/"),this.isUserPage=window.location.href.includes("/user/"),this.isEditCommunityPage=window.location.href.includes("/edit-community/"),this.isCommunityPage||this.isEditCommunityPage){const i=window.location.href.match(this.isCommunityPage?"/r/([0-9]+)":"/edit-community/([0-9]+)");null!=i&&(this.community_id=Number.parseInt(i[1]),this.communityService.getCommunityInfoById(i[1]).subscribe({next:l=>{this.activeRoute.paramMap.subscribe(d=>{this.titleService.setTitle(l.name)}),this.community=l,this.isOwner=t==this.community.uid,1==this.community.deleted&&Ne().fire("The community\nr/"+this.community.name+"\nhas been deleted","","warning").then(d=>{d.isConfirmed&&window.history.back()})}}),this.communityService.checkJoinCommunityStatus(t,this.community_id).subscribe({next:l=>{this.isJoinCommunity=0!=l.join_community,this.joinText=this.isJoinCommunity?"Joined":"Join"}}))}if(this.isViewPostPage){const i=window.location.href.match("/post/([0-9]+)");null!=i&&this.getPostService.getPostByPostId(Number.parseInt(i[1])).subscribe({next:l=>{this.community_id=l.community_id,this.communityService.getCommunityInfoById(l.community_id.toString()).subscribe({next:d=>{this.community=d,this.isOwner=t==this.community.uid}})}})}if(this.isControlPage){const i=window.location.href.match("/control-posts/([0-9]+)");null!=i&&(this.community_id=Number.parseInt(i[1]),this.communityService.getCommunityInfoById(i[1].toString()).subscribe({next:l=>{this.community=l,this.isOwner=t==this.community.uid,1==this.community.deleted&&Ne().fire("The community\nr/"+this.community.name+"\nhas been deleted","","error").then(d=>{d.isConfirmed&&window.history.back()})}}),this.communityService.checkJoinCommunityStatus(t,this.community_id).subscribe({next:l=>{this.isJoinCommunity=0!=l.join_community,this.joinText=this.isJoinCommunity?"Joined":"Join"}}))}if(this.isEditPostPage){const i=window.location.href.match("/edit-post/([0-9]+)");null!=i&&this.getPostService.getPostByPostId(Number.parseInt(i[1])).subscribe({next:l=>{this.community_id=l.community_id,this.communityService.getCommunityInfoById(l.community_id.toString()).subscribe({next:d=>{this.community=d,this.isOwner=t==this.community.uid}})}})}this.communityService.getAllCommunitiesInfo().subscribe({next:r=>{this.storageService.setItem("community_info",JSON.stringify(r))}})}joinCommunity(){const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.communityService.joinCommunity(t,this.community_id,0==this.isJoinCommunity?1:0).subscribe({next:r=>{this.isJoinCommunity=0!=r.join_community,this.joinText=this.isJoinCommunity?"Joined":"Join"},error:r=>{console.log("error join community")}})}editCommunity(){window.location.href="/edit-community/"+this.community_id}createPost(){this.checkRefreshTokenService.checkRefreshToken().subscribe({next:t=>{window.location.href="/create-post?cid="+this.community_id},error:t=>{this.storageService.removeItem("uid"),this.removeRefreshTokenService.removeRefreshToken().subscribe(),Ne().fire({title:"You need to sign-in to do this action",icon:"error",showConfirmButton:!0,confirmButtonText:"OK",footer:'<a href="signin" style="color:red;font-size: 18px"><b>Click here to go to sign-in page<b/></a>'}).then(r=>{r.isDismissed&&window.location.reload()})}})}static#e=this.\u0275fac=function(r){return new(r||e)(B(Pr),B(ct),B(ur),B(Rn),B(zf),B(Vt),B($n),B(tC))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-post-main"]],decls:6,vars:4,consts:[["id","h_container",4,"ngIf"],["id","control_block",4,"ngIf"],["id","outlet"],["id","recent_post_info_block",4,"ngIf"],["id","community_info_block",4,"ngIf"],["id","h_container"],["id","header_container"],["id","banner_container"],["id","img_banner",3,"src",4,"ngIf"],["id","img_banner","src","../../../../assets/banner/default_banner.jpg",4,"ngIf"],["id","button_container"],["id","community_name",3,"title"],["id","button_block"],["id","btn_create_post",1,"btn",3,"click"],[1,"pi","pi-plus",2,"color","var(--icon)"],[1,"txt_btn"],["id","btn_join",1,"btn","txt_btn",3,"ngStyle","click"],["id","txt_joined",4,"ngIf"],["id","txt_join",4,"ngIf"],["id","img_avatar",3,"src"],["id","img_banner",3,"src"],["id","img_banner","src","../../../../assets/banner/default_banner.jpg"],["id","txt_joined"],["id","txt_join"],["id","control_block"],["id","txt_control_posts"],["id","recent_post_info_block"],["id","community_info_block"],[3,"community_info"]],template:function(r,i){1&r&&(Pe(0,a0,17,11,"div",0)(1,I9,3,0,"div",1),x(2,"div",2),Q(3,"router-outlet"),D(),Pe(4,c0,2,0,"div",3)(5,Bl,2,1,"div",4)),2&r&&(A("ngIf",i.isCommunityPage||i.isControlPage),k(1),A("ngIf",i.isControlPage),k(3),A("ngIf",!(i.isCommunityPage||i.isViewPostPage||i.isControlPage||i.isUserPage||i.isEditCommunityPage||i.isUserSettingPage||i.isEditPostPage)),k(1),A("ngIf",i.isCommunityPage||i.isViewPostPage||i.isControlPage||i.isEditCommunityPage||i.isEditPostPage))},dependencies:[sn,Eo,Gs,Se,Is],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block;background-color:var(--header);overflow:hidden;overflow-y:scroll;scrollbar-gutter:stable;box-sizing:border-box}#outlet[_ngcontent-%COMP%]{width:calc(100% - 380px);margin-left:2vw;margin-top:20px;box-sizing:border-box;margin-bottom:50px}#recent_post_info_block[_ngcontent-%COMP%]{position:fixed;height:calc(100vh - var(--header_size));top:calc(var(--header_size));width:300px;right:40px;overflow:hidden;scrollbar-gutter:stable;background-clip:content-box;box-sizing:border-box}#recent_post_info_block[_ngcontent-%COMP%]:hover{overflow-y:auto}#community_info_block[_ngcontent-%COMP%]{position:fixed;height:calc(100vh - var(--header_size));top:calc(var(--header_size) + 10px);overflow:auto}#user_info_block[_ngcontent-%COMP%]{position:fixed;height:calc(100vh - var(--header_size));top:calc(var(--header_size) + 10px);background-color:var(--neutral);overflow:hidden;scrollbar-gutter:stable;background-clip:content-box;padding-right:10px}#user_info_block[_ngcontent-%COMP%]:hover{overflow-y:auto}#h_container[_ngcontent-%COMP%]{width:calc(100% - 380px);margin-left:2vw;margin-top:10px}#header_container[_ngcontent-%COMP%]{display:block;width:100%;height:auto;border-radius:5px;position:relative}#banner_container[_ngcontent-%COMP%]{width:100%;height:120px;min-height:50px}#img_banner[_ngcontent-%COMP%]{width:100%;height:100%}#button_container[_ngcontent-%COMP%]{width:100%;height:60px;display:flex;flex-direction:row;justify-content:space-between;align-items:baseline;padding:5px;position:relative}#community_name[_ngcontent-%COMP%]{font-size:30px;font-weight:600;min-width:350px;margin-left:calc(80px + 2.5vw);background-color:transparent;color:var(--icon)}#txt_join[_ngcontent-%COMP%]{color:#fff!important}#txt_joined[_ngcontent-%COMP%]{color:var(--icon)!important}.btn[_ngcontent-%COMP%]{height:40px;width:auto;min-width:60px;padding:0 15px;border-radius:20px;font-size:medium;background-color:none}#button_block[_ngcontent-%COMP%], #btn_create_post[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}#btn_create_post[_ngcontent-%COMP%]{background-color:var(--neutral);border:1px solid var(--secondary_color);color:var(--icon)}#btn_create_post[_ngcontent-%COMP%]:hover{border:1px solid var(--secondary_color)}#btn_join[_ngcontent-%COMP%]{margin:0 20px;padding:0 30px}#btn_create_post[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{aspect-ratio:1/1;height:25px;margin-right:5px;display:flex;justify-content:center;align-items:center;font-size:23px}#img_avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;border:4px solid black;position:absolute;top:85px;left:2vw;background-color:#0009}#control_block[_ngcontent-%COMP%]{width:calc(100% - 380px);height:auto;text-align:center;margin-top:20px;margin-left:2vw}#txt_control_posts[_ngcontent-%COMP%]{font-size:20px;color:var(--icon);font-weight:600;padding:15px 0;position:relative;top:10px}app-recent-visited-post[_ngcontent-%COMP%], #community_info_block[_ngcontent-%COMP%], #user_info_block[_ngcontent-%COMP%]{width:300px;right:40px}@media only screen and (max-width: 1480px){#button_block[_ngcontent-%COMP%]{position:absolute;top:60px;right:0}#control_block[_ngcontent-%COMP%]{position:relative;top:30px}#button_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:35px}#button_block[_ngcontent-%COMP%]   #btn_create_post[_ngcontent-%COMP%]{width:160px}#btn_create_post[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:20px}#control_block[_ngcontent-%COMP%]{position:relative;top:10px}}@media only screen and (min-width: 900px) and (max-width: 1200px){#h_container[_ngcontent-%COMP%], #control_block[_ngcontent-%COMP%]{margin-left:2vw;width:calc(100% - 380px)}#header_container[_ngcontent-%COMP%]{margin-left:0}}@media only screen and (max-width: 850px){#recent_post_info_block[_ngcontent-%COMP%], #community_info_block[_ngcontent-%COMP%], #user_info_block[_ngcontent-%COMP%]{display:none;right:calc(var(--margin_home))}#outlet[_ngcontent-%COMP%], #h_container[_ngcontent-%COMP%], #control_block[_ngcontent-%COMP%]{width:calc(100% - 30px)}}"]})}return e})();class l0{constructor(o,t){this.community_id=o,this.join=t}}let u0=(()=>{class e{constructor(t,r){this.postService=t,this.getService=r,this.allowedPostEndpoint="/get-allowed-post-in-community",this.deletedPostEndpoint="/get-deleted-post-in-community",this.edittedPostEndpoint="/get-editted-post-ids-in-community"}getHomePosts(t,r,i){const l=t+"?uid="+r+"&sort="+i,d=new et;return this.getService.get(l,d,!0)}getPopularPostIdsByUid(t,r,i){const l=t+"?sort="+i+"&uid="+r,d=new et;return this.getService.get(l,d,!0)}getPopularPostsByUid(t,r,i){const l=t+"?sort="+i+"&uid="+r,d=new et;return this.getService.get(l,d,!0)}getPostInCommunity(t,r,i){const l=t+"?cid="+r+"&sort="+i;let d=new et;return this.getService.get(l,d,!0)}getPostInCommunityNotAllow(t,r){const i=t+"?cid="+r;let l=new et;return this.getService.get(i,l,!0)}getAllowedPostIdsInCommunity(t){const r=this.allowedPostEndpoint+"?cid="+t;let i=new et;return this.getService.get(r,i,!0)}getDeletedPostIdsInCommunity(t){const r=this.deletedPostEndpoint+"?cid="+t;let i=new et;return this.getService.get(r,i,!0)}getEdittedPostIdsInCommunity(t){const r=this.edittedPostEndpoint+"?cid="+t;let i=new et;return this.getService.get(r,i,!0)}getPostForSearch(t,r,i){const l=t+"?text="+r+"&sort="+i;let d=new et;return this.getService.get(l,d,!0)}getPostByUser(t,r,i){const l=t+"?uid="+r+"&sort="+i;let d=new et;return this.getService.get(l,d,!0)}getPostsByUidAndNotAllowAndNotDeleted(t,r){const i=t+"?uid="+r;let l=new et;return this.getService.get(i,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(ks))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class $B{constructor(o,t,r){this.uid=o,this.post_id=t,this.saved=r}}let _D=(()=>{class e{constructor(t,r,i,l,d){this.getService=t,this.postService=r,this.storageService=i,this.checkRefreshToken=l,this.shareDataService=d,this.savedEndpoint="/save-post",this.getSavedEndpoint="/get-save-post",this.getSavePostStatusEndpoint="/get-save-post-status"}savePostByUid(t,r,i){this.checkRefreshToken.runCheckRefreshToken();const l=new $B(t,r,i),d=JSON.stringify(l);let p=new et;return p=p.append("Accept","application/json"),p=p.append("Content-Type","application/json"),this.postService.post(this.savedEndpoint,p,d,!0)}getSavedPostsByUid(t){const i=this.getSavedEndpoint+"?uid="+t,l=new et;return this.getService.get(i,l,!0)}getSavedPostStatusByUid(t,r){const d=this.getSavePostStatusEndpoint+"?uid="+t+"&pid="+r,p=new et;return this.getService.get(d,p,!0)}sendSavePostToServer(t,r){const i=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.savePostByUid(i,t.post_id,r).subscribe({next:l=>{t.save=r,this.shareDataService.setSaveStatusOfDetailPosts(t.post_id,r)},error:l=>{console.log("HttpServletResponse: "+l.error.message+"\nResponseEntity: "+l.error)}})}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks),ie(Io),ie(ct),ie(Rn),ie(Er))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class vt{constructor(o,t,r,i){this.post_id=o,this.vote=t,this.uid=r,this.type=i}}class oe{constructor(o,t,r,i){this.curVote=o,this.prevVote=t,this.curVoteType=r,this.prevVoteType=i}}let Ue=(()=>{class e{constructor(t,r,i,l,d){this.postService=t,this.checkRefreshToken=r,this.storageService=i,this.shareDataService=l,this.voteImgService=d,this.endpoint="/vote-post"}votePost(t,r,i,l){this.checkRefreshToken.runCheckRefreshToken();let d=new et;const p=new vt(t,r,i,l),m=JSON.stringify(p);return d=d.append("Accept","application/json"),d=d.append("Content-Type","application/json"),this.postService.post(this.endpoint,d,m,!0)}prepareVote(t,r){let d=r.vote,p=r.voteType;return"none"===p&&"upvote"===t?(d+=1,p="upvote"):"none"===p&&"downvote"===t?(d-=1,p="downvote"):"upvote"===p&&"upvote"===t?(d-=1,p="none"):"upvote"===p&&"downvote"===t?(d-=2,p="downvote"):"downvote"===p&&"upvote"===t?(d+=2,p="upvote"):"downvote"===p&&"downvote"===t?(d+=1,p="none"):null==p&&"upvote"===t?(d+=1,p="upvote"):null==p&&"downvote"===t&&(d-=1,p="downvote"),new oe(d,r.vote,p,r.voteType)}sendVotePostToServer(t,r){const i=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.votePost(t.post_id,r.curVote,i,r.curVoteType).subscribe({next:l=>{t.vote=r.curVote,t.voteType=r.curVoteType,this.shareDataService.setVoteOfDetailPosts(t.post_id,r.curVote),this.shareDataService.setVoteTypeOfDetailPosts(t.post_id,r.curVoteType)},error:l=>{console.log("HttpServletResponse: "+l.error.message+"\nResponseEntity: "+l.error)}})}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(Rn),ie(ct),ie(Er),ie(bm))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),tt=(()=>{class e{constructor(t){this.getService=t,this.endpoint="/check-vote-post"}checkVotePost(t,r){const i=this.endpoint+"?uid="+r+"&postId="+t;console.log(i);let l=new et;return l=l.append("Accept","application/json"),l=l.append("Content-Type","application/json"),this.getService.get(i,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Un{constructor(o,t,r){this.uid=o,this.post_id=t,this.show=r}}let Tr=(()=>{class e{constructor(t){this.postService=t,this.endpoint="/show-post"}setShowPost(t,r,i){let l=new et;const d=new Un(t,r,i),p=JSON.stringify(d);return l=l.append("Accept","application/json"),l=l.append("Content-Type","application/json"),this.postService.post(this.endpoint,l,p,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Ca{constructor(o,t){this.post_id=o,this.allow=t}}let ho=(()=>{class e{constructor(t,r,i,l){this.postService=t,this.checkRefreshToken=r,this.storageService=i,this.shareDataService=l,this.endpoint="/set-allow-post"}setAllowPost(t,r){this.checkRefreshToken.runCheckRefreshToken();let i=new et;const l=new Ca(t,r),d=JSON.stringify(l);return i=i.append("Accept","application/json"),i=i.append("Content-Type","application/json"),this.postService.post(this.endpoint,i,d,!0)}sendAllowToServer(t,r,i){this.setAllowPost(t.post_id,r).subscribe({next:l=>{i?.emit(t.post_id),t.allow=r,this.shareDataService.setAllowOfDetailPosts(t.post_id,r)},error:l=>{console.log("HttpServletResponse: "+l.error.message+"\nResponseEntity: "+l.error)}})}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(Rn),ie(ct),ie(Er))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Sa{constructor(o,t,r){this.post_id=o,this.uid=t,this.deleted_by=r}}let Sm=(()=>{class e{constructor(t,r,i,l){this.postService=t,this.storageService=r,this.checkRefreshToken=i,this.shareDataService=l,this.deleteEndpoint="/delete-post"}deletePost(t,r,i){this.checkRefreshToken.runCheckRefreshToken();const l=new Sa(t,r,i),d=JSON.stringify(l);let p=new et;return p=p.append("Accept","application/json"),p=p.append("Content-Type","application/json"),this.postService.post(this.deleteEndpoint,p,d,!0)}sendDeleteToServer(t,r,i){const l=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.deletePost(t.post_id,l,r).subscribe({next:d=>{t.deleted=1,i?.emit(t.post_id),this.shareDataService.setDeleteOfDetailPosts(t.post_id,1)},error:d=>{console.log("HttpServletResponse: "+d.error.message+"\nResponseEntity: "+d.error)}})}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(ct),ie(Rn),ie(Er))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),O9=(()=>{class e{constructor(t){this.sanitizer=t,this.content=""}ngOnInit(){if(this.content=this.content.replace(/<img/g,'<img class="img" '),this.content=this.content.replace(/<figure/g,'<figure class="figure" '),this.content=this.content.replace(/<figcaption/g,'<figcaption class="figcaption" '),this.content=this.content.replace(/<pre/g,'<pre class="pre_code" '),this.content=this.content.replace(/<code/g,'<code class="code" '),this.content=this.content.replace(/<ol/g,'<ol class="ol" '),this.content=this.content.replace(/<ul/g,'<ul class="ul" '),this.content=this.content.replace(/<a/g,'<a class="a" '),this.content=this.content.replace(/<p/g,'<p class="p" '),this.content=this.content.replace(/<blockquote/g,'<blockquote class="blockquote" '),window.location.href.includes("/post/")){const t=document.getElementById("post_container");t.style.height="auto",t.removeAttribute("id")}}static#e=this.\u0275fac=function(r){return new(r||e)(B(Pf))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-editor-view"]],inputs:{content:"content"},decls:1,vars:1,consts:[["id","post_container",3,"innerHTML"]],template:function(r,i){1&r&&Q(0,"div",0),2&r&&A("innerHTML",i.sanitizer.bypassSecurityTrustHtml(i.content),sb)},styles:["[_nghost-%COMP%]{position:relative}#container[_ngcontent-%COMP%]{max-height:155px;overflow:hidden;word-wrap:break-word}#container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{width:100%;max-height:155px;display:-webkit-box;-webkit-line-clamp:7;-webkit-box-orient:vertical}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;font-size:14px;text-decoration:underline}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}"]})}return e})();function UB(e,o){if(1&e){const t=We();x(0,"i",11),z("click",function(i){return ce(t),fe(q().showCaption(i))}),D()}}function rK(e,o){if(1&e){const t=We();x(0,"i",12),z("click",function(i){return ce(t),fe(q().closeImg(i))}),D()}}function lZ(e,o){if(1&e){const t=We();x(0,"i",13),z("click",function(i){return ce(t),fe(q().showCaption(i))}),D()}}const sK=e=>({padding:e}),uZ=e=>({"font-size":e}),dZ=(e,o)=>({"font-size":e,"padding-bottom":o});function fZ(e,o){if(1&e){const t=We();x(0,"div",14),z("click",function(i){return ce(t),fe(q().preventClick(i))}),x(1,"p",15),L(2),D(),x(3,"a",16),L(4),D()()}if(2&e){const t=q();A("ngStyle",ve(6,sK,t.isViewPostPage||t.isZoom||t.arr[t.index].caption.length>0||t.arr[t.index].link.length>0?"5px 10px":"0 10px")),k(1),A("ngStyle",ve(8,uZ,t.isViewPostPage||t.isZoom?"16px":"13px")),k(1),ht(t.arr[t.index].caption),k(1),Ot("href",t.arr[t.index].link,Qe),A("ngStyle",Pi(10,dZ,t.isViewPostPage||t.isZoom?"16px":"13px",t.isViewPostPage||t.isZoom?"30px":"10px")),k(1),ht(t.arr[t.index].link)}}function hZ(e,o){if(1&e){const t=We();x(0,"div",17),z("click",function(i){return ce(t),fe(q().preventClick(i))}),x(1,"p",18),L(2),D(),x(3,"a",19),L(4),D()()}if(2&e){const t=q();A("ngStyle",ve(4,sK,t.arr[t.index].caption.length>0||t.arr[t.index].link.length>0?"5px 10px":"0")),k(2),ht(t.arr[t.index].caption),k(1),Ot("href",t.arr[t.index].link,Qe),k(1),ht(t.arr[t.index].link)}}const pZ=e=>({zoom_block:e}),iK=e=>({display:e});let aK=(()=>{class e{constructor(){this.content="",this.isZoom=!1,this.isCaptionOn=!0,this.isViewPostPage=!1,this.index=0,this.leftAllowed=!1,this.rightAllowed=!0}ngOnInit(){this.arr=JSON.parse(this.content),this.isViewPostPage=window.location.href.includes("/post/")}ngOnChanges(){this.arr=JSON.parse(this.content),this.isViewPostPage=window.location.href.includes("/post/")}left(t){t.stopPropagation(),1===this.index?(this.index-=1,this.leftAllowed=!1,this.rightAllowed=!0):this.index>1?(this.index-=1,this.leftAllowed=!0,this.rightAllowed=!0):(this.leftAllowed=!1,this.rightAllowed=!0)}right(t){t.stopPropagation(),this.index===this.arr.length-2?(this.index+=1,this.rightAllowed=!1,this.leftAllowed=!0):this.index<this.arr.length-2?(this.index+=1,this.rightAllowed=!0,this.leftAllowed=!0):(this.rightAllowed=!1,this.leftAllowed=!0)}preventClick(t){t.stopPropagation()}zoomImage(t){t.stopPropagation(),this.isZoom=!0}closeImg(t){t.stopPropagation(),this.isZoom=!1,this.isCaptionOn=!0,document.getElementById("caption_link").style.paddingBottom="10px",document.getElementById("caption").style.fontSize="13px",document.getElementById("link").style.fontSize="13px"}showCaption(t){t.stopPropagation(),this.isCaptionOn=!this.isCaptionOn}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-image-view"]],inputs:{content:"content"},features:[Ho],decls:11,vars:15,consts:[[1,"container",3,"ngClass","click"],["class","pi pi-info-circle","id","btn_hide_caption","title","Turn caption on or off",3,"click",4,"ngIf"],["id","btn_right","type","button",3,"ngStyle","click"],[1,"pi","pi-angle-right"],["id","btn_left","type","button",3,"ngStyle","click"],[1,"pi","pi-angle-left"],[3,"src","click"],["id","btn_close_zoom","class","pi pi-times-circle","title","Close",3,"click",4,"ngIf"],["class","pi pi-info-circle","id","btn_caption","title","Turn caption on or off",3,"click",4,"ngIf"],["id","caption_link",3,"ngStyle","click",4,"ngIf"],["id","caption_link_block",3,"ngStyle","click",4,"ngIf"],["id","btn_hide_caption","title","Turn caption on or off",1,"pi","pi-info-circle",3,"click"],["id","btn_close_zoom","title","Close",1,"pi","pi-times-circle",3,"click"],["id","btn_caption","title","Turn caption on or off",1,"pi","pi-info-circle",3,"click"],["id","caption_link",3,"ngStyle","click"],["id","caption",3,"ngStyle"],["id","link","target","_blank",3,"href","ngStyle"],["id","caption_link_block",3,"ngStyle","click"],["id","caption_post"],["id","link_post","target","_blank",3,"href"]],template:function(r,i){1&r&&(x(0,"div",0),z("click",function(d){return i.preventClick(d)}),Pe(1,UB,1,0,"i",1),x(2,"button",2),z("click",function(d){return i.right(d)}),Q(3,"i",3),D(),x(4,"button",4),z("click",function(d){return i.left(d)}),Q(5,"i",5),D(),x(6,"img",6),z("click",function(d){return i.zoomImage(d)}),D(),Pe(7,rK,1,0,"i",7)(8,lZ,1,0,"i",8)(9,fZ,5,13,"div",9),D(),Pe(10,hZ,5,6,"div",10)),2&r&&(A("ngClass",ve(9,pZ,i.isZoom)),k(1),A("ngIf",!i.isZoom&&(i.arr[i.index].caption.length>0||i.arr[i.index].link.length>0)&&!i.isViewPostPage),k(1),A("ngStyle",ve(11,iK,i.rightAllowed&&1!=i.arr.length?"block":"none")),k(2),A("ngStyle",ve(13,iK,i.leftAllowed&&1!=i.arr.length?"block":"none")),k(2),Ot("src",i.arr[i.index].data,Qe),k(1),A("ngIf",i.isZoom),k(1),A("ngIf",i.isZoom),k(1),A("ngIf",(i.isCaptionOn&&i.isZoom||i.isCaptionOn&&!i.isViewPostPage)&&(!i.isViewPostPage||i.isViewPostPage&&i.isCaptionOn)),k(1),A("ngIf",i.isViewPostPage))},dependencies:[lr,sn,Eo],styles:[".container[_ngcontent-%COMP%]{width:100%;height:50vh;min-height:300px;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#0000004d}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;background-color:#000000b3}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer}.container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:40px;height:40px;background-color:var(--neutral);border-radius:50%;position:absolute;opacity:.6;display:flex;justify-content:center;align-items:center}i[_ngcontent-%COMP%]{font-size:2rem;color:var(--secondary_color)}i[_ngcontent-%COMP%]:hover{cursor:pointer}.container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{opacity:1}#btn_left[_ngcontent-%COMP%]{left:10px}#btn_right[_ngcontent-%COMP%]{right:10px}#caption_link[_ngcontent-%COMP%]{height:auto;width:100%;background-color:#000000b3;position:absolute;left:0;bottom:0;color:var(--secondary_color)}#caption[_ngcontent-%COMP%], #link[_ngcontent-%COMP%]{width:100%;color:#fff!important;font-size:13px}#link[_ngcontent-%COMP%], #link_post[_ngcontent-%COMP%]{color:#648efc!important;text-decoration:underline}#link[_ngcontent-%COMP%]:hover, #link_post[_ngcontent-%COMP%]:hover{color:#003686!important}.zoom_block[_ngcontent-%COMP%]{z-index:9999;width:100vw;height:100vh;position:fixed;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#000000e6}#btn_close_zoom[_ngcontent-%COMP%]{position:absolute;top:23px;right:20px;width:50px;aspect-ratio:1/1;font-size:45px;color:#fff}#btn_caption[_ngcontent-%COMP%]{position:absolute;top:23px;right:100px;width:50px;aspect-ratio:1/1;font-size:45px;color:#fff}#btn_hide_caption[_ngcontent-%COMP%]{width:25px;aspect-ratio:1/1;font-size:28px;position:absolute;bottom:calc(100% - 35px);right:10px;color:var(--secondary_color);background-color:var(--primary_background_color);border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center}#btn_hide_caption[_ngcontent-%COMP%], #btn_caption[_ngcontent-%COMP%], #btn_close_zoom[_ngcontent-%COMP%]{opacity:.2}#btn_hide_caption[_ngcontent-%COMP%]:hover, #btn_caption[_ngcontent-%COMP%]:hover, #btn_close_zoom[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer}#caption_link_block[_ngcontent-%COMP%]{background-color:var(--neutral)}#caption_post[_ngcontent-%COMP%]{color:var(--secondary_color)!important}#link_post[_ngcontent-%COMP%], #caption_post[_ngcontent-%COMP%]{font-size:14px}"]})}return e})();const mZ=e=>({width:e}),gZ=(e,o,t)=>({"text-overflow":e,"white-space":o,"word-wrap":t});function _Z(e,o){if(1&e&&(x(0,"div",4)(1,"p",5),L(2),D(),x(3,"a",6),L(4),D()()),2&e){const t=q();A("ngStyle",ve(5,mZ,0==t.data.image.length?"100%":"calc(100% - 150px)")),k(2),ht(t.title),k(1),A("ngStyle",Ss(7,gZ,0==t.data.image.length?"string":"ellipsis",0==t.data.image.length?"normal":"nowrap",0==t.data.image.length?"break-word":"hidden"))("href",t.data.link,Qe),k(1),ht(t.data.link)}}const vZ=e=>({"font-size":e});function yZ(e,o){if(1&e&&(x(0,"div"),Q(1,"i",10),D()),2&e){const t=q(3);k(1),A("ngStyle",ve(1,vZ,t.isViewPostPage||t.isModPostPage?"40px":"16px"))}}const bZ=(e,o)=>({"border-bottom-left-radius":e,"border-bottom-right-radius":o}),wZ=e=>({post_page:e});function CZ(e,o){if(1&e){const t=We();x(0,"a",8),z("click",function(i){return ce(t),fe(q(2).preventClick(i))}),Q(1,"img",9),Pe(2,yZ,2,3,"div",2),D()}if(2&e){const t=q(2);Ot("title",t.data.link),A("ngStyle",Pi(6,bZ,t.isViewPostPage||t.isModPostPage?"0":"10px",t.isViewPostPage||t.isModPostPage?"0":"10px"))("ngClass",ve(9,wZ,t.isViewPostPage||t.isModPostPage))("href",t.data.link,Qe),k(1),A("src",t.data.image,Qe),k(1),A("ngIf",!t.isViewPostPage&&!t.isModPostPage)}}function SZ(e,o){if(1&e&&(S_(0),Pe(1,CZ,3,11,"a",7),lf()),2&e){const t=q();k(1),A("ngIf",0!=t.data.image.length)}}function xZ(e,o){if(1&e){const t=We();x(0,"div",11),z("click",function(){return ce(t),fe(q().openLink())}),x(1,"a",12),L(2),D(),x(3,"button",13),z("click",function(){return ce(t),fe(q().openLink())}),L(4,"Open"),D()()}if(2&e){const t=q();k(1),A("href",t.data.link,Qe),k(1),ht(t.link_domain)}}const PZ=e=>({"flex-direction":e});let cK=(()=>{class e{constructor(){this.title="",this.content="",this.link_domain="",this.isViewPostPage=window.location.href.match("/post/"),this.isModPostPage=window.location.href.match("/mod/")}ngOnInit(){this.data=JSON.parse(this.content);const r=this.data.link.match(/^(https?:\/\/[^\/]+)/);null!=r&&null!=r&&(this.link_domain=r[0])}ngOnChanges(){this.data=JSON.parse(this.content);const r=this.data.link.match(/^(https?:\/\/[^\/]+)/);null!=r&&null!=r&&(this.link_domain=r[0])}preventClick(t){t.stopPropagation()}openLink(){window.open(this.data.link,"_blank")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-link-view"]],inputs:{title:"title",content:"content"},features:[Ho],decls:4,vars:6,consts:[["id","link_container",3,"ngStyle"],[3,"ngStyle",4,"ngIf"],[4,"ngIf"],["id","domain_block",3,"click",4,"ngIf"],[3,"ngStyle"],["id","txt_title"],["target","_blank",3,"ngStyle","href"],["id","link_img","target","_blank",3,"ngStyle","ngClass","href","title","click",4,"ngIf"],["id","link_img","target","_blank",3,"ngStyle","ngClass","href","title","click"],[3,"src"],[1,"pi","pi-external-link",3,"ngStyle"],["id","domain_block",3,"click"],["id","link_domain","target","_blank",3,"href"],["id","btn_open",3,"click"]],template:function(r,i){1&r&&(x(0,"div",0),Pe(1,_Z,5,11,"div",1)(2,SZ,2,1,"ng-container",2)(3,xZ,5,2,"div",3),D()),2&r&&(A("ngStyle",ve(4,PZ,i.isViewPostPage||i.isModPostPage?"column":"row")),k(1),A("ngIf",!i.isViewPostPage&&!i.isModPostPage),k(1),A("ngIf",0!=i.data.image.length),k(1),A("ngIf",i.isViewPostPage||i.isModPostPage))},dependencies:[lr,sn,Eo],styles:["#video_container[_ngcontent-%COMP%]{width:100%;height:calc(50vh + 35px)}#video_container[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin-bottom:10px}iframe[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{width:100%;height:calc(100% - 35px)}#txt_title[_ngcontent-%COMP%]{margin-bottom:10px;color:var(--icon);font-weight:600;font-size:18px}#link_container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start}#link_container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:calc(100% - 150px);overflow:hidden}#link_container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;width:100%;color:var(--icon);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}#link_container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}#link_container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{width:150px;height:100%;margin-left:10px;border-radius:10px;display:flex;justify-content:center;align-items:center;position:relative;background-color:#00000080}#link_container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:22px;aspect-ratio:1/1;position:absolute;bottom:10px;left:10px;border-radius:5px;font-size:20px;background-color:#000c;display:flex;flex-direction:column;justify-content:center;align-items:center}#link_container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#fff!important}#link_container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}#link_img[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.post_page[_ngcontent-%COMP%]{width:100%!important;height:calc(100% - 200px)!important;margin-left:0!important;border:1px solid var(--border);border-radius:none!important}#domain_block[_ngcontent-%COMP%]{width:100%!important;padding:15px;border:1px solid var(--border);border-radius:0 0 10px 10px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}#domain_block[_ngcontent-%COMP%]:hover{cursor:pointer}#link_domain[_ngcontent-%COMP%]{color:var(--secondary_color)!important}#btn_open[_ngcontent-%COMP%]{padding:7px 15px;border-radius:20px;border:1px solid var(--secondary_color)!important;color:var(--secondary_color)!important;background-color:var(--primary_background_color)!important}"]})}return e})(),lK=(()=>{class e{constructor(){this.content=""}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-video-view"]],inputs:{content:"content"},decls:2,vars:1,consts:[["id","container"],["preload","none","poster","","controls","true","disablepictureinpicture","true",3,"src"]],template:function(r,i){1&r&&(x(0,"div",0),Q(1,"video",1),D()),2&r&&(k(1),Ot("src",i.content,Qe))},styles:["[_nghost-%COMP%], #container[_ngcontent-%COMP%]{width:100%;max-height:400px;background-color:#000}video[_ngcontent-%COMP%]{width:100%;height:400px;background-color:#000}"]})}return e})();function EZ(e,o){if(1&e){const t=We();x(0,"div",18)(1,"a",19),z("click",function(i){return ce(t),fe(q().stopPropagation(i))}),Q(2,"img",20),D(),x(3,"div",21)(4,"a",22),z("click",function(i){return ce(t),fe(q().stopPropagation(i))}),L(5),D(),x(6,"i",23),L(7,"\xb7"),D(),x(8,"span",24),L(9),D()(),x(10,"p",25),L(11),D()()}if(2&e){const t=q();k(1),In("href","/r/",t.post.community_id,"",Qe),k(1),Ot("src",t.communityIcon,Qe),k(2),In("href","/r/",t.post.community_id,"",Qe),Ot("title",t.communityName),k(1),at("r/",t.communityName," "),k(4),at(" ",t.shownDate,""),k(2),ht(t.post.post_id)}}function kZ(e,o){if(1&e){const t=We();x(0,"div",18)(1,"a",19),z("click",function(i){return ce(t),fe(q().stopPropagation(i))}),Q(2,"img",26),D(),x(3,"div",21)(4,"a",22),z("click",function(i){return ce(t),fe(q().stopPropagation(i))}),L(5),D(),x(6,"i",23),L(7,"\xb7"),D(),x(8,"span",24),L(9),D()(),x(10,"p",25),L(11),D()()}if(2&e){const t=q();k(1),In("href","/user/",t.post.username,"",Qe),k(1),Ot("src",t.post.username_icon,Qe),k(2),In("href","/user/",t.post.username_icon,"",Qe),Ot("title",t.post.username),k(1),at("u/",t.post.username," "),k(4),at(" ",t.shownDate,""),k(2),ht(t.post.post_id)}}function DZ(e,o){1&e&&(x(0,"p",30),L(1,"Joined"),D())}function TZ(e,o){1&e&&(x(0,"p",31),L(1,"Join"),D())}const MZ=(e,o)=>({"background-color":e,border:o});function IZ(e,o){if(1&e){const t=We();x(0,"button",27),z("click",function(i){return ce(t),fe(q().joinCommunity(i))}),Pe(1,DZ,2,0,"p",28)(2,TZ,2,0,"p",29),D()}if(2&e){const t=q();A("ngStyle",Pi(3,MZ,1==t.post.join?"var(--primary_background_color)":"var(--allow)",1==t.post.join?"1px solid var(--secondary_color)":"none")),k(1),A("ngIf",1==t.post.join),k(1),A("ngIf",0==t.post.join||null==t.post.join)}}function OZ(e,o){if(1&e){const t=We();x(0,"button",32),z("click",function(i){return ce(t),fe(q().openOptionMenu(i))}),Q(1,"i",33),D()}}function AZ(e,o){1&e&&(x(0,"p"),L(1,"Unsave"),D())}function NZ(e,o){1&e&&(x(0,"p"),L(1,"Save"),D())}function RZ(e,o){1&e&&Q(0,"app-editor-view",34),2&e&&A("content",q().content)}function FZ(e,o){1&e&&Q(0,"app-image-view",34),2&e&&A("content",q().content)}function LZ(e,o){if(1&e&&Q(0,"app-link-view",35),2&e){const t=q();A("title",t.title)("content",t.content)}}function BZ(e,o){1&e&&Q(0,"app-video-view",34),2&e&&A("content",q().content)}const A9=(e,o,t)=>({upvote:e,downvote:o,normal:t}),VZ=e=>({color:e});function $Z(e,o){if(1&e){const t=We();x(0,"nav",36)(1,"div",37)(2,"button",38),z("click",function(i){return ce(t),fe(q().votePost(i,"upvote"))}),Q(3,"img"),D(),x(4,"p",39),L(5),D(),x(6,"button",40),z("click",function(i){return ce(t),fe(q().votePost(i,"downvote"))}),Q(7,"img"),D()(),x(8,"button",41),z("click",function(){return ce(t),fe(q().navigateToPost())}),Q(9,"i",42),x(10,"p",43),L(11),D()()()}if(2&e){const t=q();k(1),A("ngClass",Ss(8,A9,"upvote"===t.post.voteType,"downvote"===t.post.voteType,"none"===t.post.voteType||null==t.post.voteType)),k(1),A("ngClass",Ss(12,A9,"upvote"===t.post.voteType,"downvote"===t.post.voteType,"none"===t.post.voteType||null==t.post.voteType)),k(1),nr("src","upvote"===t.post.voteType?t.upvote_fill:t.voteImgService.upvote,Qe),k(1),A("ngStyle",ve(16,VZ,"none"==t.post.voteType||null==t.post.voteType?"var(--icon)":"#ffffff")),k(1),ht(t.presentationService.transformNumber(t.vote)),k(1),A("ngClass",Ss(18,A9,"upvote"===t.post.voteType,"downvote"===t.post.voteType,"none"===t.post.voteType||null==t.post.voteType)),k(1),nr("src","downvote"===t.post.voteType?t.downvote_fill:t.voteImgService.downvote,Qe),k(4),ht(t.presentationService.transformNumber(t.comment_count))}}function UZ(e,o){if(1&e){const t=We();x(0,"button",44),z("click",function(i){return ce(t),fe(q().allowPost(i))}),L(1,"Aprove"),D()}}function jZ(e,o){if(1&e){const t=We();x(0,"button",45),z("click",function(i){return ce(t),fe(q().deletePost(i))}),L(1,"Remove"),D()}}const uK=e=>({display:e});let HZ=(()=>{class e{constructor(t,r,i,l,d,p,m,v,w,P,R,$,H,Y,te){this.router=t,this.votePostServie=r,this.storageService=i,this.dateTimeService=l,this.checkVotePostService=d,this.getCommentService=p,this.communityService=m,this.showPostService=v,this.allowPostService=w,this.deletePostService=P,this.presentationService=R,this.savePostService=$,this.voteImgService=H,this.shareDataService=Y,this.activeRoute=te,this.post_id=0,this.type="",this.communityName="",this.userName="",this.title="",this.content="",this.created_at="",this.vote=1,this.communityIcon="",this.index=0,this.arr_length=0,this.joinCommunityInfo=new l0(0,!1),this.event=new Le,this.joinCommunityEvent=new Le,this.allowPostEvent=new Le,this.voteType="none",this.previousVote=this.vote,this.previousVoteType="",this.shownDate="",this.comment_count=0,this.isHomePage=!1,this.isPopularPage=!1,this.isCommunityPage=!1,this.isControlPage=!1,this.isUserPage=!1,this.isUserPostPage=!1,this.isSavedPostPage=!1,this.isWaitApprovePostPage=!1,this.isModPage=!1,this.isReviewModPage=!1,this.isReportModPage=!1,this.isRemoveModPage=!1,this.isEditModPage=!1,this.communityInfo=new h(0,"",0,"","",0,"","",0,0),this.saved=!1,this.savedText=this.saved?"Unsave":"Save",this.subscribed_communities=[],this.upvote="../../../../../assets/icon/upvote.png",this.upvote_fill="../../../../../assets/icon/upvote-fill.png",this.downvote="../../../../../assets/icon/downvote.png",this.downvote_fill="../../../../../assets/icon/downvote-fill.png",this.isOptionMenuOpen=!1,this.showCount=0}ngOnInit(){if(this.shareDataService.subscribed_communities$.subscribe(r=>{this.subscribed_communities=r}),this.getCommentService.countComments(this.post_id).subscribe({next:r=>{this.comment_count=r}}),this.voteImgService.selectDownVoteImg(),this.voteImgService.selectUpVoteImg(),this.isHomePage=window.location.href.includes("/home"),this.isPopularPage=window.location.href.includes("/popular"),this.isCommunityPage=window.location.href.includes("/r/"),this.isControlPage=window.location.href.includes("/control-posts/"),this.isUserPage=window.location.href.includes("/user/"),this.isModPage=window.location.href.includes("/mod/"),this.isUserPage){const r=this.activeRoute.parent?.snapshot.params.username;this.isUserPostPage=window.location.href.includes("/user/"+r+"/posts"),this.isSavedPostPage=window.location.href.includes("/user/"+r+"/saved"),this.isWaitApprovePostPage=window.location.href.includes("/user/"+r+"/wait_for_approve")}this.isModPage&&(this.isReviewModPage=window.location.href.includes("/review"),this.isReportModPage=window.location.href.includes("/report"),this.isRemoveModPage=window.location.href.includes("/remove"),this.isEditModPage=window.location.href.includes("/edit")),this.shownDate=this.dateTimeService.getTimeByCompareCreatedAtAndCurrentDate(this.post.created_at);const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));0==t&&(this.post.join=null,this.post.save=null,this.post.voteType=null),null==this.post.join&&0!=t&&this.communityService.checkJoinCommunityStatus(t,this.post.community_id).subscribe({next:r=>{this.post.join=r.join_community,this.shareDataService.setJoinCommunityOfDetailPosts(this.post.community_id,r.join_community)}}),null==this.post.save&&0!=t&&this.savePostService.getSavedPostStatusByUid(t,this.post.post_id).subscribe({next:r=>{this.post.save=r.saved,this.shareDataService.setSaveStatusOfDetailPosts(this.post.post_id,r.saved)}}),null==this.post.voteType&&0!=t&&this.checkVotePostService.checkVotePost(this.post.post_id,t).subscribe({next:r=>{this.post.voteType=r.vote_type,this.shareDataService.setVoteTypeOfDetailPosts(this.post.post_id,this.voteType)}}),"editor"==this.post.type&&(this.content=this.content.replace(/<figure class="image">([\s\S]*?)<\/figure>/g,(l,d)=>`<a>${l.match('src="([^"]+)"')[1]}</a>`),this.content=this.content.replace(/<img src="[^"]*" alt="">/g,(l,d)=>`<a>${l.match('src="([^"]+)"')[1]}</a>`))}ngOnChanges(){this.joinCommunityInfo.community_id==this.post.community_id&&(this.post.join=this.joinCommunityInfo.join?1:0,this.shareDataService.setJoinCommunityOfDetailPosts(this.post.post_id,this.joinCommunityInfo.join?1:0))}navigateToPost(){this.dateTimeService.getCurrentDateTime(),this.shareDataService.setCurViewPostId(this.post_id),this.isHomePage&&(this.shareDataService.setHomeCurViewPostId(this.post_id),this.router.navigate(["post/"+this.post_id])),this.isPopularPage&&(this.shareDataService.setPopularCurViewPostId(this.post_id),this.router.navigate(["post/"+this.post_id])),this.isCommunityPage&&(this.shareDataService.setCommunityCurViewPostId(this.post_id),this.router.navigate(["post/"+this.post_id])),this.isUserPostPage&&(this.shareDataService.setUserPostCurViewPostId(this.post_id),this.router.navigate(["post/"+this.post_id])),this.isSavedPostPage&&(this.shareDataService.setSavedCurViewPostId(this.post_id),this.router.navigate(["post/"+this.post_id])),this.isWaitApprovePostPage&&(this.shareDataService.setWaitForApproveCurViewPostId(this.post_id),this.router.navigate(["post/"+this.post_id])),this.isReviewModPage&&this.router.navigate(["mod/"+this.post.community_id+"/review/"+this.post_id])}navigateToCommunity(){this.dateTimeService.getCurrentDateTime(),this.router.navigate(["r/"+this.post.community_id])}linkClick(t){t.preventDefault()}stopPropagation(t){t.stopPropagation()}openOptionMenu(t){this.isOptionMenuOpen=!this.isOptionMenuOpen,t.stopPropagation()}onIntersection({visible:r}){r&&(console.log("Post index: "+this.index),this.showCount++,1==this.showCount)&&(""==this.storageService.getItem("uid")||Number.parseInt(this.storageService.getItem("uid")))}votePost(t,r){t.stopPropagation();const i=this.votePostServie.prepareVote(r,this.post);this.votePostServie.sendVotePostToServer(this.post,i)}sendJoinCommunityFromPostToServer(t,r){const i=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.communityService.joinCommunity(i,t.community_id,r).subscribe({next:l=>{t.join=r,this.communityService.getCommunityInfoById(t.community_id.toString()).subscribe({next:d=>{1==l.join_community?this.subscribed_communities.unshift(d):this.subscribed_communities=this.subscribed_communities.filter(p=>p.id!=d.id),this.shareDataService.setSubscribedCommunities(this.subscribed_communities),this.shareDataService.setJoinCommunityOfDetailPosts(t.community_id,t.join)}}),this.joinCommunityEvent.emit(new l0(this.post.community_id,1==this.post.join))}})}joinCommunity(t){t.stopPropagation(),this.sendJoinCommunityFromPostToServer(this.post,1==this.post.join?0:1)}allowPost(t){t.stopPropagation(),this.allowPostService.sendAllowToServer(this.post,1,this.allowPostEvent)}deletePost(t){t.stopPropagation(),Ne().fire({titleText:"Delete this post ?",text:"Change can not be undo",icon:"warning",confirmButtonText:"Delete",cancelButtonText:"Cancel",showCancelButton:!0,showConfirmButton:!0}).then(r=>{r.isConfirmed&&this.deletePostService.sendDeleteToServer(this.post,2,this.allowPostEvent)})}savePost(t){t.stopPropagation(),this.savePostService.sendSavePostToServer(this.post,1==this.post.save?0:1)}static#e=this.\u0275fac=function(r){return new(r||e)(B(Vt),B(Ue),B(ct),B(Ds),B(tt),B(Ri),B(Pr),B(Tr),B(ho),B(Sm),B(va),B(_D),B(bm),B(Er),B($n))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-post-link"]],inputs:{post:"post",post_id:"post_id",type:"type",communityName:"communityName",userName:"userName",title:"title",content:"content",created_at:"created_at",vote:"vote",communityIcon:"communityIcon",index:"index",arr_length:"arr_length",joinCommunityInfo:"joinCommunityInfo"},outputs:{event:"event",joinCommunityEvent:"joinCommunityEvent",allowPostEvent:"allowPostEvent"},features:[Ho],decls:24,vars:21,consts:[["id","post_block",3,"click"],["id","community_bar"],["id","community_block",4,"ngIf"],["id","option_block"],["id","btn_joinn","class","btn",3,"ngStyle","click",4,"ngIf"],["id","btn_option","type","button","title","Open option menu",3,"click",4,"ngIf"],["id","dropdown_option_block",3,"ngStyle"],[3,"click"],[1,"pi",3,"ngClass"],[4,"ngIf"],["id","main_content"],["id","txt_title",3,"ngStyle"],[3,"content",4,"ngIf"],[3,"title","content",4,"ngIf"],["id","footer",4,"ngIf"],["id","moderate_block"],["id","btn_allow",3,"click",4,"ngIf"],["id","btn_delete",3,"click",4,"ngIf"],["id","community_block"],["id","community_link",3,"href","click"],["id","community_icon","alt","community_icon",3,"src"],["id","link_date_block"],[2,"font-weight","500","font-size","13px","color","var(--txt) !important",3,"href","title","click"],[2,"font-weight","bold","color","var(--txt)"],[2,"font-size","12px","color","var(--txt)","font-weight","300"],[2,"color","var(--txt)"],["id","community_icon","alt","user avatar",3,"src"],["id","btn_joinn",1,"btn",3,"ngStyle","click"],["id","txt_joined",4,"ngIf"],["id","txt_join",4,"ngIf"],["id","txt_joined"],["id","txt_join"],["id","btn_option","type","button","title","Open option menu",3,"click"],[1,"pi","pi-ellipsis-h"],[3,"content"],[3,"title","content"],["id","footer"],["id","block_vote",1,"block_vote",3,"ngClass"],["id","btn_upvote","type","button",2,"color","var(--icon)",3,"ngClass","click"],["id","vote_count",3,"ngStyle"],["id","btn_downvote","type","button",2,"color","var(--icon)",3,"ngClass","click"],["id","btn_comment","type","button",3,"click"],[1,"pi","pi-comment"],["id","comment_count"],["id","btn_allow",3,"click"],["id","btn_delete",3,"click"]],template:function(r,i){1&r&&(Q(0,"hr"),x(1,"div",0),z("click",function(){return i.navigateToPost()}),x(2,"nav",1),Pe(3,EZ,12,7,"div",2)(4,kZ,12,7,"div",2),x(5,"div",3),Pe(6,IZ,3,6,"button",4)(7,OZ,2,0,"button",5),D(),x(8,"div",6)(9,"button",7),z("click",function(d){return i.savePost(d)}),Q(10,"i",8),Pe(11,AZ,2,0,"p",9)(12,NZ,2,0,"p",9),D()()(),x(13,"nav",10)(14,"p",11),L(15),D(),Pe(16,RZ,1,1,"app-editor-view",12)(17,FZ,1,1,"app-image-view",12)(18,LZ,1,2,"app-link-view",13)(19,BZ,1,1,"app-video-view",12),D(),Pe(20,$Z,12,22,"nav",14),x(21,"nav",15),Pe(22,UZ,2,0,"button",16)(23,jZ,2,0,"button",17),D()()),2&r&&(k(3),A("ngIf",!i.isModPage),k(1),A("ngIf",i.isModPage),k(2),A("ngIf",!(i.isHomePage||i.isCommunityPage||i.isControlPage||i.isModPage)),k(1),A("ngIf",!i.isControlPage&&!i.isModPage),k(1),A("ngStyle",ve(17,uK,i.isOptionMenuOpen?"block":"none")),k(2),A("ngClass",i.post.save?"pi-bookmark-fill":"pi-bookmark"),k(1),A("ngIf",1==i.post.save),k(1),A("ngIf",1!=i.post.save),k(2),A("ngStyle",ve(19,uK,"link"==i.type?"none":"block")),k(1),ht(i.title),k(1),A("ngIf","editor"==i.type),k(1),A("ngIf","img"==i.type),k(1),A("ngIf","link"==i.type),k(1),A("ngIf","video"==i.type),k(1),A("ngIf",!i.isModPage),k(2),A("ngIf",i.isModPage),k(1),A("ngIf",i.isModPage))},dependencies:[lr,sn,Eo,O9,aK,cK,lK],styles:["[_nghost-%COMP%]{--community_icon: 30px}app-editor-view[_ngcontent-%COMP%]{max-height:20vh}a[_ngcontent-%COMP%]{color:var(--secondary_color)!important}#post_block[_ngcontent-%COMP%]{width:100%;height:auto;background-color:var(--header);padding:5px 10px;margin:5px 0;border-radius:10px;display:block;box-sizing:border-box}#post_block[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover);cursor:pointer}#post_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-bottom:5px;padding:0 10px}hr[_ngcontent-%COMP%]{border-top:1px solid var(--border);width:100%}#main_content[_ngcontent-%COMP%]{margin-top:5px;min-width:400px}#txt_title[_ngcontent-%COMP%]{margin-bottom:10px;color:var(--icon);font-weight:600;font-size:18px}app-editor-view[_ngcontent-%COMP%]{display:block;height:auto;max-height:155px;overflow-y:hidden}app-image-view[_ngcontent-%COMP%]{z-index:9999}app-link-view[_ngcontent-%COMP%]{display:block}#community_icon[_ngcontent-%COMP%]{width:100%;height:50px;margin-top:5px;background-color:#000}a[_ngcontent-%COMP%]:hover{color:#00f}#community_bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:auto;height:var(--post-header-height);position:relative}#community_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}#community_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:5px}#community_link[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}#community_icon[_ngcontent-%COMP%]{width:var(--community_icon);height:var(--community_icon);border-radius:50%}#option_block[_ngcontent-%COMP%]{width:auto;height:100%;display:flex;flex-direction:row;justify-content:flex-end;align-items:center}.btn[_ngcontent-%COMP%]{color:#fff!important}#btn_allow[_ngcontent-%COMP%]{width:auto;height:100%;padding:0 15px;background-color:var(--allow);border-radius:20px;margin-right:10px;font-size:14px;color:var(--secondary_color)}#btn_delete[_ngcontent-%COMP%]{width:auto;height:100%;padding:0 15px;background-color:var(--delete);border-radius:20px;font-size:14px;color:var(--secondary_color)}#btn_joinn[_ngcontent-%COMP%]{width:auto;height:80%;padding:0 15px;border:1px solid var(--neutral);border-radius:20px;margin-right:10px;font-size:13px}#txt_join[_ngcontent-%COMP%]{color:#fff!important}#txt_joined[_ngcontent-%COMP%]{color:var(--secondary_color)!important}#btn_option[_ngcontent-%COMP%]{height:100%;aspect-ratio:1/1;border-radius:50%;background-color:var(--primary_background_color);color:var(--secondary_color)}#post_block[_ngcontent-%COMP%]:hover   #btn_option[_ngcontent-%COMP%]{background-color:var(--bg_hover)}#post_block[_ngcontent-%COMP%]:hover   #btn_option[_ngcontent-%COMP%]:hover{background-color:var(--search)}#dropdown_option_block[_ngcontent-%COMP%]{position:absolute;right:10px;top:calc(var(--community_icon) + 5px);z-index:9999;box-shadow:var(--menu_box_shadow);background-color:transparent;border-radius:10px;color:var(--secondary_color)}#dropdown_option_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;height:40px;background-color:var(--primary_background_color);display:flex;flex-direction:row;justify-content:flex-start;align-items:center;padding-left:5px;color:var(--secondary_color)}#dropdown_option_block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:15px;margin-right:10px;color:var(--secondary_color)}#dropdown_option_block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:20px}#dropdown_option_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{background-color:var(--search)}#footer[_ngcontent-%COMP%]{width:100%;height:30px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;box-sizing:border-box;padding:0 10px;margin-top:10px}#footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:auto;height:30px;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;background-color:var(--search);margin-right:10px;border-radius:20px}#post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #btn_upvote.normal[_ngcontent-%COMP%], #post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #btn_downvote.normal[_ngcontent-%COMP%], #btn_comment[_ngcontent-%COMP%]{background-color:var(--search)}#btn_comment[_ngcontent-%COMP%], #btn_share[_ngcontent-%COMP%]{padding:0 5px}#post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #btn_comment[_ngcontent-%COMP%]:hover, #post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #btn_share[_ngcontent-%COMP%]:hover{background-color:var(--search)}#btn_upvote[_ngcontent-%COMP%], #btn_downvote[_ngcontent-%COMP%]{padding:5px;border-radius:20px;width:auto;height:100%;display:flex;justify-content:center;align-items:center}#btn_upvote[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], #btn_downvote[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%}#footer[_ngcontent-%COMP%] > div.upvote[_ngcontent-%COMP%]{background-color:var(--upvote)}#footer[_ngcontent-%COMP%] > div.downvote[_ngcontent-%COMP%]{background-color:var(--downvote)}#block_vote[_ngcontent-%COMP%] > button.upvote[_ngcontent-%COMP%]{background-color:var(--upvote)}#block_vote[_ngcontent-%COMP%] > button.downvote[_ngcontent-%COMP%]{background-color:var(--downvote)}#post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%]   #btn_upvote[_ngcontent-%COMP%]:hover{background-color:var(--upvote)}#post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%]   #btn_downvote[_ngcontent-%COMP%]:hover{background-color:var(--downvote)}#btn_comment[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], #btn_share[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding:0 5px}#btn_comment[_ngcontent-%COMP%]{color:var(--secondary_color)}#post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%] > #btn_upvote.upvote[_ngcontent-%COMP%]:hover, #post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%] > #btn_upvote.downvote[_ngcontent-%COMP%]:hover, #post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%] > #btn_downvote.downvote[_ngcontent-%COMP%]:hover, #post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%] > #btn_downvote.upvote[_ngcontent-%COMP%]:hover{background-color:#0006}button[_ngcontent-%COMP%]{background-color:var(--primary_background_color)}#moderate_block[_ngcontent-%COMP%]{width:auto;display:block;display:flex;flex-direction:row;justify-content:flex-start;align-items:center}#btn_allow[_ngcontent-%COMP%], #btn_delete[_ngcontent-%COMP%]{width:auto;padding:5px 15px;background-color:var(--search);border-radius:20px;font-size:14px;color:var(--icon);display:flex;justify-content:center;align-items:center}#btn_allow[_ngcontent-%COMP%]{margin-right:10px}"]})}return e})();function zZ(e,o){if(1&e){const t=We();x(0,"div",5)(1,"button",6),z("click",function(){return ce(t),fe(q().refreshPage())}),x(2,"p"),L(3,"Refresh"),D()()()}}function WZ(e,o){if(1&e){const t=We();x(0,"div",5)(1,"button",6),z("click",function(){return ce(t),fe(q().refreshPage())}),x(2,"p"),L(3,"Refresh"),D()()()}}const An=e=>({"background-color":e});function qZ(e,o){if(1&e){const t=We();x(0,"div",11)(1,"b"),L(2,"Sort by"),D(),x(3,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("hot"))}),L(4,"Hot"),D(),x(5,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("new"))}),L(6,"New"),D(),x(7,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_day"))}),L(8,"Top today"),D(),x(9,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_week"))}),L(10,"Top this week"),D(),x(11,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_month"))}),L(12,"Top this month"),D(),x(13,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_year"))}),L(14,"Top this year"),D(),x(15,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_all_time"))}),L(16,"Top all time"),D()()}if(2&e){const t=q(2);k(3),A("ngStyle",ve(7,An,"hot"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(9,An,"new"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(11,An,"top_day"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(13,An,"top_week"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(15,An,"top_month"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(17,An,"top_year"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(19,An,"top_all_time"==t.sort_option?"var(--search)":"var(--primary_background_color)"))}}function GZ(e,o){if(1&e){const t=We();x(0,"div",7)(1,"button",8),z("click",function(i){return ce(t),fe(q().showSortOption(i))}),L(2),Q(3,"i",9),D(),Pe(4,qZ,17,21,"div",10),D()}if(2&e){const t=q();k(1),A("ngStyle",ve(3,An,t.isSortOptionShow?"var(--bg_hover)":"var(--primary_background_color)")),k(1),ht(t.sort_text),k(2),A("ngIf",t.isSortOptionShow)}}function KZ(e,o){if(1&e){const t=We();x(0,"div",11)(1,"b"),L(2,"Sort by"),D(),x(3,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("hot"))}),L(4,"Hot"),D(),x(5,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("new"))}),L(6,"New"),D(),x(7,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_day"))}),L(8,"Top today"),D(),x(9,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_week"))}),L(10,"Top this week"),D(),x(11,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_month"))}),L(12,"Top this month"),D(),x(13,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_year"))}),L(14,"Top this year"),D(),x(15,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_all_time"))}),L(16,"Top all time"),D()()}if(2&e){const t=q(2);k(3),A("ngStyle",ve(7,An,"hot"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(9,An,"new"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(11,An,"top_day"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(13,An,"top_week"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(15,An,"top_month"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(17,An,"top_year"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(19,An,"top_all_time"==t.sort_option?"var(--search)":"var(--primary_background_color)"))}}function ZZ(e,o){if(1&e){const t=We();x(0,"div",7)(1,"button",8),z("click",function(i){return ce(t),fe(q().showSortOption(i))}),L(2),Q(3,"i",9),D(),Pe(4,KZ,17,21,"div",10),D()}if(2&e){const t=q();k(1),A("ngStyle",ve(3,An,t.isSortOptionShow?"var(--bg_hover)":"var(--primary_background_color)")),k(1),ht(t.sort_text),k(2),A("ngIf",t.isSortOptionShow)}}function YZ(e,o){if(1&e){const t=We();x(0,"div",11)(1,"b"),L(2,"Sort by"),D(),x(3,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("hot"))}),L(4,"Hot"),D(),x(5,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("new"))}),L(6,"New"),D(),x(7,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_day"))}),L(8,"Top today"),D(),x(9,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_week"))}),L(10,"Top this week"),D(),x(11,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_month"))}),L(12,"Top this month"),D(),x(13,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_year"))}),L(14,"Top this year"),D(),x(15,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_all_time"))}),L(16,"Top all time"),D()()}if(2&e){const t=q(2);k(3),A("ngStyle",ve(7,An,"hot"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(9,An,"new"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(11,An,"top_day"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(13,An,"top_week"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(15,An,"top_month"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(17,An,"top_year"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(19,An,"top_all_time"==t.sort_option?"var(--search)":"var(--primary_background_color)"))}}function JZ(e,o){if(1&e){const t=We();x(0,"div",7)(1,"button",8),z("click",function(i){return ce(t),fe(q().showSortOption(i))}),L(2),Q(3,"i",9),D(),Pe(4,YZ,17,21,"div",10),D()}if(2&e){const t=q();k(1),A("ngStyle",ve(3,An,t.isSortOptionShow?"var(--bg_hover)":"var(--primary_background_color)")),k(1),ht(t.sort_text),k(2),A("ngIf",t.isSortOptionShow)}}function QZ(e,o){if(1&e){const t=We();x(0,"div",11)(1,"b"),L(2,"Sort by"),D(),x(3,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("hot"))}),L(4,"Hot"),D(),x(5,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("new"))}),L(6,"New"),D(),x(7,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_day"))}),L(8,"Top today"),D(),x(9,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_week"))}),L(10,"Top this week"),D(),x(11,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_month"))}),L(12,"Top this month"),D(),x(13,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_year"))}),L(14,"Top this year"),D(),x(15,"button",12),z("click",function(){return ce(t),fe(q(2).selectSort("top_all_time"))}),L(16,"Top all time"),D()()}if(2&e){const t=q(2);k(3),A("ngStyle",ve(7,An,"hot"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(9,An,"new"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(11,An,"top_day"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(13,An,"top_week"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(15,An,"top_month"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(17,An,"top_year"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(19,An,"top_all_time"==t.sort_option?"var(--search)":"var(--primary_background_color)"))}}function XZ(e,o){if(1&e){const t=We();x(0,"div",7)(1,"button",8),z("click",function(i){return ce(t),fe(q().showSortOption(i))}),L(2),Q(3,"i",9),D(),Pe(4,QZ,17,21,"div",10),D()}if(2&e){const t=q();k(1),A("ngStyle",ve(3,An,t.isSortOptionShow?"var(--bg_hover)":"var(--primary_background_color)")),k(1),ht(t.sort_text),k(2),A("ngIf",t.isSortOptionShow)}}function eY(e,o){if(1&e){const t=We();x(0,"app-post-link",13),z("event",function(i){return ce(t),fe(q().addPost(i))})("joinCommunityEvent",function(i){return ce(t),fe(q().joinCommunityEvent(i))})("allowPostEvent",function(i){return ce(t),fe(q().allowPostEvent(i))}),D()}if(2&e){const t=o.$implicit,r=o.index,i=q();Ot("id",t.post_id),A("post",t)("post_id",t.post_id)("type",t.type)("communityName",t.community_name)("userName",t.username)("title",t.title)("content",t.content)("created_at",t.created_at)("vote",t.vote)("communityIcon",t.community_icon)("index",r)("arr_length",i.detail_post_arr.length)("joinCommunityInfo",i.joinCommunityInfo)}}function tY(e,o){1&e&&(x(0,"p",14),L(1,"No post found"),D())}function nY(e,o){1&e&&(x(0,"div",15),Q(1,"img",16)(2,"div",17),D())}let kv=(()=>{class e{constructor(t,r,i,l,d,p,m,v,w,P,R,$,H,Y){this.getPostService=t,this.getPostsService=r,this.sanitizer=i,this.DatetimeService=l,this.activeRoute=d,this.storageService=p,this.recentVisitService=m,this.savePostService=v,this.searchUserProfileService=w,this.darkmodeSerive=P,this.checkRefreshToken=R,this.shareDataService=$,this.communityService=H,this.router=Y,this.isLoadEvent=new Le,this.isSortOptionShow=!1,this.isCommunityPage=!1,this.isHomePage=!1,this.isPopularPage=!1,this.isControlPage=!1,this.isUserPage=!1,this.isUserPostPage=!1,this.isSavedPostPage=!1,this.isCommunityOwner=!1,this.isWaitApprovePostPage=!1,this.isModPage=!1,this.isReviewModPage=!1,this.isReportModPage=!1,this.isRemoveModPage=!1,this.isEditModPage=!1,this.sort_option="hot",this.sort_text="Hot",this.community_id=0,this.user_id=0,this.joinCommunityInfo=new l0(0,!1),this.isDataLoad=!1,this.wait=!1,this.intervals=[],this.detail_post_arr=[],this.post_id_arr=[],this.cur_view_post_id=0,this.isHomeRefresh=!1,this.isPopularRefresh=!1,this.first_post_amount=15,this.big_detect_modifier=12,this.small_detect_modifier=1,this.get_post_amount=5,this.refresh_timeout=12e4}ngAfterViewInit(){this.isHomePage&&this.shareDataService.cur_home_view_post_id$.subscribe(t=>{this.cur_view_post_id=t,this.scrollToTopOrPost(this.cur_view_post_id)}),this.isPopularPage&&this.shareDataService.cur_popular_view_post_id$.subscribe(t=>{this.cur_view_post_id=t,this.scrollToTopOrPost(this.cur_view_post_id)}),this.isCommunityPage&&this.shareDataService.cur_community_view_post_id$.subscribe(t=>{this.cur_view_post_id=t,this.scrollToTopOrPost(this.cur_view_post_id)}),this.isUserPostPage&&this.shareDataService.cur_user_post_view_post_id$.subscribe(t=>{this.cur_view_post_id=t,this.scrollUsingInterval(this.cur_view_post_id)}),this.isSavedPostPage&&this.shareDataService.cur_saved_view_post_id$.subscribe(t=>{this.cur_view_post_id=t,this.scrollUsingInterval(this.cur_view_post_id)}),this.isWaitApprovePostPage&&this.shareDataService.cur_wait_approve_view_post_id$.subscribe(t=>{this.cur_view_post_id=t,this.scrollUsingInterval(this.cur_view_post_id)})}scrollToTopOrPost(t){if(0==t){console.log("cur view is 0");let r=Array.from(document.getElementsByTagName("app-post-main"));if(null!=r)for(let i of r)i.scrollTo(0,0)}else{let r=document.getElementById(t.toString());null!=r&&(console.log("post: "+t),r.scrollIntoView())}}scrollUsingInterval(t){const r=setInterval(()=>{let i=document.getElementById(t.toString());null!=i&&(console.log("scroll "+t),i.scrollIntoView(),clearInterval(r))},10)}ngOnInit(){this.checkRefreshToken.runCheckRefreshTokenWithoutNotification(),this.darkmodeSerive.useDarkMode();const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));if(this.isCommunityPage=window.location.href.includes("/r/"),this.isHomePage=window.location.href.includes("/home"),this.isPopularPage=window.location.href.includes("/popular"),this.isControlPage=window.location.href.includes("/control-posts/"),this.isUserPage=window.location.href.includes("/user/"),this.isModPage=window.location.href.includes("/mod/"),this.isHomePage&&(this.timeout=setTimeout(()=>{this.isHomeRefresh=!0},this.refresh_timeout),this.shareDataService.home_post_id_arr$.subscribe(r=>{this.post_id_arr=r}),this.shareDataService.home_detail_posts$.subscribe(r=>{this.detail_post_arr=r}),this.shareDataService.cur_home_view_post_id$.subscribe(r=>{this.cur_view_post_id=r,console.log("home: "+this.cur_view_post_id)}),this.shareDataService.home_search_option$.subscribe(r=>{this.sort_option=r}),this.setSortText(this.sort_option),this.getHomePost(t,this.sort_option)),this.isCommunityPage){const i=window.location.href.match("/r/([0-9]+)");if(null!=i)if(this.community_id=Number.parseInt(i[1]),this.shareDataService.community_post_id_arr$.subscribe(l=>this.post_id_arr=l),this.shareDataService.community_detail_posts$.subscribe(l=>this.detail_post_arr=l),this.shareDataService.community_search_option$.subscribe(l=>this.sort_option=l),this.shareDataService.cur_community_view_post_id$.subscribe(l=>this.cur_view_post_id=l),this.getCommunityPost(t,this.sort_option),0!=t)this.recentVisitService.setRecentVisit("/set-recent-visit-community",t,this.community_id).subscribe({next:l=>{}});else{let l=""==this.storageService.getItem("recent_communities")?[]:JSON.parse("["+this.storageService.getItem("recent_communities")+"]");l=l.filter(p=>p!=this.community_id),l.unshift(this.community_id),this.storageService.setItem("recent_communities",l.toString())}}if(this.isPopularPage&&(this.timeout=setTimeout(()=>{this.isHomeRefresh=!0},this.refresh_timeout),this.shareDataService.popular_post_id_arr$.subscribe(r=>{this.post_id_arr=r}),this.shareDataService.popular_detail_posts$.subscribe(r=>{this.detail_post_arr=r}),this.shareDataService.cur_popular_view_post_id$.subscribe(r=>{this.cur_view_post_id=r,console.log("popular: "+this.cur_view_post_id)}),this.shareDataService.popular_search_option$.subscribe(r=>{this.sort_option=r}),this.setSortText(this.sort_option),this.getPopularPost(t,this.sort_option)),this.isControlPage&&(this.community_id=this.activeRoute.snapshot.params.community_id,this.communityService.getCommunityInfoById(this.community_id.toString()).subscribe({next:r=>{const i=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.isCommunityOwner=r.uid==i,this.isCommunityOwner?this.getCommunityPostNotAllow(this.community_id):window.location.href="error"}})),this.isUserPage){const r=this.activeRoute.parent?.snapshot.params.username;this.isUserPostPage=window.location.href.includes("/user/"+r+"/posts"),this.isSavedPostPage=window.location.href.includes("/user/"+r+"/saved"),this.isWaitApprovePostPage=window.location.href.includes("/user/"+r+"/wait_for_approve"),this.searchUserProfileService.getUserProfileByName("/get-user-info-by-username",r).subscribe({next:i=>{this.user_id=i.uid,this.isUserPostPage&&(this.shareDataService.setProfileOption("posts"),this.shareDataService.user_detail_posts$.subscribe(l=>this.detail_post_arr=l),this.shareDataService.user_post_id_arr$.subscribe(l=>this.post_id_arr=l),this.shareDataService.user_post_search_option$.subscribe(l=>this.sort_option=l),this.shareDataService.cur_user_post_view_post_id$.subscribe(l=>this.cur_view_post_id=l),this.setSortText(this.sort_option),this.getUserPost(t,this.sort_option)),this.isSavedPostPage&&(this.shareDataService.setProfileOption("saved"),this.shareDataService.saved_detail_posts$.subscribe(l=>this.detail_post_arr=l),this.shareDataService.saved_post_id_arr$.subscribe(l=>this.post_id_arr=l),this.shareDataService.cur_saved_view_post_id$.subscribe(l=>this.cur_view_post_id=l),this.getSavedPostsByUid(t)),this.isWaitApprovePostPage&&(this.shareDataService.setProfileOption("wait_for_approve"),this.shareDataService.wait_for_approve_detail_posts$.subscribe(l=>this.detail_post_arr=l),this.shareDataService.wait_approve_post_id_arr$.subscribe(l=>this.post_id_arr=l),this.shareDataService.cur_wait_approve_view_post_id$.subscribe(l=>this.cur_view_post_id=l),this.getPostsByUidAndNotAllow(t))}})}}closeProfileMenu(t){this.isSortOptionShow=!1,"Range"===document.getSelection()?.type&&t.stopPropagation()}ngOnChanges(){}setSortText(t){switch(t){case"hot":this.sort_text="Hot";break;case"new":this.sort_text="New";break;case"top_day":this.sort_text="Top today";break;case"top_week":this.sort_text="Top this week";break;case"top_month":this.sort_text="Top this month";break;case"top_year":this.sort_text="Top this year";break;case"top_all_time":this.sort_text="Top all time"}}selectSort(t){clearTimeout(this.timeout),this.isHomePage&&(this.isHomeRefresh=!1,this.timeout=setTimeout(()=>{this.isHomeRefresh=!0},this.refresh_timeout)),this.isPopularPage&&(this.isPopularRefresh=!1,this.timeout=setTimeout(()=>{this.isPopularRefresh=!0},this.refresh_timeout)),this.sort_option=t,this.setSortText(t),this.isSortOptionShow=!this.isSortOptionShow;const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.post_id_arr=[],this.detail_post_arr=[];for(let i of this.intervals)clearInterval(i);this.isCommunityPage&&(this.shareDataService.setCommunitySearchOption(t),this.getCommunityPost(r,t)),this.isPopularPage&&(this.shareDataService.setPopularSearchOption(t),this.getPopularPost(r,t)),this.isHomePage&&(this.shareDataService.setHomeSearchOption(t),this.getHomePost(r,t)),this.isUserPage&&(this.shareDataService.setUserPostSearchOption(t),this.getUserPost(r,t))}showSortOption(t){t.stopPropagation(),this.isSortOptionShow=!this.isSortOptionShow}isElementInViewport(t){const r=document.getElementById(t);if(!r)return!1;const i=r.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)}getPostsByCheckViewPort(t,r,i,l,d,p){if(t.length==r.length)console.log("full"),this.isDataLoad=!1;else for(let m=l;m<r.length;m+=p){const v=setInterval(()=>{if(this.intervals.push(v),this.isElementInViewport(r[m-d].toString())){clearInterval(v);const P=r.slice(m,m+p);this.isDataLoad=!0,this.getPostService.getDetailPostByUidAndPostIds(i,P).subscribe({next:R=>{this.isDataLoad=!1;for(let $ of R)t.push($);this.isHomePage&&this.shareDataService.setHomeDetailPosts(t),this.isPopularPage&&this.shareDataService.setPopularDetailPosts(t),this.isCommunityPage&&this.shareDataService.setCommunityDetailPosts(t),this.isUserPostPage&&this.shareDataService.setUserDetailPosts(t),this.isSavedPostPage&&this.shareDataService.setSavedDetailPosts(t),this.isWaitApprovePostPage&&this.shareDataService.setWaitForApproveDetailPosts(t),this.isReviewModPage&&this.shareDataService.setReviewDetailPosts(t)},error:R=>{this.isDataLoad=!1,console.log("HttpServletResponse: "+R.error.message+"\nResponseEntity: "+R.error)}})}},200)}}getAllDetailPostsByUidAndPostIds(t,r,i,l,d,p){t.length==r.length?(console.log("full detail posts"),this.isDataLoad=!1):(this.isDataLoad=!0,this.getPostService.getDetailPostByUidAndPostIds(i,this.post_id_arr.slice(0,l)).subscribe({next:m=>{this.isDataLoad=!1,this.wait=!0;for(let v of m)t.push(v);this.isHomePage&&this.shareDataService.setHomeDetailPosts(t),this.isPopularPage&&this.shareDataService.setPopularDetailPosts(t),this.isCommunityPage&&this.shareDataService.setCommunityDetailPosts(t),this.isUserPostPage&&this.shareDataService.setUserDetailPosts(t),this.isSavedPostPage&&this.shareDataService.setSavedDetailPosts(t),this.isWaitApprovePostPage&&this.shareDataService.setWaitForApproveDetailPosts(t),this.isReviewModPage&&this.shareDataService.setReviewDetailPosts(t),this.getPostsByCheckViewPort(t,r,i,l,d,p)},error:m=>{this.isDataLoad=!1,console.log("HttpServletResponse: "+m.error.message+"\nResponseEntity: "+m.error)}}))}resumeLoadPosts(t,r,i,l,d){const m=r.indexOf(t[t.length-1].post_id);this.getPostsByCheckViewPort(t,r,i,m+1,l,d),this.isHomePage&&this.shareDataService.setHomeDetailPosts(t),this.isPopularPage&&this.shareDataService.setPopularDetailPosts(t),this.isCommunityPage&&this.shareDataService.setCommunityDetailPosts(t),this.isUserPostPage&&this.shareDataService.setUserDetailPosts(t),this.isSavedPostPage&&this.shareDataService.setSavedDetailPosts(t),this.isWaitApprovePostPage&&this.shareDataService.setWaitForApproveDetailPosts(t),this.isReviewModPage&&this.shareDataService.setReviewDetailPosts(t)}getHomePost(t,r){this.isDataLoad=!0,this.wait=!1,0!=this.detail_post_arr.length?this.resumeLoadPosts(this.detail_post_arr,this.post_id_arr,t,this.small_detect_modifier,this.get_post_amount):this.getPostsService.getHomePosts("/get-home-posts",t,r).subscribe({next:i=>{this.post_id_arr=i,0==i.length?this.getPopularPost(0,r):(this.wait=0==this.post_id_arr.length,this.shareDataService.setHomePostIdArr(this.post_id_arr),this.getAllDetailPostsByUidAndPostIds(this.detail_post_arr,this.post_id_arr,t,this.first_post_amount,this.big_detect_modifier,this.get_post_amount))},error:i=>{this.isDataLoad=!1,this.wait=!0,console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error)}})}getPopularPost(t,r){this.isDataLoad=!0,this.wait=!1,0!=this.detail_post_arr.length?this.resumeLoadPosts(this.detail_post_arr,this.post_id_arr,t,this.small_detect_modifier,this.get_post_amount):this.getPostsService.getPopularPostIdsByUid("/get-popular-posts",t,r).subscribe({next:i=>{this.post_id_arr=i,this.wait=0==this.post_id_arr.length,this.shareDataService.setPopularPostIdArr(this.post_id_arr),this.getAllDetailPostsByUidAndPostIds(this.detail_post_arr,this.post_id_arr,t,this.first_post_amount,this.big_detect_modifier,this.get_post_amount)},error:i=>{this.isDataLoad=!1,this.wait=!0,console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error)}})}getCommunityPost(t,r){this.isDataLoad=!0,this.wait=!1,0!=this.detail_post_arr.length?this.resumeLoadPosts(this.detail_post_arr,this.post_id_arr,t,this.small_detect_modifier,this.get_post_amount):this.getPostsService.getPostInCommunity("/get-community-posts",this.community_id,r).subscribe({next:i=>{this.post_id_arr=i,this.wait=0==this.post_id_arr.length,this.shareDataService.setCommunityPostIdArr(this.post_id_arr),this.getAllDetailPostsByUidAndPostIds(this.detail_post_arr,this.post_id_arr,t,this.first_post_amount,this.big_detect_modifier,this.get_post_amount)},error:i=>{this.isDataLoad=!1,this.wait=!0,console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error)}})}getUserPost(t,r){this.isDataLoad=!0,this.wait=!1,0!=this.detail_post_arr.length?this.resumeLoadPosts(this.detail_post_arr,this.post_id_arr,t,this.small_detect_modifier,this.get_post_amount):this.getPostsService.getPostByUser("/get-posts-by-uid",this.user_id,r).subscribe({next:i=>{this.post_id_arr=i,this.wait=0==this.post_id_arr.length,this.shareDataService.setUserPostIds(i),this.getAllDetailPostsByUidAndPostIds(this.detail_post_arr,this.post_id_arr,t,this.first_post_amount,this.big_detect_modifier,this.get_post_amount)},error:i=>{this.isDataLoad=!1,this.wait=!0,console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error)}})}getCommunityPostNotAllow(t){this.isDataLoad=!0,this.wait=!1,0!=this.detail_post_arr.length?this.resumeLoadPosts(this.detail_post_arr,this.post_id_arr,t,this.small_detect_modifier,this.get_post_amount):this.getPostsService.getPostInCommunityNotAllow("/get-control-posts",this.community_id).subscribe({next:r=>{this.post_id_arr=r,this.wait=0==this.post_id_arr.length,this.shareDataService.setReviewPostIdArr(this.post_id_arr),this.getAllDetailPostsByUidAndPostIds(this.detail_post_arr,this.post_id_arr,t,this.first_post_amount,this.big_detect_modifier,this.get_post_amount)},error:r=>{this.isDataLoad=!1,this.wait=!0,console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})}joinCommunityEvent(t){this.joinCommunityInfo=t}allowPostEvent(t){this.post_id_arr=this.post_id_arr.filter(r=>r!==t),this.detail_post_arr=this.detail_post_arr.filter(r=>r.post_id!==t),this.shareDataService.setWaitApprovePostIds(this.post_id_arr),this.shareDataService.setWaitForApproveDetailPosts(this.detail_post_arr)}getPostsByUidAndNotAllow(t){this.isDataLoad=!0,this.wait=!1,0!=this.detail_post_arr.length?this.resumeLoadPosts(this.detail_post_arr,this.post_id_arr,t,this.small_detect_modifier,this.get_post_amount):this.getPostsService.getPostsByUidAndNotAllowAndNotDeleted("/get-posts-by-uid-not-delete-not-allow",t).subscribe({next:r=>{this.post_id_arr=r,this.wait=0==this.post_id_arr.length,this.shareDataService.setWaitApprovePostIds(r),this.getAllDetailPostsByUidAndPostIds(this.detail_post_arr,this.post_id_arr,t,this.first_post_amount,this.big_detect_modifier,this.get_post_amount)},error:r=>{this.isDataLoad=!1,this.wait=!0,console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})}getSavedPostsByUid(t){this.isDataLoad=!0,this.wait=!1,0!=this.detail_post_arr.length?this.resumeLoadPosts(this.detail_post_arr,this.post_id_arr,t,this.small_detect_modifier,this.get_post_amount):this.detail_post_arr.length==this.post_id_arr.length&&0!=this.post_id_arr.length?this.wait=!1:this.savePostService.getSavedPostsByUid(t).subscribe({next:r=>{this.post_id_arr=r,this.wait=0==this.post_id_arr.length,this.shareDataService.setSavedPostIds(r),this.getAllDetailPostsByUidAndPostIds(this.detail_post_arr,this.post_id_arr,t,this.first_post_amount,this.big_detect_modifier,this.get_post_amount)},error:r=>{this.isDataLoad=!1,this.wait=!0,console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})}refreshPage(){window.location.reload()}static#e=this.\u0275fac=function(r){return new(r||e)(B(ur),B(u0),B(Pf),B(Ds),B($n),B(ct),B(gm),B(_D),B(jc),B(Ys),B(Rn),B(Er),B(Pr),B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-post-link-list"]],hostBindings:function(r,i){1&r&&z("click",function(d){return i.closeProfileMenu(d)},0,Vh)},outputs:{isLoadEvent:"isLoadEvent"},features:[Ho],decls:9,vars:9,consts:[["id","reload_block",4,"ngIf"],["id","sort_container",4,"ngIf"],[3,"id","post","post_id","type","communityName","userName","title","content","created_at","vote","communityIcon","index","arr_length","joinCommunityInfo","event","joinCommunityEvent","allowPostEvent",4,"ngFor","ngForOf"],["class","empty_block","style","font-size: 40px; color: var(--icon);",4,"ngIf"],["class","load_data_block",4,"ngIf"],["id","reload_block"],["id","btn_reload","title","Refresh page",3,"click"],["id","sort_container"],["id","btn_sort",3,"ngStyle","click"],[1,"pi","pi-chevron-down"],["id","sort_option_block",4,"ngIf"],["id","sort_option_block"],[3,"ngStyle","click"],[3,"id","post","post_id","type","communityName","userName","title","content","created_at","vote","communityIcon","index","arr_length","joinCommunityInfo","event","joinCommunityEvent","allowPostEvent"],[1,"empty_block",2,"font-size","40px","color","var(--icon)"],[1,"load_data_block"],["src","../../../../assets/icon/logo.png",1,"img_load_data"],[1,"data_loader"]],template:function(r,i){1&r&&Pe(0,zZ,4,0,"div",0)(1,WZ,4,0,"div",0)(2,GZ,5,5,"div",1)(3,ZZ,5,5,"div",1)(4,JZ,5,5,"div",1)(5,XZ,5,5,"div",1)(6,eY,1,14,"app-post-link",2)(7,tY,2,0,"p",3)(8,nY,3,0,"div",4),2&r&&(A("ngIf",i.isHomeRefresh),k(1),A("ngIf",i.isPopularRefresh),k(1),A("ngIf",i.isHomePage),k(1),A("ngIf",i.isPopularPage),k(1),A("ngIf",i.isCommunityPage),k(1),A("ngIf",i.isUserPage&&i.isUserPostPage),k(1),A("ngForOf",i.detail_post_arr),k(1),A("ngIf",0==i.post_id_arr.length&&i.wait&&!i.isHomePage),k(1),A("ngIf",i.isDataLoad))},dependencies:[Zr,sn,Eo,HZ],styles:["#sort_container[_ngcontent-%COMP%]{position:relative;width:100px;height:auto;align-self:flex-start}b[_ngcontent-%COMP%]{color:var(--icon)}#btn_sort[_ngcontent-%COMP%]{width:auto;height:30px;padding:0 20px;background-color:var(--primary_background_color);border-radius:20px;font-weight:500;display:flex;flex-direction:row;justify-content:center;align-items:center;text-wrap:nowrap;margin-bottom:10px;color:var(--txt)!important}#btn_sort[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)!important}#btn_sort[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-left:10px;font-size:12px}#sort_option_block[_ngcontent-%COMP%]{width:140px;height:auto;position:absolute;top:35px;left:0;z-index:999;box-shadow:var(--menu_box_shadow)}#sort_option_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:40px;width:100%;text-align:left;padding-left:20px;background-color:var(--primary_background_color);font-weight:500;color:var(--icon)}#sort_option_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)!important}#sort_option_block[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{display:block;height:40px;width:100%;text-align:left;padding:10px 20px;background-color:var(--primary_background_color)}#community_block[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start}#empty_block[_ngcontent-%COMP%]{width:100%;height:auto;background-color:var(--neutral);text-align:center;font-size:20px;padding:25vh 10px}#empty_block[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{padding:10px 20px;border-radius:20px;background-color:var(--primary_background_color);position:relative;top:30px;color:var(--secondary_color)!important;box-shadow:var(--menu_box_shadow)}#reload_block[_ngcontent-%COMP%]{width:auto;height:35px;display:flex;justify-content:center;align-items:center;z-index:999;border-radius:20px}#btn_reload[_ngcontent-%COMP%]{width:auto;height:100%;border-radius:20px;background-color:var(--allow);color:#fff;padding:8px 30px;font-size:16px;box-shadow:var(--menu_box_shadow);text-align:center}#btn_close[_ngcontent-%COMP%]{height:100%;width:40px;border-top-right-radius:20px;border-bottom-right-radius:20px;background-color:var(--join);border-left:1px solid black;display:flex;justify-content:center;align-items:center;font-size:22px;font-family:Arial;text-align:left}"]})}return e})();class oY{constructor(o,t,r,i,l){this.post_id=o,this.uid=t,this.parent_id=r,this.content=i,this.level=l}}let dK=(()=>{class e{constructor(t,r,i){this.postService=t,this.storageService=r,this.checkRefreshToken=i,this.endpoint="/save-comment"}createComment(t,r,i,l){this.checkRefreshToken.runCheckRefreshToken();const d=""==this.storageService.getItem("uid")?0:parseInt(this.storageService.getItem("uid")),p=new oY(t,d,r,i,l),m=JSON.stringify(p);let v=new et;return v=v.append("Accept","application/json"),v=v.append("Content-Type","application/json"),this.postService.post(this.endpoint,v,m,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(ct),ie(Rn))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function rY(e,o){1&e&&Q(0,"back-button")}function sY(e,o){if(1&e){const t=We();x(0,"button",38),z("click",function(i){return ce(t),fe(q().goToPreviousPost(i))}),Q(1,"i",39),D()}2&e&&A("disabled",1==q().firstLast.first)}function iY(e,o){if(1&e){const t=We();x(0,"button",40),z("click",function(i){return ce(t),fe(q().goToNextPost(i))}),Q(1,"i",41),D()}2&e&&A("disabled",1==q().firstLast.last)}function aY(e,o){if(1&e){const t=We();x(0,"button",42),z("click",function(i){return ce(t),fe(q().CloseViewPost(i))}),Q(1,"i",43),D()}}const cY=e=>({"background-color":e});function lY(e,o){if(1&e){const t=We();x(0,"button",44),z("click",function(i){return ce(t),fe(q().openOptionMenu(i))}),Q(1,"i",45),D()}if(2&e){const t=q();A("ngStyle",ve(1,cY,t.isOptionMenuOpen?"var(--bg_hover)":""))}}function uY(e,o){if(1&e){const t=We();x(0,"button",46),z("click",function(i){return ce(t),fe(q().editPost(i))}),Q(1,"i",47),x(2,"p"),L(3,"Edit"),D()()}}function dY(e,o){if(1&e){const t=We();x(0,"button",48),z("click",function(){return ce(t),fe(q().deletePost())}),Q(1,"i",49),x(2,"p"),L(3,"Delete"),D()()}}function fY(e,o){1&e&&(x(0,"p"),L(1,"Save"),D())}function hY(e,o){1&e&&(x(0,"p"),L(1,"Unsave"),D())}function pY(e,o){1&e&&Q(0,"div",50)}function mY(e,o){1&e&&Q(0,"app-image-view",51),2&e&&A("content",q().post.content)}function gY(e,o){if(1&e&&Q(0,"app-link-view",52),2&e){const t=q();A("title",t.post.title)("content",t.post.content)}}function _Y(e,o){1&e&&Q(0,"app-video-view",51),2&e&&A("content",q().post.content)}const vY=e=>({"margin-right":e});function yY(e,o){if(1&e){const t=We();x(0,"button",53),z("click",function(i){return ce(t),fe(q().allowPost(i))}),Q(1,"i",54),D()}if(2&e){const t=q();A("ngStyle",ve(1,vY,1==t.post.deleted?"0":"10px"))}}function bY(e,o){if(1&e){const t=We();x(0,"button",55),z("click",function(i){return ce(t),fe(q().notAllowPost(i))}),Q(1,"i",43),D()}}function wY(e,o){1&e&&(x(0,"p"),L(1,"the person who originally posted it"),D())}function CY(e,o){1&e&&(x(0,"p"),L(1,"moderator"),D())}function SY(e,o){if(1&e&&(x(0,"div",56),Q(1,"i",49),x(2,"pre"),L(3,"Sorry, this post is deleted by "),Pe(4,wY,2,0,"p",3)(5,CY,2,0,"p",3),L(6,"."),D()()),2&e){const t=q();k(4),A("ngIf",1==t.post.deleted_by),k(1),A("ngIf",2==t.post.deleted_by)}}const xY=e=>({"margin-left":e}),PY=e=>({left:e}),EY=e=>({display:e}),N9=(e,o,t)=>({upvote:e,downvote:o,normal:t}),kY=e=>({opacity:e});let DY=(()=>{class e{constructor(t,r,i,l,d,p,m,v,w,P,R,$,H,Y,te,_e,le,Re){this.votePostServie=t,this.storageService=r,this.dateTimeService=i,this.checkVotePostService=l,this.deletePostService=d,this.activeRoute=p,this.communityService=m,this.allowPostService=v,this.presentationService=w,this.savePostService=P,this.darkmodeSerive=R,this.voteImgService=$,this.checkRefreshToken=H,this.sanitizer=Y,this.getPostService=te,this.getCommentService=_e,this.titleService=le,this.shareDataService=Re,this.commentCount=0,this.post=new _a,this.post_id=0,this.previousVoteType=this.post.voteType,this.previousVote=this.post.vote,this.shownDate="",this.isOptionMenuOpen=!1,this.isAuthor=!1,this.isHomePage=!1,this.selected_mod_post=0,this.isModPage=!1,this.firstLast=new vm(0,0),this.upvote="../../../../../assets/icon/upvote.png",this.upvote_fill="../../../../../assets/icon/upvote-fill.png",this.downvote="../../../../../assets/icon/downvote.png",this.downvote_fill="../../../../../assets/icon/downvote-fill.png"}ngOnInit(){if(this.darkmodeSerive.useDarkMode(),this.voteImgService.selectDownVoteImg(),this.voteImgService.selectUpVoteImg(),this.isModPage=window.location.href.includes("/mod/"),this.isModPage&&(this.shareDataService.mod_detail_post$.subscribe(t=>{if(null!=t)if(0==t.post_id)this.post=new _a;else{const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.getPostService.getDetailPostByUidAndPostId(r,t.post_id).subscribe({next:i=>{this.post=i,this.setPostInfo(t),this.timer()}})}}),this.shareDataService.first_last$.subscribe(t=>{this.firstLast=t}),this.shareDataService.changed_post$.subscribe(t=>{this.post.deleted=1==t.deleted?1:0,this.post.allow=1==t.allow?1:0})),!this.isModPage){this.post_id=this.activeRoute.snapshot.params.post_id;const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.getPostService.getDetailPostByUidAndPostId(t,this.post_id).subscribe({next:r=>{this.post=r,this.activeRoute.paramMap.subscribe(i=>{this.titleService.setTitle(this.post.title)}),this.setPostInfo(r),this.timer()}})}}setPostInfo(t){const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.shownDate=this.dateTimeService.getTimeByCompareCreatedAtAndCurrentDate(t.created_at),this.isAuthor=t.uid===r,(null==t.join||null==t.voteType||null==t.save)&&0!=r&&(this.communityService.checkJoinCommunityStatus(r,t.community_id).subscribe({next:i=>{t.join=i.join_community,this.replacePost(t)}}),this.savePostService.getSavedPostStatusByUid(r,t.post_id).subscribe({next:i=>{t.save=i.saved,this.replacePost(t)}}),this.checkVotePostService.checkVotePost(t.post_id,r).subscribe({next:i=>{t.voteType=i.vote_type,this.replacePost(t)}})),0==r&&(t.join=null,t.save=null,t.voteType=null,this.replacePost(t)),t.content=t.content.replace(/<img/g,'<img class="img" '),t.content=t.content.replace(/<figure/g,'<figure class="figure" '),t.content=t.content.replace(/<figcaption/g,'<figcaption class="figcaption" '),t.content=t.content.replace(/<pre/g,'<pre class="pre_code" '),t.content=t.content.replace(/<code/g,'<code class="code" '),t.content=t.content.replace(/<ol/g,'<ol class="ol" '),t.content=t.content.replace(/<ul/g,'<ul class="ul" '),t.content=t.content.replace(/<a/g,'<a class="a" '),t.content=t.content.replace(/<p/g,'<p class="post_view" '),t.content=t.content.replace(/<blockquote/g,'<blockquote class="blockquote" ')}replacePost(t){const r=""==this.storageService.getItem("posts")?[]:JSON.parse(this.storageService.getItem("posts"));for(let i of r)t.post_id==i.post_id&&(i.join=t.join,i.save=t.save,i.voteType=t.voteType);this.storageService.setItem("posts",JSON.stringify(r))}timer(){setTimeout(()=>{const t=null==document.getElementById("post_container")?null:document.getElementById("post_container");null==t?this.timer():t.innerHTML=this.post.content},100)}preventClick(t){t.stopPropagation()}openOptionMenu(t){this.isOptionMenuOpen=!this.isOptionMenuOpen,t.stopPropagation()}editPost(t){window.location.href="/edit-post/"+this.post_id}navigateToCommunity(){window.location.href="/r/"+this.post.community_id}votePost(t,r){t.stopPropagation();const i=this.votePostServie.prepareVote(r,this.post),l=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.votePostServie.votePost(this.post.post_id,i.curVote,l,i.curVoteType).subscribe({next:d=>{this.post.vote=i.curVote,this.post.voteType=i.curVoteType}})}deletePost(){this.deletePostService.sendDeleteToServer(this.post,1,null)}allowPost(t){this.allowPostService.setAllowPost(this.post.post_id,1).subscribe({next:r=>{this.post.allow=1,this.shareDataService.setChangedPost(new Wf(this.post.post_id,1,0,this.dateTimeService.getCurrentDateTime().toISOString(),""))},error:r=>{console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})}notAllowPost(t){const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.deletePostService.deletePost(this.post.post_id,r,2).subscribe({next:i=>{this.post.deleted=1,this.shareDataService.setChangedPost(new Wf(this.post.post_id,this.post.allow,1,"",this.dateTimeService.getCurrentDateTime().toISOString()))},error:i=>{console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error)}})}savePost(t){t.stopPropagation(),this.savePostService.sendSavePostToServer(this.post,1==this.post.save?0:1)}CloseViewPost(t){t.stopPropagation(),this.shareDataService.setModDetailPost(new _a)}goToPreviousPost(t){this.shareDataService.setModSelectedPostId(-1)}goToNextPost(t){this.shareDataService.setModSelectedPostId(1)}static#e=this.\u0275fac=function(r){return new(r||e)(B(Ue),B(ct),B(Ds),B(tt),B(Sm),B($n),B(Pr),B(ho),B(va),B(_D),B(Ys),B(bm),B(Rn),B(Pf),B(ur),B(Ri),B(tC),B(Er))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-post"]],inputs:{commentCount:"commentCount"},decls:50,vars:59,consts:[["id","post_block"],["id","community_bar"],["id","community_block"],[4,"ngIf"],["id","community_link",3,"href","ngStyle"],["id","community_icon","alt","community_icon",3,"src"],["id","link_date_block"],["id","community_name",2,"font-weight","bold",3,"href"],[2,"font-weight","bold"],[2,"font-size","13px","color","var(--txt)"],["id","username",3,"href","ngStyle"],["id","option_block"],["class","btn_option","type","button","title","Previous post",3,"disabled","click",4,"ngIf"],["class","btn_option","type","button","title","Next post","style","margin-right: 10px;",3,"disabled","click",4,"ngIf"],["class","btn_option","type","button","title","Close",3,"click",4,"ngIf"],["class","btn_option","type","button","title","Options",3,"ngStyle","click",4,"ngIf"],["id","dropdown_option_block",3,"ngStyle"],["id","btn_edit",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["id","btn_save",3,"click"],[1,"pi",3,"ngClass"],["id","main_content"],["id","txt_title",2,"margin-bottom","16px"],["id","post_container",4,"ngIf"],[3,"content",4,"ngIf"],[3,"title","content",4,"ngIf"],["id","footer"],["id","block_vote",1,"block_vote",3,"ngClass","ngStyle"],["id","btn_upvote","type","button",3,"ngClass","disabled","click"],[2,"color","var(--icon)"],["id","btn_downvote","type","button",3,"ngClass","disabled","click"],["id","btn_comment","type","button","onclick","document.getElementById('comment').scrollIntoView();",3,"disabled"],[1,"pi","pi-comment"],["id","comment_count",2,"font-variant","var(--txt)"],["id","moderate_block"],["class","btn","id","btn_allow","type","button","title","Approve this post",3,"ngStyle","click",4,"ngIf"],["class","btn","id","btn_delete","type","button","title","Remove this post",3,"click",4,"ngIf"],["id","deleted_block",4,"ngIf"],["type","button","title","Previous post",1,"btn_option",3,"disabled","click"],[1,"pi","pi-angle-left",2,"font-size","20px"],["type","button","title","Next post",1,"btn_option",2,"margin-right","10px",3,"disabled","click"],[1,"pi","pi-angle-right",2,"font-size","20px"],["type","button","title","Close",1,"btn_option",3,"click"],[1,"pi","pi-times"],["type","button","title","Options",1,"btn_option",3,"ngStyle","click"],[1,"pi","pi-ellipsis-h"],["id","btn_edit",3,"click"],[1,"pi","pi-pencil"],[3,"click"],[1,"pi","pi-trash"],["id","post_container"],[3,"content"],[3,"title","content"],["id","btn_allow","type","button","title","Approve this post",1,"btn",3,"ngStyle","click"],[1,"pi","pi-check"],["id","btn_delete","type","button","title","Remove this post",1,"btn",3,"click"],["id","deleted_block"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"nav",1)(2,"div",2),Pe(3,rY,1,0,"back-button",3),x(4,"a",4),Q(5,"img",5),D(),x(6,"div",6)(7,"a",7),L(8),D(),x(9,"i",8),L(10,"\xb7"),D(),x(11,"span",9),L(12),D()(),x(13,"a",10),L(14),D()(),x(15,"div",11),Pe(16,sY,2,1,"button",12)(17,iY,2,1,"button",13)(18,aY,2,0,"button",14)(19,lY,2,3,"button",15),D(),x(20,"div",16),Pe(21,uY,4,0,"button",17)(22,dY,4,0,"button",18),x(23,"button",19),z("click",function(d){return i.savePost(d)}),Q(24,"i",20),Pe(25,fY,2,0,"p",3)(26,hY,2,0,"p",3),D()()(),x(27,"nav",21)(28,"p",22),L(29),D(),Pe(30,pY,1,0,"div",23)(31,mY,1,1,"app-image-view",24)(32,gY,1,2,"app-link-view",25)(33,_Y,1,1,"app-video-view",24),D(),x(34,"nav",26)(35,"div",27)(36,"button",28),z("click",function(d){return i.votePost(d,"upvote")}),Q(37,"img"),D(),x(38,"p",29),L(39),D(),x(40,"button",30),z("click",function(d){return i.votePost(d,"downvote")}),Q(41,"img"),D()(),x(42,"button",31),Q(43,"i",32),x(44,"p",33),L(45),D()(),x(46,"div",34),Pe(47,yY,2,3,"button",35)(48,bY,2,0,"button",36),D()(),Pe(49,SY,7,2,"div",37),D()),2&r&&(k(3),A("ngIf",!i.isModPage),k(1),In("href","r/",i.post.community_id,"",Qe),A("ngStyle",ve(39,xY,i.isModPage?"0":"10px")),k(1),Ot("src",i.post.community_icon,Qe),k(2),In("href","r/",i.post.community_id,"",Qe),k(1),at("r/",i.post.community_name," "),k(4),at(" ",i.shownDate,""),k(1),In("href","/user/",i.post.username,"",Qe),A("ngStyle",ve(41,PY,i.isModPage?"55px":"105px")),k(1),ht(i.post.username),k(2),A("ngIf",i.isModPage),k(1),A("ngIf",i.isModPage),k(1),A("ngIf",i.isModPage),k(1),A("ngIf",!i.isModPage),k(1),A("ngStyle",ve(43,EY,i.isOptionMenuOpen?"block":"none")),k(1),A("ngIf",i.isAuthor),k(1),A("ngIf",i.isAuthor||1==i.post.communityOwner),k(2),A("ngClass",i.post.save?"pi-bookmark-fill":"pi-bookmark"),k(1),A("ngIf",0==i.post.save||null==i.post.save),k(1),A("ngIf",1==i.post.save),k(3),ht(i.post.title),k(1),A("ngIf","editor"==i.post.type),k(1),A("ngIf","img"==i.post.type),k(1),A("ngIf","link"==i.post.type),k(1),A("ngIf","video"==i.post.type),k(2),A("ngClass",Ss(45,N9,"upvote"===i.post.voteType,"downvote"===i.post.voteType,"none"===i.post.voteType))("ngStyle",ve(49,kY,"1")),k(1),A("ngClass",Ss(51,N9,"upvote"===i.post.voteType,"downvote"===i.post.voteType,"none"===i.post.voteType||null==i.post.voteType))("disabled",i.post.deleted),k(1),nr("src","upvote"===i.post.voteType?i.upvote_fill:i.voteImgService.upvote,Qe),k(2),ht(i.presentationService.transformNumber(i.post.vote)),k(1),A("ngClass",Ss(55,N9,"upvote"===i.post.voteType,"downvote"===i.post.voteType,"none"===i.post.voteType||null==i.post.voteType))("disabled",i.post.deleted),k(1),nr("src","downvote"===i.post.voteType?i.downvote_fill:i.voteImgService.downvote,Qe),k(1),A("disabled",i.post.deleted),k(3),ht(i.presentationService.transformNumber(i.commentCount)),k(2),A("ngIf",1==i.post.communityOwner&&(1==i.post.deleted||0==i.post.allow)),k(1),A("ngIf",1==i.post.communityOwner&&0==i.post.deleted),k(1),A("ngIf",1==i.post.deleted))},dependencies:[lr,sn,Eo,aK,cK,lK,xv],styles:["[_nghost-%COMP%]{--community_icon: 35px}#post_block[_ngcontent-%COMP%]{width:100%;height:auto;background-color:var(--primary_background_color);padding:5px 10px;margin:5px 0;border-radius:10px;display:block;box-sizing:border-box}#post_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-bottom:10px;padding:0 10px}a[_ngcontent-%COMP%]{color:var(--secondary_color)!important}hr[_ngcontent-%COMP%]{border-top:1px solid var(--secondary_color);width:100%}#main_content[_ngcontent-%COMP%]{padding-top:7px!important}#main_content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical}app-editor-view[_ngcontent-%COMP%]{height:auto;overflow-y:hidden;z-index:9999}#community_icon[_ngcontent-%COMP%]{width:100%;height:50px;margin-top:5px;background-color:#00000080}#option_block[_ngcontent-%COMP%]{width:auto;height:100%;display:flex;flex-direction:row;justify-content:center;align-items:center}#community_bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:auto;height:var(--post-header-height);position:relative;margin-bottom:16px}#community_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}#community_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], #community_link[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:5px}#link_date_block[_ngcontent-%COMP%]{align-self:flex-start}#community_link[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;margin-left:10px;color:var(--secondary_color)!important}#community_icon[_ngcontent-%COMP%]{width:var(--community_icon);height:var(--community_icon);border-radius:50%}#community_name[_ngcontent-%COMP%]:hover{cursor:pointer}#username[_ngcontent-%COMP%]{position:absolute;top:13px;left:105px}.btn_option[_ngcontent-%COMP%]{height:100%;aspect-ratio:1/1;border-radius:50%;background-color:var(--primary_background_color);color:var(--secondary_color);display:flex;justify-content:center;align-items:center}.btn_option[_ngcontent-%COMP%]:hover{background-color:var(--search)}button[_ngcontent-%COMP%]:disabled:hover{background-color:var(--primary_background_color);cursor:default}button[_ngcontent-%COMP%]:disabled > i[_ngcontent-%COMP%]{opacity:.5}#dropdown_option_block[_ngcontent-%COMP%]{position:absolute;right:10px;top:calc(var(--community_icon) + 5px);z-index:9999;box-shadow:var(--menu_box_shadow);background-color:transparent;border-radius:10px}#dropdown_option_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;height:40px;background-color:var(--primary_background_color);display:flex;flex-direction:row;justify-content:flex-start;align-items:center;padding-left:5px;color:var(--secondary_color)}#btn_edit[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;color:var(--secondary_color)}#btn_save[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;color:var(--secondary_color)}#dropdown_option_block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:15px;margin-right:10px;color:var(--secondary_color)}#dropdown_option_block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:20px}#dropdown_option_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)}#txt_title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--icon)}#footer[_ngcontent-%COMP%]{width:100%;height:30px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;box-sizing:border-box;padding:0 10px;margin-top:20px;position:relative}#footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:auto;height:30px;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;background-color:var(--search);margin-right:10px;border-radius:20px}#block_vote.normal[_ngcontent-%COMP%], #btn_upvote.normal[_ngcontent-%COMP%], #btn_downvote.normal[_ngcontent-%COMP%]{background-color:var(--search)}#btn_upvote[_ngcontent-%COMP%]:disabled, #btn_downvote[_ngcontent-%COMP%]:disabled{cursor:not-allowed}#btn_upvote.normal[_ngcontent-%COMP%], #btn_downvote.normal[_ngcontent-%COMP%]{background-color:var(--search)}#btn_comment[_ngcontent-%COMP%], #btn_share[_ngcontent-%COMP%]{padding:0 10px}#btn_comment[_ngcontent-%COMP%]:hover{opacity:.8}#btn_upvote[_ngcontent-%COMP%], #btn_downvote[_ngcontent-%COMP%]{padding:5px;border-radius:20px;width:auto;height:100%;display:flex;justify-content:center;align-items:center}#btn_upvote[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], #btn_downvote[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;border-radius:50%}#footer[_ngcontent-%COMP%] > div.upvote[_ngcontent-%COMP%]{background-color:var(--upvote)}#footer[_ngcontent-%COMP%] > div.downvote[_ngcontent-%COMP%]{background-color:var(--downvote)}#block_vote[_ngcontent-%COMP%] > button.upvote[_ngcontent-%COMP%]{background-color:var(--upvote)}#block_vote[_ngcontent-%COMP%] > button.downvote[_ngcontent-%COMP%]{background-color:var(--downvote)}#post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%]   #btn_upvote[_ngcontent-%COMP%]:hover{background-color:var(--upvote)}#post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%]   #btn_downvote[_ngcontent-%COMP%]:hover{background-color:var(--downvote)}#btn_comment[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], #btn_share[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding:0 5px}#post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%] > #btn_upvote.upvote[_ngcontent-%COMP%]:hover, #post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%] > #btn_upvote.downvote[_ngcontent-%COMP%]:hover, #post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%] > #btn_downvote.downvote[_ngcontent-%COMP%]:hover, #post_block[_ngcontent-%COMP%]   #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%] > #btn_downvote.upvote[_ngcontent-%COMP%]:hover{background-color:#0006}app-editor-view[_ngcontent-%COMP%]{height:auto}app-editor-view[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:auto}#comment_count[_ngcontent-%COMP%], button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:var(--secondary_color)!important}#moderate_block[_ngcontent-%COMP%]{width:auto;display:block;background-color:var(--primary_background_color)!important;position:absolute;right:0}#btn_allow[_ngcontent-%COMP%], #btn_delete[_ngcontent-%COMP%]{width:auto;aspect-ratio:1/1;padding:10px;background-color:var(--search);border-radius:50%;font-size:16px;color:#fff!important;display:flex;justify-content:center;align-items:center}#deleted_block[_ngcontent-%COMP%]{width:calc(100% - 20px);position:relative;left:10px;border:1px solid var(--border);padding:15px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-top:25px;border-radius:5px}#deleted_block[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--icon)}#deleted_block[_ngcontent-%COMP%] > pre[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:inline}#deleted_block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ff4f40;margin-right:10px;font-size:20px}"]})}return e})();class fK{constructor(o,t,r,i,l,d,p,m,v,w,P){this._id=o,this.post_id=t,this.uid=r,this.username=i,this.user_icon=l,this.parent_id=d,this.content=p,this.level=m,this.created_at=v,this.vote=w,this.deleted=P}}class TY{constructor(o,t,r,i,l){this.post_id=o,this.uid=t,this._id=r,this.vote=i,this.vote_type=l}}let hK=(()=>{class e{constructor(t,r,i){this.postService=t,this.storageService=r,this.checkRefreshToken=i,this.endpoint="/update-comment-vote"}updateVoteComment(t,r,i,l){this.checkRefreshToken.runCheckRefreshToken();const d=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid")),p=new TY(t,d,r,i,l),m=JSON.stringify(p);let v=new et;return v=v.append("Accept","application/json"),v=v.append("Content-Type","application/json"),this.postService.post(this.endpoint,v,m,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(ct),ie(Rn))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),pK=(()=>{class e{constructor(t){this.getService=t,this.endpoint="/get-comment-status"}getCommentStatus(t,r){const i=this.endpoint+"?_id="+t+"&uid="+r;let l=new et;return this.getService.get(i,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class MY{constructor(o,t,r,i){this.post_id=o,this.uid=t,this._id=r,this.edit_content=i}}let IY=(()=>{class e{constructor(t,r,i){this.storageService=t,this.postService=r,this.checkRefreshToken=i,this.endpoint="/edit-comment"}editComment(t,r,i){this.checkRefreshToken.runCheckRefreshToken();const l=parseInt(this.storageService.getItem("uid")),d=new MY(t,l,r,i),p=JSON.stringify(d);let m=new et;return m=m.append("Accept","application/json"),m=m.append("Content-Type","application/json"),this.postService.post(this.endpoint,m,p,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ct),ie(Io),ie(Rn))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class OY{constructor(o,t){this.post_id=o,this._id=t}}let AY=(()=>{class e{constructor(t,r,i){this.postService=t,this.storageService=r,this.checkRefreshToken=i,this.endpoint="/delete-comment"}deleteComment(t,r){this.checkRefreshToken.runCheckRefreshToken();const i=new OY(t,r),l=JSON.stringify(i);let d=new et;return d=d.append("Accept","application/json"),d=d.append("Content-Type","application/json"),this.postService.post(this.endpoint,d,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(ct),ie(Rn))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function NY(e,o){if(1&e){const t=We();x(0,"img",15),z("click",function(i){return ce(t),fe(q().goToUserPage(i))}),D()}2&e&&nr("src",q().commentData.user_icon,Qe)}function RY(e,o){1&e&&Q(0,"i",16)}function FY(e,o){if(1&e&&Q(0,"div",17),2&e){const t=q();A("innerHTML",t.sanitizer.bypassSecurityTrustHtml(t.previousContent),sb)}}function LY(e,o){if(1&e){const t=We();x(0,"button",25),z("click",function(){return ce(t),fe(q(2).reply())}),Q(1,"i",26),x(2,"pre"),L(3,"Reply"),D()()}}function BY(e,o){if(1&e){const t=We();x(0,"button",27),z("click",function(){return ce(t),fe(q(2).showEditComment())}),Q(1,"i",28),x(2,"pre"),L(3,"Edit"),D()()}}function VY(e,o){if(1&e){const t=We();x(0,"button",25),z("click",function(){return ce(t),fe(q(2).deleteComment())}),Q(1,"i",29),x(2,"pre"),L(3,"Delete"),D()()}}const R9=(e,o,t)=>({upvote:e,downvote:o,normal:t});function $Y(e,o){if(1&e){const t=We();x(0,"div",18)(1,"div",19)(2,"button",20),z("click",function(i){return ce(t),fe(q().voteComment(i,"upvote"))}),Q(3,"img"),D(),x(4,"p",21),L(5),D(),x(6,"button",22),z("click",function(i){return ce(t),fe(q().voteComment(i,"downvote"))}),Q(7,"img"),D()(),Pe(8,LY,4,0,"button",23)(9,BY,4,0,"button",24)(10,VY,4,0,"button",23),D()}if(2&e){const t=q();k(1),A("ngClass",Ss(11,R9,"upvote"===t.voteType,"downvote"===t.voteType,"none"===t.voteType)),k(1),A("ngClass",Ss(15,R9,"upvote"===t.voteType,"downvote"===t.voteType,"none"===t.voteType))("disabled",t.isDeleted||t.isPostDeleted),k(1),nr("src","upvote"===t.voteType?t.upvote_fill:t.voteImgService.upvote,Qe),k(2),ht(t.presentationService.transformNumber(t.commentData.vote)),k(1),A("ngClass",Ss(19,R9,"upvote"===t.voteType,"downvote"===t.voteType,"none"===t.voteType))("disabled",t.isDeleted||t.isPostDeleted),k(1),nr("src","downvote"===t.voteType?t.downvote_fill:t.voteImgService.downvote,Qe),k(1),A("ngIf",t.isReplyAllowed&&!t.isDeleted&&!t.isPostDeleted),k(1),A("ngIf",t.isEditAllowed&&!t.isDeleted&&!t.isPostDeleted),k(1),A("ngIf",t.isDeleteAllowed&&!t.isDeleted&&!t.isPostDeleted||t.isCommunityOwner&&!t.isDeleted&&!t.isPostDeleted)}}function UY(e,o){if(1&e){const t=We();x(0,"button",30),z("click",function(){return ce(t),fe(q().createComment())}),L(1,"Comment"),D()}}function jY(e,o){if(1&e){const t=We();x(0,"button",31),z("click",function(){return ce(t),fe(q().sendEditComment())}),L(1,"Edit"),D()}}const HY=e=>({"margin-top":e}),zY=e=>({display:e});let WY=(()=>{class e{constructor(t,r,i,l,d,p,m,v,w,P,R){this.sanitizer=t,this.voteCommentService=r,this.storageService=i,this.dateTimeService=l,this.createCommentService=d,this.getCommentStatusService=p,this.editCommentService=m,this.deleteCommentService=v,this.presentationService=w,this.voteImgService=P,this.route=R,this.commentData=new fK(0,0,0,"","",0,"",0,"",0,!1),this.isCommunityOwner=!1,this.isPostDeleted=!1,this.commentModified=new Le,this.isShown=!0,this.isDeleted=!1,this.isReplyAllowed=!1,this.isEditAllowed=!1,this.isDeleteAllowed=!1,this.isEditorShow=!1,this.isOptionShow=!1,this.isUserComment=!1,this.isUserPage=!1,this.isSendComment=!1,this.replyCommentData="",this.editCommentData="",this.voteType="none",this.previousVote=0,this.shownDate="",this.margin="0px",this.previousContent="",this.uid=0,this.editor_id="",this.upvote="../../../../../assets/icon/upvote.png",this.upvote_fill="../../../../../assets/icon/upvote-comment-fill.png",this.downvote="../../../../../assets/icon/downvote.png",this.downvote_fill="../../../../../assets/icon/downvote-comment-fill.png",this.img_count=0,this.editorSettings={selector:"editor",base_url:"/tinymce",suffix:".min",plugins:"link lists codesample image autoresize",toolbar:"bold italic underline strikethrough subscript superscript removeformat numlist bullist link blockquote codesample image",toolbar_mode:"wrap",placeholder:"Enter your comment",automatic_uploads:!0,file_picker_types:"image",images_file_types:"jpg,svg,webp,png,jpeg",images_reuse_filename:!0,image_dimensions:!1,image_description:!1,statusbar:!0,elementpath:!1,branding:!1,resize:!0,width:"100%",min_height:100,autoresize_min_height:200,menubar:!1,draggable_modal:!1,object_resizing:!1,inline_boundaries:!1,contenteditable:!1,paste_data_images:!1,paste_block_drop:!1,cleanup:!1,color_default_foreground:"#E03E2D",color_default_background:"#000000",color_map_background:["000000","Black"],textcolor_map:["#E03E2D","Red"],custom_colors:!1,content_css:"tinymce-5",content_style:"html body { overflow: auto !important; }p { margin: 0; } img { display: block; out-line: 0; max-width: 200px; max-height: 200px}body {line-height: normal}pre[class*=language-] {font-family: Consolas}",setup:$=>{$.on("init",()=>{const H="var(--neutral)",te=$.getContainer();te.parentElement.childNodes[2].style.border="1px solid var(--secondary_color)",te.querySelector(".tox-editor-header").style.backgroundColor=H,te.querySelector(".tox-editor-container").style.backgroundColor=H,te.querySelector(".tox-toolbar").style.backgroundColor=H,te.querySelector(".tox-toolbar").style.color="var(--secondary_color)",te.querySelector(".tox-statusbar").style.backgroundColor=H,te.querySelector(".tox-statusbar").style.height="50px",te.querySelector(".tox-statusbar").querySelector(".tox-statusbar__resize-handle").querySelector("svg").style.fill="var(--secondary_color)"})},file_picker_callback:($,H,Y)=>{if(0==this.img_count){const te=document.createElement("input");te.setAttribute("type","file"),te.setAttribute("accept","image/*"),te.addEventListener("change",_e=>{const le=_e.target.files[0],Re=new FileReader;Re.addEventListener("load",()=>{const st=le.name,At=_().activeEditor.editorUpload.blobCache,tn=Re.result.split(",")[1],jn=At.create(st,le,tn);At.add(jn),$(jn.blobUri(),{title:le.name})}),Re.readAsDataURL(le)}),te.click(),this.img_count++}else Ne().fire("Only 1 image is allow in a comment","","warning")},init_instance_callback:$=>{this.editor_id=$.id}},this.count=0}ngOnInit(){this.voteImgService.selectDownVoteImg(),this.voteImgService.selectUpVoteImg(),this.isDeleted=this.commentData.deleted,this.isUserPage=window.location.href.includes("/user/"),this.uid=""===this.storageService.getItem("uid")?0:Number(this.storageService.getItem("uid")),this.isUserComment=this.commentData.uid==this.uid,this.isEditAllowed=this.commentData.uid==this.uid,this.isDeleteAllowed=this.commentData.uid==this.uid,this.isReplyAllowed=this.commentData.level<=6&&this.commentData.uid!=this.uid,this.shownDate=this.dateTimeService.getTimeByCompareCreatedAtAndCurrentDate(this.commentData.created_at),this.isShown=!(this.commentData.level>0),this.commentData.content=this.commentData.content.replace("<img src=","<img class='img_comment' src="),this.commentData.content=this.commentData.content.replace(/<img/g,'<img style="display:block;" '),this.commentData.content=this.commentData.content.replace(/<ol/g,'<ol style="margin-left:20px;" '),this.commentData.content=this.commentData.content.replace(/<ul/g,'<ul style="margin-left:30px;" '),this.commentData.content=this.commentData.content.replace(/<pre/g,'<pre class="pre_code" style="width:fit-content" '),this.commentData.content=this.commentData.content.replace(/<code/g,'<code class="code" '),this.commentData.content=this.commentData.content.replace(/<a/g,'<a class="a link" '),this.commentData.content=this.commentData.content.replace(/<p/g,'<p class="comment_content" '),this.previousContent=this.commentData.content,this.editCommentData=this.commentData.content,this.getCommentStatusService.getCommentStatus(this.commentData._id,this.uid).subscribe({next:t=>{this.voteType=t.vote_type},error:t=>{console.log("HttpServletResponse: "+t.error.message+"\nResponseEntity: "+t.error),console.log("Error check comment status")}})}showComment(t){this.isShown=!this.isShown}voteComment(t,r){t.stopPropagation(),this.uid=""===this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid")),0===this.uid?Ne().fire({title:"You need to sign-in to do this action",icon:"error",showConfirmButton:!0,confirmButtonText:"OK",footer:'<a href="signin" style="color:red;font-size: 18px"><b>Click here to go to sign-in page<b/></a>'}):("none"===this.voteType&&"upvote"===r?(this.previousVote=this.commentData.vote,this.commentData.vote+=1,this.voteType="upvote"):"none"===this.voteType&&"downvote"===r?(this.previousVote=this.commentData.vote,this.commentData.vote-=1,this.voteType="downvote"):"upvote"===this.voteType&&"upvote"===r?(this.previousVote=this.commentData.vote,this.commentData.vote-=1,this.voteType="none"):"upvote"===this.voteType&&"downvote"===r?(this.previousVote=this.commentData.vote,this.commentData.vote-=2,this.voteType="downvote"):"downvote"===this.voteType&&"upvote"===r?(this.previousVote=this.commentData.vote,this.commentData.vote+=2,this.voteType="upvote"):"downvote"===this.voteType&&"downvote"===r&&(this.previousVote=this.commentData.vote,this.commentData.vote+=1,this.voteType="none"),this.sendVoteCommentToServer(this.commentData.post_id,this.commentData._id,this.commentData.vote,this.voteType))}sendVoteCommentToServer(t,r,i,l){this.voteCommentService.updateVoteComment(t,r,i,l).subscribe({next:d=>{console.log("Vote comment: "+d.vote_updated),this.commentData.vote=i,this.voteType=l},error:d=>{console.log("HttpServletResponse: "+d.error.message+"\nResponseEntity: "+d.error),console.log("Error vote post"),console.log("vote when error: "+this.commentData.vote)}})}reply(){this.uid=""===this.storageService.getItem("uid")?0:Number(this.storageService.getItem("uid")),0===this.uid?Ne().fire({title:"You need to sign-in to do this action",icon:"error",showConfirmButton:!0,confirmButtonText:"OK",footer:'<a href="signin" style="color:red;font-size: 18px"><b>Click here to go to sign-in page<b/></a>'}):this.isEditorShow=!this.isEditorShow}onContentChanged(t){this.count++,this.isEditAllowed&&this.count>1&&(this.editCommentData=_().EditorManager.get(this.editor_id).getContent({format:"html"})),this.isReplyAllowed&&(this.replyCommentData=t.editor.getContent({format:"html"}))}cancelComment(){(""!=this.replyCommentData||""!=this.editCommentData)&&Ne().fire({titleText:"Do you want to clear this comment",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{t.isConfirmed&&(this.replyCommentData="",_().activeEditor?.setContent(this.replyCommentData),this.isEditorShow=!this.isEditorShow,this.count=0,this.editCommentData=this.commentData.content)})}createComment(){this.uid=""===this.storageService.getItem("uid")?0:Number(this.storageService.getItem("uid")),0==this.uid?Ne().fire({title:"You need to sign-in to do this action",icon:"error",showConfirmButton:!0,confirmButtonText:"OK",footer:'<a href="signin" style="color:red;font-size: 18px"><b>Click here to go to sign-in page<b/></a>'}):(this.isSendComment=!0,this.createCommentService.createComment(this.commentData.post_id,this.commentData._id,this.replyCommentData,this.commentData.level+1).subscribe({next:t=>{this.commentModified.emit(!0),this.isSendComment=!1},error:t=>{this.isSendComment=!1,console.log("HttpServletResponse: "+t.error.message+"\nResponseEntity: "+t.error),Ne().fire({titleText:"Error create comment. Please try again",icon:"error",heightAuto:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1})}}))}showEditComment(){this.isEditorShow=!0,this.count<2&&_().EditorManager.get(this.editor_id)?.setContent(this.editCommentData),this.count++}sendEditComment(){this.uid=""===this.storageService.getItem("uid")?0:Number(this.storageService.getItem("uid")),0==this.uid?Ne().fire({title:"You need to sign-in to do this action",icon:"error",showConfirmButton:!0,confirmButtonText:"OK",footer:'<a href="signin" style="color:red;font-size: 18px"><b>Click here to go to sign-in page<b/></a>'}):this.commentData.content!=this.editCommentData&&""!=this.editCommentData?(this.isSendComment=!0,this.editCommentService.editComment(this.commentData.post_id,this.commentData._id,this.editCommentData).subscribe({next:t=>{this.isSendComment=!1,this.commentData.content=t.content,this.previousContent=t.content,this.isEditorShow=!this.isEditorShow},error:t=>{this.isSendComment=!1,console.log("HttpServletResponse: "+t.error.message+"\nResponseEntity: "+t.error),0==this.uid&&Ne().fire({titleText:"Error edit comment. Please try again",icon:"error",heightAuto:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1})}})):Ne().fire({titleText:"Please edit your comment",icon:"info",heightAuto:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1})}deleteComment(){this.uid=""===this.storageService.getItem("uid")?0:Number(this.storageService.getItem("uid")),0==this.uid?Ne().fire({title:"You need to sign-in to do this action",icon:"error",showConfirmButton:!0,confirmButtonText:"OK",footer:'<a href="signin" style="color:red;font-size: 18px"><b>Click here to go to sign-in page<b/></a>'}):this.deleteCommentService.deleteComment(this.commentData.post_id,this.commentData._id).subscribe({next:t=>{this.commentModified.emit(!0)},error:t=>{console.log("HttpServletResponse: "+t.error.message+"\nResponseEntity: "+t.error),0==this.uid&&Ne().fire({titleText:"Error delete comment. Please try again",icon:"error",heightAuto:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1})}})}deleteCommentByCommunityOwner(){this.uid=""===this.storageService.getItem("uid")?0:Number(this.storageService.getItem("uid")),0==this.uid?Ne().fire({title:"You need to sign-in to do this action",icon:"error",showConfirmButton:!0,confirmButtonText:"OK",footer:'<a href="signin" style="color:red;font-size: 18px"><b>Click here to go to sign-in page<b/></a>'}):this.deleteCommentService.deleteComment(this.commentData.post_id,this.commentData._id).subscribe({next:t=>{this.commentModified.emit(!0)},error:t=>{console.log("HttpServletResponse: "+t.error.message+"\nResponseEntity: "+t.error),0==this.uid&&Ne().fire({titleText:"Error delete comment. Please try again",icon:"error",heightAuto:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1})}})}goToUserPage(t){this.route.navigate(["/user/"+this.commentData.username+"/posts"])}static#e=this.\u0275fac=function(r){return new(r||e)(B(Pf),B(hK),B(ct),B(Ds),B(dK),B(pK),B(IY),B(AY),B(va),B(bm),B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-comment"]],inputs:{commentData:"commentData",isCommunityOwner:"isCommunityOwner",isPostDeleted:"isPostDeleted"},outputs:{commentModified:"commentModified"},decls:20,vars:18,consts:[[1,"comment_block",3,"ngStyle"],["id","header",3,"click"],[3,"click",4,"ngIf"],["class","pi pi-plus-circle","id","img_close_comment",4,"ngIf"],["id","info_block"],["id","txt_username",2,"color","var(--icon)","font-size","14px",3,"routerLink"],[2,"color","var(--txt)","font-size","13px"],["id","comment_content",3,"innerHTML",4,"ngIf"],["id","footer",4,"ngIf"],["id","comment_editor_block",3,"ngStyle"],[2,"width","calc(100%)",3,"init","onSelectionChange","onChange"],["id","btn_comment_block"],["id","btn_cancel_comment","type","button",3,"click"],["id","btn_submit_comment","type","button",3,"click",4,"ngIf"],["id","btn_edit_comment","type","button",3,"click",4,"ngIf"],[3,"click"],["id","img_close_comment",1,"pi","pi-plus-circle"],["id","comment_content",3,"innerHTML"],["id","footer"],["id","block_vote",1,"block_vote",3,"ngClass"],["id","btn_upvote","type","button",3,"ngClass","disabled","click"],[2,"color","var(--icon)"],["id","btn_downvote","type","button",3,"ngClass","disabled","click"],["class","footer_btn","type","button",3,"click",4,"ngIf"],["class","footer_btn","id","btn_edit","type","button",3,"click",4,"ngIf"],["type","button",1,"footer_btn",3,"click"],[1,"pi","pi-comment"],["id","btn_edit","type","button",1,"footer_btn",3,"click"],[1,"pi","pi-pencil"],[1,"pi","pi-trash"],["id","btn_submit_comment","type","button",3,"click"],["id","btn_edit_comment","type","button",3,"click"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1),z("click",function(d){return i.showComment(d)}),Pe(2,NY,1,1,"img",2)(3,RY,1,0,"i",3),x(4,"div",4)(5,"a",5),L(6),D(),x(7,"pre"),L(8," \u2022 "),D(),x(9,"p",6),L(10),D()()(),Pe(11,FY,1,1,"div",7)(12,$Y,11,23,"div",8),x(13,"div",9)(14,"editor",10),z("onSelectionChange",function(d){return i.onContentChanged(d)})("onChange",function(d){return i.onContentChanged(d)}),D(),x(15,"div",11)(16,"button",12),z("click",function(){return i.cancelComment()}),L(17,"Cancel"),D(),Pe(18,UY,2,0,"button",13)(19,jY,2,0,"button",14),D()()()),2&r&&(N1("margin-left",i.margin),A("ngStyle",ve(14,HY,0===i.commentData.level?"10px":"0")),k(2),A("ngIf",i.isShown),k(1),A("ngIf",!i.isShown),k(2),In("routerLink","/user/",i.commentData.username,"/posts"),k(1),ht(i.commentData.username),k(4),ht(i.shownDate),k(1),A("ngIf",i.isShown),k(1),A("ngIf",i.isShown&&!i.isUserPage),k(1),A("ngStyle",ve(16,zY,i.isEditorShow&&i.isShown?"block":"none")),k(1),A("init",i.editorSettings),k(4),A("ngIf",i.isReplyAllowed),k(1),A("ngIf",i.isEditAllowed))},dependencies:[lr,sn,Eo,Zu,De],styles:["[_nghost-%COMP%]{--btn_width: 90px;--btn_height: 30px}.comment_block[_ngcontent-%COMP%]{background-color:var(--primary_background_color);width:100%;height:auto;padding:5px 0;box-sizing:border-box}button[_ngcontent-%COMP%]:disabled:hover, #btn_downvote[_ngcontent-%COMP%]:disabled:hover, #btn_upvote[_ngcontent-%COMP%]:disabled:hover{background-color:var(--primary_background_color)}button[_ngcontent-%COMP%]:disabled, #btn_downvote[_ngcontent-%COMP%]:disabled, #btn_upvote[_ngcontent-%COMP%]:disabled{opacity:.5}.comment_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], #comment_editor_block[_ngcontent-%COMP%]{margin:0 7px}#header[_ngcontent-%COMP%], #info_block[_ngcontent-%COMP%], #block_vote[_ngcontent-%COMP%], .footer_btn[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}#header[_ngcontent-%COMP%]{width:100%}#header[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]:hover{cursor:pointer}#info_block[_ngcontent-%COMP%]{margin-left:10px}textarea#input_post_title[_ngcontent-%COMP%]{background-color:var(--search);color:#000}i[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{height:30px;aspect-ratio:1/1;border-radius:50%;color:var(--secondary_color);display:flex;justify-content:center;align-items:center;font-size:16px}pre[_ngcontent-%COMP%]{color:var(--secondary_color)}#img_close_comment[_ngcontent-%COMP%]{height:15px;aspect-ratio:1/1;border-radius:50%}#txt_username[_ngcontent-%COMP%]{color:var(--icon)!important;text-decoration:none}#txt_username[_ngcontent-%COMP%]:hover{text-decoration:underline!important}#footer[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:30px;margin-top:3px;position:relative;margin-left:37px;box-sizing:border-box}#footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{border-radius:20px}#block_vote[_ngcontent-%COMP%]{width:auto;height:100%}.footer_btn[_ngcontent-%COMP%]{width:auto;height:100%;padding:0 7px;margin:0 5px;display:flex;justify-content:center;align-items:center}#comment_content[_ngcontent-%COMP%]{height:auto;width:calc(100% - 42px);margin-top:5px;overflow-wrap:break-word;margin-left:48px;box-sizing:border-box}#btn_option[_ngcontent-%COMP%]{width:auto;height:100%;padding:0 10px;border-radius:50%}#btn_option[_ngcontent-%COMP%]:hover, .footer_btn[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)}#btn_upvote[_ngcontent-%COMP%], #btn_downvote[_ngcontent-%COMP%]{padding:5px;border-radius:50%;width:30px;height:30px;display:flex;justify-content:center;align-items:center}#btn_upvote[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], #btn_downvote[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;border-radius:50%}#btn_upvote[_ngcontent-%COMP%], #btn_downvote[_ngcontent-%COMP%], #block_vote[_ngcontent-%COMP%], .footer_btn[_ngcontent-%COMP%], #btn_option[_ngcontent-%COMP%]{background-color:var(--primary_background_color)}#comment_editor_block[_ngcontent-%COMP%]{width:calc(100% - 7px);height:auto;position:relative;margin-bottom:calc(var(--btn_height) * 1)}#btn_comment_block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:auto;position:absolute;bottom:7px;right:10px}#btn_comment_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{text-align:center;margin-left:10px}#btn_cancel_comment[_ngcontent-%COMP%]{width:auto;height:var(--btn_height);padding:0 20px;background-color:var(--primary_background_color);border-radius:20px;border:1px solid var(--secondary_color);color:var(--secondary_color)}#btn_submit_comment[_ngcontent-%COMP%], #btn_edit_comment[_ngcontent-%COMP%]{width:var(--btn_width);height:var(--btn_height);background-color:var(--allow);border-radius:20px;border:1px solid var(--secondary_color);color:var(--secondary_color)}.footer_btn[_ngcontent-%COMP%], #block_vote[_ngcontent-%COMP%], #btn_downvote[_ngcontent-%COMP%], #btn_upvote[_ngcontent-%COMP%], .footer_btn[_ngcontent-%COMP%]:hover, #btn_downvote[_ngcontent-%COMP%]:hover, .user_comment[_ngcontent-%COMP%]   #btn_upvote[_ngcontent-%COMP%]:hover{background-color:var(--primary_background_color)}.upvote[_ngcontent-%COMP%]{background-color:var(--upvote)}.downvote[_ngcontent-%COMP%]{background-color:var(--downvote)}#btn_upvote[_ngcontent-%COMP%]:hover, #btn_downvote[_ngcontent-%COMP%]:hover, .footer_btn[_ngcontent-%COMP%]:hover{background-color:var(--search)}"]})}return e})();const mK=e=>({display:e});function qY(e,o){if(1&e){const t=We();x(0,"button",8),z("click",function(){return ce(t),fe(q().openEditor())}),Q(1,"i",9),L(2," Create a comment"),D()}if(2&e){const t=q();A("ngStyle",ve(1,mK,!t.open&&t.wait?"block":"none"))}}function GY(e,o){if(1&e){const t=We();x(0,"div",10)(1,"editor",11),z("onSelectionChange",function(i){return ce(t),fe(q().onContentChanged(i))}),D(),x(2,"div",12)(3,"div",13)(4,"button",14),z("click",function(){return ce(t),fe(q().cancelComment())}),L(5,"Cancel"),D(),x(6,"button",15),z("click",function(i){return ce(t),fe(q().createComment(i))}),L(7,"Comment"),D()()()()}if(2&e){const t=q();A("ngStyle",ve(2,mK,t.open&&t.wait?"block":"none")),k(1),A("init",t.editorSettings)}}function KY(e,o){1&e&&(x(0,"p",16),L(1," No comment found for this post\n"),D())}const ZY=(e,o,t)=>({"margin-left":e,width:o,display:"block","margin-top":t});function YY(e,o){if(1&e){const t=We();x(0,"div",17)(1,"app-comment",18),z("commentModified",function(i){return ce(t),fe(q().reloadComment(i))}),D()()}if(2&e){const t=o.$implicit,r=o.index,i=q();In("id","c",t._id,""),k(1),Ot("id",t._id),A("commentData",t)("isPostDeleted",i.post.deleted)("isCommunityOwner",1==i.post.communityOwner)("ngStyle",Ss(6,ZY,30*t.level+"px",i.width[r],0==t.level?"30px":0))}}function JY(e,o){1&e&&(x(0,"div",19)(1,"p",20),L(2,"This post is waiting to be approve by moderator"),D()())}function QY(e,o){1&e&&(x(0,"div",21),Q(1,"img",22)(2,"div",23),D())}let F9=(()=>{class e{constructor(t,r,i,l,d,p,m,v,w,P,R,$){this.route=t,this.dateTimeService=r,this.getPostService=i,this.getCommentService=l,this.createCommentService=d,this.storageService=p,this.recentVisitPostService=m,this.communityService=v,this.darkmodeSerive=w,this.checkRefreshTokenService=P,this.activeRoute=R,this.shareDataService=$,this.post=new _a,this.shownDate="",this.commentResults=[],this.content="",this.isDeleted=!1,this.width=[],this.isAuthor=!0,this.isAllow=!0,this.isDataLoad=!1,this.wait=!1,this.mode=0,this.img_count=0,this.isModPage=!1,this.selected_mod_post=0,this.open=!1,this.onContentChanged=H=>{this.content=H.editor.getContent({format:"html"})}}ngOnInit(){if(this.darkmodeSerive.useDarkMode(),this.updateEditorStyle(),this.checkRefreshTokenService.runCheckRefreshTokenWithoutNotification(),this.isModPage=window.location.href.includes("/mod/"),this.isModPage&&this.shareDataService.mod_detail_post$.subscribe(t=>{null!=t&&(this.wait=!1,this.open=!1,this.commentResults=[],0==t.post_id?this.post=new _a:(this.post=t,this.getInfo(t),this.isDeleted=1==this.post.deleted,this.isAllow=1==this.post.allow)),this.shareDataService.changed_post$.subscribe(r=>{this.isDeleted=1==r.deleted,this.isAllow=1==r.allow})}),!this.isModPage){const t=this.route.snapshot.params.post_id,r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.getPostService.getDetailPostByUidAndPostId(r,t).subscribe({next:i=>{this.getInfo(i)},error:i=>{console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error),this.isDeleted=!0}})}}getInfo(t){const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));if(this.post=t,this.isAuthor=r===t.uid,this.isAllow=0!==t.allow,this.isDeleted=1===t.deleted,!this.isDeleted&&this.isAllow)if(0===r||this.isModPage){let i=""==this.storageService.getItem("recent_posts")?[]:JSON.parse("["+this.storageService.getItem("recent_posts")+"]");i=i.filter(d=>d!=t.post_id),i.unshift(t.post_id),this.storageService.setItem("recent_posts",i.toString())}else this.recentVisitPostService.setRecentVisit("/set-recent-visit-post",r,t.post_id).subscribe();this.isDataLoad=!0,this.getCommentService.getComments(t.post_id).subscribe({next:i=>{this.commentResults=i,this.isDataLoad=!1,this.wait=!0;const l=this.route.snapshot.params.comment_id;if(0!=l){const d=setInterval(()=>{let p=document.getElementById("c"+l);null!=p&&(p.scrollIntoView(),clearInterval(d))},50)}},error:i=>{console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error)}})}openEditor(){this.open=!this.open}updateEditorStyle(){this.mode="1"==this.storageService.getItem("mode")?1:0,this.editorSettings={base_url:"/tinymce",suffix:".min",plugins:"link lists codesample image autoresize",toolbar:"bold italic underline strikethrough subscript superscript removeformat numlist bullist link blockquote codesample image",toolbar_mode:"wrap",placeholder:"Enter your comment",automatic_uploads:!0,file_picker_types:"image",images_file_types:"jpg,svg,webp,png,jpeg",images_reuse_filename:!0,image_dimensions:!1,image_description:!1,statusbar:!0,menubar:!1,elementpath:!1,branding:!1,resize:!0,width:"100%",min_height:130,height:130,draggable_modal:!1,object_resizing:!1,inline_boundaries:!1,contenteditable:!1,paste_data_images:!1,paste_block_drop:!1,license_key:"gpl",color_default_foreground:"#E03E2D",color_default_background:"#000000",color_map_background:["000000","Black"],textcolor_map:["#E03E2D","Red"],custom_colors:!1,content_css:"tinymce-5",content_style:"html body { overflow: auto !important; }p { margin: 0; } img { display: block; out-line: 0; max-width: 200px; max-height: 200px}body {line-height: normalpre[class*=language-] {font-family: Consolas}",setup:t=>{t.on("init",()=>{const r="var(--neutral)",l=t.getContainer();l.parentElement.childNodes[2].style.border="1px solid var(--secondary_color)",l.querySelector(".tox-editor-header").style.backgroundColor=r,l.querySelector(".tox-editor-container").style.backgroundColor=r,l.querySelector(".tox-toolbar").style.backgroundColor=r,l.querySelector(".tox-toolbar").style.color="var(--secondary_color)",l.querySelector(".tox-statusbar").style.backgroundColor=r,l.querySelector(".tox-statusbar").style.height="50px",l.querySelector(".tox-statusbar").querySelector(".tox-statusbar__resize-handle").querySelector("svg").style.fill="var(--secondary_color)"})},file_picker_callback:(t,r,i)=>{if(0==this.img_count){const l=document.createElement("input");l.setAttribute("type","file"),l.setAttribute("accept","image/*"),l.addEventListener("change",d=>{const p=d.target.files[0],m=new FileReader;m.addEventListener("load",()=>{const v=p.name,w=_().activeEditor.editorUpload.blobCache,P=m.result.split(",")[1],R=w.create(v,p,P);w.add(R),t(R.blobUri(),{title:p.name})}),m.readAsDataURL(p)}),this.img_count++,l.click()}else Ne().fire("Only 1 image is allow in a comment","","warning")}}}cancelComment(){""!=this.content?Ne().fire({titleText:"Do you want to clear this comment",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{t.isConfirmed&&(this.content="",_().activeEditor?.setContent(this.content),this.open=!1)}):this.open=!1}createComment(t){0===(""==this.storageService.getItem("uid")?0:parseInt(this.storageService.getItem("uid")))?Ne().fire({title:"Authentication fail",text:"Please sign-in to do this action",icon:"error",showConfirmButton:!0,confirmButtonText:"Confirm",footer:'<a href="signin" style="color:red;font-size: 18px"><b>Click here to go to sign-in page<b/></a>'}):this.createCommentService.createComment(this.post.post_id,0,this.content,0).subscribe({next:i=>{_().activeEditor?.setContent(""),this.reloadComment(t)},error:i=>{console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error),Ne().fire({titleText:"Error create comment. Please try again",icon:"success",heightAuto:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1})}})}reloadComment(t){this.getCommentService.getComments(this.post.post_id).subscribe({next:i=>{this.commentResults=i},error:i=>{console.log("HttpServletResponse: "+i.error.message+"\nResponseEntity: "+i.error)}})}static#e=this.\u0275fac=function(r){return new(r||e)(B($n),B(Ds),B(ur),B(Ri),B(dK),B(ct),B(gm),B(Pr),B(Ys),B(Rn),B($n),B(Er))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-view-detail-post"]],decls:8,vars:7,consts:[[3,"commentCount"],["id","btn_comment_editor",3,"ngStyle","click",4,"ngIf"],["id","comment_editor_block",3,"ngStyle",4,"ngIf"],["class","empty_block","style","color: var(--icon); margin-top: 20px",4,"ngIf"],[1,"comment_container"],["class","comment_element",3,"id",4,"ngFor","ngForOf"],["class","empty_block",4,"ngIf"],["class","load_data_block",4,"ngIf"],["id","btn_comment_editor",3,"ngStyle","click"],[1,"pi","pi-plus"],["id","comment_editor_block",3,"ngStyle"],[2,"width","calc(100%)",3,"init","onSelectionChange"],["id","btn_comment"],["id","btn_comment_block"],["id","btn_cancel_comment","type","button",3,"click"],["id","btn_submit_comment","type","button",3,"click"],[1,"empty_block",2,"color","var(--icon)","margin-top","20px"],[1,"comment_element",3,"id"],[1,"comment",3,"id","commentData","isPostDeleted","isCommunityOwner","ngStyle","commentModified"],[1,"empty_block"],[2,"color","var(--icon)"],[1,"load_data_block"],["src","../../../../assets/icon/logo.png",1,"img_load_data"],[1,"data_loader"]],template:function(r,i){1&r&&(Q(0,"app-post",0),Pe(1,qY,3,3,"button",1)(2,GY,8,4,"div",2)(3,KY,2,0,"p",3),x(4,"div",4),Pe(5,YY,2,10,"div",5),D(),Pe(6,JY,3,0,"div",6)(7,QY,3,0,"div",7)),2&r&&(A("commentCount",i.commentResults.length),k(1),A("ngIf",!i.post.deleted),k(1),A("ngIf",!i.post.deleted),k(1),A("ngIf",0===i.commentResults.length&&i.wait),k(2),A("ngForOf",i.commentResults),k(1),A("ngIf",!(i.isAllow||i.isDeleted||i.isAuthor&&1==i.post.communityOwner)),k(1),A("ngIf",i.isDataLoad))},dependencies:[Zr,sn,Eo,De,DY,WY],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;--btn_width: 75px;--btn_height: 35px;padding-bottom:20px;background-color:var(--primary_background_color)}app-post[_ngcontent-%COMP%]{width:100%}#btn_comment_editor[_ngcontent-%COMP%]{width:calc(100% - 40px);height:auto;padding:5px 70px;background-color:var(--search);color:var(--icon);border-radius:20px;border:1px solid var(--icon);display:flex;flex-direction:row;justify-content:center;align-items:center;font-size:16px}#comment_editor_block[_ngcontent-%COMP%]{width:calc(100% - 40px);height:auto;position:relative}#btn_comment_editor[_ngcontent-%COMP%], #comment_editor_block[_ngcontent-%COMP%]{margin-top:15px}#btn_comment[_ngcontent-%COMP%]{width:calc(100% - 40px);display:flex;flex-direction:row;justify-content:flex-end;align-items:center;position:absolute;bottom:7px;right:10px}#btn_comment_block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:auto}#btn_comment_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{text-align:center;border-radius:20px;margin-left:10px;font-size:14px;width:auto;padding:0 15px;height:35px;border:1px solid var(--secondary_color);color:var(--secondary_color)}#btn_hide_comment_editor[_ngcontent-%COMP%]{height:25px;padding:0 35px;background-color:var(--neutral);color:var(--secondary_color);border:1px solid var(--secondary_color);border-radius:20px;position:relative;left:50px}#btn_cancel_comment[_ngcontent-%COMP%]{background-color:var(--primary_background_color)}#btn_submit_comment[_ngcontent-%COMP%]{background-color:var(--allow)}.comment[_ngcontent-%COMP%]{width:100%}.comment_container[_ngcontent-%COMP%]{width:calc(100% - 40px);height:auto}.comment_element[_ngcontent-%COMP%]{width:100%;height:auto}app-comment[_ngcontent-%COMP%]{width:100%}#no_comment_block[_ngcontent-%COMP%]{margin:0 50px;font-size:20px}#deleted_post_block[_ngcontent-%COMP%]{width:50vw;height:auto;text-align:center}#not_allow_block[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;top:150px;text-align:center}#not_allow_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:20px;background-color:var(--neutral);box-shadow:var(--box_shadow);margin-top:20px}p.empty_block[_ngcontent-%COMP%]{width:calc(100% - 40px)}"]})}return e})();class XY{constructor(o,t,r,i,l){this.post_id=o,this.uid=t,this.type=r,this.title=i,this.content=l}}let jB=(()=>{class e{constructor(t,r){this.postService=t,this.checkRefreshToken=r}editPost(t,r,i,l,d,p){this.checkRefreshToken.runCheckRefreshToken();const m=new XY(i,l,r,d,p),v=JSON.stringify(m);let w=new et;return w=w.append("Accept","application/json"),w=w.append("Content-Type","application/json"),this.postService.post(t,w,v,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(Rn))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function eJ(e,o){1&e&&Q(0,"loading",10),2&e&&A("txt_load","Edit post. Please wait")}let tJ=(()=>{class e{constructor(t,r,i,l,d,p){this.getPostService=t,this.activeRoute=r,this.dateTimeService=i,this.editPostService=l,this.storageService=d,this.route=p,this.post_id=0,this.shownDate="",this.postData=new _a,this.edit_title="",this.edit_content="",this.characterCount=0,this.original_title="",this.original_content="",this.allowSubmit=!1,this.isLoad=!1,this.editorSettings={base_url:"/tinymce",suffix:".min",plugins:"link lists codesample image autoresize",toolbar:"bold italic underline strikethrough subscript superscript removeformat numlist bullist link blockquote codesample image",toolbar_mode:"wrap",placeholder:"(Optional)",automatic_uploads:!0,file_picker_types:"image",images_file_types:"jpg,svg,webp,png,jpeg",images_reuse_filename:!0,image_dimensions:!1,image_caption:!0,image_description:!1,statusbar:!0,elementpath:!1,branding:!1,resize:!0,width:"100%",menubar:!1,draggable_modal:!1,object_resizing:!1,inline_boundaries:!1,contenteditable:!1,paste_data_images:!1,paste_block_drop:!1,color_default_foreground:"#E03E2D",color_default_background:"#000000",color_map_background:["000000","Black"],textcolor_map:["#E03E2D","Red"],custom_colors:!1,content_css:"tinymce-5",content_style:"html body { overflow-y: auto !important; }p { margin: 0; } img { display: block; margin: 0 auto; out-line: 0; max-width: 100%; max-height: 100%}body {line-height: normal}pre[class*=language-] {font-family: Consolas}",file_picker_callback:(m,v,w)=>{const P=document.createElement("input");P.setAttribute("type","file"),P.setAttribute("accept","image/*"),P.addEventListener("change",R=>{const $=R.target.files[0],H=new FileReader;H.addEventListener("load",()=>{const Y=$.name,te=_().activeEditor.editorUpload.blobCache,_e=H.result.split(",")[1],le=te.create(Y,$,_e);te.add(le),m(le.blobUri(),{title:$.name})}),H.readAsDataURL($)}),P.click()}},this.count=0}ngOnInit(){this.shownDate=this.dateTimeService.getTimeByCompareCreatedAtAndCurrentDate(this.postData.created_at),this.post_id=this.activeRoute.snapshot.params.post_id;const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.getPostService.getDetailPostByUidAndPostId(t,this.post_id).subscribe({next:r=>{this.postData=r;const i=document.getElementById("input_post_title");i.value=this.postData.title,i.value=i.value.replace(/\r?\n|\r/g,""),i.style.height="auto",i.style.height=i.scrollHeight<30?"30px":`${i.scrollHeight}px`,this.edit_title=this.postData.title,this.edit_content=this.postData.content,this.characterCount=this.postData.title.length,this.original_title=this.postData.title,this.original_content=this.postData.content,_().activeEditor?.setContent(this.postData.content),this.AllowSubmit()},error:r=>{console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})}AllowSubmit(){this.allowSubmit=!((this.original_title!==this.edit_title||this.original_content!==this.edit_content)&&0!==this.edit_title.length)}inputTitle(t){const r=t.target;r.value=r.value.replace(/(\r\n|\n|\r)/gm,""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,this.characterCount=r.value.length,""===r.value&&(r.style.height="30px",this.characterCount=0),this.edit_title=r.value,this.AllowSubmit()}setContent(t){0==this.count&&(this.count++,_().activeEditor?.setContent(this.postData.content),this.AllowSubmit()),this.count++,this.edit_content=t.editor.getContent({format:"html"}),this.AllowSubmit()}editPost(){Ne().fire({titleText:"Are you sure you want to edit this post",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{if(t.isConfirmed){this.isLoad=!0;const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.editPostService.editPost("/edit-editor-post","editor",this.post_id,r,this.edit_title,this.edit_content).subscribe({next:i=>{t.isConfirmed&&(this.isLoad=!1,Ne().fire("Edit post successfully","","success").then(l=>{l.isConfirmed&&this.route.navigate(["/post/"+this.post_id])}))},error:i=>{this.isLoad=!1,Ne().fire("Fail to edit post. Please try again","","error")}})}})}cancelEdit(){Ne().fire({titleText:"Cancel edit post",text:"The new content will not be saved",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{t.isConfirmed&&this.route.navigate(["/post/"+this.post_id])})}static#e=this.\u0275fac=function(r){return new(r||e)(B(ur),B($n),B(Ds),B(jB),B(ct),B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-edit-editor-post"]],decls:13,vars:4,consts:[["id","post_title_block"],["id","input_post_title","maxlength","300","required","","placeholder","Title",3,"input"],["id","character_count"],["id","container"],["id","editor"],[3,"init","onSelectionChange"],["id","btn_comment_block"],["id","btn_cancel_comment","type","button",3,"click"],["id","btn_edit_comment","type","button",3,"disabled","click"],[3,"txt_load",4,"ngIf"],[3,"txt_load"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"textarea",1),z("input",function(d){return i.inputTitle(d)}),D(),x(2,"span",2),L(3),D()(),x(4,"div",3)(5,"div",4)(6,"editor",5),z("onSelectionChange",function(d){return i.setContent(d)}),D()(),x(7,"div",6)(8,"button",7),z("click",function(){return i.cancelEdit()}),L(9,"Cancel"),D(),x(10,"button",8),z("click",function(){return i.editPost()}),L(11,"Edit"),D()()(),Pe(12,eJ,1,1,"loading",9)),2&r&&(k(3),at("",i.characterCount,"/300"),k(3),A("init",i.editorSettings),k(4),A("disabled",i.allowSubmit),k(2),A("ngIf",i.isLoad))},dependencies:[sn,De,Js],styles:["[_nghost-%COMP%]{--btn_width: 100px;--btn_height: 40px;display:flex;flex-direction:column;justify-content:center;align-items:center}#container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;position:relative}#editor[_ngcontent-%COMP%]{width:100%;height:auto;min-width:450px}#btn_comment_block[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:50px}#btn_comment_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100px;height:var(--btn_height);padding:0 20px;border-radius:20px;font-size:16px;color:var(--secondary_color)}#btn_cancel_comment[_ngcontent-%COMP%]{background-color:var(--primary_background_color);margin-right:20px;border:1px solid var(--secondary_color)}#btn_edit_comment[_ngcontent-%COMP%]{background-color:var(--select_btn);padding:0 30px}#post_title_block[_ngcontent-%COMP%]{align-self:center;width:100%;display:flex;flex-direction:column}#input_post_title[_ngcontent-%COMP%]{width:100%;height:30px;text-align:left;padding:5px 55px 8px 10px;border:1px solid var(--secondary_color);box-sizing:border-box;overflow:hidden;resize:none}#character_count[_ngcontent-%COMP%]{position:relative;bottom:22px;right:5px;align-self:flex-end;font-size:11px;font-weight:400;color:var(--icon)}"]})}return e})();function nJ(e,o){if(1&e){const t=We();x(0,"app-img-uploaded",17),z("deleteImgOutput",function(i){return ce(t),fe(q().deleteImg(i))})("selectImgOutput",function(i){return ce(t),fe(q().selectImg(i))}),D()}if(2&e){const t=o.$implicit,r=o.index,i=q();A("img",t.data)("id",r)("selected_id",i.selected_id)("arr",i.imgArr)}}function oJ(e,o){1&e&&Q(0,"loading",18),2&e&&A("txt_load","Edit post. Please wait")}const rJ=e=>({"justify-content":e}),gK=e=>({display:e});let sJ=(()=>{class e{constructor(t,r,i,l,d){this.getPostService=t,this.activeRoute=r,this.editPostService=i,this.storageService=l,this.route=d,this.post_id=0,this.imgArr=[],this.img=new f(""),this.selected_id=0,this.isImgUpload=!0,this.allowSubmit=!0,this.characterCount=0,this.edit_title="",this.edit_content="",this.original_title="",this.original_content="",this.isLoad=!1}ngOnInit(){const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.post_id=this.activeRoute.snapshot.params.post_id,this.getPostService.getDetailPostByUidAndPostId(t,this.post_id).subscribe({next:r=>{this.imgArr=JSON.parse(r.content),this.img=this.imgArr[this.imgArr.length-1],this.selected_id=this.imgArr.length-1;let i=document.getElementById("input_post_title");i.value=r.title,i.value=i.value.replace(/\r?\n|\r/g,""),i.style.height="auto",i.style.height=i.scrollHeight<30?"30px":`${i.scrollHeight}px`,this.edit_title=r.title,this.characterCount=r.title.length,this.original_title=r.title,this.original_content=r.content,this.AllowSubmit()},error:r=>{console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})}inputTitle(t){const r=t.target;r.value=r.value.replace(/(\r\n|\n|\r)/gm,""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,this.characterCount=r.value.length,""===r.value&&(r.style.height="30px",this.characterCount=0),this.edit_title=r.value,this.AllowSubmit()}AllowSubmit(){this.edit_content=JSON.stringify(this.imgArr),this.allowSubmit=!((this.original_title!=this.edit_title||this.original_content!=this.edit_content)&&this.edit_title.length>0&&this.imgArr.length>0)}onDrop(t){t.preventDefault(),t.stopPropagation();const i=t.dataTransfer.files;for(let d=0;d<i.length;d++)this.onImageUpload(i[d]);document.getElementById("post_img_block").style.border="none",this.AllowSubmit()}onDragEnter(t){console.log("drag"),t.preventDefault(),t.stopPropagation(),document.getElementById("post_img_block").style.border="2px dashed black"}onDragLeave(t){t.preventDefault(),t.stopPropagation(),document.getElementById("post_img_block").style.border="none"}upLoadImg(t){const i=t.target.files[0];this.selected_id=0,this.onImageUpload(i)}onImageUpload(t){const r=new FileReader;r.readAsDataURL(t),r.addEventListener("loadend",()=>{const i=r.result,d=((window.URL||window.webkitURL).createObjectURL(t),new f(i));console.log(d),this.imgArr.push(d),this.isImgUpload=!(this.imgArr.length<=1),this.img=d,this.selected_id=1===this.imgArr.length?-1:this.imgArr.length-1,this.AllowSubmit()}),this.AllowSubmit()}deleteImg(t){this.imgArr.splice(t,1),0===t&&0===this.imgArr.length?(this.img=new f(""),this.selected_id=-1,this.imgArr=[],this.isImgUpload=!1):t<=1&&1===this.imgArr.length?(this.img=new f(""),this.selected_id=-1,this.isImgUpload=!1):0===t&&this.imgArr.length>1?(this.img=this.imgArr[t],this.selected_id=t):(this.img=this.imgArr[t-1],this.selected_id=t-1),this.AllowSubmit()}selectImg(t){this.img=this.imgArr[t],this.selected_id=t}onInputChange(t){this.imgArr[this.selected_id]=t,this.AllowSubmit()}editPost(){Ne().fire({titleText:"Are you sure you want to edit this post",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{if(this.edit_content=JSON.stringify(this.imgArr),console.log(this.edit_content),t.isConfirmed){this.isLoad=!0;const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.editPostService.editPost("/edit-img-post","img",this.post_id,r,this.edit_title,this.edit_content).subscribe({next:i=>{this.isLoad=!1,Ne().fire("Edit post successfully","","success").then(l=>{l.isConfirmed&&this.route.navigate(["/post/"+this.post_id])})},error:i=>{this.isLoad=!1,Ne().fire("Fail to edit post. Please try again","","error")}})}})}cancelEdit(){Ne().fire({titleText:"Cancel edit post",text:"The new content will not be saved",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{t.isConfirmed&&this.route.navigate(["/post/"+this.post_id])})}static#e=this.\u0275fac=function(r){return new(r||e)(B(ur),B($n),B(jB),B(ct),B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-edit-img-post"]],decls:21,vars:14,consts:[["id","post_title_block"],["id","input_post_title","maxlength","300","required","","placeholder","Title",3,"input"],["id","character_count"],["id","post_img_block",3,"dragover","drop","dragenter","dragleave"],["id","upload_img_block",3,"ngStyle"],["id","txt_drag_and_drop",3,"ngStyle"],["id","img_uploaded_result"],[3,"img","id","selected_id","arr","deleteImgOutput","selectImgOutput",4,"ngFor","ngForOf"],["id","input_upload_img","type","file","accept","image/*",3,"change"],["input_img",""],["id","btn_upload_img","type","button",3,"click"],["src","../../assets/icon/upload.png",2,"width","50px","height","50px"],[3,"img","ngStyle","imgOutput"],["id","btn_comment_block"],["id","btn_cancel_comment","type","button",3,"click"],["id","btn_edit_comment","type","button",3,"disabled","click"],[3,"txt_load",4,"ngIf"],[3,"img","id","selected_id","arr","deleteImgOutput","selectImgOutput"],[3,"txt_load"]],template:function(r,i){if(1&r){const l=We();x(0,"div",0)(1,"textarea",1),z("input",function(p){return i.inputTitle(p)}),D(),x(2,"span",2),L(3),D()(),x(4,"div",3),z("dragover",function(p){return i.onDragEnter(p)})("drop",function(p){return i.onDrop(p)})("dragenter",function(p){return i.onDragEnter(p)})("dragleave",function(p){return i.onDragLeave(p)}),x(5,"div",4)(6,"pre",5),L(7,"  Drag and drop image or click the button "),D(),x(8,"div",6),Pe(9,nJ,1,4,"app-img-uploaded",7),x(10,"input",8,9),z("change",function(p){return i.upLoadImg(p)}),D(),x(12,"button",10),z("click",function(){return ce(l),fe(Gr(11).click())}),Q(13,"img",11),D()()(),x(14,"app-img-caption",12),z("imgOutput",function(p){return i.onInputChange(p)}),D()(),x(15,"div",13)(16,"button",14),z("click",function(){return i.cancelEdit()}),L(17,"Cancel"),D(),x(18,"button",15),z("click",function(){return i.editPost()}),L(19,"Edit"),D()(),Pe(20,oJ,1,1,"loading",16)}2&r&&(k(3),at("",i.characterCount,"/300"),k(2),A("ngStyle",ve(8,rJ,i.imgArr.length>0?"flex-start":"center")),k(1),A("ngStyle",ve(10,gK,i.imgArr.length>0?"none":"block")),k(3),A("ngForOf",i.imgArr),k(5),A("img",i.img)("ngStyle",ve(12,gK,i.imgArr.length>1?"block":"none")),k(4),A("disabled",i.allowSubmit),k(2),A("ngIf",i.isLoad))},dependencies:[Zr,sn,Eo,uo,Gt,Js],styles:["[_nghost-%COMP%]{--btn_width: 100px;--btn_height: 40px;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:var(--primary_background_color)!important}#post_img_block[_ngcontent-%COMP%]{height:auto;min-height:20vh;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:var(--primary_background_color)!important;border:1px solid var(--icon)}#post_img_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(button){width:100%;height:100%}#upload_img_block[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;margin:10px 0 0}#img_uploaded_result[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:auto}#input_upload_img[_ngcontent-%COMP%]{width:0px;height:0px;display:none}#btn_upload_img[_ngcontent-%COMP%]{width:100px;height:100px;display:inline-block;background-color:var(--primary_background_color);border:2px dashed var(--icon);border-radius:5px;vertical-align:bottom;margin-left:10px;margin-right:20px;margin-bottom:10px}#btn_comment_block[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:50px}#btn_comment_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100px;height:var(--btn_height);border-radius:20px;font-size:16px}#btn_cancel_comment[_ngcontent-%COMP%]{background-color:var(--search);margin-right:20px;border:1px solid var(--icon);color:var(--icon)}#btn_edit_comment[_ngcontent-%COMP%]{background-color:var(--select_btn);color:var(--icon);border:1px solid var(--icon)}#post_title_block[_ngcontent-%COMP%]{align-self:center;width:100%;display:flex;flex-direction:column}#input_post_title[_ngcontent-%COMP%]{width:100%;height:30px;text-align:left;padding:5px 55px 8px 10px;border:1px solid var(--secondary_color);box-sizing:border-box;overflow:hidden;resize:none}#character_count[_ngcontent-%COMP%]{position:relative;bottom:22px;right:5px;align-self:flex-end;font-size:11px;font-weight:400;color:var(--icon)}"]})}return e})();function iJ(e,o){1&e&&Q(0,"loading",9),2&e&&A("txt_load","Edit post. Please wait")}let aJ=(()=>{class e{constructor(t,r,i,l,d){this.getPostService=t,this.activeRoute=r,this.editPostService=i,this.storageService=l,this.route=d,this.post_id=0,this.edit_title="",this.edit_content="",this.characterCount=0,this.original_title="",this.original_content="",this.allowSubmit=!1,this.isLoad=!1}ngOnInit(){const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.post_id=this.activeRoute.snapshot.params.post_id,this.getPostService.getDetailPostByUidAndPostId(t,this.post_id).subscribe({next:r=>{let i=document.getElementById("input_post_title");i.value=r.title,i.value=i.value.replace(/\r?\n|\r/g,""),i.style.height="auto",i.style.height=i.scrollHeight<30?"30px":`${i.scrollHeight}px`,this.data=JSON.parse(r.content),this.original_title=r.title,this.original_content=this.data.link,this.edit_title=r.title,this.edit_content=this.data.link,this.characterCount=r.title.length,this.AllowSubmit()},error:r=>{console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})}inputTitle(t){const r=t.target;r.value=r.value.replace(/(\r\n|\n|\r)/gm,""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,this.characterCount=r.value.length,""===r.value&&(r.style.height="30px",this.characterCount=0),this.edit_title=r.value,this.AllowSubmit()}AllowSubmit(){this.allowSubmit=!((this.original_title!==this.edit_title||this.original_content!==this.edit_content)&&0!==this.edit_title.length&&0!==this.edit_content.length)}inputLink(t){const r=t.target;r.value=r.value.replace(/(\r\n|\n|\r)/gm,""),r.value=r.value.replace(" ",""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,""===r.value&&(r.style.height="40px"),this.edit_content=r.value,this.AllowSubmit(),this.isValidHttpUrl(r.value)}isValidHttpUrl(t){try{const r=new URL(t);this.allowSubmit=!("http:"===r.protocol||"https:"===r.protocol),console.log(r.protocol)}catch{this.allowSubmit=!0}}editPost(){Ne().fire({titleText:"Are you sure you want to edit this post",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{if(t.isConfirmed){this.isLoad=!0;const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.editPostService.editPost("/edit-link-post","link",this.post_id,r,this.edit_title,this.edit_content).subscribe({next:i=>{this.isLoad=!1,Ne().fire("Edit post successfully","","success").then(l=>{l.isConfirmed&&this.route.navigate(["/post/"+this.post_id])})},error:i=>{this.isLoad=!1,Ne().fire("Fail to edit post. Please try again","","error")}})}})}cancelEdit(){Ne().fire({titleText:"Cancel edit post",text:"The new content will not be saved",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{t.isConfirmed&&this.route.navigate(["/post/"+this.post_id])})}static#e=this.\u0275fac=function(r){return new(r||e)(B(ur),B($n),B(jB),B(ct),B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-edit-link-post"]],decls:12,vars:5,consts:[["id","post_title_block"],["id","input_post_title","maxlength","300","required","","placeholder","Title",3,"value","input"],["id","character_count"],["id","post_link_block"],["placeholder","Enter a full link start with http or https",3,"value","input"],["id","btn_comment_block"],["id","btn_cancel_comment","type","button",3,"click"],["id","btn_edit_comment","type","button",3,"disabled","click"],[3,"txt_load",4,"ngIf"],[3,"txt_load"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"textarea",1),z("input",function(d){return i.inputTitle(d)}),D(),x(2,"span",2),L(3),D()(),x(4,"div",3)(5,"textarea",4),z("input",function(d){return i.inputLink(d)}),D()(),x(6,"div",5)(7,"button",6),z("click",function(){return i.cancelEdit()}),L(8,"Cancel"),D(),x(9,"button",7),z("click",function(){return i.editPost()}),L(10,"Edit"),D()(),Pe(11,iJ,1,1,"loading",8)),2&r&&(k(1),A("value",i.edit_title),k(2),at("",i.characterCount,"/300"),k(2),A("value",i.edit_content),k(4),A("disabled",i.allowSubmit),k(2),A("ngIf",i.isLoad))},dependencies:[sn,Js],styles:["[_nghost-%COMP%]{--btn_width: 100px;--btn_height: 40px;display:flex;flex-direction:column;justify-content:center;align-items:center}#post_title_block[_ngcontent-%COMP%]{align-self:center;width:100%;display:flex;flex-direction:column}#input_post_title[_ngcontent-%COMP%]{width:100%;height:30px;text-align:left;padding:5px 55px 8px 10px;border:1px solid var(--border);box-sizing:border-box;overflow:hidden;resize:none}#character_count[_ngcontent-%COMP%]{position:relative;bottom:22px;right:5px;align-self:flex-end;font-size:11px;font-weight:400;color:var(--icon)}#post_link_block[_ngcontent-%COMP%]{height:auto;width:100%}#post_link_block[_ngcontent-%COMP%] > textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid var(--border);overflow:hidden}#btn_comment_block[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:50px}#btn_comment_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100px;height:var(--btn_height);border-radius:20px;font-size:16px;color:var(--secondary_color);border:1px solid var(--secondary_color)}#btn_cancel_comment[_ngcontent-%COMP%]{background-color:var(--search);margin-right:20px;color:var(--icon)}#btn_edit_comment[_ngcontent-%COMP%]{background-color:var(--select_btn);color:var(--icon)}"]})}return e})();function cJ(e,o){1&e&&Q(0,"loading",17),2&e&&A("txt_load","Edit post. Please wait")}const lJ=e=>({"background-color":e}),L9=e=>({display:e});let uJ=(()=>{class e{constructor(t,r,i,l,d){this.getPostService=t,this.activeRoute=r,this.editPostService=i,this.storageService=l,this.route=d,this.post_id=0,this.edit_title="",this.edit_content="",this.characterCount=0,this.original_title="",this.original_content="",this.allowSubmit=!1,this.isLoad=!1}ngOnInit(){const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.post_id=this.activeRoute.snapshot.params.post_id,this.getPostService.getDetailPostByUidAndPostId(t,this.post_id).subscribe({next:r=>{let i=document.getElementById("input_post_title");i.value=r.title,i.value=i.value.replace(/\r?\n|\r/g,""),i.style.height="auto",i.style.height=i.scrollHeight<30?"30px":`${i.scrollHeight}px`,this.original_title=r.title,this.original_content=r.content,this.edit_title=r.title,this.edit_content=r.content,this.characterCount=r.title.length,this.AllowSubmit()},error:r=>{Ne().fire("Error edit post. Plase try again","","error")}})}inputTitle(t){const r=t.target;r.value=r.value.replace(/(\r\n|\n|\r)/gm,""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,this.characterCount=r.value.length,""===r.value&&(r.style.height="30px",this.characterCount=0),this.edit_title=r.value,this.AllowSubmit()}AllowSubmit(){this.allowSubmit=!((this.original_title!==this.edit_title||this.original_content!==this.edit_content)&&0!==this.edit_title.length&&0!==this.edit_content.length)}onVideoUpload(t){const r=t.target.files,i=new FileReader;i.readAsDataURL(r[0]),i.addEventListener("loadend",()=>{const l=i.result;l.length>67e5?(Ne().fire("Maximum video size is 5MB","","warning"),this.AllowSubmit()):(this.edit_content=l,this.AllowSubmit())})}deleteVideo(){this.edit_content="",document.getElementById("input_upload_video").value="",this.AllowSubmit()}editPost(){Ne().fire({titleText:"Are you sure you want to edit this post",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{if(t.isConfirmed){this.isLoad=!0;const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.editPostService.editPost("/edit-video-post","video",this.post_id,r,this.edit_title,this.edit_content).subscribe({next:i=>{this.isLoad=!1,Ne().fire("Edit post successfully","","success").then(l=>{l.isConfirmed&&this.route.navigate(["/post/"+this.post_id])})},error:i=>{this.isLoad=!1,Ne().fire("Fail to edit post. Please try again","","error")}})}})}cancelEdit(){Ne().fire({titleText:"Cancel edit post",text:"The new content will not be saved",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{t.isConfirmed&&this.route.navigate(["/post/"+this.post_id])})}static#e=this.\u0275fac=function(r){return new(r||e)(B(ur),B($n),B(jB),B(ct),B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-edit-video-view"]],decls:21,vars:17,consts:[["id","post_title_block"],["id","input_post_title","maxlength","300","required","","placeholder","Title",3,"value","input"],["id","character_count"],["id","post_video_block",3,"ngStyle"],["id","input_upload_video","type","file","accept",".mp4, .mov, .wmv, .WebM",3,"change"],["input_video",""],[2,"margin-right","10px","color","var(--icon)",3,"ngStyle"],["id","btn_upload_video","type","button",3,"ngStyle","click"],["src","../../assets/icon/upload.png",2,"width","50px","height","50px"],["id","video_block",3,"ngStyle"],["preload","none","poster","","controls","true","disablepictureinpicture","true",3,"src"],["id","btn_delete_video","type","button","title","Delete video",3,"click"],[1,"pi","pi-trash"],["id","btn_comment_block"],["id","btn_cancel_comment","type","button",3,"click"],["id","btn_edit_comment","type","button",3,"disabled","click"],[3,"txt_load",4,"ngIf"],[3,"txt_load"]],template:function(r,i){if(1&r){const l=We();x(0,"div",0)(1,"textarea",1),z("input",function(p){return i.inputTitle(p)}),D(),x(2,"span",2),L(3),D()(),x(4,"div",3)(5,"input",4,5),z("change",function(p){return i.onVideoUpload(p)}),D(),x(7,"p",6),L(8,"Click button to upload video"),D(),x(9,"button",7),z("click",function(){return ce(l),fe(Gr(6).click())}),Q(10,"img",8),D(),x(11,"div",9),Q(12,"video",10),x(13,"button",11),z("click",function(){return i.deleteVideo()}),Q(14,"i",12),D()()(),x(15,"div",13)(16,"button",14),z("click",function(){return i.cancelEdit()}),L(17,"Cancel"),D(),x(18,"button",15),z("click",function(){return i.editPost()}),L(19,"Edit"),D()(),Pe(20,cJ,1,1,"loading",16)}2&r&&(k(1),A("value",i.edit_title),k(2),at("",i.characterCount,"/300"),k(1),A("ngStyle",ve(9,lJ,0==i.edit_content.length?"var(--neutral)":"transparent")),k(3),A("ngStyle",ve(11,L9,0==i.edit_content.length?"block":"none")),k(2),A("ngStyle",ve(13,L9,0==i.edit_content.length?"block":"none")),k(2),A("ngStyle",ve(15,L9,i.edit_content.length>0?"block":"none")),k(1),Ot("src",i.edit_content,Qe),k(6),A("disabled",i.allowSubmit),k(2),A("ngIf",i.isLoad))},dependencies:[sn,Eo,Js],styles:["[_nghost-%COMP%]{--btn_width: 100px;--btn_height: 40px;display:flex;flex-direction:column;justify-content:flex-start;align-items:center}#post_title_block[_ngcontent-%COMP%]{align-self:center;width:100%;display:flex;flex-direction:column}#input_post_title[_ngcontent-%COMP%]{width:100%;height:30px;text-align:left;padding:5px 55px 8px 10px;border:1px solid var(--border);box-sizing:border-box;overflow:hidden;resize:none}#character_count[_ngcontent-%COMP%]{position:relative;bottom:22px;right:5px;align-self:flex-end;font-size:11px;font-weight:400;color:var(--icon)}#post_video_block[_ngcontent-%COMP%]{min-height:25vh;height:auto;width:100%;background-color:var(--primary_background_color)!important;display:flex;flex-direction:row;justify-content:center;align-items:center;border:1px solid var(--border)}#input_upload_video[_ngcontent-%COMP%]{width:0px;height:0px;display:none}#video_block[_ngcontent-%COMP%]{position:relative;width:100%}video[_ngcontent-%COMP%]{width:100%;height:35vh;min-height:350px;background-color:#000}#btn_upload_video[_ngcontent-%COMP%]{width:100px;height:100px;background-color:var(--primary_background_color);border:2px dashed var(--icon);border-radius:5px}#btn_delete_video[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;justify-content:center;align-items:center;border-radius:50%;position:absolute;top:10px;right:10px;background-color:transparent;color:var(--icon)}#btn_delete_video[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)}#btn_delete_video[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff}#btn_comment_block[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:50px}#btn_comment_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:var(--btn_width);height:var(--btn_height);border-radius:20px;font-size:16px;color:var(--secondary_color);border:1px solid var(--secondary_color)}#btn_cancel_comment[_ngcontent-%COMP%]{background-color:var(--search);margin-right:20px;color:var(--icon)}#btn_edit_comment[_ngcontent-%COMP%]{background-color:var(--select_btn);color:var(--icon)}"]})}return e})();function dJ(e,o){if(1&e){const t=We();x(0,"button",12),z("click",function(){return ce(t),fe(q().deletePost())}),Q(1,"i",13),x(2,"pre"),L(3," Delete"),D()()}}function fJ(e,o){1&e&&Q(0,"app-edit-editor-post")}function hJ(e,o){1&e&&Q(0,"app-edit-img-post")}function pJ(e,o){1&e&&Q(0,"app-edit-link-post")}function mJ(e,o){1&e&&Q(0,"app-edit-video-view")}let gJ=(()=>{class e{constructor(t,r,i,l,d,p){this.getPostService=t,this.activeRoute=r,this.route=i,this.deletePostService=l,this.storageService=d,this.dateTimeService=p,this.postData=new _a,this.post_type="",this.post_id=0,this.community_id=0}ngOnInit(){this.post_id=this.activeRoute.snapshot.params.post_id;const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.getPostService.getDetailPostByUidAndPostId(t,this.post_id).subscribe({next:r=>{this.postData=r,this.post_type=r.type,this.community_id=r.community_id},error:r=>{console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})}deletePost(){Ne().fire({titleText:"Are you sure you want to delete this post",icon:"warning",heightAuto:!0,showCancelButton:!0,showConfirmButton:!0,focusCancel:!1,focusConfirm:!1}).then(t=>{if(t.isConfirmed){const r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.deletePostService.deletePost(this.post_id,r,1).subscribe({next:i=>{Ne().fire("Delete post successfully","","success").then(l=>{l.isConfirmed&&(window.location.href="r/"+this.community_id)})},error:i=>{Ne().fire("Error delete post. Please try again","","error")}})}})}navigateToCommunity(){window.location.href="/r/"+this.postData.community_id}static#e=this.\u0275fac=function(r){return new(r||e)(B(ur),B($n),B(Vt),B(Sm),B(ct),B(Ds))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-edit-post"]],decls:20,vars:11,consts:[["id","community_bar"],["id","community_block"],["id","community_link",3,"href"],["id","community_icon","alt","community_icon",3,"src"],["id","link_date_block"],["id","community_name",2,"font-weight","bold","color","var(--icon)",3,"click"],[2,"font-weight","bold"],[2,"font-size","13px","color","var(--txt)"],["id","username",2,"font-size","15px",3,"href"],["id","btn_delete",3,"click",4,"ngIf"],["id","edit_block"],[4,"ngIf"],["id","btn_delete",3,"click"],[1,"pi","pi-trash"]],template:function(r,i){1&r&&(x(0,"nav",0)(1,"div",1),Q(2,"back-button"),x(3,"a",2),Q(4,"img",3),D(),x(5,"div",4)(6,"span",5),z("click",function(){return i.navigateToCommunity()}),L(7),D(),x(8,"i",6),L(9,"\xb7"),D(),x(10,"span",7),L(11),D()(),x(12,"a",8),L(13),D(),Pe(14,dJ,4,0,"button",9),D()(),x(15,"div",10),Pe(16,fJ,1,0,"app-edit-editor-post",11)(17,hJ,1,0,"app-edit-img-post",11)(18,pJ,1,0,"app-edit-link-post",11)(19,mJ,1,0,"app-edit-video-view",11),D()),2&r&&(k(3),In("href","/r/",i.postData.community_id,"",Qe),k(1),Ot("src",i.postData.community_icon,Qe),k(3),at("r/",i.postData.community_name," "),k(4),at(" ",i.dateTimeService.getTimeByCompareCreatedAtAndCurrentDate(i.postData.created_at),""),k(1),In("href","/user/",i.postData.username,"",Qe),k(1),ht(i.postData.username),k(1),A("ngIf",!0),k(2),A("ngIf","editor"===i.post_type),k(1),A("ngIf","img"===i.post_type),k(1),A("ngIf","link"===i.post_type),k(1),A("ngIf","video"===i.post_type))},dependencies:[sn,tJ,sJ,aJ,uJ,xv],styles:["[_nghost-%COMP%]{--community_icon: 35px}#community_bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:auto;height:var(--post-header-height);position:relative}#community_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}#community_link[_ngcontent-%COMP%]{margin-left:10px}#community_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], #community_link[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:5px}#link_date_block[_ngcontent-%COMP%]{align-self:flex-start}#community_link[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}#community_icon[_ngcontent-%COMP%]{width:var(--community_icon);height:var(--community_icon);border-radius:50%}#community_name[_ngcontent-%COMP%]:hover{cursor:pointer}#username[_ngcontent-%COMP%]{position:absolute;top:15px;left:95px;color:var(--secondary_color)!important}#btn_delete[_ngcontent-%COMP%]{height:100%;position:absolute;width:auto;right:0;border-radius:10px;padding:0 10px;background-color:var(--delete);display:flex;flex-direction:row;justify-content:center;align-items:center;color:var(--secondary_color)}#btn_delete[_ngcontent-%COMP%]:hover{background-color:var(--neutral)}#edit_block[_ngcontent-%COMP%]{margin-top:20px}#btn_comment_block[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:50px}#btn_comment_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:var(--btn_width);height:var(--btn_height);border-radius:5px;font-size:large}#btn_cancel_comment[_ngcontent-%COMP%]{background-color:#a9bebe;margin-right:20px}#btn_edit_comment[_ngcontent-%COMP%]{background-color:#2747a7}"]})}return e})();class _J{constructor(o,t,r,i,l,d){this.community_id=o,this.uid=t,this.description=r,this.avatar=i,this.banner=l,this.scope=d}}let vJ=(()=>{class e{constructor(t,r,i){this.postService=t,this.storageService=r,this.checkRefreshToken=i,this.endpoint="/edit-community"}editCommunity(t,r,i,l,d,p){this.checkRefreshToken.runCheckRefreshToken();const m=new _J(t,r,i,l,d,p),v=JSON.stringify(m);let w=new et;return w=w.append("Accept","application/json"),w=w.append("Content-Type","application/json"),this.postService.post(this.endpoint,w,v,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(ct),ie(Rn))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function yJ(e,o){if(1&e){const t=We();x(0,"div",4)(1,"button",5)(2,"i",6),z("click",function(){return ce(t),fe(q().goBack())}),D()(),x(3,"div",7)(4,"h2",8),L(5),D()(),Q(6,"input",9,10),x(8,"div",11)(9,"textarea",12),z("input",function(i){return ce(t),fe(q().onInputDescription(i))}),D(),x(10,"span",13),L(11),D()(),x(12,"input",14,15),z("change",function(i){return ce(t),fe(q().upLoadImg(i))}),D(),x(14,"div",16)(15,"div",17),Q(16,"img",18),D(),x(17,"button",19),z("click",function(){return ce(t),fe(Gr(13).click())}),L(18,"Upload your community avatar"),D()(),x(19,"input",20,21),z("change",function(i){return ce(t),fe(q().upLoadBanner(i))}),D(),x(21,"div",22)(22,"div",23),Q(23,"img",24),D(),x(24,"button",25),z("click",function(){return ce(t),fe(Gr(20).click())}),L(25,"Upload your community banner"),D()(),x(26,"div",26)(27,"b",27),L(28,"Select your community scope"),D(),x(29,"div",28)(30,"input",29),z("click",function(){return ce(t),fe(q().selectScope(0))}),D(),x(31,"label",30)(32,"p")(33,"b"),L(34,"Public"),D(),L(35," (Everyone can post)"),D()()(),x(36,"div",28)(37,"input",31),z("click",function(){return ce(t),fe(q().selectScope(1))}),D(),x(38,"label",32)(39,"p")(40,"b"),L(41,"Protected"),D(),L(42," (Moderator need to accept post before it can be view)"),D()()()(),x(43,"div",33)(44,"div",34)(45,"button",35),z("click",function(){return ce(t),fe(q().cancel())}),L(46,"Cancel"),D(),x(47,"button",36),z("click",function(){return ce(t),fe(q().submit())}),x(48,"p"),L(49),D()()()(),x(50,"button",37),z("click",function(){return ce(t),fe(q().deleteCommunity())}),L(51,"Delete community"),D()()}if(2&e){const t=Gr(7),r=q();k(5),at("Edit community r/",r.communityInfo.name,""),k(1),A("disabled",!0)("value",r.communityInfo.name),k(3),A("value",r.communityInfo.description),k(2),at("",r.characterCount,"/300"),k(5),A("src",r.avatar_url,Qe),k(7),A("src",r.banner_url,Qe),k(24),A("disabled",!r.allowSubmit),k(2),at("Edit r/",t.value,"")}}function bJ(e,o){1&e&&(x(0,"div")(1,"h2"),L(2,"Permission denied"),D()())}function wJ(e,o){1&e&&Q(0,"loading",38),2&e&&A("txt_load","Edit community info. Please wait")}let CJ=(()=>{class e{constructor(t,r,i,l){this.storageService=t,this.editCommunityService=r,this.communityService=i,this.route=l,this.communityInfo=new h(0,"",0,"","",0,"","",0,0),this.name_status="INVALID",this.characterCount=0,this.description="",this.avatar_url="",this.banner_url="",this.allowSubmit=!1,this.isNameTaken=!1,this.community_id=0,this.scope=0,this.isOwner=!0,this.isLoad=!1}ngOnInit(){const t=""===this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));let r=window.location.href.match("community/([[0-9]+)");null!=r&&(this.community_id=Number.parseInt(r[1]),this.communityService.getCommunityInfoById(this.community_id.toString()).subscribe({next:i=>{this.communityInfo=i,this.description=i.description,this.avatar_url=i.avatar,this.banner_url=i.banner,this.scope=i.scope,this.characterCount=this.description.length,this.isOwner=t==i.uid,document.getElementById(0===this.scope?"public":"protect").checked=!0;const p=document.getElementById("input_post_title");p.value=i.description,p.style.height=`${p.scrollHeight}px`}}))}AllowSubmit(){this.allowSubmit=this.description.length>0&&0!=this.avatar_url.length}onInputDescription(t){const r=t.target;r.value=r.value.replace(/(\r\n|\n|\r)/gm,""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,this.characterCount=r.value.length,""===r.value&&(r.style.height="48px",this.characterCount=0),this.description=r.value,this.AllowSubmit()}upLoadImg(t){this.onImageUpload(t.target.files[0])}onImageUpload(t){const r=new FileReader;r.readAsDataURL(t),r.addEventListener("loadend",()=>{this.avatar_url=r.result,this.AllowSubmit()})}upLoadBanner(t){this.onBannerUpload(t.target.files[0])}onBannerUpload(t){const r=new FileReader;r.readAsDataURL(t),r.addEventListener("loadend",()=>{this.banner_url=r.result,this.AllowSubmit()})}selectScope(t){this.scope=t,this.AllowSubmit()}cancel(){Ne().fire({title:"Are you sure you want to cancel? All the change will be lost",showCancelButton:!0,confirmButtonText:"OK",denyButtonText:"Continue edit"}).then(t=>{t.isConfirmed&&window.history.back()})}submit(){this.isLoad=!0;const t=""===this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.editCommunityService.editCommunity(this.community_id,t,this.description,this.avatar_url,this.banner_url,this.scope).subscribe({next:r=>{this.isNameTaken=!1,this.isLoad=!1,Ne().fire("Edit community successfully","","success").then(i=>{i.isConfirmed&&(window.location.href="/r/"+this.community_id)})},error:r=>{this.isLoad=!1,1==r.error.error_code&&(this.isNameTaken=!0)}})}deleteCommunity(){Ne().fire({title:"Are you sure you want to permantly delete community\n r/"+this.communityInfo.name,text:"All posts and comments in this community will be deleted forever!!!",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",denyButtonText:"Cancel"}).then(t=>{t.isConfirmed&&this.communityService.deleteCommunity(this.communityInfo.id,this.communityInfo.uid,1).subscribe({next:r=>{Ne().fire("delete community successfully","","success").then(i=>{window.location.href="/home"})}})})}goBack(){window.history.back()}static#e=this.\u0275fac=function(r){return new(r||e)(B(ct),B(vJ),B(Pr),B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-edit-community"]],decls:5,vars:3,consts:[["id","container"],["id","form",4,"ngIf"],[4,"ngIf"],[3,"txt_load",4,"ngIf"],["id","form"],["id","btn_back"],["title","back",1,"pi","pi-arrow-left",3,"click"],["id","header"],[2,"width","100%","; text-align","center","color","var(--secondary_color)"],["id","input_name","type","text","placeholder","Name","maxlength","21",3,"disabled","value"],["community_name",""],["id","post_title_block"],["id","input_post_title","maxlength","300","required","","placeholder","Enter description for your community",3,"value","input"],["id","character_count"],["id","input_upload_img","type","file","accept","image/*",3,"change"],["input_img",""],["id","upload_img_container"],["id","avatar_container"],["id","avatar_display",3,"src"],["id","btn_upload_img","type","button",3,"click"],["id","input_upload_banner","type","file","accept","image/*",3,"change"],["input_banner",""],["id","upload_banner_container"],["id","banner_container"],["id","banner_display",3,"src"],["id","btn_upload_banner","type","button",3,"click"],["id","scope_block"],[2,"font-size","20px"],[1,"radio_block"],["id","public","type","radio","name","scope","value","0",3,"click"],["for","public"],["id","protect","type","radio","name","scope","value","1",3,"click"],["for","protect"],["id","btn_block"],["id","button_container"],["id","btn_cancel","type","button",3,"click"],["id","btn_submit","type","submit",3,"disabled","click"],["id","btn_delete",3,"click"],[3,"txt_load"]],template:function(r,i){1&r&&(x(0,"div",0),Pe(1,yJ,52,9,"div",1)(2,bJ,3,0,"div",2),D(),Pe(3,wJ,1,1,"loading",3),L(4,">\n")),2&r&&(k(1),A("ngIf",i.isOwner),k(1),A("ngIf",!i.isOwner),k(1),A("ngIf",i.isLoad))},dependencies:[sn,Js],styles:["[_nghost-%COMP%]{--avatar_width: 100px;--banner_width: 100%}#container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px}#header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start;align-items:center}#header_icon[_ngcontent-%COMP%], #btn_close[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%}#btn_close[_ngcontent-%COMP%], #btn_close[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%}#btn_close[_ngcontent-%COMP%]{position:absolute;top:20px;right:10px}#form[_ngcontent-%COMP%]{width:100%;min-width:450px;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:20px 10px;position:relative}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:5px;border:1px solid var(--border);padding-left:10px;margin-top:10px;background-color:var(--primary_background_color)!important;color:var(--icon)}textarea[_ngcontent-%COMP%]:focus{border:1px solid var(--secondary_color)}#input_name[_ngcontent-%COMP%]:hover{cursor:not-allowed}#post_title_block[_ngcontent-%COMP%]{align-self:center;width:100%;display:flex;flex-direction:column;margin-top:10px}#input_post_title[_ngcontent-%COMP%]{width:100%;height:48px;text-align:left;padding:5px 55px 8px 10px;box-sizing:border-box;overflow:hidden;resize:none}#character_count[_ngcontent-%COMP%]{position:relative;bottom:22px;right:5px;align-self:flex-end;font-size:11px;font-weight:400;color:var(--icon)}#input_upload_img[_ngcontent-%COMP%], #input_upload_banner[_ngcontent-%COMP%]{width:0px;height:0px;display:none}#btn_upload_img[_ngcontent-%COMP%], #btn_upload_banner[_ngcontent-%COMP%]{width:auto;height:40px;padding:0 20px;text-align:center;display:inline-block;background-color:var(--allow);border:1px solid var(--border);border-radius:20px;vertical-align:bottom;margin:10px 0 30px;color:var(--icon)}#upload_img_container[_ngcontent-%COMP%], #upload_banner_container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:column;justify-content:center;align-items:center}#scope_block[_ngcontent-%COMP%]{width:100%;height:auto;padding:10px}#scope_block[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--icon)}.radio_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-top:10px;width:100%}.radio_block[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:15px;height:15px;margin:0}.radio_block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{word-wrap:break-word;margin-left:10px}#avatar_container[_ngcontent-%COMP%]{width:calc(var(--avatar_width) + 5px);aspect-ratio:1/1;border:4px solid var(--border);border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#000c;margin-top:10px}#avatar_display[_ngcontent-%COMP%]{width:var(--avatar_width);aspect-ratio:1/1;border-radius:50%}#banner_container[_ngcontent-%COMP%]{width:calc(var(--banner_width));height:100px;display:flex;flex-direction:column;justify-content:center;align-items:center;border:3px solid var(--border)}#banner_display[_ngcontent-%COMP%]{width:100%;height:100%}#btn_block[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:flex-end;margin-top:40px}#button_container[_ngcontent-%COMP%]{width:auto;display:flex;flex-direction:row;justify-content:center;align-items:center}#btn_cancel[_ngcontent-%COMP%]{width:auto;height:40px;padding:0 20px;margin-right:20px;font-size:16px;border-radius:20px;background-color:var(--search);border:1px solid var(--border);color:var(--icon)}#btn_submit[_ngcontent-%COMP%]{width:auto;height:40px;background-color:var(--allow);align-self:flex-end;padding:0 20px;font-size:16px;border-radius:20px;border:1px solid var(--border);color:var(--icon)}#btn_delete[_ngcontent-%COMP%]{width:100%;height:60px;margin-top:50px;border-radius:40px;border:2px solid var(--border);background-color:var(--delete);font-size:22px;color:var(--icon)}#btn_back[_ngcontent-%COMP%]{width:35px;aspect-ratio:1/1;background-color:var(--search);border-radius:50%;display:flex;justify-content:center;align-items:center;color:var(--icon)}#btn_back[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:20px;color:var(--icon)}#btn_back[_ngcontent-%COMP%]:hover{cursor:pointer}"]})}return e})();function SJ(e,o){if(1&e&&(x(0,"div",13),Q(1,"img",5),D()),2&e){const t=q();k(1),Ot("src",t.img,Qe)}}const xJ=e=>({width:e});let PJ=(()=>{class e{constructor(t,r,i,l,d,p){this.router=t,this.storageService=r,this.dateTimeService=i,this.getCommentService=l,this.presentationService=d,this.shareDataService=p,this.voteType="none",this.shownDate="",this.comment_count=0,this.img="",this.showCount=0}ngOnInit(){this.shownDate=this.dateTimeService.getTimeByCompareCreatedAtAndCurrentDate(this.post.created_at),""==this.storageService.getItem("uid")||Number.parseInt(this.storageService.getItem("uid")),this.getCommentService.getComments(this.post.post_id).subscribe({next:r=>{this.comment_count=r.length}})}ngOnChanges(){if("link"==this.post.type&&(this.img=JSON.parse(this.post.content).image),"img"==this.post.type&&(this.img=JSON.parse(this.post.content)[0].data),"editor"==this.post.type){const t=this.post.content.match('src="([^"]*)"');this.img=t?t[1]:""}}navigateToPostView(){this.shareDataService.setSearchPostsCurViewPostId(this.post.post_id),this.router.navigate(["/post/"+this.post.post_id])}navigateToCommunity(t){t.stopPropagation(),this.router.navigate(["/r/"+this.post.community_id])}stopPropagation(t){t.stopPropagation()}onIntersection({}){}static#e=this.\u0275fac=function(r){return new(r||e)(B(Vt),B(ct),B(Ds),B(Ri),B(va),B(Er))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-search-post-view"]],inputs:{post:"post"},features:[Ho],decls:23,vars:10,consts:[["id","block",3,"click"],["id","post_block"],["id","info_lock",3,"ngStyle"],["id","community_block"],[3,"click"],[3,"src"],[2,"margin-left","5px"],[2,"color","var(--txt)","font-size","13px"],[1,"content_block"],[1,"txt_title"],["id","vote_block"],[2,"font-size","13px","color","var(--txt) !important"],["id","img_block",4,"ngIf"],["id","img_block"]],template:function(r,i){1&r&&(x(0,"nav",0),z("click",function(){return i.navigateToPostView()}),x(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),z("click",function(d){return i.navigateToCommunity(d)}),Q(5,"img",5),x(6,"p",6),L(7),D(),x(8,"pre"),L(9," \xb7 "),D(),x(10,"p",7),L(11),D()()(),x(12,"div",8)(13,"p",9),L(14),D(),x(15,"div",10)(16,"p",11),L(17),D(),x(18,"pre"),L(19," \xb7 "),D(),x(20,"p",11),L(21),D()()()(),Pe(22,SJ,2,1,"div",12),D()()),2&r&&(k(2),A("ngStyle",ve(8,xJ,0!=i.img.length?"70%":"auto")),k(3),Ot("src",i.post.community_icon,Qe),k(2),at("r/",i.post.community_name,""),k(4),ht(i.shownDate),k(3),ht(i.post.title),k(3),at("",i.presentationService.transformNumber(i.post.vote)," votes"),k(4),at("",i.presentationService.transformNumber(i.comment_count)," comments"),k(1),A("ngIf",0!=i.img.length))},dependencies:[sn,Eo],styles:["a[_ngcontent-%COMP%]{display:block;width:auto}a[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}#block[_ngcontent-%COMP%]{width:100%;height:auto;padding:10px;border-bottom:1px solid var(--border)}#block[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--icon)}#block[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover);cursor:pointer}#post_block[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;justify-content:space-between;position:relative}#info_lock[_ngcontent-%COMP%]{width:70%;align-items:stretch;height:auto;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start}.txt_title[_ngcontent-%COMP%]{width:100%;height:auto;margin-top:7px;font-size:17px;font-weight:600}#community_block[_ngcontent-%COMP%]{width:auto;height:25px}#community_block[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{width:auto;height:100%;text-decoration:none}#community_block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%}#community_block[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;font-size:14px}.content_block[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start}#img_block[_ngcontent-%COMP%]{width:150px;height:auto;aspect-ratio:6/4;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-left:10px}#img_block[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px}#vote_block[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;align-items:center;justify-content:flex-start}"]})}return e})();function EJ(e,o){1&e&&Q(0,"hr",4)}function kJ(e,o){if(1&e){const t=We();x(0,"div",5),z("click",function(i){const d=ce(t).$implicit;return fe(q().navigateToCommunity(i,d.id))}),x(1,"div",6),Q(2,"img",7),x(3,"div",8)(4,"h3"),L(5),D(),x(6,"p",9),L(7),D()()(),x(8,"p",10),L(9),D()()}if(2&e){const t=o.$implicit,r=q();k(2),Ot("src",t.avatar,Qe),k(3),at("r/",t.name,""),k(2),at("",r.presentationService.transformNumber(t.subscriber_count)," members"),k(2),ht(t.description)}}function DJ(e,o){1&e&&(x(0,"div",11),Q(1,"img",12)(2,"div",13),D())}function TJ(e,o){1&e&&(x(0,"div",14)(1,"p"),L(2,"No communities found"),D()())}let MJ=(()=>{class e{constructor(t,r,i){this.communityService=t,this.activeRoute=r,this.presentationService=i,this.communities=[],this.search_text="",this.isDataLoad=!1,this.wait=!1}ngOnInit(){this.search_text=this.activeRoute.snapshot.params.text,this.isDataLoad=!0,this.communityService.searchCommunities(this.search_text).subscribe({next:t=>{this.communities=t,this.isDataLoad=!1,this.wait=!0}})}ngOnChanges(){}navigateToCommunity(t,r){t.stopPropagation(),window.location.href="/r/"+r}static#e=this.\u0275fac=function(r){return new(r||e)(B(Pr),B($n),B(va))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-search-community-view"]],features:[Ho],decls:5,vars:4,consts:[["style","border-top: 1px solid var(--border);",4,"ngIf"],["id","container",3,"click",4,"ngFor","ngForOf"],["class","load_data_block",4,"ngIf"],["class","empty_block",4,"ngIf"],[2,"border-top","1px solid var(--border)"],["id","container",3,"click"],["id","community_block"],["id","img_avatar",3,"src"],["id","name_block"],[2,"font-size","13px","color","var(--txt) !important"],["id","txt_description"],[1,"load_data_block"],["src","../../../../assets/icon/logo.png",1,"img_load_data"],[1,"data_loader"],[1,"empty_block"]],template:function(r,i){1&r&&(Pe(0,EJ,1,0,"hr",0),x(1,"div"),Pe(2,kJ,10,4,"div",1),D(),Pe(3,DJ,3,0,"div",2)(4,TJ,3,0,"div",3)),2&r&&(A("ngIf",0!=i.communities.length),k(2),A("ngForOf",i.communities),k(1),A("ngIf",i.isDataLoad),k(1),A("ngIf",0==i.communities.length&&i.wait))},dependencies:[Zr,sn],styles:["#container[_ngcontent-%COMP%]{height:auto;width:100%;border-bottom:1px solid var(--border);padding:15px 0}#container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--icon)}#container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--bg_hover)}#community_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}#img_avatar[_ngcontent-%COMP%]{width:50px;aspect-ratio:1/1;border-radius:50%;margin-top:5px;margin-right:10px}#txt_description[_ngcontent-%COMP%]{margin-left:60px;font-size:14px;color:var(--txt)!important}"]})}return e})();function IJ(e,o){1&e&&Q(0,"hr",4)}function OJ(e,o){if(1&e){const t=We();x(0,"div",5),z("click",function(){const l=ce(t).$implicit;return fe(q().navigateToUserProfile(l.username))}),x(1,"div",6),Q(2,"img",7),x(3,"div",8)(4,"h3"),L(5),D(),x(6,"p",9),L(7),D()()(),x(8,"p",10),L(9),D()()}if(2&e){const t=o.$implicit,r=q();k(2),Ot("src",t.avatar,Qe),k(3),at("u/",t.username,""),k(2),at("",r.presentationService.transformNumber(t.post_karma+t.comment_karma)," karma"),k(2),ht(t.description)}}function AJ(e,o){1&e&&(x(0,"div",11),Q(1,"img",12)(2,"div",13),D())}function NJ(e,o){1&e&&(x(0,"div",14)(1,"p"),L(2,"No people found"),D()())}let RJ=(()=>{class e{constructor(t,r,i){this.searchUserProfileService=t,this.activeRoute=r,this.presentationService=i,this.users=[],this.search_text="",this.isDataLoad=!1,this.wait=!1}ngOnInit(){this.search_text=this.activeRoute.snapshot.params.text,this.isDataLoad=!0,this.searchUserProfileService.searchUserProfile(this.search_text).subscribe({next:t=>{this.users=t,this.isDataLoad=!1,this.wait=!0}})}navigateToUserProfile(t){window.location.href="/user/"+t}static#e=this.\u0275fac=function(r){return new(r||e)(B(jc),B($n),B(va))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-search-people-view"]],decls:5,vars:4,consts:[["style","border-top: 1px solid var(--border);",4,"ngIf"],["id","container",3,"click",4,"ngFor","ngForOf"],["class","load_data_block",4,"ngIf"],["class","empty_block",4,"ngIf"],[2,"border-top","1px solid var(--border)"],["id","container",3,"click"],["id","community_block"],["id","img_avatar",3,"src"],["id","name_block"],[2,"font-size","13px","color","var(--txt) !important"],["id","txt_description"],[1,"load_data_block"],["src","../../../../assets/icon/logo.png",1,"img_load_data"],[1,"data_loader"],[1,"empty_block"]],template:function(r,i){1&r&&(Pe(0,IJ,1,0,"hr",0),x(1,"div"),Pe(2,OJ,10,4,"div",1),D(),Pe(3,AJ,3,0,"div",2)(4,NJ,3,0,"div",3)),2&r&&(A("ngIf",0!=i.users.length),k(2),A("ngForOf",i.users),k(1),A("ngIf",i.isDataLoad),k(1),A("ngIf",0==i.users.length&&i.wait))},dependencies:[Zr,sn],styles:["[_nghost-%COMP%]   *[_ngcontent-%COMP%]{color:var(--icon)}#container[_ngcontent-%COMP%]{height:auto;width:100%;border-bottom:1px solid var(--border);padding:15px 0}#container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--bg_hover)}#community_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}#img_avatar[_ngcontent-%COMP%]{width:50px;aspect-ratio:1/1;border-radius:50%;margin-top:5px;margin-right:10px}#txt_description[_ngcontent-%COMP%]{margin-left:60px;color:var(--txt)!important;font-size:14px}"]})}return e})();const Dv=e=>({"background-color":e});function FJ(e,o){if(1&e){const t=We();x(0,"div",11)(1,"b",12),L(2,"Sort by"),D(),x(3,"button",13),z("click",function(){return ce(t),fe(q().selectSort("hot"))}),L(4,"Hot"),D(),x(5,"button",13),z("click",function(){return ce(t),fe(q().selectSort("new"))}),L(6,"New"),D(),x(7,"button",13),z("click",function(){return ce(t),fe(q().selectSort("top_day"))}),L(8,"Top today"),D(),x(9,"button",13),z("click",function(){return ce(t),fe(q().selectSort("top_week"))}),L(10,"Top this week"),D(),x(11,"button",13),z("click",function(){return ce(t),fe(q().selectSort("top_month"))}),L(12,"Top this month"),D(),x(13,"button",13),z("click",function(){return ce(t),fe(q().selectSort("top_year"))}),L(14,"Top this year"),D(),x(15,"button",13),z("click",function(){return ce(t),fe(q().selectSort("top_all_time"))}),L(16,"Top all time"),D()()}if(2&e){const t=q();k(3),A("ngStyle",ve(7,Dv,"hot"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(9,Dv,"new"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(11,Dv,"top_day"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(13,Dv,"top_week"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(15,Dv,"top_month"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(17,Dv,"top_year"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(19,Dv,"top_all_time"==t.sort_option?"var(--search)":"var(--primary_background_color)"))}}function LJ(e,o){1&e&&Q(0,"hr",14)}function BJ(e,o){if(1&e&&Q(0,"app-search-post-view",16),2&e){const t=o.$implicit;Ot("id",t.post_id),A("post",t)}}function VJ(e,o){if(1&e&&(S_(0),Pe(1,BJ,1,2,"app-search-post-view",15),lf()),2&e){const t=q();k(1),A("ngForOf",t.detail_post_arr)}}function $J(e,o){1&e&&(x(0,"div",17),Q(1,"img",18)(2,"div",19),D())}const B9=e=>({selected_btn:e}),UJ=e=>({visibility:e}),_K=e=>({display:e});let jJ=(()=>{class e{constructor(t,r,i,l,d){this.getPostsService=t,this.activeRoute=r,this.checkRefreshTokenService=i,this.shareDataService=l,this.getPostService=d,this.search_text="",this.posts=[],this.isSortOptionShow=!1,this.sort_option="new",this.sort_text="New",this.searchOption="posts",this.detail_post_arr=[],this.post_id_arr=[],this.cur_view_post_id=0,this.isDataLoad=!1,this.wait=!1,this.intervals=[]}ngOnInit(){this.checkRefreshTokenService.runCheckRefreshTokenWithoutNotification(),this.search_text=this.activeRoute.snapshot.params.text,this.shareDataService.search_post_post_id_arr$.subscribe(t=>{this.post_id_arr=t}),this.shareDataService.search_post_detail_posts$.subscribe(t=>{this.detail_post_arr=t}),this.shareDataService.cur_search_post_view_post_id$.subscribe(t=>{this.cur_view_post_id=t}),this.shareDataService.search_post_post_search_option$.subscribe(t=>{this.sort_option=t}),this.setSortText(this.sort_option),this.searchPosts(this.sort_option)}ngAfterViewInit(){let t=document.getElementById(this.cur_view_post_id.toString());t?.scrollIntoView()}showSortOption(){this.isSortOptionShow=!this.isSortOptionShow}selectSearchOption(t){this.searchOption=t}setSortText(t){switch(t){case"hot":this.sort_text="Hot";break;case"new":this.sort_text="New";break;case"top_day":this.sort_text="Top today";break;case"top_week":this.sort_text="Top this week";break;case"top_month":this.sort_text="Top this month";break;case"top_year":this.sort_text="Top this year";break;case"top_all_time":this.sort_text="Top all time"}}selectSort(t){this.sort_option=t,this.isSortOptionShow=!this.isSortOptionShow,this.post_id_arr=[],this.detail_post_arr=[];for(let r of this.intervals)clearInterval(r);this.shareDataService.setSearchPostsSearchOption(t),this.setSortText(t),this.searchPosts(t)}searchPosts(t){this.isDataLoad=!0,this.wait=!1,0!=this.detail_post_arr.length?this.resumeLoadPosts(this.detail_post_arr,this.post_id_arr,0,2,5):this.getPostsService.getPostForSearch("/get-search-posts",this.search_text,t).subscribe({next:r=>{this.post_id_arr=r,this.shareDataService.setSearchPostsPostIds(this.post_id_arr),this.getAllDetailPostsByUidAndPostIds(this.detail_post_arr,this.post_id_arr,0,15,12,5)},error:r=>{this.isDataLoad=!1,this.wait=!0,console.log("HttpServletResponse: "+r.error.message+"\nResponseEntity: "+r.error)}})}isElementInViewport(t){const r=document.getElementById(t);if(!r)return!1;const i=r.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)}getPostsByCheckViewPort(t,r,i,l,d,p){if(t.length==r.length)this.isDataLoad=!1;else for(let m=l;m<r.length;m+=p){const v=setInterval(()=>{if(this.intervals.push(v),this.isElementInViewport(r[m-d].toString())){console.log(r[m-d]),clearInterval(v);const P=r.slice(m,m+p);this.isDataLoad=!0,this.getPostService.getDetailPostByUidAndPostIds(i,P).subscribe({next:R=>{this.isDataLoad=!1;for(let $ of R)t.push($);this.shareDataService.setSearchPostsDetailPosts(t)},error:R=>{this.isDataLoad=!1,console.log("HttpServletResponse: "+R.error.message+"\nResponseEntity: "+R.error)}})}},200)}}getAllDetailPostsByUidAndPostIds(t,r,i,l,d,p){t.length==r.length?this.isDataLoad=!1:(this.isDataLoad=!0,this.getPostService.getDetailPostByUidAndPostIds(i,this.post_id_arr.slice(0,l)).subscribe({next:m=>{this.isDataLoad=!1,this.wait=!0;for(let v of m)t.push(v);this.shareDataService.setSearchPostsDetailPosts(t),this.getPostsByCheckViewPort(t,r,i,l,d,p)},error:m=>{this.isDataLoad=!1,console.log("HttpServletResponse: "+m.error.message+"\nResponseEntity: "+m.error)}}))}resumeLoadPosts(t,r,i,l,d){const m=r.indexOf(t[t.length-1].post_id);this.getPostsByCheckViewPort(t,r,i,m+1,l,d),this.shareDataService.setSearchPostsDetailPosts(t)}static#e=this.\u0275fac=function(r){return new(r||e)(B(u0),B($n),B(Rn),B(Er),B(ur))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-search-results"]],decls:19,vars:23,consts:[["id","select_block"],[2,"color","var(--icon)"],["type","button",3,"ngClass","click"],["id","sort_container",3,"ngStyle"],["id","btn_sort",3,"click"],[1,"pi","pi-chevron-down"],["id","sort_option_block",4,"ngIf"],["style","border-top: 1px solid var(--border);",4,"ngIf"],[4,"ngIf"],[3,"ngStyle"],["class","load_data_block",4,"ngIf"],["id","sort_option_block"],[2,"color","var(--icon)","background-color","var(--primary_background_color)"],[3,"ngStyle","click"],[2,"border-top","1px solid var(--border)"],[3,"id","post",4,"ngFor","ngForOf"],[3,"id","post"],[1,"load_data_block"],["src","../../../../assets/icon/logo.png",1,"img_load_data"],[1,"data_loader"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"p",1),L(2,"Search results"),D(),x(3,"button",2),z("click",function(){return i.selectSearchOption("posts")}),L(4,"Posts"),D(),x(5,"button",2),z("click",function(){return i.selectSearchOption("communities")}),L(6,"Communities"),D(),x(7,"button",2),z("click",function(){return i.selectSearchOption("people")}),L(8,"People"),D()(),x(9,"div",3)(10,"button",4),z("click",function(){return i.showSortOption()}),L(11),Q(12,"i",5),D(),Pe(13,FJ,17,21,"div",6),D(),Pe(14,LJ,1,0,"hr",7)(15,VJ,2,1,"ng-container",8),Q(16,"app-search-community-view",9)(17,"app-search-people-view",9),Pe(18,$J,3,0,"div",10)),2&r&&(k(3),A("ngClass",ve(11,B9,"posts"==i.searchOption)),k(2),A("ngClass",ve(13,B9,"communities"==i.searchOption)),k(2),A("ngClass",ve(15,B9,"people"==i.searchOption)),k(2),A("ngStyle",ve(17,UJ,"posts"==i.searchOption?"visible":"hidden")),k(2),ht(i.sort_text),k(2),A("ngIf",i.isSortOptionShow),k(1),A("ngIf","posts"==i.searchOption),k(1),A("ngIf","posts"==i.searchOption),k(1),A("ngStyle",ve(19,_K,"communities"==i.searchOption?"block":"none")),k(1),A("ngStyle",ve(21,_K,"people"==i.searchOption?"block":"none")),k(1),A("ngIf",i.isDataLoad&&"posts"==i.searchOption))},dependencies:[lr,Zr,sn,Eo,PJ,MJ,RJ],styles:["[_nghost-%COMP%]{display:block;width:100%}#select_block[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}#select_block[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:inline-block;margin-right:20px}#select_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:auto;height:auto;padding:10px 20px;border-radius:20px;margin-left:10px;background-color:var(--primary_background_color);border:1px solid var(--icon);color:var(--icon)!important}.selected_btn[_ngcontent-%COMP%]{background-color:var(--btn_selected)!important}#sort_container[_ngcontent-%COMP%]{position:relative;width:100px;height:auto;align-self:flex-start}#btn_sort[_ngcontent-%COMP%]{width:auto;height:30px;padding:0 10px;background-color:var(--primary_background_color);border-radius:20px;font-weight:500;display:flex;flex-direction:row;justify-content:center;align-items:center;text-wrap:nowrap;margin-bottom:10px;color:var(--txt)!important}#btn_sort[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)}#btn_sort[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-left:10px;font-size:12px}#sort_option_block[_ngcontent-%COMP%]{width:110px;height:auto;position:absolute;top:35px;left:0;z-index:999;box-shadow:var(--menu_box_shadow)}#sort_option_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:40px;width:100%;text-align:left;padding:0 10px;background-color:var(--primary_background_color);color:var(--icon)}#sort_option_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)!important}#sort_option_block[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{display:block;height:40px;width:100%;text-align:left;padding:10px}"]})}return e})();function HJ(e,o){if(1&e){const t=We();x(0,"div",10)(1,"p",11),L(2,"Settings"),D(),x(3,"div",12)(4,"div"),Q(5,"img",13),x(6,"div",14)(7,"p"),L(8,"Profile"),D(),x(9,"p"),L(10,"Customize your profile"),D()()(),x(11,"button",15),z("click",function(){return ce(t),fe(q().editProfile())}),L(12,"Edit profile"),D()()()}if(2&e){const t=q();k(5),Ot("src",t.userInfo.avatar,Qe)}}function zJ(e,o){if(1&e&&(x(0,"a",19)(1,"div",20),Q(2,"img",13),x(3,"pre",21),L(4),D()()()),2&e){const t=o.$implicit;In("href","r/",t.id,"",Qe),k(2),Ot("src",t.avatar,Qe),k(2),at(" r/",t.name,"")}}function WJ(e,o){if(1&e&&(x(0,"div",16)(1,"p",17),L(2,"Moderator of these communities"),D(),Pe(3,zJ,5,3,"a",18),D()),2&e){const t=q();k(3),A("ngForOf",t.communities)}}let qJ=(()=>{class e{constructor(t,r,i,l,d){this.searchUserProfileService=t,this.communityService=r,this.storageService=i,this.dateTimeService=l,this.presentationService=d,this.userInfo=new ym(0,"","","",0,0,""),this.communities=[],this.isUser=!1,this.shownDate=""}ngOnInit(){const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid")),r=window.location.href.match("/setting/([A-Za-z0-9]+)");let i="";null!=r&&(i=r[1]);const l=window.location.href.match("/user/([A-Za-z0-9]+)");null!=l&&(i=l[1]),this.searchUserProfileService.getUserProfileByName("/get-user-info-by-username",i).subscribe({next:d=>{this.userInfo=d,this.isUser=t===this.userInfo.uid,this.shownDate=this.dateTimeService.getStringRepresentDateTime(this.userInfo.created_at),this.communityService.getCommunityModerateByUid(this.userInfo.uid).subscribe({next:p=>{this.communities=p}})}})}editProfile(){window.location.href="/setting/"+this.userInfo.username}static#e=this.\u0275fac=function(r){return new(r||e)(B(jc),B(Pr),B(ct),B(Ds),B(va))};static#t=this.\u0275cmp=ne({type:e,selectors:[["user-info"]],decls:24,vars:7,consts:[["id","user_info_container"],["id","header_block"],[2,"color","var(--icon)","font-size","18px","font-weight","600"],[2,"margin-top","10px","margin-bottom","20px"],["id","karma_block"],[1,"info"],[1,"label"],["id","cake_block"],["id","edit_block",4,"ngIf"],["id","moderator_block",4,"ngIf"],["id","edit_block"],[2,"margin","10px 0 10px 0"],[1,"setting_block"],[3,"src"],["id","setting_info"],["id","btn_edit_profile","type","button",2,"color","var(--secondary_color) !important",3,"click"],["id","moderator_block"],[2,"padding","10px 0"],["class","community_block",3,"href",4,"ngFor","ngForOf"],[1,"community_block",3,"href"],[1,"community_info"],[2,"color","var(--secondary_color) !important"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1)(2,"p",2),L(3),D(),x(4,"p",3),L(5),D()(),x(6,"div",4)(7,"div",5)(8,"b"),L(9),D(),x(10,"p",6),L(11,"Post karma"),D()(),x(12,"div",5)(13,"b"),L(14),D(),x(15,"p",6),L(16,"Comment karma"),D()()(),x(17,"div",7)(18,"b"),L(19),D(),x(20,"p",6),L(21,"Cake day"),D()(),Pe(22,HJ,13,1,"div",8)(23,WJ,4,1,"div",9),D()),2&r&&(k(3),ht(i.userInfo.username),k(2),ht(i.userInfo.description),k(4),ht(i.presentationService.formatKarma(i.userInfo.post_karma)),k(5),ht(i.presentationService.formatKarma(i.userInfo.comment_karma)),k(5),ht(i.shownDate),k(3),A("ngIf",i.isUser),k(1),A("ngIf",0!=i.communities.length))},dependencies:[Zr,sn],styles:["#user_info_container[_ngcontent-%COMP%]{background-color:var(--info);width:100%;height:auto;border-radius:15px;padding:5px 15px;margin-bottom:20px}#user_info_container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(#karma_block, #moderator_block)[_ngcontent-%COMP%]{border-bottom:1px solid var(--border)}#user_info_container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{color:var(--icon)}#header_block[_ngcontent-%COMP%]{margin-top:20px}#cake_block[_ngcontent-%COMP%]{padding:10px 0}.label[_ngcontent-%COMP%]{color:var(--txt);font-size:14px}#karma_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}#karma_block[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:13px}#edit_block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0}.setting_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:10px 0}.setting_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}#setting_info[_ngcontent-%COMP%]{font-size:12px;margin-left:5px}#btn_edit_profile[_ngcontent-%COMP%]{width:auto;height:auto;padding:10px;border-radius:20px;font-size:13px;background-color:var(--header);border:1px solid var(--secondary_color)!important}#edit_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:auto;height:auto;padding:10px}#moderator_block[_ngcontent-%COMP%]{margin-bottom:10px}img[_ngcontent-%COMP%]{width:30px;aspect-ratio:1/1;border-radius:50%}.community_info[_ngcontent-%COMP%]:hover{background-color:var(--nav_hover)}.community_info[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;padding:10px;border-radius:20px}"]})}return e})();const HB=e=>({selected_btn:e});function GJ(e,o){if(1&e){const t=We();x(0,"button",4),z("click",function(){return ce(t),fe(q().selectSearchOption("saved"))}),L(1,"Saved"),D()}if(2&e){const t=q();A("ngClass",ve(1,HB,"saved"==t.searchOption))}}function KJ(e,o){if(1&e){const t=We();x(0,"button",4),z("click",function(){return ce(t),fe(q().selectSearchOption("wait_for_approve"))}),L(1,"Wait for approve"),D()}if(2&e){const t=q();A("ngClass",ve(1,HB,"wait_for_approve"==t.searchOption))}}let ZJ=(()=>{class e{constructor(t,r,i,l,d,p,m,v){this.searchUserProfileService=t,this.storageService=r,this.getCommentService=i,this.activeRoute=l,this.darkmodeSerive=d,this.checkRefreshTokenService=p,this.route=m,this.shareDataService=v,this.userInfo=new ym(0,"","","",0,0,""),this.comments=[],this.searchOption="posts",this.sort_option="New",this.isSortOptionShow=!1,this.isOwner=!1,this.isLoad=!1,this.profile_option=""}ngOnInit(){this.darkmodeSerive.useDarkMode(),this.checkRefreshTokenService.runCheckRefreshTokenWithoutNotification();const t=this.activeRoute.snapshot.params.username,r=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.searchUserProfileService.getUserProfileByName("/get-user-info-by-username",t).subscribe({next:i=>{this.userInfo=i,this.isOwner=r==this.userInfo.uid}}),this.shareDataService.profile_option$.subscribe(i=>{this.searchOption=i}),this.checkRoute()}checkRoute(){const t=this.activeRoute.snapshot.params.username;window.location.href.includes(t+"/posts")&&(this.searchOption="posts",this.shareDataService.setProfileOption("posts")),window.location.href.includes(t+"/comments")&&(this.searchOption="comments",this.shareDataService.setProfileOption("comments")),window.location.href.includes(t+"/saved")&&(this.searchOption="saved",this.shareDataService.setProfileOption("saved")),window.location.href.includes(t+"/wait_for_approve")&&(this.searchOption="wait_for_approve",this.shareDataService.setProfileOption("wait_for_approve"))}selectSearchOption(t){this.searchOption=t;const r=this.activeRoute.snapshot.params.username;"posts"==this.searchOption&&(this.shareDataService.setProfileOption("posts"),this.route.navigate(["user/"+r+"/posts"])),"saved"==this.searchOption&&(this.shareDataService.setProfileOption("saved"),this.route.navigate(["user/"+r+"/saved"])),"wait_for_approve"==this.searchOption&&(this.shareDataService.setProfileOption("wait_for_approve"),this.route.navigate(["user/"+r+"/wait_for_approve"])),"comments"==this.searchOption&&(this.shareDataService.setProfileOption("comments"),this.route.navigate(["user/"+r+"/comments"]))}static#e=this.\u0275fac=function(r){return new(r||e)(B(jc),B(ct),B(Ri),B($n),B(Ys),B(Rn),B(Vt),B(Er))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-user-profile"]],decls:16,vars:10,consts:[["id","header"],[3,"src"],["id","txt_username"],["id","btn_block"],["type","button",1,"btn_option",3,"ngClass","click"],["class","btn_option","type","button",3,"ngClass","click",4,"ngIf"],["id","outlet"],["id","info_block"]],template:function(r,i){1&r&&(x(0,"div",0),Q(1,"img",1),x(2,"div")(3,"p",2),L(4),D()()(),x(5,"div",3)(6,"button",4),z("click",function(){return i.selectSearchOption("posts")}),L(7,"Posts"),D(),x(8,"button",4),z("click",function(){return i.selectSearchOption("comments")}),L(9,"Comments"),D(),Pe(10,GJ,2,3,"button",5)(11,KJ,2,3,"button",5),D(),x(12,"div",6),Q(13,"router-outlet"),D(),x(14,"div",7),Q(15,"user-info"),D()),2&r&&(k(1),Ot("src",i.userInfo.avatar,Qe),k(3),ht(i.userInfo.username),k(2),A("ngClass",ve(6,HB,"posts"==i.searchOption)),k(2),A("ngClass",ve(8,HB,"comments"==i.searchOption)),k(2),A("ngIf",i.isOwner),k(1),A("ngIf",i.isOwner))},dependencies:[lr,sn,Gs,qJ],styles:["[_nghost-%COMP%]{position:relative;width:100%;height:100%;display:block;background-color:var(--primary_background_color);overflow:hidden;overflow-y:scroll;scrollbar-gutter:stable;box-sizing:border-box}#header[_ngcontent-%COMP%], #btn_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}#header[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:30px;margin-left:2vw}#header[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:60px;aspect-ratio:1/1;border-radius:50%;margin-right:10px}#btn_block[_ngcontent-%COMP%]{margin-bottom:30px;margin-left:2vw}.btn_option[_ngcontent-%COMP%]{width:auto;height:auto;padding:10px 20px;margin-right:10px;border-radius:30px;background-color:var(--primary_background_color);color:var(--icon);font-size:16px;font-weight:600}.btn_option[_ngcontent-%COMP%]:hover{text-decoration:underline}.selected_btn[_ngcontent-%COMP%]{background-color:var(--btn_selected)}#comment_container[_ngcontent-%COMP%]{width:100%;height:100%;margin-bottom:30px}#sort_container[_ngcontent-%COMP%]{position:relative;width:100px;height:auto;align-self:flex-start}#btn_sort[_ngcontent-%COMP%]{width:auto;height:30px;padding:0 10px;background-color:var(--primary_background_color);border-radius:10px;font-weight:500;display:flex;flex-direction:row;justify-content:center;align-items:center;text-wrap:nowrap;margin-bottom:10px}#btn_sort[_ngcontent-%COMP%]:hover{background-color:var(--neutral)}#btn_sort[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-left:10px;font-size:12px}#sort_option_block[_ngcontent-%COMP%]{width:110px;height:auto;position:absolute;top:35px;left:0;z-index:999}#sort_option_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:40px;width:100%;text-align:left;padding:0 10px;background-color:var(--primary_background_color);box-shadow:var(--menu_box_shadow)}#sort_option_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:var(--neutral)}#sort_option_block[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{display:block;height:40px;width:100%;text-align:left;padding:10px;background-color:var(--neutral)}app-comment[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px solid black}#empty_block[_ngcontent-%COMP%]{width:100%;height:auto;background-color:var(--neutral);text-align:center;font-size:40px;padding:25vh 10px}#outlet[_ngcontent-%COMP%], #comment_container[_ngcontent-%COMP%]{width:calc(100% - 380px);margin-left:2vw;margin-top:20px;box-sizing:border-box;margin-bottom:50px}#txt_username[_ngcontent-%COMP%]{font-size:26px;font-weight:600;color:var(--icon)}#info_block[_ngcontent-%COMP%]{position:fixed;height:calc(100vh - var(--header_size));top:calc(var(--header_size) + 10px);width:300px;right:40px;overflow:hidden;scrollbar-gutter:stable;background-clip:content-box;box-sizing:border-box}#info_block[_ngcontent-%COMP%]:hover{overflow-y:auto}@media only screen and (max-width: 850px){#info_block[_ngcontent-%COMP%]{display:none;right:calc(var(--margin_home))}#outlet[_ngcontent-%COMP%], #comment_container[_ngcontent-%COMP%]{width:calc(100% - 30px)}}"]})}return e})();class YJ{constructor(o,t,r){this.uid=o,this.description=t,this.avatar=r}}let JJ=(()=>{class e{constructor(t,r){this.postService=t,this.checkRefreshToken=r,this.editEndpoint="/edit-user-info"}updateUserInfoByUid(t,r,i){this.checkRefreshToken.runCheckRefreshToken();const l=JSON.stringify(new YJ(t,r,i));let d=new et;return d=d.append("Accept","application/json"),d=d.append("Content-Type","application/json"),this.postService.post(this.editEndpoint,d,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Io),ie(Rn))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function QJ(e,o){1&e&&Q(0,"loading",17),2&e&&A("txt_load","Edit user info. Please wait")}let XJ=(()=>{class e{constructor(t,r,i,l){this.searchUserProfileService=t,this.storageService=r,this.editUserInfoService=i,this.darkmodeSerive=l,this.userInfo=new ym(0,"","","",0,0,""),this.isUser=!1,this.characterCount=0,this.allowSubmit=!1,this.isLoad=!1}ngOnInit(){this.darkmodeSerive.useDarkMode();const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid")),r=window.location.href.match("/setting/([A-Za-z0-9]+)");let i="";null!=r&&(i=r[1]),this.searchUserProfileService.getUserProfileByName("/get-user-info-by-username",i).subscribe({next:l=>{this.userInfo=l,this.isUser=t===this.userInfo.uid,this.isUser||(window.location.href="/error"),this.characterCount=this.userInfo.description.length}})}onInputDescription(t){const r=t.target;r.value=r.value.replace(/(\r\n|\n|\r)/gm,""),r.style.height="auto",r.style.height=`${r.scrollHeight}px`,this.characterCount=r.value.length,""===r.value&&(r.style.height="48px",this.characterCount=0),this.userInfo.description=r.value,this.AllowSubmit()}AllowSubmit(){this.allowSubmit=this.userInfo.description.length>=0&&0!=this.userInfo.avatar.length}upLoadImg(t){this.onImageUpload(t.target.files[0])}onImageUpload(t){const r=new FileReader;r.readAsDataURL(t),r.addEventListener("loadend",()=>{this.userInfo.avatar=r.result,this.AllowSubmit()})}submit(){const t=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid"));this.isLoad=!0,this.editUserInfoService.updateUserInfoByUid(t,this.userInfo.description,this.userInfo.avatar).subscribe({next:r=>{this.isLoad=!1,Ne().fire({title:"Edit info successfully",icon:"success"})}})}cancel(){window.history.back()}static#e=this.\u0275fac=function(r){return new(r||e)(B(jc),B(ct),B(JJ),B(Ys))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-edit-user-info"]],decls:29,vars:5,consts:[["id","container"],["id","btn_back",3,"click"],[2,"margin-bottom","20px"],["for","input_username"],["id","input_username","type","text","disabled","true",3,"value"],["for","post_title_block"],["id","post_title_block"],["id","input_post_title","maxlength","200","required","","placeholder","Optional",3,"value","input"],["id","character_count",2,"color","black"],["for","post_title_block",2,"margin-bottom","10px"],["id","img_avatar",3,"src"],["id","input_upload_img","type","file","accept","image/*",3,"change"],["input_img",""],["id","btn_upload_img","type","button",3,"click"],["id","btn_block"],["type","button",1,"btn_submit",3,"click"],[3,"txt_load",4,"ngIf"],[3,"txt_load"]],template:function(r,i){if(1&r){const l=We();x(0,"div",0)(1,"button",1),z("click",function(){return i.cancel()}),D(),x(2,"h2",2),L(3,"Edit User profile"),D(),x(4,"label",3)(5,"b"),L(6,"Username"),D()(),Q(7,"input",4),x(8,"label",5)(9,"b"),L(10,"About"),D()(),x(11,"div",6)(12,"textarea",7),z("input",function(p){return i.onInputDescription(p)}),D(),x(13,"span",8),L(14),D()(),x(15,"label",9)(16,"b"),L(17,"Avatar"),D()(),Q(18,"img",10),x(19,"input",11,12),z("change",function(p){return i.upLoadImg(p)}),D(),x(21,"button",13),z("click",function(){return ce(l),fe(Gr(20).click())}),L(22,"Upload your avatar"),D(),x(23,"div",14)(24,"button",15),z("click",function(){return i.cancel()}),L(25,"Cancel"),D(),x(26,"button",15),z("click",function(){return i.submit()}),L(27,"Save"),D()()(),Pe(28,QJ,1,1,"loading",16)}2&r&&(k(7),A("value",i.userInfo.username),k(5),A("value",i.userInfo.description),k(2),at("",i.characterCount,"/200"),k(4),A("src",i.userInfo.avatar,Qe),k(10),A("ngIf",i.isLoad))},dependencies:[sn,Js],styles:["#container[_ngcontent-%COMP%]{width:100%;min-width:450px;background-color:var(--neutral);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px;border-radius:20px;overflow-x:hidden;position:relative}#container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--icon)!important}#btn_back[_ngcontent-%COMP%]{width:30px;aspect-ratio:1/1;background-image:url(back.c1ee58752de01054.png);background-size:contain;position:absolute;left:20px;top:20px;border-radius:50%}label[_ngcontent-%COMP%]{align-self:flex-start;margin-bottom:10px;font-size:18px;font-weight:500}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin-bottom:20px;border:1px solid var(--border);color:#000}#input_username[_ngcontent-%COMP%]{width:100%;height:auto;padding:5px 10px;font-size:16px}#input_username[_ngcontent-%COMP%]:hover{cursor:not-allowed}#post_title_block[_ngcontent-%COMP%]{align-self:center;width:100%;display:flex;flex-direction:column}#input_post_title[_ngcontent-%COMP%]{width:100%;height:48px;text-align:left;padding:5px 55px 8px 10px;box-sizing:border-box;overflow:hidden;resize:none}#character_count[_ngcontent-%COMP%]{position:relative;bottom:42px;right:5px;align-self:flex-end;font-size:11px;font-weight:400;color:var(--secondary_color)!important}#img_avatar[_ngcontent-%COMP%]{width:100px;aspect-ratio:1/1;border-radius:50%;border:2px solid var(--icon)}#input_upload_img[_ngcontent-%COMP%], #input_upload_banner[_ngcontent-%COMP%]{width:0px;height:0px;display:none}#btn_upload_img[_ngcontent-%COMP%]{width:auto;height:40px;text-align:center;display:inline-block;background-color:var(--allow);border:2px solid var(--secondary_color);padding:0 20px;border-radius:20px;vertical-align:bottom;margin:10px 0 30px}#btn_block[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;align-items:center;margin-top:20px}.btn_submit[_ngcontent-%COMP%]{width:auto;padding:5px 20px;border-radius:20px;font-size:16px;border:1px solid var(--secondary_color)}.btn_submit[_ngcontent-%COMP%]:first-child{margin-right:10px;background-color:var(--search)}.btn_submit[_ngcontent-%COMP%]:last-child{background-color:var(--allow)}"]})}return e})();class eQ{constructor(o,t){this.email=o,this.username=t}}let tQ=(()=>{class e{constructor(t,r,i){this.getService=t,this.storageService=r,this.postService=i,this.checkUsernameEndpoint="/check-username",this.selectUsernameEndpoint="/select-username"}isUsernameExist(t){const r=this.checkUsernameEndpoint+"?username="+t;let i=new et;return this.getService.get(r,i,!0)}selectUsername(t){const r=this.storageService.getItem("signup_google_email"),i=new eQ(r,t),l=JSON.stringify(i);let d=new et;return d=d.append("Accept","application/json"),d=d.append("Content-Type","application/json"),this.postService.post(this.selectUsernameEndpoint,d,l,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ks),ie(ct),ie(Io))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function nQ(e,o){1&e&&(x(0,"p",9),L(1,"Username already exist"),D())}function oQ(e,o){1&e&&Q(0,"loading",10),2&e&&A("txt_load","Selecting username. Please wait")}const rQ=e=>({color:e});let sQ=(()=>{class e{constructor(t,r){this.checkUsernameService=t,this.storageService=r,this.isUsernameAllow=!1,this.isUsernameTaken=!0,this.username="",this.isLoad=!1}checkUserName(t){this.username=t.target.value,this.isUsernameAllow=/^[A-Za-z0-9]{3,16}$/.test(this.username),this.isUsernameAllow&&this.checkUsernameService.isUsernameExist(this.username).subscribe({next:r=>{this.isUsernameTaken=r.usernameExist},error:r=>{console.log(r),this.isUsernameTaken=!0}})}selectUsername(){Ne().fire({title:"Are you sure",icon:"warning",html:`<p>Your username is</p><b>${this.username}</b><p>You can not change it</p>`,showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then(t=>{t.isConfirmed&&(this.isLoad=!0,this.checkUsernameService.selectUsername(this.username).subscribe({next:r=>{this.isLoad=!1,0==r.error_code&&(this.storageService.removeItem("signup_google_email"),Ne().fire({title:"Choose username successfully.",icon:"success"}).then(i=>{i.isConfirmed&&(window.location.href="/signin")}))},error:r=>{this.isLoad=!1,Ne().fire("Error select username. Please try again","","error")}}))})}static#e=this.\u0275fac=function(r){return new(r||e)(B(tQ),B(ct))};static#t=this.\u0275cmp=ne({type:e,selectors:[["choose-username"]],decls:14,vars:7,consts:[["id","main_logo","src","assets/icon/logo.png","alt","logo"],["id","container"],["for","username"],["id","username","type","text","maxlength","16",3,"value","input"],[2,"width","250px"],[2,"font-size","12px","text-align","left",3,"ngStyle"],["style","font-size: 13px; color: red; text-align: left;",4,"ngIf"],["type","button",3,"disabled","click"],[3,"txt_load",4,"ngIf"],[2,"font-size","13px","color","red","text-align","left"],[3,"txt_load"]],template:function(r,i){1&r&&(Q(0,"img",0),x(1,"div",1)(2,"b")(3,"h2")(4,"label",2),L(5,"Choose your username"),D()()(),x(6,"input",3),z("input",function(d){return i.checkUserName(d)}),D(),x(7,"div",4)(8,"p",5),L(9,"Must be between 3 and 16 characters, including a-z, A-Z, 0-9"),D(),Pe(10,nQ,2,0,"p",6),D(),x(11,"button",7),z("click",function(){return i.selectUsername()}),L(12,"Choose"),D()(),Pe(13,oQ,1,1,"loading",8)),2&r&&(k(6),A("value",i.username),k(2),A("ngStyle",ve(5,rQ,i.isUsernameAllow?"green":"red")),k(2),A("ngIf",i.isUsernameTaken&&0!=i.username.length),k(1),A("disabled",!i.isUsernameAllow&&i.isUsernameTaken),k(2),A("ngIf",i.isLoad))},dependencies:[sn,Eo,Js],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}#main_logo[_ngcontent-%COMP%]{width:60px;aspect-ratio:1/1;margin-bottom:10px}#container[_ngcontent-%COMP%]{width:400px;height:auto;padding:10px;display:flex;flex-direction:column;justify-content:center;align-items:center}input[_ngcontent-%COMP%]{width:250px;height:35px;border:1px solid black;padding:5px 10px;font-size:18px;text-align:center;margin:10px 0}input[_ngcontent-%COMP%]:focus{border:2px solid black}button[_ngcontent-%COMP%]{padding:5px 20px;border-radius:20px;border:1px solid black;background-color:var(--main_color);margin-top:20px;color:#000}"]})}return e})(),iQ=(()=>{class e{constructor(t,r,i,l){this.router=t,this.storageService=r,this.checkRefreshToken=i,this.removeRefreshTokenService=l}canActivate(t,r){return this.checkRefreshToken.checkRefreshToken().pipe(Mt(i=>!1),pa(i=>(this.storageService.removeItem("uid"),this.removeRefreshTokenService.removeRefreshToken().subscribe(),yt(!0))))}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Vt),ie(ct),ie(Rn),ie(zf))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),zc=(()=>{class e{constructor(t,r,i,l,d){this.router=t,this.getService=r,this.storageService=i,this.checkRefreshToken=l,this.removeRefreshTokenService=d}canActivate(t,r){return this.checkRefreshToken.checkRefreshToken().pipe(Mt(i=>!0),pa(i=>(this.storageService.removeItem("uid"),this.removeRefreshTokenService.removeRefreshToken().subscribe(),Ne().fire({title:"Authentication fail",icon:"error",showConfirmButton:!0,confirmButtonText:"Go to sign-in page"}).then(l=>{this.storageService.removeItem("uid"),l.isConfirmed&&(window.location.href="/signin")}),yt(!1))))}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Vt),ie(ks),ie(ct),ie(Rn),ie(zf))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),aQ=(()=>{class e{constructor(t,r,i,l){this.router=t,this.storageService=r,this.checkRefreshToken=i,this.removeRefreshTokenService=l}canActivate(t,r){return this.checkRefreshToken.checkRefreshToken().pipe(Mt(i=>!1),pa(i=>(this.storageService.removeItem("uid"),this.removeRefreshTokenService.removeRefreshToken().subscribe(),yt(!0))))}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Vt),ie(ct),ie(Rn),ie(zf))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cQ=(()=>{class e{constructor(t){this.storageService=t}canActivate(t,r){return""!=this.storageService.getItem("signup-email")||(window.location.href="/error",!1)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ct))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),lQ=(()=>{class e{constructor(t,r){this.router=t,this.storageService=r}canActivate(t,r){return this.storageService.getItem("signup_google_email").length>=3||(this.router.navigate(["error"]),!1)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(Vt),ie(ct))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),uQ=(()=>{class e{constructor(t){this.storageService=t}canActivate(t,r){return""!=this.storageService.getItem("change-password")||(window.location.href="/error",!1)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ct))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),dQ=(()=>{class e{constructor(t){this.storageService=t}canActivate(t,r){return""!=this.storageService.getItem("forgot-password-email")||(window.location.href="/error",!1)}static#e=this.\u0275fac=function(r){return new(r||e)(ie(ct))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),fQ=(()=>{class e{constructor(t,r,i){this.getPostService=t,this.activeRoute=r,this.communityService=i,this.community=new h(0,"",0,"","",0,"","",0,0)}ngOnInit(){const r=window.location.href.match("/post/([0-9]+)");null!=r&&this.getPostService.getPostByPostId(Number.parseInt(r[1])).subscribe({next:i=>{this.communityService.getCommunityInfoById(i.community_id).subscribe({next:l=>{this.community=l}})}})}static#e=this.\u0275fac=function(r){return new(r||e)(B(ur),B($n),B(Pr))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-post-view"]],decls:4,vars:1,consts:[["id","outlet"],["id","community_info_block"],[3,"community_info"]],template:function(r,i){1&r&&(x(0,"div",0),Q(1,"router-outlet"),D(),x(2,"div",1),Q(3,"community-info",2),D()),2&r&&(k(3),A("community_info",i.community))},dependencies:[Gs,Is],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block;background-color:var(--primary_background_color);overflow:hidden;overflow-y:scroll;scrollbar-gutter:stable;box-sizing:border-box}#outlet[_ngcontent-%COMP%]{width:calc(100% - 380px);margin-left:2vw;margin-top:20px;box-sizing:border-box;margin-bottom:50px}#community_info_block[_ngcontent-%COMP%]{position:fixed;height:calc(100vh - var(--header_size));top:calc(var(--header_size) + 10px);overflow:auto;width:300px;right:40px}@media only screen and (max-width: 850px){#community_info_block[_ngcontent-%COMP%]{display:none;right:calc(var(--margin_home))}#outlet[_ngcontent-%COMP%]{width:calc(100% - 30px)}}"]})}return e})();function hQ(e,o){if(1&e){const t=We();x(0,"button",17),z("click",function(i){return ce(t),fe(q().reply(i))}),Q(1,"i",18),x(2,"pre",8),L(3," Reply"),D()()}}function pQ(e,o){if(1&e){const t=We();x(0,"button",19),z("click",function(i){return ce(t),fe(q().reply(i))}),Q(1,"i",20),x(2,"pre",8),L(3," Edit"),D()()}}let mQ=(()=>{class e{constructor(t,r,i,l,d,p,m,v,w){this.sanitizer=t,this.getPostService=r,this.dateTimeService=i,this.storageService=l,this.route=d,this.voteCommentService=p,this.voteImgService=m,this.presentationService=v,this.getCommentStatusService=w,this.commentData=new fK(0,0,0,"","",0,"",0,"",0,!1),this.postInfo=new uD(0,"",0,"","",0,"","","","","",0,0,0),this.voteType="none",this.previousVote=0,this.previousVoteType="none",this.shownDate="",this.margin="0px",this.previousContent="",this.uid=0,this.isReplyAllowed=!1,this.isEditAllowed=!1,this.upvote="../../../../../assets/icon/upvote.png",this.upvote_fill="../../../../../assets/icon/upvote-comment-fill.png",this.downvote="../../../../../assets/icon/downvote.png",this.downvote_fill="../../../../../assets/icon/downvote-comment-fill.png"}ngOnInit(){this.voteImgService.selectDownVoteImg(),this.voteImgService.selectUpVoteImg(),this.uid=""==this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid")),this.isReplyAllowed=this.commentData.level<=6&&this.commentData.uid!=this.uid,this.isEditAllowed=this.commentData.uid==this.uid,this.commentData.content=this.commentData.content.replace("<img src=","<img class='img_comment' src="),this.commentData.content=this.commentData.content.replace(/<img/g,'<img style="display:block;" '),this.commentData.content=this.commentData.content.replace(/<ol/g,'<ol style="margin-left:20px;" '),this.commentData.content=this.commentData.content.replace(/<ul/g,'<ul style="margin-left:30px;" '),this.commentData.content=this.commentData.content.replace(/<pre/g,'<pre class="pre_code" style="width:fit-content" '),this.commentData.content=this.commentData.content.replace(/<code/g,'<code class="code" '),this.commentData.content=this.commentData.content.replace(/<a/g,'<a class="a link" '),this.commentData.content=this.commentData.content.replace(/<p/g,'<p class="comment_content" '),this.getPostService.getDetailPostByUidAndPostId(this.uid,this.commentData.post_id).subscribe({next:t=>{this.postInfo=t}}),this.getCommentStatusService.getCommentStatus(this.commentData._id,this.uid).subscribe({next:t=>{this.voteType=t.vote_type,this.previousVoteType=t.vote_type},error:t=>{console.log("HttpServletResponse: "+t.error.message+"\nResponseEntity: "+t.error),console.log("Error check comment status")}})}navigateToPost(){this.route.navigate(["/post/"+this.postInfo.post_id+"/comment/"+this.commentData._id])}navigateTocommunity(t){t.stopPropagation(),this.route.navigate(["/r/"+this.postInfo.community_id])}reply(t){t.stopPropagation(),this.route.navigate(["/post/"+this.postInfo.post_id+"/comment/"+this.commentData._id])}voteComment(t,r){t.stopPropagation(),this.uid=""===this.storageService.getItem("uid")?0:Number.parseInt(this.storageService.getItem("uid")),0===this.uid?Ne().fire({title:"You need to sign-in to do this action",icon:"error",showConfirmButton:!0,confirmButtonText:"OK",footer:'<a href="signin" style="color:red;font-size: 18px"><b>Click here to go to sign-in page<b/></a>'}):(this.previousVote=this.commentData.vote,this.previousVoteType=this.voteType,"none"===this.voteType&&"upvote"===r?(this.commentData.vote+=1,this.voteType="upvote"):"none"===this.voteType&&"downvote"===r?(this.commentData.vote-=1,this.voteType="downvote"):"upvote"===this.voteType&&"upvote"===r?(this.commentData.vote-=1,this.voteType="none"):"upvote"===this.voteType&&"downvote"===r?(this.commentData.vote-=2,this.voteType="downvote"):"downvote"===this.voteType&&"upvote"===r?(this.commentData.vote+=2,this.voteType="upvote"):"downvote"===this.voteType&&"downvote"===r&&(this.commentData.vote+=1,this.voteType="none"),this.sendVoteCommentToServer(this.commentData.post_id,this.commentData._id,this.commentData.vote,this.voteType))}sendVoteCommentToServer(t,r,i,l){this.voteCommentService.updateVoteComment(t,r,i,l).subscribe({next:d=>{console.log("Vote comment: "+d.vote_updated),this.commentData.vote=i,this.voteType=l},error:d=>{console.log("HttpServletResponse: "+d.error.message+"\nResponseEntity: "+d.error),console.log("Error vote post"),console.log("vote when error: "+this.commentData.vote)}})}static#e=this.\u0275fac=function(r){return new(r||e)(B(Pf),B(ur),B(Ds),B(ct),B(Vt),B(hK),B(bm),B(va),B(pK))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-comment-view"]],inputs:{commentData:"commentData"},decls:26,vars:14,consts:[["id","comment_container",3,"click"],[1,"header"],[1,"community_info"],[3,"src","title","click"],[1,"txt_community_name",3,"routerLink","title"],[1,"text_post_name"],[1,"username_block"],[1,"txt_username"],[2,"color","var(--icon)"],["id","txt_created_at"],[1,"content",3,"innerHTML"],["id","footer"],["id","block_vote",1,"block_vote"],["id","btn_upvote","type","button",1,"btn_vote",3,"click"],["id","btn_downvote","type","button",1,"btn_vote",3,"click"],["id","btn_reply","class","footer_btn","type","button",3,"click",4,"ngIf"],["class","footer_btn","id","btn_edit","type","button",3,"click",4,"ngIf"],["id","btn_reply","type","button",1,"footer_btn",3,"click"],[1,"pi","pi-comment",2,"color","var(--icon)"],["id","btn_edit","type","button",1,"footer_btn",3,"click"],[1,"pi","pi-pencil",2,"color","var(--icon)"]],template:function(r,i){1&r&&(x(0,"div",0),z("click",function(){return i.navigateToPost()}),x(1,"div",1)(2,"div",2)(3,"img",3),z("click",function(d){return i.navigateTocommunity(d)}),D(),x(4,"a",4),L(5),D()(),x(6,"p",5),L(7),D(),x(8,"div",6)(9,"b",7),L(10),D(),x(11,"pre",8),L(12," commented "),D(),x(13,"p",9),L(14),D()()(),Q(15,"div",10),x(16,"div",11)(17,"div",12)(18,"button",13),z("click",function(d){return i.voteComment(d,"upvote")}),Q(19,"img"),D(),x(20,"p",8),L(21),D(),x(22,"button",14),z("click",function(d){return i.voteComment(d,"downvote")}),Q(23,"img"),D()(),Pe(24,hQ,4,0,"button",15)(25,pQ,4,0,"button",16),D()()),2&r&&(k(3),Ot("title",i.postInfo.community_name),A("src",i.postInfo.community_icon,Qe),k(1),In("routerLink","/r/",i.postInfo.community_id,""),Ot("title",i.postInfo.community_name),k(1),at("r/",i.postInfo.community_name,""),k(2),ht(i.postInfo.title),k(3),ht(i.commentData.username),k(4),ht(i.dateTimeService.getTimeByCompareCreatedAtAndCurrentDate(i.commentData.created_at)),k(1),A("innerHTML",i.sanitizer.bypassSecurityTrustHtml(i.commentData.content),sb),k(4),nr("src","upvote"===i.voteType?i.upvote_fill:i.voteImgService.upvote,Qe),k(2),ht(i.presentationService.transformNumber(i.commentData.vote)),k(2),nr("src","downvote"===i.voteType?i.downvote_fill:i.voteImgService.downvote,Qe),k(1),A("ngIf",i.isReplyAllowed),k(1),A("ngIf",i.isEditAllowed))},dependencies:[sn,Zu],styles:["#comment_container[_ngcontent-%COMP%]{width:100%;height:auto;padding:20px;border-bottom:1px solid var(--border)}#comment_container[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover);cursor:pointer}#comment_container[_ngcontent-%COMP%]:hover   #block_vote[_ngcontent-%COMP%], #comment_container[_ngcontent-%COMP%]:hover   .footer_btn[_ngcontent-%COMP%], #comment_container[_ngcontent-%COMP%]:hover   .btn_vote[_ngcontent-%COMP%]{background-color:var(--bg_hover)}.community_info[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.community_info[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px;aspect-ratio:1/1;border-radius:50%;margin-right:10px}.community_info[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]:hover{cursor:pointer}.txt_community_name[_ngcontent-%COMP%]{font-size:13px;color:var(--icon)!important;font-weight:600;text-decoration:none}.txt_community_name[_ngcontent-%COMP%]:hover{text-decoration:underline!important}.text_post_name[_ngcontent-%COMP%], .txt_username[_ngcontent-%COMP%]{font-size:13px;margin-left:40px;color:var(--icon)}.username_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;font-size:13px;margin-top:5px}#txt_created_at[_ngcontent-%COMP%]{color:var(--txt);font-size:13px;font-weight:500}.content[_ngcontent-%COMP%]{margin-left:40px;margin-top:5px;color:var(--icon);padding:5px 0}#footer[_ngcontent-%COMP%]{width:100%;height:30px!important;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;box-sizing:border-box;margin-left:40px;margin-top:5px}#footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:auto;height:30px;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;background-color:var(--primary_background_color);margin-right:10px;border-radius:20px}#footer[_ngcontent-%COMP%]   #btn_upvote.normal[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   #btn_downvote.normal[_ngcontent-%COMP%], #btn_comment[_ngcontent-%COMP%]{background-color:var(--primary_background_color)}#btn_comment[_ngcontent-%COMP%], #btn_share[_ngcontent-%COMP%]{padding:0 5px}#btn_upvote[_ngcontent-%COMP%], #btn_downvote[_ngcontent-%COMP%]{padding:5px;border-radius:20px;width:auto;height:100%;display:flex;justify-content:center;align-items:center;background-color:var(--primary_background_color)}#btn_upvote[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], #btn_downvote[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%}#footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%]   #btn_upvote[_ngcontent-%COMP%]:hover, #footer[_ngcontent-%COMP%]   #block_vote[_ngcontent-%COMP%]   #btn_downvote[_ngcontent-%COMP%]:hover{background-color:var(--search)}#btn_comment[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], #btn_share[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding:0 5px}#btn_comment[_ngcontent-%COMP%]{color:var(--icon)}.footer_btn[_ngcontent-%COMP%]{width:auto;height:100%;padding:0 7px;margin:0 5px;display:flex;justify-content:center;align-items:center;background-color:var(--primary_background_color)}#btn_edit[_ngcontent-%COMP%]:hover, #btn_reply[_ngcontent-%COMP%]:hover{background-color:var(--search)!important}"]})}return e})();const xm=e=>({"background-color":e});function gQ(e,o){if(1&e){const t=We();x(0,"div",8)(1,"b"),L(2,"Sort by"),D(),x(3,"button",9),z("click",function(){return ce(t),fe(q().selectSort("hot"))}),L(4,"Hot"),D(),x(5,"button",9),z("click",function(){return ce(t),fe(q().selectSort("new"))}),L(6,"New"),D(),x(7,"button",9),z("click",function(){return ce(t),fe(q().selectSort("top_day"))}),L(8,"Top today"),D(),x(9,"button",9),z("click",function(){return ce(t),fe(q().selectSort("top_week"))}),L(10,"Top this week"),D(),x(11,"button",9),z("click",function(){return ce(t),fe(q().selectSort("top_month"))}),L(12,"Top this month"),D(),x(13,"button",9),z("click",function(){return ce(t),fe(q().selectSort("top_year"))}),L(14,"Top this year"),D(),x(15,"button",9),z("click",function(){return ce(t),fe(q().selectSort("top_all_time"))}),L(16,"Top all time"),D()()}if(2&e){const t=q();k(3),A("ngStyle",ve(7,xm,"hot"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(9,xm,"new"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(11,xm,"top_day"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(13,xm,"top_week"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(15,xm,"top_month"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(17,xm,"top_year"==t.sort_option?"var(--search)":"var(--primary_background_color)")),k(2),A("ngStyle",ve(19,xm,"top_all_time"==t.sort_option?"var(--search)":"var(--primary_background_color)"))}}function _Q(e,o){1&e&&Q(0,"app-comment-view",10),2&e&&A("commentData",o.$implicit)}function vQ(e,o){1&e&&(x(0,"div",11),L(1,"No comment found"),D())}function yQ(e,o){1&e&&(x(0,"div",12),Q(1,"img",13)(2,"div",14),D())}let bQ=(()=>{class e{constructor(t,r,i,l,d,p){this.searchUserProfileService=t,this.storageService=r,this.getCommentService=i,this.activeRoute=l,this.darkmodeSerive=d,this.shareDataService=p,this.userInfo=new ym(0,"","","",0,0,""),this.comments=[],this.comment_id_arr=[],this.isDataLoad=!1,this.wait=!1,this.isSortOptionShow=!1,this.sort_option="new",this.sort_text="New",this.intervals=[]}ngOnInit(){this.darkmodeSerive.useDarkMode();const t=this.activeRoute.parent?.snapshot.params.username;""==this.storageService.getItem("uid")||Number.parseInt(this.storageService.getItem("uid")),this.shareDataService.comments_infos$.subscribe(i=>this.comments=i),0==this.comments.length&&this.searchUserProfileService.getUserProfileByName("/get-user-info-by-username",t).subscribe({next:i=>{this.userInfo=i,this.getCommentsByUid("new")}})}setSortText(t){switch(t){case"hot":this.sort_text="Hot";break;case"new":this.sort_text="New";break;case"top_day":this.sort_text="Top today";break;case"top_week":this.sort_text="Top this week";break;case"top_month":this.sort_text="Top this month";break;case"top_year":this.sort_text="Top this year";break;case"top_all_time":this.sort_text="Top all time"}}showSortOption(t){t.stopPropagation(),this.isSortOptionShow=!this.isSortOptionShow}selectSort(t){this.sort_option=t,this.setSortText(t),this.isSortOptionShow=!this.isSortOptionShow,this.comments=[],this.comment_id_arr=[],this.shareDataService.setCommentsInfos(this.comments),this.shareDataService.setCommentIds(this.comment_id_arr);for(let r of this.intervals)clearInterval(r);this.shareDataService.setCommentSearchOption(t),this.getCommentsByUid(t)}getCommentsByUid(t){this.isDataLoad=!0,0==this.comments.length?this.getCommentService.getCommentsByUser(this.userInfo.uid,t).subscribe({next:r=>{this.isDataLoad=!1,this.wait=!0,this.comments=r,this.shareDataService.setCommentsInfos(r)}}):this.isDataLoad=!1}isElementInViewport(t){const r=document.getElementById(t);if(!r)return!1;const i=r.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)}getCommentsByCheckViewPort(t,r,i,l,d,p){if(t.length==r.length)console.log("full"),this.isDataLoad=!1;else for(let m=l;m<r.length;m+=p){const v=setInterval(()=>{this.intervals.push(v),this.isElementInViewport(r[m-d].toString())&&(clearInterval(v),r.slice(m,m+p),this.isDataLoad=!0)},200)}}static#e=this.\u0275fac=function(r){return new(r||e)(B(jc),B(ct),B(Ri),B($n),B(Ys),B(Er))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-comment-view-list"]],decls:9,vars:8,consts:[["id","sort_container"],["id","btn_sort",3,"ngStyle","click"],[1,"pi","pi-chevron-down"],["id","sort_option_block",4,"ngIf"],["id","comment_container"],[3,"commentData",4,"ngFor","ngForOf"],["class","empty_block",4,"ngIf"],["class","load_data_block",4,"ngIf"],["id","sort_option_block"],[3,"ngStyle","click"],[3,"commentData"],[1,"empty_block"],[1,"load_data_block"],["src","../../../../assets/icon/logo.png",1,"img_load_data"],[1,"data_loader"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"button",1),z("click",function(d){return i.showSortOption(d)}),L(2),Q(3,"i",2),D(),Pe(4,gQ,17,21,"div",3),D(),x(5,"div",4),Pe(6,_Q,1,1,"app-comment-view",5)(7,vQ,2,0,"div",6),D(),Pe(8,yQ,3,0,"div",7)),2&r&&(k(1),A("ngStyle",ve(6,xm,i.isSortOptionShow?"var(--bg_hover)":"var(--primary_background_color)")),k(1),ht(i.sort_text),k(2),A("ngIf",i.isSortOptionShow),k(2),A("ngForOf",i.comments),k(1),A("ngIf",0==i.comments.length&&i.wait),k(1),A("ngIf",i.isDataLoad))},dependencies:[Zr,sn,Eo,mQ],styles:["#sort_container[_ngcontent-%COMP%]{position:relative;width:100px;height:auto;align-self:flex-start}b[_ngcontent-%COMP%]{color:var(--icon)}#btn_sort[_ngcontent-%COMP%]{width:auto;height:30px;padding:0 20px;background-color:var(--primary_background_color);border-radius:20px;font-weight:500;display:flex;flex-direction:row;justify-content:center;align-items:center;text-wrap:nowrap;margin-bottom:10px;color:var(--txt)!important}#btn_sort[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)!important}#btn_sort[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-left:10px;font-size:12px}#sort_option_block[_ngcontent-%COMP%]{width:140px;height:auto;position:absolute;top:35px;left:0;z-index:999;box-shadow:var(--menu_box_shadow)}#sort_option_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:40px;width:100%;text-align:left;padding-left:20px;background-color:var(--primary_background_color);font-weight:500;color:var(--icon)}#sort_option_block[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover)!important}#sort_option_block[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{display:block;height:40px;width:100%;text-align:left;padding:10px 20px;background-color:var(--primary_background_color)}"]})}return e})();const wQ=e=>({"background-color":e});function CQ(e,o){if(1&e){const t=We();x(0,"button",5),z("click",function(){const l=ce(t).$implicit;return fe(q().goToCommunityModPage(l.id))}),Q(1,"img",6),x(2,"p"),L(3),D()()}if(2&e){const t=o.$implicit,r=q();Ot("title",t.name),A("ngStyle",ve(4,wQ,t.id==r.selected_community_id?"var(--btn_selected)":"var(--primary_background_color)")),k(1),Ot("src",t.avatar,Qe),k(2),at("r/",t.name,"")}}let SQ=(()=>{class e{constructor(t,r,i,l,d,p,m){this.communityService=t,this.storageService=r,this.checkRefreshTokenService=i,this.darkmodeSerive=l,this.shareDataService=d,this.route=p,this.activeRoute=m,this.moderationCommunities=[],this.selected_community_id=0}ngOnInit(){this.darkmodeSerive.useDarkMode();const r=window.location.href.match(/mod\/(\d+)\/([^\/]+)/);r&&(this.selected_community_id=Number.parseInt(r[1])),this.checkRefreshTokenService.checkRefreshToken().subscribe({next:i=>{this.communityService.getCommunityModerateByUid(i).subscribe({next:l=>{this.moderationCommunities=l}})}})}goToCommunityModPage(t){this.selected_community_id=t;const i=window.location.href.match(/mod\/(\d+)\/([^\/]+)/);i&&(window.location.href="/mod/"+this.selected_community_id+"/"+i[2])}goBackToCommunity(){window.location.href="/r/"+this.selected_community_id}static#e=this.\u0275fac=function(r){return new(r||e)(B(Pr),B(ct),B(Rn),B(Ys),B(Er),B(Vt),B($n))};static#t=this.\u0275cmp=ne({type:e,selectors:[["mod-navigation-bar"]],decls:8,vars:1,consts:[["id","navigation_bar",1,"scrollbar_width"],["id","btn_back",1,"margin_left",3,"click"],[1,"pi","pi-arrow-left"],[1,"margin_left"],[3,"ngStyle","title","click",4,"ngFor","ngForOf"],[3,"ngStyle","title","click"],["id","img_community_icon","alt","",3,"src"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"button",1),z("click",function(){return i.goBackToCommunity()}),Q(2,"i",2),x(3,"p"),L(4,"Exit mod tools"),D()(),x(5,"p",3),L(6,"Moderated communities"),D(),Pe(7,CQ,4,6,"button",4),D()),2&r&&(k(7),A("ngForOf",i.moderationCommunities))},dependencies:[Zr,Eo],styles:["[_nghost-%COMP%]{background-color:var(--primary_background_color)}.selected_page[_ngcontent-%COMP%]{background-color:var(--search)!important}#navigation_bar[_ngcontent-%COMP%]{width:100%;height:100%;display:block;overflow:hidden;scrollbar-gutter:stable}#navigation_bar[_ngcontent-%COMP%]:hover{overflow-y:auto}#navigation_bar[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;height:50px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;font-size:14px;font-weight:500;color:var(--icon)!important;background-color:var(--primary_background_color);border-radius:10px;white-space:nowrap;overflow:hidden!important;text-overflow:ellipsis}#btn_back[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}#btn_back[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:auto;height:auto;margin:0 10px 0 0;border-radius:50%;display:flex;flex-direction:row;justify-content:center;align-items:center}#navigation_bar[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{background-color:var(--search)!important}#img_community_icon[_ngcontent-%COMP%], i[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;margin-left:10px;margin-right:5px}.margin_left[_ngcontent-%COMP%]{padding-left:10px}.margin_left[_ngcontent-%COMP%]:hover{cursor:pointer}"]})}return e})(),xQ=(()=>{class e{constructor(t,r){this.activeRoute=t,this.shareDataService=r}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||e)(B($n),B(Er))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-control-post"]],decls:4,vars:0,consts:[["id","outlet"]],template:function(r,i){1&r&&(Q(0,"app-header-bar")(1,"mod-navigation-bar"),x(2,"div",0),Q(3,"router-outlet"),D())},dependencies:[Gs,pD,SQ],styles:["[_nghost-%COMP%]{position:relative;width:100%;height:100%;background-color:var(--primary_background_color);overflow:hidden;box-sizing:border-box;--nav_width: 260px }app-header-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:999}mod-navigation-bar[_ngcontent-%COMP%]{position:fixed;height:calc(100vh - var(--header_size));left:0;width:var(--nav_width);top:var(--header_size);border-right:1px solid var(--border)}#outlet[_ngcontent-%COMP%]{position:absolute;top:50px;left:var(--nav_width);width:calc(100% - var(--nav_width));height:calc(100% - 50px)}@media only screen and (max-width: 1000px){mod-navigation-bar[_ngcontent-%COMP%]{display:none!important}#outlet[_ngcontent-%COMP%]{left:0;width:100%}}"]})}return e})();function PQ(e,o){1&e&&(x(0,"div",4),Q(1,"img",5)(2,"div",6),D())}function EQ(e,o){1&e&&(x(0,"p",15),L(1,"1 upvote"),D())}function kQ(e,o){if(1&e&&(x(0,"p",15),L(1),D()),2&e){const t=q().$implicit,r=q();k(1),at("",r.presentationService.transformNumber(t.vote)," upvotes")}}function DQ(e,o){1&e&&(x(0,"p",15),L(1,"0 vote"),D())}function TQ(e,o){1&e&&(x(0,"p",15),L(1,"-1 downvote"),D())}function MQ(e,o){if(1&e&&(x(0,"p",15),L(1),D()),2&e){const t=q().$implicit,r=q();k(1),at("",r.presentationService.transformNumber(t.vote)," downvotes")}}function IQ(e,o){1&e&&(x(0,"p",24),L(1,"TEXT"),D())}function OQ(e,o){1&e&&(x(0,"p",24),L(1,"IMAGE"),D())}function AQ(e,o){1&e&&(x(0,"p",24),L(1,"VIDEO"),D())}function NQ(e,o){1&e&&(x(0,"p",24),L(1,"LINK"),D())}function RQ(e,o){if(1&e&&(x(0,"p"),L(1),D()),2&e){const t=q(2).$implicit,r=q();k(1),ht(r.dateTimeService.getTimeByCompareCreatedAtAndCurrentDate(t.allowed_at))}}function FQ(e,o){if(1&e&&(x(0,"pre",25),Q(1,"i",26),L(2,"Approved "),Pe(3,RQ,2,1,"p",27),D()),2&e){const t=q().$implicit;k(3),A("ngIf",null!=t.allowed_at)}}function LQ(e,o){if(1&e&&(x(0,"p"),L(1),D()),2&e){const t=q(2).$implicit,r=q();k(1),ht(r.dateTimeService.getTimeByCompareCreatedAtAndCurrentDate(t.deleted_at))}}function BQ(e,o){if(1&e&&(x(0,"pre",25),Q(1,"i",28),L(2,"Removed "),Pe(3,LQ,2,1,"p",27),D()),2&e){const t=q().$implicit;k(3),A("ngIf",null!=t.deleted_at)}}function VQ(e,o){if(1&e){const t=We();x(0,"button",29),z("click",function(i){ce(t);const l=q().$implicit;return fe(q().allowPost(l.post_id,i))}),L(1,"Approve"),D()}}function $Q(e,o){if(1&e){const t=We();x(0,"button",30),z("click",function(i){ce(t);const l=q().$implicit;return fe(q().removePost(l.post_id,i))}),L(1,"Remove"),D()}}function UQ(e,o){if(1&e){const t=We();x(0,"button",29),z("click",function(i){ce(t);const l=q().$implicit;return fe(q().allowPost(l.post_id,i))}),L(1,"Approve"),D()}}function jQ(e,o){if(1&e){const t=We();x(0,"button",30),z("click",function(i){ce(t);const l=q().$implicit;return fe(q().removePost(l.post_id,i))}),L(1,"Remove"),D()}}function HQ(e,o){if(1&e){const t=We();x(0,"button",29),z("click",function(i){ce(t);const l=q().$implicit;return fe(q().allowPost(l.post_id,i))}),L(1,"Approve"),D()}}function zQ(e,o){if(1&e){const t=We();x(0,"button",30),z("click",function(i){ce(t);const l=q().$implicit;return fe(q().removePost(l.post_id,i))}),L(1,"Remove"),D()}}function WQ(e,o){if(1&e){const t=We();x(0,"button",29),z("click",function(i){ce(t);const l=q().$implicit;return fe(q().allowPost(l.post_id,i))}),L(1,"Approve"),D()}}function qQ(e,o){if(1&e){const t=We();x(0,"button",30),z("click",function(i){ce(t);const l=q().$implicit;return fe(q().removePost(l.post_id,i))}),L(1,"Remove"),D()}}const GQ=e=>({selected_post:e});function KQ(e,o){if(1&e){const t=We();x(0,"div",7),z("click",function(){const l=ce(t).$implicit;return fe(q().selectDetailPost(l))}),x(1,"div",8)(2,"div",9)(3,"div",10)(4,"a",11),Q(5,"img",12),x(6,"b",13),L(7),D()(),x(8,"pre",14),L(9," \xb7 "),D(),x(10,"p",15),L(11),D(),x(12,"pre",14),L(13," \xb7 "),D(),Pe(14,EQ,2,0,"p",16)(15,kQ,2,1,"p",16)(16,DQ,2,0,"p",16)(17,TQ,2,0,"p",16)(18,MQ,2,1,"p",16)(19,IQ,2,0,"p",17)(20,OQ,2,0,"p",17)(21,AQ,2,0,"p",17)(22,NQ,2,0,"p",17),D(),x(23,"p",18),L(24),D()()(),x(25,"div",19),Pe(26,FQ,4,1,"pre",20)(27,BQ,4,1,"pre",20),D(),x(28,"nav",21),Pe(29,VQ,2,0,"button",22)(30,$Q,2,0,"button",23)(31,UQ,2,0,"button",22)(32,jQ,2,0,"button",23)(33,HQ,2,0,"button",22)(34,zQ,2,0,"button",23)(35,WQ,2,0,"button",22)(36,qQ,2,0,"button",23),D()()}if(2&e){const t=o.$implicit,r=q();Ot("id",t.post_id),A("ngClass",ve(26,GQ,r.selected_detail_post.post_id==t.post_id)),k(4),In("href","user/",t.username,"/posts",Qe),k(1),Ot("src",t.username_icon,Qe),k(2),at("u/",t.username,""),k(4),ht(r.dateTimeService.getTimeByCompareCreatedAtAndCurrentDate(t.created_at)),k(3),A("ngIf",1==t.vote),k(1),A("ngIf",t.vote>1),k(1),A("ngIf",0==t.vote),k(1),A("ngIf",-1==t.vote),k(1),A("ngIf",t.vote<-1),k(1),A("ngIf","editor"==t.type),k(1),A("ngIf","img"==t.type),k(1),A("ngIf","video"==t.type),k(1),A("ngIf","link"==t.type),k(2),ht(t.title),k(2),A("ngIf",1==t.allow&&0==t.deleted),k(1),A("ngIf",1==t.deleted),k(2),A("ngIf",(0==t.allow||1==t.deleted)&&r.isReviewModPage),k(1),A("ngIf",0==t.deleted&&r.isReviewModPage),k(1),A("ngIf",1==t.deleted&&r.isApprovedModPage),k(1),A("ngIf",0==t.deleted&&r.isApprovedModPage),k(1),A("ngIf",1==t.deleted&&r.isRemoveModPage),k(1),A("ngIf",0==t.deleted&&r.isRemoveModPage),k(1),A("ngIf",1==t.deleted&&r.isEditModPage),k(1),A("ngIf",0==t.deleted&&r.isEditModPage)}}function ZQ(e,o){1&e&&(x(0,"div",31)(1,"p"),L(2,"No post found"),D()())}let zB=(()=>{class e{constructor(t,r,i,l,d,p,m,v,w,P,R,$,H){this.recentVisitPostService=t,this.storageService=r,this.presentationService=i,this.getPostService=l,this.getPostsService=d,this.activeRoute=p,this.shareDataService=m,this.dateTimeService=v,this.route=w,this.allowPostService=P,this.deletePostService=R,this.refreshTokenService=$,this.communityService=H,this.detail_post_arr=[],this.post_id_arr=[],this.cur_view_post_id=0,this.community_id=0,this.img=[],this.isDetailPostShow=!1,this.selected_post_id=0,this.selected_detail_post=new _a,this.isDataLoad=!1,this.wait=!1,this.isReviewModPage=!1,this.isApprovedModPage=!1,this.isRemoveModPage=!1,this.isEditModPage=!1}ngOnInit(){this.shareDataService.changed_post$.subscribe(i=>{if(0!=i.post_id)for(let l of this.detail_post_arr)l.post_id==i.post_id&&(l.allow=i.allow,l.deleted=i.deleted,1==i.allow&&(l.allowed_at=i.allowed_at),1==i.deleted&&(l.deleted_at=i.deleted_at))}),this.shareDataService.mod_selected_post_id$.subscribe(i=>{if(null!=this.selected_detail_post){if(-1==i){const l=this.detail_post_arr.findIndex(d=>d.post_id===this.selected_detail_post.post_id);-1!=l&&this.selectDetailPost(this.detail_post_arr[l-1])}if(1==i){const l=this.detail_post_arr.findIndex(d=>d.post_id===this.selected_detail_post.post_id);-1!=l&&this.selectDetailPost(this.detail_post_arr[l+1])}}});const r=window.location.href.match(/mod\/(\d+)\/[^\/]+/);r&&(this.community_id=Number.parseInt(r[1]),this.getInfo(this.community_id))}getInfo(t){this.isReviewModPage=window.location.href.includes("/review"),this.isApprovedModPage=window.location.href.includes("/approved"),this.isRemoveModPage=window.location.href.includes("/removed"),this.isEditModPage=window.location.href.includes("/editted"),this.isDataLoad=!0,""==this.storageService.getItem("uid")||Number.parseInt(this.storageService.getItem("uid")),this.communityService.getCommunityInfoById(t.toString()).subscribe({next:i=>{this.refreshTokenService.checkRefreshToken().subscribe({next:l=>{i.uid!==l?Ne().fire({title:"Authentication fail",icon:"error",showConfirmButton:!0,confirmButtonText:"Go to home page"}).then(d=>{d.isConfirmed&&(window.location.href="/home")}):(this.isReviewModPage&&this.getPostsService.getPostInCommunityNotAllow("/get-control-posts",this.community_id).subscribe({next:d=>{this.post_id_arr=d,this.getPostService.getDetailPostByUidAndPostIds(l,this.post_id_arr).subscribe({next:p=>{this.detail_post_arr=p,this.isDataLoad=!1,this.wait=!0}})}}),this.isApprovedModPage&&this.getPostsService.getAllowedPostIdsInCommunity(this.community_id).subscribe({next:d=>{this.post_id_arr=d,this.getPostService.getDetailPostByUidAndPostIds(l,this.post_id_arr).subscribe({next:p=>{this.detail_post_arr=p,this.isDataLoad=!1,this.wait=!0}})}}),this.isRemoveModPage&&this.getPostsService.getDeletedPostIdsInCommunity(this.community_id).subscribe({next:d=>{this.post_id_arr=d,this.getPostService.getDetailPostByUidAndPostIds(l,this.post_id_arr).subscribe({next:p=>{this.detail_post_arr=p,this.isDataLoad=!1,this.wait=!0}})}}),this.isEditModPage&&this.getPostsService.getEdittedPostIdsInCommunity(this.community_id).subscribe({next:d=>{this.post_id_arr=d,this.getPostService.getDetailPostByUidAndPostIds(l,this.post_id_arr).subscribe({next:p=>{this.detail_post_arr=p,this.isDataLoad=!1,this.wait=!0}})}}))},error:l=>{Ne().fire({title:"Authentication fail",icon:"error",showConfirmButton:!0,confirmButtonText:"Go to home page"}).then(d=>{d.isConfirmed&&(window.location.href="/home")})}})}})}selectDetailPost(t){if(null!=t){this.selected_detail_post=t,this.shareDataService.setModDetailPost(this.selected_detail_post),this.isDetailPostShow=!0;const r=this.detail_post_arr.findIndex(i=>i.post_id===this.selected_detail_post.post_id);0==r&&this.shareDataService.setFirstLast(new vm(1,0)),r==this.detail_post_arr.length-1&&this.shareDataService.setFirstLast(new vm(0,1)),r>0&&r<this.detail_post_arr.length-1&&this.shareDataService.setFirstLast(new vm(0,0)),0==r&&1==this.detail_post_arr.length&&this.shareDataService.setFirstLast(new vm(1,1))}}allowPost(t,r){r.stopPropagation(),this.refreshTokenService.checkRefreshToken().subscribe({next:i=>{this.allowPostService.setAllowPost(t,1).subscribe({next:l=>{for(let d of this.detail_post_arr)d.post_id===t&&(d.allow=1,d.deleted=0,d.allowed_at=this.dateTimeService.getCurrentDateTime().toISOString(),this.selected_detail_post.post_id==d.post_id&&this.shareDataService.setChangedPost(new Wf(t,1,0,this.dateTimeService.getCurrentDateTime().toISOString(),"")))},error:l=>{Ne().fire({text:"Error perfrom action. Please try again",icon:"error"})}})},error:i=>{Ne().fire({text:"Error perfrom action. Please try again",icon:"error"})}})}removePost(t,r){r.stopPropagation(),this.refreshTokenService.checkRefreshToken().subscribe({next:i=>{this.deletePostService.deletePost(t,i,2).subscribe({next:l=>{for(let d of this.detail_post_arr)d.post_id===t&&(d.deleted=1,d.deleted_at=this.dateTimeService.getCurrentDateTime().toISOString(),this.selected_detail_post.post_id==d.post_id&&this.shareDataService.setChangedPost(new Wf(t,d.allow,1,"",this.dateTimeService.getCurrentDateTime().toISOString())))},error:l=>{Ne().fire({text:"Error perfrom action. Please try again",icon:"error"})}})},error:i=>{Ne().fire({text:"Error perfrom action. Please try again",icon:"error"})}})}static#e=this.\u0275fac=function(r){return new(r||e)(B(gm),B(ct),B(va),B(ur),B(u0),B($n),B(Er),B(Ds),B(Vt),B(ho),B(Sm),B(Rn),B(Pr))};static#t=this.\u0275cmp=ne({type:e,selectors:[["mod-post"]],decls:4,vars:3,consts:[[1,"scroll_container"],["class","load_data_block",4,"ngIf"],["class","block",3,"id","ngClass","click",4,"ngFor","ngForOf"],["class","empty_block","style","margin-left: 20px; width: calc(100% - 40px);",4,"ngIf"],[1,"load_data_block"],["src","../../../../assets/icon/logo.png",1,"img_load_data"],[1,"data_loader"],[1,"block",3,"id","ngClass","click"],["id","post_block"],["id","info_block"],["id","post_header_block"],[3,"href"],[3,"src"],[2,"margin-left","5px","color","var(--txt)"],[2,"font-size","20px","color","var(--txt)"],[1,"txt_header"],["class","txt_header",4,"ngIf"],["class","txt_type",4,"ngIf"],[2,"font-size","14px","color","var(--icon)","font-weight","550"],["id","status_container"],["class","txt_status",4,"ngIf"],["id","moderate_block"],["class","mod_btn","id","btn_allow",3,"click",4,"ngIf"],["class","mod_btn","id","btn_delete",3,"click",4,"ngIf"],[1,"txt_type"],[1,"txt_status"],[1,"pi","pi-check",2,"color","green"],[4,"ngIf"],[1,"pi","pi-times",2,"color","red"],["id","btn_allow",1,"mod_btn",3,"click"],["id","btn_delete",1,"mod_btn",3,"click"],[1,"empty_block",2,"margin-left","20px","width","calc(100% - 40px)"]],template:function(r,i){1&r&&(x(0,"div",0),Pe(1,PQ,3,0,"div",1)(2,KQ,37,28,"div",2)(3,ZQ,3,0,"div",3),D()),2&r&&(k(1),A("ngIf",i.isDataLoad),k(1),A("ngForOf",i.detail_post_arr),k(1),A("ngIf",0==i.detail_post_arr.length&&i.wait))},dependencies:[lr,Zr,sn],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;height:100%;width:100%;border-top:1px solid var(--border)}.scroll_container[_ngcontent-%COMP%]{width:100%;height:100%;display:block;background-color:var(--primary_background_color);overflow-x:hidden;overflow-y:auto;scrollbar-gutter:auto;box-sizing:border-box}#mod_posts_container[_ngcontent-%COMP%]{width:100%;height:auto;display:block}a[_ngcontent-%COMP%]{color:var(--secondary_color)!important}a[_ngcontent-%COMP%]{display:block}a[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.block[_ngcontent-%COMP%]{width:100%;height:auto;padding:10px 20px;border-bottom:1px solid var(--border)}.block[_ngcontent-%COMP%]:hover{background-color:var(--bg_hover);cursor:pointer}#post_block[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;justify-content:flex-start;margin-bottom:10px}#info_block[_ngcontent-%COMP%]{width:100%;height:auto}#post_header_block[_ngcontent-%COMP%]{width:100%;height:25px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-bottom:10px}#post_header_block[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{width:auto;height:100%}#post_header_block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%}#post_header_block[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;font-size:14px}.txt_header[_ngcontent-%COMP%]{font-size:13px;color:var(--txt)}.txt_type[_ngcontent-%COMP%]{color:var(--txt);font-size:13px;padding:0 10px;margin-left:20px}#moderate_block[_ngcontent-%COMP%]{width:100%;height:30px;display:block;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-top:10px}.mod_btn[_ngcontent-%COMP%]{width:auto;height:100%;padding:0 15px;border-radius:20px;font-size:13px;color:var(--icon);background-color:var(--search)}#btn_allow[_ngcontent-%COMP%]{margin-right:10px}#view_post_container[_ngcontent-%COMP%]{height:100%;display:block;overflow-x:hidden;overflow-y:auto;scrollbar-gutter:stable;box-sizing:border-box}app-view-detail-post[_ngcontent-%COMP%]{height:100%}.selected_post[_ngcontent-%COMP%]{border:1px solid var(--icon)!important;background-color:var(--bg_hover)!important}#status_container[_ngcontent-%COMP%]{margin:5px 0}.txt_status[_ngcontent-%COMP%]{color:var(--txt);font-size:13px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.txt_status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}"]})}return e})();const vK=e=>({"background-color":e});function YQ(e,o){if(1&e){const t=We();x(0,"button",15),z("click",function(){const l=ce(t).$implicit;return fe(q().selectCommunity(l.id))}),Q(1,"img",6),L(2),D()}if(2&e){const t=o.$implicit,r=q();A("ngStyle",ve(3,vK,t.id==r.communityInfo.id?"var(--btn_selected)":"var(--search)")),k(1),Ot("src",t.avatar,Qe),k(1),ht(t.name)}}const JQ=e=>({width:e}),QQ=e=>({display:e}),WB=e=>({selected_btn:e}),XQ=(e,o)=>({width:e,display:o});let eX=(()=>{class e{constructor(t,r,i,l,d,p,m,v,w){this.searchUserProfileService=t,this.storageService=r,this.getCommentService=i,this.activeRoute=l,this.darkmodeSerive=d,this.checkRefreshTokenService=p,this.route=m,this.shareDataService=v,this.communityService=w,this.searchOption="review",this.communityInfo=new h(0,"",0,"","",0,"","",0,0),this.moderated_communities=[],this.selected_detail_post=new _a,this.isDropDown=!1}ngOnInit(){this.checkRoute(),this.shareDataService.mod_detail_post$.subscribe(i=>{this.selected_detail_post=i});const r=window.location.href.match(/mod\/(\d+)\/[^\/]+/);r&&this.communityService.getCommunityInfoById(r[1]).subscribe({next:i=>{this.communityInfo=i}}),this.checkRefreshTokenService.checkRefreshToken().subscribe({next:i=>{this.communityService.getCommunityModerateByUid(i).subscribe({next:l=>{this.moderated_communities=l}})},error:i=>{window.location.href="/error"}})}selectSearchOption(t){const i=window.location.href.match(/mod\/(\d+)\/[^\/]+/);let l=0;i&&(l=Number.parseInt(i[1])),this.shareDataService.setModDetailPost(new _a),this.searchOption=t,"review"==this.searchOption&&this.route.navigate([`/mod/${l}/review`]),"approved"==this.searchOption&&this.route.navigate([`/mod/${l}/approved`]),"removed"==this.searchOption&&this.route.navigate([`/mod/${l}/removed`]),"editted"==this.searchOption&&this.route.navigate(["mod/"+l+"/editted"])}checkRoute(){const r=window.location.href.match(/mod\/\d+\/([a-zA-Z]+)/);r&&(this.searchOption=r[1])}openDropDown(){this.isDropDown=!this.isDropDown}selectCommunity(t){const i=window.location.href.match(/mod\/(\d+)\/([^\/]+)/);if(i){for(let l of this.moderated_communities)l.id==t&&(this.communityInfo=l);this.isDropDown=!1,window.location.href="/mod/"+t+"/"+i[2]}}static#e=this.\u0275fac=function(r){return new(r||e)(B(jc),B(ct),B(Ri),B($n),B(Ys),B(Rn),B(Vt),B(Er),B(Pr))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-moderate-post"]],decls:25,vars:27,consts:[["id","mod_container"],["id","container",3,"ngStyle"],["id","header"],[2,"color","var(--icon)"],["id","community_info_block"],["id","btn_selected_community",3,"ngStyle","click"],[3,"src"],[1,"pi","pi-angle-down"],["id","communities_dropdown",3,"ngStyle"],["class","btn_community",3,"ngStyle","click",4,"ngFor","ngForOf"],["id","control_post_container"],["id","btn_block"],["type","button",1,"btn_option",3,"ngClass","click"],["id","outlet"],["id","view_post_container",3,"ngStyle"],[1,"btn_community",3,"ngStyle","click"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),L(4,"Queue"),D(),x(5,"div",4)(6,"button",5),z("click",function(){return i.openDropDown()}),Q(7,"img",6)(8,"i",7),D(),x(9,"div",8),Pe(10,YQ,3,5,"button",9),D()()(),x(11,"div",10)(12,"div",11)(13,"button",12),z("click",function(){return i.selectSearchOption("review")}),L(14,"Needs review"),D(),x(15,"button",12),z("click",function(){return i.selectSearchOption("approved")}),L(16,"Approved"),D(),x(17,"button",12),z("click",function(){return i.selectSearchOption("removed")}),L(18,"Removed"),D(),x(19,"button",12),z("click",function(){return i.selectSearchOption("editted")}),L(20,"Editted"),D()()(),x(21,"div",13),Q(22,"router-outlet"),D()(),x(23,"div",14),Q(24,"app-view-detail-post"),D()()),2&r&&(k(1),A("ngStyle",ve(10,JQ,0==i.selected_detail_post.post_id?"100%":"50%")),k(5),A("ngStyle",ve(12,vK,i.isDropDown?"var(--btn_selected)":"var(--primary_background_color)")),k(1),Ot("src",i.communityInfo.avatar,Qe),k(2),A("ngStyle",ve(14,QQ,i.isDropDown?"block":"none")),k(1),A("ngForOf",i.moderated_communities),k(3),A("ngClass",ve(16,WB,"review"==i.searchOption)),k(2),A("ngClass",ve(18,WB,"approved"==i.searchOption)),k(2),A("ngClass",ve(20,WB,"removed"==i.searchOption)),k(2),A("ngClass",ve(22,WB,"editted"==i.searchOption)),k(4),A("ngStyle",Pi(24,XQ,0==i.selected_detail_post.post_id?"0":"50%",0==i.selected_detail_post.post_id?"none":"block")))},dependencies:[lr,Zr,Eo,Gs,F9],styles:["[_nghost-%COMP%]{min-width:350px}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{color:var(--icon)}#mod_container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start}#container[_ngcontent-%COMP%]{height:100%;display:block}#header[_ngcontent-%COMP%], #control_post_container[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;margin-left:15px}#control_post_container[_ngcontent-%COMP%]{width:auto}#header[_ngcontent-%COMP%], #community_info_block[_ngcontent-%COMP%], #community_info_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}#header[_ngcontent-%COMP%], #control_post_container[_ngcontent-%COMP%]{width:100%}#header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-right:50px}#community_info_block[_ngcontent-%COMP%]{position:relative;margin-left:100px}#community_info_block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--icon);font-size:16px;font-weight:500}#btn_selected_community[_ngcontent-%COMP%]{background-color:transparent;height:40px;padding:5px 20px;border-radius:20px}#btn_selected_community[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;aspect-ratio:1/1;border-radius:50%}#btn_selected_community[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px;font-size:16px}#communities_dropdown[_ngcontent-%COMP%]{width:250px;height:225px;box-shadow:var(--menu_box_shadow);background-color:var(--search);overflow-y:scroll;scrollbar-gutter:stable;box-sizing:content-box;position:absolute;top:50px;right:0}#communities_dropdown[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;height:auto;padding:5px 10px;background-color:transparent;color:var(--icon)}#communities_dropdown[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{background-color:var(--btn_selected)!important}#communities_dropdown[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;aspect-ratio:1/1;border-radius:50%}.btn_community[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.btn_community[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:5px}#btn_block[_ngcontent-%COMP%]{margin-bottom:15px}.btn_option[_ngcontent-%COMP%]{width:auto;height:auto;padding:10px 15px;margin-right:10px;border-radius:30px;background-color:var(--primary_background_color);color:var(--icon);font-size:16px;font-weight:600}.btn_option[_ngcontent-%COMP%]:hover{text-decoration:underline}.selected_btn[_ngcontent-%COMP%]{background-color:var(--btn_selected)}#outlet[_ngcontent-%COMP%]{width:100%;height:calc(100% - 130px);box-sizing:border-box}#view_post_container[_ngcontent-%COMP%]{height:100%;display:block;overflow-x:hidden;overflow-y:auto;scrollbar-gutter:stable;box-sizing:border-box;border:1px solid var(--border);border-top:0;background-color:var(--primary_background_color)}@media only screen and (max-width: 1200px){.btn_option[_ngcontent-%COMP%]{font-size:14px;padding:5px 10px;border-radius:20px}#outlet[_ngcontent-%COMP%]{height:calc(100% - 115px)}}@media only screen and (max-width: 1000px){#container[_ngcontent-%COMP%]{width:100%!important}#view_post_container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%!important;z-index:100;padding:0;min-width:350px!important}}"]})}return e})();const tX=[{path:"",redirectTo:"popular",pathMatch:"full"},{path:"goole-authentication-callback",title:"Google-call-back",component:_m},{path:"signin",component:_m,title:"Sign in",canActivate:Sr([iQ])},{path:"signup",title:"Sign up",component:l9,canActivate:Sr([aQ])},{path:"check-sign-up-passcode",title:"Verify passcode",component:u,canActivate:Sr([cQ])},{path:"choose-username",title:"Choose username",component:sQ,canActivate:Sr([lQ])},{path:"forgot-password",title:"Forgot password",component:Cm},{path:"forgot-password-pass-code",title:"Verify passcode",component:T9,canActivate:Sr([dQ])},{path:"change-password",title:"Change password",component:n,canActivate:Sr([uQ])},{path:"",component:C9,children:[{path:"create-post",title:"Create post",component:Fl,canActivate:Sr([zc])},{path:"create-post?cid=:community_id",title:"Create post",component:Fl,canActivate:Sr([zc])},{path:"",component:VB,children:[{path:"home",title:"Reddit",component:kv},{path:"popular",title:"Reddit",component:kv},{path:"r/:community_id",title:"Community",component:kv},{path:"edit-post/:post_id",title:"Edit post",component:gJ,canActivate:Sr([zc])},{path:"control-posts/:community_id",title:"Control posts",component:kv,canActivate:Sr([zc])},{path:"search/:text",title:"Search",component:jJ},{path:"setting/:username",title:"User setting",component:XJ,canActivate:Sr([zc])},{path:"edit-community/:community_id",title:"Edit community",component:CJ,canActivate:Sr([zc])}]},{path:"",title:"",component:fQ,children:[{path:"post/:post_id",title:"Post",component:F9},{path:"post/:post_id/comment/:comment_id",title:"Post",component:F9}]},{path:"user/:username",title:"User profile",component:ZJ,children:[{path:"posts",component:kv},{path:"saved",component:kv,canActivate:Sr([zc])},{path:"wait_for_approve",component:kv,canActivate:Sr([zc])},{path:"comments",component:bQ}]}]},{path:"mod",title:"Mod queue",component:xQ,children:[{path:"",component:eX,children:[{path:":community_id/review",component:zB,canActivate:Sr([zc]),runGuardsAndResolvers:"always"},{path:":community_id/approved",component:zB,canActivate:Sr([zc]),runGuardsAndResolvers:"always"},{path:":community_id/removed",component:zB,canActivate:Sr([zc]),runGuardsAndResolvers:"always"},{path:":community_id/editted",component:zB,canActivate:Sr([zc]),runGuardsAndResolvers:"always"}]}]},{path:"error",title:"ERROR",component:lD},{path:"**",component:lD}];let nX=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({imports:[oL.forRoot(tX),oL]})}return e})(),oX=(()=>{class e{constructor(t){this.router=t,this.title="angular",this.router.events.subscribe(r=>{r instanceof Ga&&window.scrollTo(0,0)})}static#e=this.\u0275fac=function(r){return new(r||e)(B(Vt))};static#t=this.\u0275cmp=ne({type:e,selectors:[["app-root"]],decls:2,vars:0,consts:[["id","outlet"]],template:function(r,i){1&r&&(x(0,"div",0),Q(1,"router-outlet"),D())},dependencies:[Gs],styles:["#outlet[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:var(--header)}"]})}return e})();const Gf="*";function yK(e){return{type:6,styles:e,offset:null}}class vD{constructor(o=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=o+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(o=>o()),this._onDoneFns=[])}onStart(o){this._originalOnStartFns.push(o),this._onStartFns.push(o)}onDone(o){this._originalOnDoneFns.push(o),this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(o=>o()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(o){this._position=this.totalTime?o*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(o){const t="start"==o?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class bK{constructor(o){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=o;let t=0,r=0,i=0;const l=this.players.length;0==l?queueMicrotask(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==l&&this._onFinish()}),d.onDestroy(()=>{++r==l&&this._onDestroy()}),d.onStart(()=>{++i==l&&this._onStart()})}),this.totalTime=this.players.reduce((d,p)=>Math.max(d,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(o=>o()),this._onDoneFns=[])}init(){this.players.forEach(o=>o.init())}onStart(o){this._onStartFns.push(o)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(o=>o()),this._onStartFns=[])}onDone(o){this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(o=>o.play())}pause(){this.players.forEach(o=>o.pause())}restart(){this.players.forEach(o=>o.restart())}finish(){this._onFinish(),this.players.forEach(o=>o.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(o=>o.destroy()),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}reset(){this.players.forEach(o=>o.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(o){const t=o*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const o=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=o?o.getPosition():0}beforeDestroy(){this.players.forEach(o=>{o.beforeDestroy&&o.beforeDestroy()})}triggerCallback(o){const t="start"==o?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function wK(e){return new me(3e3,!1)}function Pm(e){switch(e.length){case 0:return new vD;case 1:return e[0];default:return new bK(e)}}function CK(e,o,t=new Map,r=new Map){const i=[],l=[];let d=-1,p=null;if(o.forEach(m=>{const v=m.get("offset"),w=v==d,P=w&&p||new Map;m.forEach((R,$)=>{let H=$,Y=R;if("offset"!==$)switch(H=e.normalizePropertyName(H,i),Y){case"!":Y=t.get($);break;case Gf:Y=r.get($);break;default:Y=e.normalizeStyleValue($,H,Y,i)}P.set(H,Y)}),w||l.push(P),p=P,d=v}),i.length)throw function MX(e){return new me(3502,!1)}();return l}function $9(e,o,t,r){switch(o){case"start":e.onStart(()=>r(t&&U9(t,"start",e)));break;case"done":e.onDone(()=>r(t&&U9(t,"done",e)));break;case"destroy":e.onDestroy(()=>r(t&&U9(t,"destroy",e)))}}function U9(e,o,t){const l=j9(e.element,e.triggerName,e.fromState,e.toState,o||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),d=e._data;return null!=d&&(l._data=d),l}function j9(e,o,t,r,i="",l=0,d){return{element:e,triggerName:o,fromState:t,toState:r,phaseName:i,totalTime:l,disabled:!!d}}function Qa(e,o,t){let r=e.get(o);return r||e.set(o,r=t),r}function SK(e){const o=e.indexOf(":");return[e.substring(1,o),e.slice(o+1)]}const jX=(()=>typeof document>"u"?null:document.documentElement)();function H9(e){const o=e.parentNode||e.host||null;return o===jX?null:o}let Tv=null,xK=!1;function PK(e,o){for(;o;){if(o===e)return!0;o=H9(o)}return!1}function EK(e,o,t){if(t)return Array.from(e.querySelectorAll(o));const r=e.querySelector(o);return r?[r]:[]}let z9=(()=>{class e{validateStyleProperty(t){return function zX(e){Tv||(Tv=function WX(){return typeof document<"u"?document.body:null}()||{},xK=!!Tv.style&&"WebkitAppearance"in Tv.style);let o=!0;return Tv.style&&!function HX(e){return"ebkit"==e.substring(1,6)}(e)&&(o=e in Tv.style,!o&&xK&&(o="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in Tv.style)),o}(t)}matchesElement(t,r){return!1}containsElement(t,r){return PK(t,r)}getParentElement(t){return H9(t)}query(t,r,i){return EK(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,l,d,p=[],m){return new vD(i,l)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),W9=(()=>{class e{static#e=this.NOOP=new z9}return e})();class q9{}const GX=1e3,G9="ng-enter",qB="ng-leave",GB="ng-trigger",KB=".ng-trigger",DK="ng-animating",K9=".ng-animating";function Kf(e){if("number"==typeof e)return e;const o=e.match(/^(-?[\.\d]+)(m?s)/);return!o||o.length<2?0:Z9(parseFloat(o[1]),o[2])}function Z9(e,o){return"s"===o?e*GX:e}function ZB(e,o,t){return e.hasOwnProperty("duration")?e:function ZX(e,o,t){let i,l=0,d="";if("string"==typeof e){const p=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return o.push(wK()),{duration:0,delay:0,easing:""};i=Z9(parseFloat(p[1]),p[2]);const m=p[3];null!=m&&(l=Z9(parseFloat(m),p[4]));const v=p[5];v&&(d=v)}else i=e;if(!t){let p=!1,m=o.length;i<0&&(o.push(function cX(){return new me(3100,!1)}()),p=!0),l<0&&(o.push(function lX(){return new me(3101,!1)}()),p=!0),p&&o.splice(m,0,wK())}return{duration:i,delay:l,easing:d}}(e,o,t)}function yD(e,o={}){return Object.keys(e).forEach(t=>{o[t]=e[t]}),o}function TK(e){const o=new Map;return Object.keys(e).forEach(t=>{o.set(t,e[t])}),o}function Em(e,o=new Map,t){if(t)for(let[r,i]of t)o.set(r,i);for(let[r,i]of e)o.set(r,i);return o}function sd(e,o,t){o.forEach((r,i)=>{const l=J9(i);t&&!t.has(i)&&t.set(i,e.style[l]),e.style[l]=r})}function Mv(e,o){o.forEach((t,r)=>{const i=J9(r);e.style[i]=""})}function bD(e){return Array.isArray(e)?1==e.length?e[0]:function rX(e,o=null){return{type:2,steps:e,options:o}}(e):e}const Y9=new RegExp("{{\\s*(.+?)\\s*}}","g");function IK(e){let o=[];if("string"==typeof e){let t;for(;t=Y9.exec(e);)o.push(t[1]);Y9.lastIndex=0}return o}function wD(e,o,t){const r=e.toString(),i=r.replace(Y9,(l,d)=>{let p=o[d];return null==p&&(t.push(function dX(e){return new me(3003,!1)}()),p=""),p.toString()});return i==r?e:i}function YB(e){const o=[];let t=e.next();for(;!t.done;)o.push(t.value),t=e.next();return o}const QX=/-+([a-z0-9])/g;function J9(e){return e.replace(QX,(...o)=>o[1].toUpperCase())}function Xa(e,o,t){switch(o.type){case 7:return e.visitTrigger(o,t);case 0:return e.visitState(o,t);case 1:return e.visitTransition(o,t);case 2:return e.visitSequence(o,t);case 3:return e.visitGroup(o,t);case 4:return e.visitAnimate(o,t);case 5:return e.visitKeyframes(o,t);case 6:return e.visitStyle(o,t);case 8:return e.visitReference(o,t);case 9:return e.visitAnimateChild(o,t);case 10:return e.visitAnimateRef(o,t);case 11:return e.visitQuery(o,t);case 12:return e.visitStagger(o,t);default:throw function fX(e){return new me(3004,!1)}()}}function OK(e,o){return window.getComputedStyle(e)[o]}const tee=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class AK extends q9{normalizePropertyName(o,t){return J9(o)}normalizeStyleValue(o,t,r,i){let l="";const d=r.toString().trim();if(tee.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)l="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function hX(e,o){return new me(3005,!1)}())}return d+l}}const JB="*";function nee(e,o){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function oee(e,o,t){if(":"==e[0]){const m=function ree(e,o){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return o.push(function EX(e){return new me(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof m)return void o.push(m);e=m}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function PX(e){return new me(3015,!1)}()),o;const i=r[1],l=r[2],d=r[3];o.push(NK(i,d));"<"==l[0]&&!(i==JB&&d==JB)&&o.push(NK(d,i))}(r,t,o)):t.push(e),t}const QB=new Set(["true","1"]),XB=new Set(["false","0"]);function NK(e,o){const t=QB.has(e)||XB.has(e),r=QB.has(o)||XB.has(o);return(i,l)=>{let d=e==JB||e==i,p=o==JB||o==l;return!d&&t&&"boolean"==typeof i&&(d=i?QB.has(e):XB.has(e)),!p&&r&&"boolean"==typeof l&&(p=l?QB.has(o):XB.has(o)),d&&p}}const see=new RegExp("s*:selfs*,?","g");function Q9(e,o,t,r){return new iee(e).build(o,t,r)}class iee{constructor(o){this._driver=o}build(o,t,r){const i=new lee(t);return this._resetContextStyleTimingState(i),Xa(this,bD(o),i)}_resetContextStyleTimingState(o){o.currentQuerySelector="",o.collectedStyles=new Map,o.collectedStyles.set("",new Map),o.currentTime=0}visitTrigger(o,t){let r=t.queryCount=0,i=t.depCount=0;const l=[],d=[];return"@"==o.name.charAt(0)&&t.errors.push(function pX(){return new me(3006,!1)}()),o.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const m=p,v=m.name;v.toString().split(/\s*,\s*/).forEach(w=>{m.name=w,l.push(this.visitState(m,t))}),m.name=v}else if(1==p.type){const m=this.visitTransition(p,t);r+=m.queryCount,i+=m.depCount,d.push(m)}else t.errors.push(function mX(){return new me(3007,!1)}())}),{type:7,name:o.name,states:l,transitions:d,queryCount:r,depCount:i,options:null}}visitState(o,t){const r=this.visitStyle(o.styles,t),i=o.options&&o.options.params||null;if(r.containsDynamicStyles){const l=new Set,d=i||{};r.styles.forEach(p=>{p instanceof Map&&p.forEach(m=>{IK(m).forEach(v=>{d.hasOwnProperty(v)||l.add(v)})})}),l.size&&(YB(l.values()),t.errors.push(function gX(e,o){return new me(3008,!1)}()))}return{type:0,name:o.name,style:r,options:i?{params:i}:null}}visitTransition(o,t){t.queryCount=0,t.depCount=0;const r=Xa(this,bD(o.animation),t);return{type:1,matchers:nee(o.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Iv(o.options)}}visitSequence(o,t){return{type:2,steps:o.steps.map(r=>Xa(this,r,t)),options:Iv(o.options)}}visitGroup(o,t){const r=t.currentTime;let i=0;const l=o.steps.map(d=>{t.currentTime=r;const p=Xa(this,d,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:l,options:Iv(o.options)}}visitAnimate(o,t){const r=function dee(e,o){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return X9(ZB(e,o).duration,0,"");const t=e;if(t.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=X9(0,0,"");return l.dynamic=!0,l.strValue=t,l}const i=ZB(t,o);return X9(i.duration,i.delay,i.easing)}(o.timings,t.errors);t.currentAnimateTimings=r;let i,l=o.styles?o.styles:yK({});if(5==l.type)i=this.visitKeyframes(l,t);else{let d=o.styles,p=!1;if(!d){p=!0;const v={};r.easing&&(v.easing=r.easing),d=yK(v)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(d,t);m.isEmptyStep=p,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(o,t){const r=this._makeStyleAst(o,t);return this._validateStyleAst(r,t),r}_makeStyleAst(o,t){const r=[],i=Array.isArray(o.styles)?o.styles:[o.styles];for(let p of i)"string"==typeof p?p===Gf?r.push(p):t.errors.push(new me(3002,!1)):r.push(TK(p));let l=!1,d=null;return r.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(d=p.get("easing"),p.delete("easing")),!l))for(let m of p.values())if(m.toString().indexOf("{{")>=0){l=!0;break}}),{type:6,styles:r,easing:d,offset:o.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(o,t){const r=t.currentAnimateTimings;let i=t.currentTime,l=t.currentTime;r&&l>0&&(l-=r.duration+r.delay),o.styles.forEach(d=>{"string"!=typeof d&&d.forEach((p,m)=>{const v=t.collectedStyles.get(t.currentQuerySelector),w=v.get(m);let P=!0;w&&(l!=i&&l>=w.startTime&&i<=w.endTime&&(t.errors.push(function vX(e,o,t,r,i){return new me(3010,!1)}()),P=!1),l=w.startTime),P&&v.set(m,{startTime:l,endTime:i}),t.options&&function JX(e,o,t){const r=o.params||{},i=IK(e);i.length&&i.forEach(l=>{r.hasOwnProperty(l)||t.push(function uX(e){return new me(3001,!1)}())})}(p,t.options,t.errors)})})}visitKeyframes(o,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function yX(){return new me(3011,!1)}()),r;let l=0;const d=[];let p=!1,m=!1,v=0;const w=o.steps.map(_e=>{const le=this._makeStyleAst(_e,t);let Re=null!=le.offset?le.offset:function uee(e){if("string"==typeof e)return null;let o=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;o=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;o=parseFloat(t.get("offset")),t.delete("offset")}return o}(le.styles),st=0;return null!=Re&&(l++,st=le.offset=Re),m=m||st<0||st>1,p=p||st<v,v=st,d.push(st),le});m&&t.errors.push(function bX(){return new me(3012,!1)}()),p&&t.errors.push(function wX(){return new me(3200,!1)}());const P=o.steps.length;let R=0;l>0&&l<P?t.errors.push(function CX(){return new me(3202,!1)}()):0==l&&(R=1/(P-1));const $=P-1,H=t.currentTime,Y=t.currentAnimateTimings,te=Y.duration;return w.forEach((_e,le)=>{const Re=R>0?le==$?1:R*le:d[le],st=Re*te;t.currentTime=H+Y.delay+st,Y.duration=st,this._validateStyleAst(_e,t),_e.offset=Re,r.styles.push(_e)}),r}visitReference(o,t){return{type:8,animation:Xa(this,bD(o.animation),t),options:Iv(o.options)}}visitAnimateChild(o,t){return t.depCount++,{type:9,options:Iv(o.options)}}visitAnimateRef(o,t){return{type:10,animation:this.visitReference(o.animation,t),options:Iv(o.options)}}visitQuery(o,t){const r=t.currentQuerySelector,i=o.options||{};t.queryCount++,t.currentQuery=o;const[l,d]=function aee(e){const o=!!e.split(/\s*,\s*/).find(t=>":self"==t);return o&&(e=e.replace(see,"")),e=e.replace(/@\*/g,KB).replace(/@\w+/g,t=>KB+"-"+t.slice(1)).replace(/:animating/g,K9),[e,o]}(o.selector);t.currentQuerySelector=r.length?r+" "+l:l,Qa(t.collectedStyles,t.currentQuerySelector,new Map);const p=Xa(this,bD(o.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:l,limit:i.limit||0,optional:!!i.optional,includeSelf:d,animation:p,originalSelector:o.selector,options:Iv(o.options)}}visitStagger(o,t){t.currentQuery||t.errors.push(function SX(){return new me(3013,!1)}());const r="full"===o.timings?{duration:0,delay:0,easing:"full"}:ZB(o.timings,t.errors,!0);return{type:12,animation:Xa(this,bD(o.animation),t),timings:r,options:null}}}class lee{constructor(o){this.errors=o,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Iv(e){return e?(e=yD(e)).params&&(e.params=function cee(e){return e?yD(e):null}(e.params)):e={},e}function X9(e,o,t){return{duration:e,delay:o,easing:t}}function e7(e,o,t,r,i,l,d=null,p=!1){return{type:1,element:e,keyframes:o,preStyleProps:t,postStyleProps:r,duration:i,delay:l,totalTime:i+l,easing:d,subTimeline:p}}class e3{constructor(){this._map=new Map}get(o){return this._map.get(o)||[]}append(o,t){let r=this._map.get(o);r||this._map.set(o,r=[]),r.push(...t)}has(o){return this._map.has(o)}clear(){this._map.clear()}}const pee=new RegExp(":enter","g"),gee=new RegExp(":leave","g");function t7(e,o,t,r,i,l=new Map,d=new Map,p,m,v=[]){return(new _ee).buildKeyframes(e,o,t,r,i,l,d,p,m,v)}class _ee{buildKeyframes(o,t,r,i,l,d,p,m,v,w=[]){v=v||new e3;const P=new n7(o,t,v,i,l,w,[]);P.options=m;const R=m.delay?Kf(m.delay):0;P.currentTimeline.delayNextStep(R),P.currentTimeline.setStyles([d],null,P.errors,m),Xa(this,r,P);const $=P.timelines.filter(H=>H.containsAnimation());if($.length&&p.size){let H;for(let Y=$.length-1;Y>=0;Y--){const te=$[Y];if(te.element===t){H=te;break}}H&&!H.allowOnlyTimelineStyles()&&H.setStyles([p],null,P.errors,m)}return $.length?$.map(H=>H.buildKeyframes()):[e7(t,[],[],[],0,R,"",!1)]}visitTrigger(o,t){}visitState(o,t){}visitTransition(o,t){}visitAnimateChild(o,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(o.options),l=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,i,i.options);l!=d&&t.transformIntoNewTimeline(d)}t.previousNode=o}visitAnimateRef(o,t){const r=t.createSubContext(o.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([o.options,o.animation.options],t,r),this.visitReference(o.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=o}_applyAnimationRefDelays(o,t,r){for(const i of o){const l=i?.delay;if(l){const d="number"==typeof l?l:Kf(wD(l,i?.params??{},t.errors));r.delayNextStep(d)}}}_visitSubInstructions(o,t,r){let l=t.currentTimeline.currentTime;const d=null!=r.duration?Kf(r.duration):null,p=null!=r.delay?Kf(r.delay):null;return 0!==d&&o.forEach(m=>{const v=t.appendInstructionToTimeline(m,d,p);l=Math.max(l,v.duration+v.delay)}),l}visitReference(o,t){t.updateOptions(o.options,!0),Xa(this,o.animation,t),t.previousNode=o}visitSequence(o,t){const r=t.subContextCount;let i=t;const l=o.options;if(l&&(l.params||l.delay)&&(i=t.createSubContext(l),i.transformIntoNewTimeline(),null!=l.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=t3);const d=Kf(l.delay);i.delayNextStep(d)}o.steps.length&&(o.steps.forEach(d=>Xa(this,d,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=o}visitGroup(o,t){const r=[];let i=t.currentTimeline.currentTime;const l=o.options&&o.options.delay?Kf(o.options.delay):0;o.steps.forEach(d=>{const p=t.createSubContext(o.options);l&&p.delayNextStep(l),Xa(this,d,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(i),t.previousNode=o}_visitTiming(o,t){if(o.dynamic){const r=o.strValue;return ZB(t.params?wD(r,t.params,t.errors):r,t.errors)}return{duration:o.duration,delay:o.delay,easing:o.easing}}visitAnimate(o,t){const r=t.currentAnimateTimings=this._visitTiming(o.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const l=o.style;5==l.type?this.visitKeyframes(l,t):(t.incrementTime(r.duration),this.visitStyle(l,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=o}visitStyle(o,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const l=i&&i.easing||o.easing;o.isEmptyStep?r.applyEmptyStep(l):r.setStyles(o.styles,l,t.errors,t.options),t.previousNode=o}visitKeyframes(o,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,l=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,o.styles.forEach(m=>{p.forwardTime((m.offset||0)*l),p.setStyles(m.styles,m.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+l),t.previousNode=o}visitQuery(o,t){const r=t.currentTimeline.currentTime,i=o.options||{},l=i.delay?Kf(i.delay):0;l&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=t3);let d=r;const p=t.invokeQuery(o.selector,o.originalSelector,o.limit,o.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let m=null;p.forEach((v,w)=>{t.currentQueryIndex=w;const P=t.createSubContext(o.options,v);l&&P.delayNextStep(l),v===t.element&&(m=P.currentTimeline),Xa(this,o.animation,P),P.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,P.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=o}visitStagger(o,t){const r=t.parentContext,i=t.currentTimeline,l=o.timings,d=Math.abs(l.duration),p=d*(t.currentQueryTotal-1);let m=d*t.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":m=p-m;break;case"full":m=r.currentStaggerTime}const w=t.currentTimeline;m&&w.delayNextStep(m);const P=w.currentTime;Xa(this,o.animation,t),t.previousNode=o,r.currentStaggerTime=i.currentTime-P+(i.startTime-r.currentTimeline.startTime)}}const t3={};class n7{constructor(o,t,r,i,l,d,p,m){this._driver=o,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=l,this.errors=d,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=t3,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new n3(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(o,t){if(!o)return;const r=o;let i=this.options;null!=r.duration&&(i.duration=Kf(r.duration)),null!=r.delay&&(i.delay=Kf(r.delay));const l=r.params;if(l){let d=i.params;d||(d=this.options.params={}),Object.keys(l).forEach(p=>{(!t||!d.hasOwnProperty(p))&&(d[p]=wD(l[p],d,this.errors))})}}_copyOptions(){const o={};if(this.options){const t=this.options.params;if(t){const r=o.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return o}createSubContext(o=null,t,r){const i=t||this.element,l=new n7(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(o),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(o){return this.previousNode=t3,this.currentTimeline=this.currentTimeline.fork(this.element,o),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(o,t,r){const i={duration:t??o.duration,delay:this.currentTimeline.currentTime+(r??0)+o.delay,easing:""},l=new vee(this._driver,o.element,o.keyframes,o.preStyleProps,o.postStyleProps,i,o.stretchStartingKeyframe);return this.timelines.push(l),i}incrementTime(o){this.currentTimeline.forwardTime(this.currentTimeline.duration+o)}delayNextStep(o){o>0&&this.currentTimeline.delayNextStep(o)}invokeQuery(o,t,r,i,l,d){let p=[];if(i&&p.push(this.element),o.length>0){o=(o=o.replace(pee,"."+this._enterClassName)).replace(gee,"."+this._leaveClassName);let v=this._driver.query(this.element,o,1!=r);0!==r&&(v=r<0?v.slice(v.length+r,v.length):v.slice(0,r)),p.push(...v)}return!l&&0==p.length&&d.push(function xX(e){return new me(3014,!1)}()),p}}class n3{constructor(o,t,r,i){this._driver=o,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(o){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+o),t&&this.snapshotCurrentStyles()):this.startTime+=o}fork(o,t){return this.applyStylesToKeyframe(),new n3(this._driver,o,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(o){this.applyStylesToKeyframe(),this.duration=o,this._loadKeyframe()}_updateStyle(o,t){this._localTimelineStyles.set(o,t),this._globalTimelineStyles.set(o,t),this._styleSummary.set(o,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(o){o&&this._previousKeyframe.set("easing",o);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Gf),this._currentKeyframe.set(t,Gf);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(o,t,r,i){t&&this._previousKeyframe.set("easing",t);const l=i&&i.params||{},d=function yee(e,o){const t=new Map;let r;return e.forEach(i=>{if("*"===i){r=r||o.keys();for(let l of r)t.set(l,Gf)}else Em(i,t)}),t}(o,this._globalTimelineStyles);for(let[p,m]of d){const v=wD(m,l,r);this._pendingStyles.set(p,v),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??Gf),this._updateStyle(p,v)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((o,t)=>{this._currentKeyframe.set(t,o)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((o,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,o)}))}snapshotCurrentStyles(){for(let[o,t]of this._localTimelineStyles)this._pendingStyles.set(o,t),this._updateStyle(o,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const o=[];for(let t in this._currentKeyframe)o.push(t);return o}mergeTimelineCollectedStyles(o){o._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const o=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,m)=>{const v=Em(p,new Map,this._backFill);v.forEach((w,P)=>{"!"===w?o.add(P):w===Gf&&t.add(P)}),r||v.set("offset",m/this.duration),i.push(v)});const l=o.size?YB(o.values()):[],d=t.size?YB(t.values()):[];if(r){const p=i[0],m=new Map(p);p.set("offset",0),m.set("offset",1),i=[p,m]}return e7(this.element,i,l,d,this.duration,this.startTime,this.easing,!1)}}class vee extends n3{constructor(o,t,r,i,l,d,p=!1){super(o,t,d.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=l,this._stretchStartingKeyframe=p,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let o=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const l=[],d=r+t,p=t/d,m=Em(o[0]);m.set("offset",0),l.push(m);const v=Em(o[0]);v.set("offset",LK(p)),l.push(v);const w=o.length-1;for(let P=1;P<=w;P++){let R=Em(o[P]);const $=R.get("offset");R.set("offset",LK((t+$*r)/d)),l.push(R)}r=d,t=0,i="",o=l}return e7(this.element,o,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function LK(e,o=3){const t=Math.pow(10,o-1);return Math.round(e*t)/t}function BK(e,o,t,r,i,l,d,p,m,v,w,P,R){return{type:0,element:e,triggerName:o,isRemovalTransition:i,fromState:t,fromStyles:l,toState:r,toStyles:d,timelines:p,queriedElements:m,preStyleProps:v,postStyleProps:w,totalTime:P,errors:R}}const o7={};class VK{constructor(o,t,r){this._triggerName=o,this.ast=t,this._stateStyles=r}match(o,t,r,i){return function bee(e,o,t,r,i){return e.some(l=>l(o,t,r,i))}(this.ast.matchers,o,t,r,i)}buildStyles(o,t,r){let i=this._stateStyles.get("*");return void 0!==o&&(i=this._stateStyles.get(o?.toString())||i),i?i.buildStyles(t,r):new Map}build(o,t,r,i,l,d,p,m,v,w){const P=[],R=this.ast.options&&this.ast.options.params||o7,H=this.buildStyles(r,p&&p.params||o7,P),Y=m&&m.params||o7,te=this.buildStyles(i,Y,P),_e=new Set,le=new Map,Re=new Map,st="void"===i,At={params:wee(Y,R),delay:this.ast.options?.delay},tn=w?[]:t7(o,t,this.ast.animation,l,d,H,te,At,v,P);let jn=0;if(tn.forEach($l=>{jn=Math.max($l.duration+$l.delay,jn)}),P.length)return BK(t,this._triggerName,r,i,st,H,te,[],[],le,Re,jn,P);tn.forEach($l=>{const Ul=$l.element,oZ=Qa(le,Ul,new Set);$l.preStyleProps.forEach(Ov=>oZ.add(Ov));const xD=Qa(Re,Ul,new Set);$l.postStyleProps.forEach(Ov=>xD.add(Ov)),Ul!==t&&_e.add(Ul)});const Qs=YB(_e.values());return BK(t,this._triggerName,r,i,st,H,te,tn,Qs,le,Re,jn)}}function wee(e,o){const t=yD(o);for(const r in e)e.hasOwnProperty(r)&&null!=e[r]&&(t[r]=e[r]);return t}class Cee{constructor(o,t,r){this.styles=o,this.defaultParams=t,this.normalizer=r}buildStyles(o,t){const r=new Map,i=yD(this.defaultParams);return Object.keys(o).forEach(l=>{const d=o[l];null!==d&&(i[l]=d)}),this.styles.styles.forEach(l=>{"string"!=typeof l&&l.forEach((d,p)=>{d&&(d=wD(d,i,t));const m=this.normalizer.normalizePropertyName(p,t);d=this.normalizer.normalizeStyleValue(p,m,d,t),r.set(p,d)})}),r}}class xee{constructor(o,t,r){this.name=o,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Cee(i.style,i.options&&i.options.params||{},r))}),$K(this.states,"true","1"),$K(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new VK(o,i,this.states))}),this.fallbackTransition=function Pee(e,o,t){return new VK(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,p)=>!0],options:null,queryCount:0,depCount:0},o)}(o,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(o,t,r,i){return this.transitionFactories.find(d=>d.match(o,t,r,i))||null}matchStyles(o,t,r){return this.fallbackTransition.buildStyles(o,t,r)}}function $K(e,o,t){e.has(o)?e.has(t)||e.set(t,e.get(o)):e.has(t)&&e.set(o,e.get(t))}const Eee=new e3;class kee{constructor(o,t,r){this.bodyNode=o,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(o,t){const r=[],l=Q9(this._driver,t,r,[]);if(r.length)throw function IX(e){return new me(3503,!1)}();this._animations.set(o,l)}_buildPlayer(o,t,r){const i=o.element,l=CK(this._normalizer,o.keyframes,t,r);return this._driver.animate(i,l,o.duration,o.delay,o.easing,[],!0)}create(o,t,r={}){const i=[],l=this._animations.get(o);let d;const p=new Map;if(l?(d=t7(this._driver,t,l,G9,qB,new Map,new Map,r,Eee,i),d.forEach(w=>{const P=Qa(p,w.element,new Map);w.postStyleProps.forEach(R=>P.set(R,null))})):(i.push(function OX(){return new me(3300,!1)}()),d=[]),i.length)throw function AX(e){return new me(3504,!1)}();p.forEach((w,P)=>{w.forEach((R,$)=>{w.set($,this._driver.computeStyle(P,$,Gf))})});const v=Pm(d.map(w=>{const P=p.get(w.element);return this._buildPlayer(w,new Map,P)}));return this._playersById.set(o,v),v.onDestroy(()=>this.destroy(o)),this.players.push(v),v}destroy(o){const t=this._getPlayer(o);t.destroy(),this._playersById.delete(o);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(o){const t=this._playersById.get(o);if(!t)throw function NX(e){return new me(3301,!1)}();return t}listen(o,t,r,i){const l=j9(t,"","","");return $9(this._getPlayer(o),r,l,i),()=>{}}command(o,t,r,i){if("register"==r)return void this.register(o,i[0]);if("create"==r)return void this.create(o,t,i[0]||{});const l=this._getPlayer(o);switch(r){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(o)}}}const UK="ng-animate-queued",r7="ng-animate-disabled",Oee=[],jK={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Aee={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Vl="__ng_removed";class s7{get params(){return this.options.params}constructor(o,t=""){this.namespaceId=t;const r=o&&o.hasOwnProperty("value");if(this.value=function Lee(e){return e??null}(r?o.value:o),r){const l=yD(o);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(o){const t=o.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const CD="void",i7=new s7(CD);class Nee{constructor(o,t,r){this.id=o,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+o,Wc(t,this._hostClassName)}listen(o,t,r,i){if(!this._triggers.has(t))throw function RX(e,o){return new me(3302,!1)}();if(null==r||0==r.length)throw function FX(e){return new me(3303,!1)}();if(!function Bee(e){return"start"==e||"done"==e}(r))throw function LX(e,o){return new me(3400,!1)}();const l=Qa(this._elementListeners,o,[]),d={name:t,phase:r,callback:i};l.push(d);const p=Qa(this._engine.statesByElement,o,new Map);return p.has(t)||(Wc(o,GB),Wc(o,GB+"-"+t),p.set(t,i7)),()=>{this._engine.afterFlush(()=>{const m=l.indexOf(d);m>=0&&l.splice(m,1),this._triggers.has(t)||p.delete(t)})}}register(o,t){return!this._triggers.has(o)&&(this._triggers.set(o,t),!0)}_getTrigger(o){const t=this._triggers.get(o);if(!t)throw function BX(e){return new me(3401,!1)}();return t}trigger(o,t,r,i=!0){const l=this._getTrigger(t),d=new a7(this.id,t,o);let p=this._engine.statesByElement.get(o);p||(Wc(o,GB),Wc(o,GB+"-"+t),this._engine.statesByElement.set(o,p=new Map));let m=p.get(t);const v=new s7(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&v.absorbOptions(m.options),p.set(t,v),m||(m=i7),v.value!==CD&&m.value===v.value){if(!function Uee(e,o){const t=Object.keys(e),r=Object.keys(o);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const l=t[i];if(!o.hasOwnProperty(l)||e[l]!==o[l])return!1}return!0}(m.params,v.params)){const Y=[],te=l.matchStyles(m.value,m.params,Y),_e=l.matchStyles(v.value,v.params,Y);Y.length?this._engine.reportError(Y):this._engine.afterFlush(()=>{Mv(o,te),sd(o,_e)})}return}const R=Qa(this._engine.playersByElement,o,[]);R.forEach(Y=>{Y.namespaceId==this.id&&Y.triggerName==t&&Y.queued&&Y.destroy()});let $=l.matchTransition(m.value,v.value,o,v.params),H=!1;if(!$){if(!i)return;$=l.fallbackTransition,H=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:t,transition:$,fromState:m,toState:v,player:d,isFallbackTransition:H}),H||(Wc(o,UK),d.onStart(()=>{d0(o,UK)})),d.onDone(()=>{let Y=this.players.indexOf(d);Y>=0&&this.players.splice(Y,1);const te=this._engine.playersByElement.get(o);if(te){let _e=te.indexOf(d);_e>=0&&te.splice(_e,1)}}),this.players.push(d),R.push(d),d}deregister(o){this._triggers.delete(o),this._engine.statesByElement.forEach(t=>t.delete(o)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=o))})}clearElementCache(o){this._engine.statesByElement.delete(o),this._elementListeners.delete(o);const t=this._engine.playersByElement.get(o);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(o))}_signalRemovalForInnerTriggers(o,t){const r=this._engine.driver.query(o,KB,!0);r.forEach(i=>{if(i[Vl])return;const l=this._engine.fetchNamespacesByElement(i);l.size?l.forEach(d=>d.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(o,t,r,i){const l=this._engine.statesByElement.get(o),d=new Map;if(l){const p=[];if(l.forEach((m,v)=>{if(d.set(v,m.value),this._triggers.has(v)){const w=this.trigger(o,v,CD,i);w&&p.push(w)}}),p.length)return this._engine.markElementAsRemoved(this.id,o,!0,t,d),r&&Pm(p).onDone(()=>this._engine.processLeaveNode(o)),!0}return!1}prepareLeaveAnimationListeners(o){const t=this._elementListeners.get(o),r=this._engine.statesByElement.get(o);if(t&&r){const i=new Set;t.forEach(l=>{const d=l.name;if(i.has(d))return;i.add(d);const m=this._triggers.get(d).fallbackTransition,v=r.get(d)||i7,w=new s7(CD),P=new a7(this.id,d,o);this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:d,transition:m,fromState:v,toState:w,player:P,isFallbackTransition:!0})})}}removeNode(o,t){const r=this._engine;if(o.childElementCount&&this._signalRemovalForInnerTriggers(o,t),this.triggerLeaveAnimation(o,t,!0))return;let i=!1;if(r.totalAnimations){const l=r.players.length?r.playersByQueriedElement.get(o):[];if(l&&l.length)i=!0;else{let d=o;for(;d=d.parentNode;)if(r.statesByElement.get(d)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(o),i)r.markElementAsRemoved(this.id,o,!1,t);else{const l=o[Vl];(!l||l===jK)&&(r.afterFlush(()=>this.clearElementCache(o)),r.destroyInnerAnimations(o),r._onRemovalComplete(o,t))}}insertNode(o,t){Wc(o,this._hostClassName)}drainQueuedTransitions(o){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const l=r.element,d=this._elementListeners.get(l);d&&d.forEach(p=>{if(p.name==r.triggerName){const m=j9(l,r.triggerName,r.fromState.value,r.toState.value);m._data=o,$9(r.player,p.phase,m,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const l=r.transition.ast.depCount,d=i.transition.ast.depCount;return 0==l||0==d?l-d:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(o){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,o)}}class Ree{_onRemovalComplete(o,t){this.onRemovalComplete(o,t)}constructor(o,t,r){this.bodyNode=o,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,l)=>{}}get queuedPlayers(){const o=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&o.push(r)})}),o}createNamespace(o,t){const r=new Nee(o,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[o]=r}_balanceNamespaceList(o,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let d=!1,p=this.driver.getParentElement(t);for(;p;){const m=i.get(p);if(m){const v=r.indexOf(m);r.splice(v+1,0,o),d=!0;break}p=this.driver.getParentElement(p)}d||r.unshift(o)}else r.push(o);return i.set(t,o),o}register(o,t){let r=this._namespaceLookup[o];return r||(r=this.createNamespace(o,t)),r}registerTrigger(o,t,r){let i=this._namespaceLookup[o];i&&i.register(t,r)&&this.totalAnimations++}destroy(o,t){o&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(o);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[o]}))}_fetchNamespace(o){return this._namespaceLookup[o]}fetchNamespacesByElement(o){const t=new Set,r=this.statesByElement.get(o);if(r)for(let i of r.values())if(i.namespaceId){const l=this._fetchNamespace(i.namespaceId);l&&t.add(l)}return t}trigger(o,t,r,i){if(o3(t)){const l=this._fetchNamespace(o);if(l)return l.trigger(t,r,i),!0}return!1}insertNode(o,t,r,i){if(!o3(t))return;const l=t[Vl];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(o){const d=this._fetchNamespace(o);d&&d.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(o){this.collectedEnterElements.push(o)}markElementAsDisabled(o,t){t?this.disabledNodes.has(o)||(this.disabledNodes.add(o),Wc(o,r7)):this.disabledNodes.has(o)&&(this.disabledNodes.delete(o),d0(o,r7))}removeNode(o,t,r){if(o3(t)){const i=o?this._fetchNamespace(o):null;i?i.removeNode(t,r):this.markElementAsRemoved(o,t,!1,r);const l=this.namespacesByHostElement.get(t);l&&l.id!==o&&l.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(o,t,r,i,l){this.collectedLeaveElements.push(t),t[Vl]={namespaceId:o,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:l}}listen(o,t,r,i,l){return o3(t)?this._fetchNamespace(o).listen(t,r,i,l):()=>{}}_buildInstruction(o,t,r,i,l){return o.transition.build(this.driver,o.element,o.fromState.value,o.toState.value,r,i,o.fromState.options,o.toState.options,t,l)}destroyInnerAnimations(o){let t=this.driver.query(o,KB,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(o,K9,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(o){const t=this.playersByElement.get(o);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(o){const t=this.playersByQueriedElement.get(o);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(o=>{if(this.players.length)return Pm(this.players).onDone(()=>o());o()})}processLeaveNode(o){const t=o[Vl];if(t&&t.setForRemoval){if(o[Vl]=jK,t.namespaceId){this.destroyInnerAnimations(o);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(o)}this._onRemovalComplete(o,t.setForRemoval)}o.classList?.contains(r7)&&this.markElementAsDisabled(o,!1),this.driver.query(o,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(o=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Wc(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,o)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Pm(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(o){throw function VX(e){return new me(3402,!1)}()}_flushAnimations(o,t){const r=new e3,i=[],l=new Map,d=[],p=new Map,m=new Map,v=new Map,w=new Set;this.disabledNodes.forEach(lt=>{w.add(lt);const Tt=this.driver.query(lt,".ng-animate-queued",!0);for(let $t=0;$t<Tt.length;$t++)w.add(Tt[$t])});const P=this.bodyNode,R=Array.from(this.statesByElement.keys()),$=WK(R,this.collectedEnterElements),H=new Map;let Y=0;$.forEach((lt,Tt)=>{const $t=G9+Y++;H.set(Tt,$t),lt.forEach(Tn=>Wc(Tn,$t))});const te=[],_e=new Set,le=new Set;for(let lt=0;lt<this.collectedLeaveElements.length;lt++){const Tt=this.collectedLeaveElements[lt],$t=Tt[Vl];$t&&$t.setForRemoval&&(te.push(Tt),_e.add(Tt),$t.hasAnimation?this.driver.query(Tt,".ng-star-inserted",!0).forEach(Tn=>_e.add(Tn)):le.add(Tt))}const Re=new Map,st=WK(R,Array.from(_e));st.forEach((lt,Tt)=>{const $t=qB+Y++;Re.set(Tt,$t),lt.forEach(Tn=>Wc(Tn,$t))}),o.push(()=>{$.forEach((lt,Tt)=>{const $t=H.get(Tt);lt.forEach(Tn=>d0(Tn,$t))}),st.forEach((lt,Tt)=>{const $t=Re.get(Tt);lt.forEach(Tn=>d0(Tn,$t))}),te.forEach(lt=>{this.processLeaveNode(lt)})});const At=[],tn=[];for(let lt=this._namespaceList.length-1;lt>=0;lt--)this._namespaceList[lt].drainQueuedTransitions(t).forEach($t=>{const Tn=$t.player,is=$t.element;if(At.push(Tn),this.collectedEnterElements.length){const Xs=is[Vl];if(Xs&&Xs.setForMove){if(Xs.previousTriggersValues&&Xs.previousTriggersValues.has($t.triggerName)){const Av=Xs.previousTriggersValues.get($t.triggerName),qc=this.statesByElement.get($t.element);if(qc&&qc.has($t.triggerName)){const s3=qc.get($t.triggerName);s3.value=Av,qc.set($t.triggerName,s3)}}return void Tn.destroy()}}const id=!P||!this.driver.containsElement(P,is),ec=Re.get(is),km=H.get(is),Zo=this._buildInstruction($t,r,km,ec,id);if(Zo.errors&&Zo.errors.length)return void tn.push(Zo);if(id)return Tn.onStart(()=>Mv(is,Zo.fromStyles)),Tn.onDestroy(()=>sd(is,Zo.toStyles)),void i.push(Tn);if($t.isFallbackTransition)return Tn.onStart(()=>Mv(is,Zo.fromStyles)),Tn.onDestroy(()=>sd(is,Zo.toStyles)),void i.push(Tn);const iZ=[];Zo.timelines.forEach(Xs=>{Xs.stretchStartingKeyframe=!0,this.disabledNodes.has(Xs.element)||iZ.push(Xs)}),Zo.timelines=iZ,r.append(is,Zo.timelines),d.push({instruction:Zo,player:Tn,element:is}),Zo.queriedElements.forEach(Xs=>Qa(p,Xs,[]).push(Tn)),Zo.preStyleProps.forEach((Xs,Av)=>{if(Xs.size){let qc=m.get(Av);qc||m.set(Av,qc=new Set),Xs.forEach((s3,d7)=>qc.add(d7))}}),Zo.postStyleProps.forEach((Xs,Av)=>{let qc=v.get(Av);qc||v.set(Av,qc=new Set),Xs.forEach((s3,d7)=>qc.add(d7))})});if(tn.length){const lt=[];tn.forEach(Tt=>{lt.push(function $X(e,o){return new me(3505,!1)}())}),At.forEach(Tt=>Tt.destroy()),this.reportError(lt)}const jn=new Map,Qs=new Map;d.forEach(lt=>{const Tt=lt.element;r.has(Tt)&&(Qs.set(Tt,Tt),this._beforeAnimationBuild(lt.player.namespaceId,lt.instruction,jn))}),i.forEach(lt=>{const Tt=lt.element;this._getPreviousPlayers(Tt,!1,lt.namespaceId,lt.triggerName,null).forEach(Tn=>{Qa(jn,Tt,[]).push(Tn),Tn.destroy()})});const $l=te.filter(lt=>GK(lt,m,v)),Ul=new Map;zK(Ul,this.driver,le,v,Gf).forEach(lt=>{GK(lt,m,v)&&$l.push(lt)});const xD=new Map;$.forEach((lt,Tt)=>{zK(xD,this.driver,new Set(lt),m,"!")}),$l.forEach(lt=>{const Tt=Ul.get(lt),$t=xD.get(lt);Ul.set(lt,new Map([...Tt?.entries()??[],...$t?.entries()??[]]))});const Ov=[],rZ=[],sZ={};d.forEach(lt=>{const{element:Tt,player:$t,instruction:Tn}=lt;if(r.has(Tt)){if(w.has(Tt))return $t.onDestroy(()=>sd(Tt,Tn.toStyles)),$t.disabled=!0,$t.overrideTotalTime(Tn.totalTime),void i.push($t);let is=sZ;if(Qs.size>1){let ec=Tt;const km=[];for(;ec=ec.parentNode;){const Zo=Qs.get(ec);if(Zo){is=Zo;break}km.push(ec)}km.forEach(Zo=>Qs.set(Zo,is))}const id=this._buildAnimation($t.namespaceId,Tn,jn,l,xD,Ul);if($t.setRealPlayer(id),is===sZ)Ov.push($t);else{const ec=this.playersByElement.get(is);ec&&ec.length&&($t.parentPlayer=Pm(ec)),i.push($t)}}else Mv(Tt,Tn.fromStyles),$t.onDestroy(()=>sd(Tt,Tn.toStyles)),rZ.push($t),w.has(Tt)&&i.push($t)}),rZ.forEach(lt=>{const Tt=l.get(lt.element);if(Tt&&Tt.length){const $t=Pm(Tt);lt.setRealPlayer($t)}}),i.forEach(lt=>{lt.parentPlayer?lt.syncPlayerEvents(lt.parentPlayer):lt.destroy()});for(let lt=0;lt<te.length;lt++){const Tt=te[lt],$t=Tt[Vl];if(d0(Tt,qB),$t&&$t.hasAnimation)continue;let Tn=[];if(p.size){let id=p.get(Tt);id&&id.length&&Tn.push(...id);let ec=this.driver.query(Tt,K9,!0);for(let km=0;km<ec.length;km++){let Zo=p.get(ec[km]);Zo&&Zo.length&&Tn.push(...Zo)}}const is=Tn.filter(id=>!id.destroyed);is.length?Vee(this,Tt,is):this.processLeaveNode(Tt)}return te.length=0,Ov.forEach(lt=>{this.players.push(lt),lt.onDone(()=>{lt.destroy();const Tt=this.players.indexOf(lt);this.players.splice(Tt,1)}),lt.play()}),Ov}afterFlush(o){this._flushFns.push(o)}afterFlushAnimationsDone(o){this._whenQuietFns.push(o)}_getPreviousPlayers(o,t,r,i,l){let d=[];if(t){const p=this.playersByQueriedElement.get(o);p&&(d=p)}else{const p=this.playersByElement.get(o);if(p){const m=!l||l==CD;p.forEach(v=>{v.queued||!m&&v.triggerName!=i||d.push(v)})}}return(r||i)&&(d=d.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),d}_beforeAnimationBuild(o,t,r){const l=t.element,d=t.isRemovalTransition?void 0:o,p=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const v=m.element,w=v!==l,P=Qa(r,v,[]);this._getPreviousPlayers(v,w,d,p,t.toState).forEach($=>{const H=$.getRealPlayer();H.beforeDestroy&&H.beforeDestroy(),$.destroy(),P.push($)})}Mv(l,t.fromStyles)}_buildAnimation(o,t,r,i,l,d){const p=t.triggerName,m=t.element,v=[],w=new Set,P=new Set,R=t.timelines.map(H=>{const Y=H.element;w.add(Y);const te=Y[Vl];if(te&&te.removedBeforeQueried)return new vD(H.duration,H.delay);const _e=Y!==m,le=function $ee(e){const o=[];return qK(e,o),o}((r.get(Y)||Oee).map(jn=>jn.getRealPlayer())).filter(jn=>!!jn.element&&jn.element===Y),Re=l.get(Y),st=d.get(Y),At=CK(this._normalizer,H.keyframes,Re,st),tn=this._buildPlayer(H,At,le);if(H.subTimeline&&i&&P.add(Y),_e){const jn=new a7(o,p,Y);jn.setRealPlayer(tn),v.push(jn)}return tn});v.forEach(H=>{Qa(this.playersByQueriedElement,H.element,[]).push(H),H.onDone(()=>function Fee(e,o,t){let r=e.get(o);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&e.delete(o)}return r}(this.playersByQueriedElement,H.element,H))}),w.forEach(H=>Wc(H,DK));const $=Pm(R);return $.onDestroy(()=>{w.forEach(H=>d0(H,DK)),sd(m,t.toStyles)}),P.forEach(H=>{Qa(i,H,[]).push($)}),$}_buildPlayer(o,t,r){return t.length>0?this.driver.animate(o.element,t,o.duration,o.delay,o.easing,r):new vD(o.duration,o.delay)}}class a7{constructor(o,t,r){this.namespaceId=o,this.triggerName=t,this.element=r,this._player=new vD,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(o){this._containsRealPlayer||(this._player=o,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>$9(o,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(o.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(o){this.totalTime=o}syncPlayerEvents(o){const t=this._player;t.triggerCallback&&o.onStart(()=>t.triggerCallback("start")),o.onDone(()=>this.finish()),o.onDestroy(()=>this.destroy())}_queueEvent(o,t){Qa(this._queuedCallbacks,o,[]).push(t)}onDone(o){this.queued&&this._queueEvent("done",o),this._player.onDone(o)}onStart(o){this.queued&&this._queueEvent("start",o),this._player.onStart(o)}onDestroy(o){this.queued&&this._queueEvent("destroy",o),this._player.onDestroy(o)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(o){this.queued||this._player.setPosition(o)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(o){const t=this._player;t.triggerCallback&&t.triggerCallback(o)}}function o3(e){return e&&1===e.nodeType}function HK(e,o){const t=e.style.display;return e.style.display=o??"none",t}function zK(e,o,t,r,i){const l=[];t.forEach(m=>l.push(HK(m)));const d=[];r.forEach((m,v)=>{const w=new Map;m.forEach(P=>{const R=o.computeStyle(v,P,i);w.set(P,R),(!R||0==R.length)&&(v[Vl]=Aee,d.push(v))}),e.set(v,w)});let p=0;return t.forEach(m=>HK(m,l[p++])),d}function WK(e,o){const t=new Map;if(e.forEach(p=>t.set(p,[])),0==o.length)return t;const i=new Set(o),l=new Map;function d(p){if(!p)return 1;let m=l.get(p);if(m)return m;const v=p.parentNode;return m=t.has(v)?v:i.has(v)?1:d(v),l.set(p,m),m}return o.forEach(p=>{const m=d(p);1!==m&&t.get(m).push(p)}),t}function Wc(e,o){e.classList?.add(o)}function d0(e,o){e.classList?.remove(o)}function Vee(e,o,t){Pm(t).onDone(()=>e.processLeaveNode(o))}function qK(e,o){for(let t=0;t<e.length;t++){const r=e[t];r instanceof bK?qK(r.players,o):o.push(r)}}function GK(e,o,t){const r=t.get(e);if(!r)return!1;let i=o.get(e);return i?r.forEach(l=>i.add(l)):o.set(e,r),t.delete(e),!0}class SD{constructor(o,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,l)=>{},this._transitionEngine=new Ree(o.body,t,r),this._timelineEngine=new kee(o.body,t,r),this._transitionEngine.onRemovalComplete=(i,l)=>this.onRemovalComplete(i,l)}registerTrigger(o,t,r,i,l){const d=o+"-"+i;let p=this._triggerCache[d];if(!p){const m=[],w=Q9(this._driver,l,m,[]);if(m.length)throw function TX(e,o){return new me(3404,!1)}();p=function See(e,o,t){return new xee(e,o,t)}(i,w,this._normalizer),this._triggerCache[d]=p}this._transitionEngine.registerTrigger(t,i,p)}register(o,t){this._transitionEngine.register(o,t)}destroy(o,t){this._transitionEngine.destroy(o,t)}onInsert(o,t,r,i){this._transitionEngine.insertNode(o,t,r,i)}onRemove(o,t,r){this._transitionEngine.removeNode(o,t,r)}disableAnimations(o,t){this._transitionEngine.markElementAsDisabled(o,t)}process(o,t,r,i){if("@"==r.charAt(0)){const[l,d]=SK(r);this._timelineEngine.command(l,t,d,i)}else this._transitionEngine.trigger(o,t,r,i)}listen(o,t,r,i,l){if("@"==r.charAt(0)){const[d,p]=SK(r);return this._timelineEngine.listen(d,t,p,l)}return this._transitionEngine.listen(o,t,r,i,l)}flush(o=-1){this._transitionEngine.flush(o)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(o){this._transitionEngine.afterFlushAnimationsDone(o)}}let Hee=(()=>{class e{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let l=e.initialStylesByElement.get(t);l||e.initialStylesByElement.set(t,l=new Map),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&sd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(sd(this._element,this._initialStyles),this._endStyles&&(sd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Mv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mv(this._element,this._endStyles),this._endStyles=null),sd(this._element,this._initialStyles),this._state=3)}}return e})();function c7(e){let o=null;return e.forEach((t,r)=>{(function zee(e){return"display"===e||"position"===e})(r)&&(o=o||new Map,o.set(r,t))}),o}class KK{constructor(o,t,r,i){this.element=o,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(o=>o()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const o=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,o,this.options),this._finalKeyframe=o.length?o[o.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(o){const t=[];return o.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(o,t,r){return o.animate(this._convertKeyframesToObject(t),r)}onStart(o){this._originalOnStartFns.push(o),this._onStartFns.push(o)}onDone(o){this._originalOnDoneFns.push(o),this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(o=>o()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}setPosition(o){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=o*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const o=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&o.set(i,this._finished?r:OK(this.element,i))}),this.currentSnapshot=o}triggerCallback(o){const t="start"===o?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class ZK{validateStyleProperty(o){return!0}validateAnimatableStyleProperty(o){return!0}matchesElement(o,t){return!1}containsElement(o,t){return PK(o,t)}getParentElement(o){return H9(o)}query(o,t,r){return EK(o,t,r)}computeStyle(o,t,r){return window.getComputedStyle(o)[t]}animate(o,t,r,i,l,d=[]){const m={duration:r,delay:i,fill:0==i?"both":"forwards"};l&&(m.easing=l);const v=new Map,w=d.filter($=>$ instanceof KK);(function XX(e,o){return 0===e||0===o})(r,i)&&w.forEach($=>{$.currentSnapshot.forEach((H,Y)=>v.set(Y,H))});let P=function YX(e){return e.length?e[0]instanceof Map?e:e.map(o=>TK(o)):[]}(t).map($=>Em($));P=function eee(e,o,t){if(t.size&&o.length){let r=o[0],i=[];if(t.forEach((l,d)=>{r.has(d)||i.push(d),r.set(d,l)}),i.length)for(let l=1;l<o.length;l++){let d=o[l];i.forEach(p=>d.set(p,OK(e,p)))}}return o}(o,P,v);const R=function jee(e,o){let t=null,r=null;return Array.isArray(o)&&o.length?(t=c7(o[0]),o.length>1&&(r=c7(o[o.length-1]))):o instanceof Map&&(t=c7(o)),t||r?new Hee(e,t,r):null}(o,P);return new KK(o,P,m,R)}}const YK="@.disabled";class JK{constructor(o,t,r,i){this.namespaceId=o,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(o){this.delegate.destroyNode?.(o)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(o,t){return this.delegate.createElement(o,t)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}appendChild(o,t){this.delegate.appendChild(o,t),this.engine.onInsert(this.namespaceId,t,o,!1)}insertBefore(o,t,r,i=!0){this.delegate.insertBefore(o,t,r),this.engine.onInsert(this.namespaceId,t,o,i)}removeChild(o,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(o,t){return this.delegate.selectRootElement(o,t)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,t,r,i){this.delegate.setAttribute(o,t,r,i)}removeAttribute(o,t,r){this.delegate.removeAttribute(o,t,r)}addClass(o,t){this.delegate.addClass(o,t)}removeClass(o,t){this.delegate.removeClass(o,t)}setStyle(o,t,r,i){this.delegate.setStyle(o,t,r,i)}removeStyle(o,t,r){this.delegate.removeStyle(o,t,r)}setProperty(o,t,r){"@"==t.charAt(0)&&t==YK?this.disableAnimations(o,!!r):this.delegate.setProperty(o,t,r)}setValue(o,t){this.delegate.setValue(o,t)}listen(o,t,r){return this.delegate.listen(o,t,r)}disableAnimations(o,t){this.engine.disableAnimations(o,t)}}class Wee extends JK{constructor(o,t,r,i,l){super(t,r,i,l),this.factory=o,this.namespaceId=t}setProperty(o,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==YK?this.disableAnimations(o,r=void 0===r||!!r):this.engine.process(this.namespaceId,o,t.slice(1),r):this.delegate.setProperty(o,t,r)}listen(o,t,r){if("@"==t.charAt(0)){const i=function qee(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(o);let l=t.slice(1),d="";return"@"!=l.charAt(0)&&([l,d]=function Gee(e){const o=e.indexOf(".");return[e.substring(0,o),e.slice(o+1)]}(l)),this.engine.listen(this.namespaceId,i,l,d,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(o,t,r)}}class Kee{constructor(o,t,r){this.delegate=o,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,l)=>{const d=l?.parentNode(i);d&&l.removeChild(d,i)}}createRenderer(o,t){const i=this.delegate.createRenderer(o,t);if(!o||!t?.data?.animation){const v=this._rendererCache;let w=v.get(i);return w||(w=new JK("",i,this.engine,()=>v.delete(i)),v.set(i,w)),w}const l=t.id,d=t.id+"-"+this._currentId;this._currentId++,this.engine.register(d,o);const p=v=>{Array.isArray(v)?v.forEach(p):this.engine.registerTrigger(l,d,o,v.name,v)};return t.data.animation.forEach(p),new Wee(this,d,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(o,t,r){if(o>=0&&o<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(l=>{const[d,p]=l;d(p)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const QK=[{provide:q9,useFactory:function Yee(){return new AK}},{provide:SD,useClass:(()=>{class e extends SD{constructor(t,r,i,l){super(t,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||e)(ie(cr),ie(W9),ie(q9),ie(_f))};static#t=this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})()},{provide:ub,useFactory:function Jee(e,o,t){return new Kee(e,o,t)},deps:[Xw,SD,En]}],l7=[{provide:W9,useFactory:()=>new ZK},{provide:yS,useValue:"BrowserAnimations"},...QK],XK=[{provide:W9,useClass:z9},{provide:yS,useValue:"NoopAnimations"},...QK];let Qee=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?XK:l7}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=gt({type:e});static#n=this.\u0275inj=mr({providers:l7,imports:[k2]})}return e})();const u7=new je("@sweetalert2/ngx-sweetalert2#swalProvider"),eZ=new je("@sweetalert2/ngx-sweetalert2#fireOnInit"),tZ=new je("@sweetalert2/ngx-sweetalert2#dismissOnDestroy");let nZ=(()=>{class e{swalProvider;swalPromiseCache;constructor(t){this.swalProvider=t}get swal(){return this.swalPromiseCache||this.preloadSweetAlertLibrary(),this.swalPromiseCache}preloadSweetAlertLibrary(){if(this.swalPromiseCache)return;const t=function r(l){return"function"==typeof l&&void 0===l.version}(this.swalProvider)?this.swalProvider():Promise.resolve(this.swalProvider);this.swalPromiseCache=t.then(l=>function i(l){return"function"==typeof l}(l)?l:l.default)}static \u0275fac=function(r){return new(r||e)(ie(u7))};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();function Xee(){return Promise.resolve().then(Mr.t.bind(Mr,519,19))}let ete=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[nZ,{provide:u7,useValue:t.provideSwal||Xee},{provide:eZ,useValue:t.fireOnInit||!1},{provide:tZ,useValue:t.dismissOnDestroy||!0}]}}static forChild(t={}){return{ngModule:e,providers:[...t.provideSwal?[nZ,{provide:u7,useValue:t.provideSwal}]:[],...void 0!==t.fireOnInit?[{provide:eZ,useValue:t.fireOnInit}]:[],...void 0!==t.dismissOnDestroy?[{provide:tZ,useValue:t.dismissOnDestroy}]:[]]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=gt({type:e});static \u0275inj=mr({imports:[dE]})}return e})(),tte=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=gt({type:e,bootstrap:[oX]});static#n=this.\u0275inj=mr({providers:[{provide:Ze,useValue:"tinymce/tinymce.min.js"}],imports:[k2,nX,Zk,n9,Qee,dt,nB,ete]})}return e})();VH().bootstrapModule(tte).catch(e=>console.error(e))},519:function(tc){tc.exports=function(){"use strict";function xa(O,y,C){if("function"==typeof O?O===y:O.has(y))return arguments.length<3?y:C;throw new TypeError("Private element is not present on this object")}function Mr(O,y,C){return y=Gc(y),function Yf(O,y){if(y&&("object"==typeof y||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function Tm(O){if(void 0===O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}(O)}(O,ei()?Reflect.construct(y,C||[],Gc(O).constructor):y.apply(O,C))}function Yr(O,y){return O.get(xa(O,y))}function ei(){try{var O=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ei=function(){return!!O})()}function jl(O){var y=function _n(O,y){if("object"!=typeof O||!O)return O;var C=O[Symbol.toPrimitive];if(void 0!==C){var M=C.call(O,y||"default");if("object"!=typeof M)return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(O)}(O,"string");return"symbol"==typeof y?y:y+""}function oo(O){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(O)}function Fi(O,y){if(!(O instanceof y))throw new TypeError("Cannot call a class as a function")}function Zf(O,y){for(var C=0;C<y.length;C++){var M=y[C];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(O,jl(M.key),M)}}function Hl(O,y,C){return y&&Zf(O.prototype,y),C&&Zf(O,C),Object.defineProperty(O,"prototype",{writable:!1}),O}function Gc(O){return(Gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)})(O)}function zl(O,y){return(zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,G){return M.__proto__=G,M})(O,y)}function Wl(){return Wl=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(y,C,M){var G=function Jf(O,y){for(;!Object.prototype.hasOwnProperty.call(O,y)&&null!==(O=Gc(O)););return O}(y,C);if(G){var ne=Object.getOwnPropertyDescriptor(G,C);return ne.get?ne.get.call(arguments.length<3?y:M):ne.value}},Wl.apply(this,arguments)}function ql(O,y){return function Gl(O){if(Array.isArray(O))return O}(O)||function Ea(O,y){var C=null==O?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(null!=C){var M,G,ne,ot,Jt=[],gt=!0,so=!1;try{if(ne=(C=C.call(O)).next,0===y){if(Object(C)!==C)return;gt=!1}else for(;!(gt=(M=ne.call(C)).done)&&(Jt.push(M.value),Jt.length!==y);gt=!0);}catch(wt){so=!0,G=wt}finally{try{if(!gt&&null!=C.return&&(ot=C.return(),Object(ot)!==ot))return}finally{if(so)throw G}}return Jt}}(O,y)||po(O,y)||function mo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(O){return function ko(O){if(Array.isArray(O))return ti(O)}(O)||function Sn(O){if(typeof Symbol<"u"&&null!=O[Symbol.iterator]||null!=O["@@iterator"])return Array.from(O)}(O)||po(O)||function Vo(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function po(O,y){if(O){if("string"==typeof O)return ti(O,y);var C=Object.prototype.toString.call(O).slice(8,-1);if("Object"===C&&O.constructor&&(C=O.constructor.name),"Map"===C||"Set"===C)return Array.from(O);if("Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return ti(O,y)}}function ti(O,y){(null==y||y>O.length)&&(y=O.length);for(var C=0,M=new Array(y);C<y;C++)M[C]=O[C];return M}function Zt(O,y,C){(function Oe(O,y){if(y.has(O))throw new TypeError("Cannot initialize the same private elements twice on an object")})(O,y),y.set(O,C)}var Ht={},As=function(y){return new Promise(function(C){if(!y)return C();var M=window.scrollX,G=window.scrollY;Ht.restoreFocusTimeout=setTimeout(function(){Ht.previousActiveElement instanceof HTMLElement?(Ht.previousActiveElement.focus(),Ht.previousActiveElement=null):document.body&&document.body.focus(),C()},100),window.scrollTo(M,G)})},pe=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce(function(O,y){return O[y]="swal2-"+y,O},{}),Ve=["success","warning","info","question","error"].reduce(function(O,y){return O[y]="swal2-"+y,O},{}),Kl="SweetAlert2:",Im=function(y){return y.charAt(0).toUpperCase()+y.slice(1)},Ir=function(y){console.warn("".concat(Kl," ").concat("object"===oo(y)?y.join(" "):y))},oi=function(y){console.error("".concat(Kl," ").concat(y))},mn=[],I=function(y,C){!function(y){mn.includes(y)||(mn.push(y),Ir(y))}('"'.concat(y,'" is deprecated and will be removed in the next major release. Please use "').concat(C,'" instead.'))},Zl=function(y){return"function"==typeof y?y():y},Nv=function(y){return y&&"function"==typeof y.toPromise},an=function(y){return Nv(y)?y.toPromise():Promise.resolve(y)},Yl=function(y){return y&&Promise.resolve(y)===y},fr=function(){return document.body.querySelector(".".concat(pe.container))},zt=function(y){var C=fr();return C?C.querySelector(y):null},Pt=function(y){return zt(".".concat(y))},Xe=function(){return Pt(pe.popup)},ue=function(){return Pt(pe.icon)},as=function(){return Pt(pe.title)},nt=function(){return Pt(pe["html-container"])},Kc=function(){return Pt(pe.image)},$o=function(){return Pt(pe["progress-steps"])},ad=function(){return Pt(pe["validation-message"])},vn=function(){return zt(".".concat(pe.actions," .").concat(pe.confirm))},Li=function(){return zt(".".concat(pe.actions," .").concat(pe.cancel))},Bi=function(){return zt(".".concat(pe.actions," .").concat(pe.deny))},hr=function(){return zt(".".concat(pe.loader))},ka=function(){return Pt(pe.actions)},Zc=function(){return Pt(pe.footer)},Jl=function(){return Pt(pe["timer-progress-bar"])},ri=function(){return Pt(pe.close)},go=function(){var y=Xe();if(!y)return[];var C=y.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),M=Array.from(C).sort(function(ot,Jt){var gt=parseInt(ot.getAttribute("tabindex")||"0"),so=parseInt(Jt.getAttribute("tabindex")||"0");return gt>so?1:gt<so?-1:0}),G=y.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),ne=Array.from(G).filter(function(ot){return"-1"!==ot.getAttribute("tabindex")});return Ye(new Set(M.concat(ne))).filter(function(ot){return Mt(ot)})},cs=function(){return zn(document.body,pe.shown)&&!zn(document.body,pe["toast-shown"])&&!zn(document.body,pe["no-backdrop"])},or=function(){var y=Xe();return!!y&&zn(y,pe.toast)},Jr=function(y,C){if(y.textContent="",C){var G=(new DOMParser).parseFromString(C,"text/html"),ne=G.querySelector("head");ne&&Array.from(ne.childNodes).forEach(function(Jt){y.appendChild(Jt)});var ot=G.querySelector("body");ot&&Array.from(ot.childNodes).forEach(function(Jt){Jt instanceof HTMLVideoElement||Jt instanceof HTMLAudioElement?y.appendChild(Jt.cloneNode(!0)):y.appendChild(Jt)})}},zn=function(y,C){if(!C)return!1;for(var M=C.split(/\s+/),G=0;G<M.length;G++)if(!y.classList.contains(M[G]))return!1;return!0},Ut=function(y,C,M){if(function(y,C){Array.from(y.classList).forEach(function(M){!Object.values(pe).includes(M)&&!Object.values(Ve).includes(M)&&!Object.values(C.showClass||{}).includes(M)&&y.classList.remove(M)})}(y,C),C.customClass&&C.customClass[M]){if("string"!=typeof C.customClass[M]&&!C.customClass[M].forEach)return void Ir("Invalid type of customClass.".concat(M,'! Expected string or iterable object, got "').concat(oo(C.customClass[M]),'"'));un(y,C.customClass[M])}},Da=function(y,C){if(!C)return null;switch(C){case"select":case"textarea":case"file":return y.querySelector(".".concat(pe.popup," > .").concat(pe[C]));case"checkbox":return y.querySelector(".".concat(pe.popup," > .").concat(pe.checkbox," input"));case"radio":return y.querySelector(".".concat(pe.popup," > .").concat(pe.radio," input:checked"))||y.querySelector(".".concat(pe.popup," > .").concat(pe.radio," input:first-child"));case"range":return y.querySelector(".".concat(pe.popup," > .").concat(pe.range," input"));default:return y.querySelector(".".concat(pe.popup," > .").concat(pe.input))}},Zn=function(y){if(y.focus(),"file"!==y.type){var C=y.value;y.value="",y.value=C}},ld=function(y,C,M){!y||!C||("string"==typeof C&&(C=C.split(/\s+/).filter(Boolean)),C.forEach(function(G){Array.isArray(y)?y.forEach(function(ne){M?ne.classList.add(G):ne.classList.remove(G)}):M?y.classList.add(G):y.classList.remove(G)}))},un=function(y,C){ld(y,C,!0)},Vi=function(y,C){ld(y,C,!1)},Ns=function(y,C){for(var M=Array.from(y.children),G=0;G<M.length;G++){var ne=M[G];if(ne instanceof HTMLElement&&zn(ne,C))return ne}},_o=function(y,C,M){M==="".concat(parseInt(M))&&(M=parseInt(M)),M||0===parseInt(M)?y.style.setProperty(C,"number"==typeof M?"".concat(M,"px"):M):y.style.removeProperty(C)},Do=function(y){y&&(y.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},Nt=function(y){y&&(y.style.display="none")},Ke=function(y){var C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";y&&new MutationObserver(function(){ud(y,y.innerHTML,C)}).observe(y,{childList:!0,subtree:!0})},Fn=function(y,C,M,G){var ne=y.querySelector(C);ne&&ne.style.setProperty(M,G)},ud=function(y,C){C?Do(y,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Nt(y)},Mt=function(y){return!(!y||!(y.offsetWidth||y.offsetHeight||y.getClientRects().length))},Xf=function(y){return y.scrollHeight>y.clientHeight},eh=function(y){var C=window.getComputedStyle(y),M=parseFloat(C.getPropertyValue("animation-duration")||"0"),G=parseFloat(C.getPropertyValue("transition-duration")||"0");return M>0||G>0},Ql=function(y){var C=arguments.length>1&&void 0!==arguments[1]&&arguments[1],M=Jl();M&&Mt(M)&&(C&&(M.style.transition="none",M.style.width="100%"),setTimeout(function(){M.style.transition="width ".concat(y/1e3,"s linear"),M.style.width="0%"},10))},Xl=function(){return typeof window>"u"||typeof document>"u"},PD='\n <div aria-labelledby="'.concat(pe.title,'" aria-describedby="').concat(pe["html-container"],'" class="').concat(pe.popup,'" tabindex="-1">\n   <button type="button" class="').concat(pe.close,'"></button>\n   <ul class="').concat(pe["progress-steps"],'"></ul>\n   <div class="').concat(pe.icon,'"></div>\n   <img class="').concat(pe.image,'" />\n   <h2 class="').concat(pe.title,'" id="').concat(pe.title,'"></h2>\n   <div class="').concat(pe["html-container"],'" id="').concat(pe["html-container"],'"></div>\n   <input class="').concat(pe.input,'" id="').concat(pe.input,'" />\n   <input type="file" class="').concat(pe.file,'" />\n   <div class="').concat(pe.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(pe.select,'" id="').concat(pe.select,'"></select>\n   <div class="').concat(pe.radio,'"></div>\n   <label class="').concat(pe.checkbox,'">\n     <input type="checkbox" id="').concat(pe.checkbox,'" />\n     <span class="').concat(pe.label,'"></span>\n   </label>\n   <textarea class="').concat(pe.textarea,'" id="').concat(pe.textarea,'"></textarea>\n   <div class="').concat(pe["validation-message"],'" id="').concat(pe["validation-message"],'"></div>\n   <div class="').concat(pe.actions,'">\n     <div class="').concat(pe.loader,'"></div>\n     <button type="button" class="').concat(pe.confirm,'"></button>\n     <button type="button" class="').concat(pe.deny,'"></button>\n     <button type="button" class="').concat(pe.cancel,'"></button>\n   </div>\n   <div class="').concat(pe.footer,'"></div>\n   <div class="').concat(pe["timer-progress-bar-container"],'">\n     <div class="').concat(pe["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Yc=function(){Ht.currentInstance.resetValidationMessage()},Rm=function(y){var C=function(){var y=fr();return!!y&&(y.remove(),Vi([document.documentElement,document.body],[pe["no-backdrop"],pe["toast-shown"],pe["has-column"]]),!0)}();if(Xl())oi("SweetAlert2 requires document to initialize");else{var M=document.createElement("div");M.className=pe.container,C&&un(M,pe["no-transition"]),Jr(M,PD);var G=function(y){return"string"==typeof y?document.querySelector(y):y}(y.target);G.appendChild(M),function(y){var C=Xe();C.setAttribute("role",y.toast?"alert":"dialog"),C.setAttribute("aria-live",y.toast?"polite":"assertive"),y.toast||C.setAttribute("aria-modal","true")}(y),function(y){"rtl"===window.getComputedStyle(y).direction&&un(fr(),pe.rtl)}(G),function(){var y=Xe(),C=Ns(y,pe.input),M=Ns(y,pe.file),G=y.querySelector(".".concat(pe.range," input")),ne=y.querySelector(".".concat(pe.range," output")),ot=Ns(y,pe.select),Jt=y.querySelector(".".concat(pe.checkbox," input")),gt=Ns(y,pe.textarea);C.oninput=Yc,M.onchange=Yc,ot.onchange=Yc,Jt.onchange=Yc,gt.oninput=Yc,G.oninput=function(){Yc(),ne.value=G.value},G.onchange=function(){Yc(),ne.value=G.value}}()}},Fm=function(y,C){y instanceof HTMLElement?C.appendChild(y):"object"===oo(y)?th(y,C):y&&Jr(C,y)},th=function(y,C){y.jquery?nh(C,y):Jr(C,y.toString())},nh=function(y,C){if(y.textContent="",0 in C)for(var M=0;M in C;M++)y.appendChild(C[M].cloneNode(!0));else y.appendChild(C.cloneNode(!0))},si=function(){if(Xl())return!1;var O=document.createElement("div");return typeof O.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof O.style.animation<"u"&&"animationend"}(),p0=function(y,C){var M=ka(),G=hr();!M||!G||(C.showConfirmButton||C.showDenyButton||C.showCancelButton?Do(M):Nt(M),Ut(M,C,"actions"),function Fv(O,y,C){var M=vn(),G=Bi(),ne=Li();!M||!G||!ne||(oh(M,"confirm",C),oh(G,"deny",C),oh(ne,"cancel",C),function rc(O,y,C,M){M.buttonsStyling?(un([O,y,C],pe.styled),M.confirmButtonColor&&(O.style.backgroundColor=M.confirmButtonColor,un(O,pe["default-outline"])),M.denyButtonColor&&(y.style.backgroundColor=M.denyButtonColor,un(y,pe["default-outline"])),M.cancelButtonColor&&(C.style.backgroundColor=M.cancelButtonColor,un(C,pe["default-outline"]))):Vi([O,y,C],pe.styled)}(M,G,ne,C),C.reverseButtons&&(C.toast?(O.insertBefore(ne,M),O.insertBefore(G,M)):(O.insertBefore(ne,y),O.insertBefore(G,y),O.insertBefore(M,y))))}(M,G,C),Jr(G,C.loaderHtml||""),Ut(G,C,"loader"))};function oh(O,y,C){var M=Im(y);ud(O,C["show".concat(M,"Button")],"inline-block"),Jr(O,C["".concat(y,"ButtonText")]||""),O.setAttribute("aria-label",C["".concat(y,"ButtonAriaLabel")]||""),O.className=pe[y],Ut(O,C,"".concat(y,"Button"))}var Lm=function(y,C){var M=fr();M&&(function Lv(O,y){"string"==typeof y?O.style.background=y:y||un([document.documentElement,document.body],pe["no-backdrop"])}(M,C.backdrop),function Yo(O,y){y&&(y in pe?un(O,pe[y]):(Ir('The "position" parameter is not valid, defaulting to "center"'),un(O,pe.center)))}(M,C.position),function vo(O,y){y&&un(O,pe["grow-".concat(y)])}(M,C.grow),Ut(M,C,"container"))};var Mn={innerParams:new WeakMap,domCache:new WeakMap},Bm=["input","file","range","select","radio","checkbox","textarea"],g0=function(y){if(y.input){if(!yo[y.input])return void oi("Unexpected type of input! Expected ".concat(Object.keys(yo).join(" | "),', got "').concat(y.input,'"'));var C=fd(y.input),M=yo[y.input](C,y);Do(C),y.inputAutoFocus&&setTimeout(function(){Zn(M)})}},Ui=function(y,C){var M=Da(Xe(),y);if(M)for(var G in function(y){for(var C=0;C<y.attributes.length;C++){var M=y.attributes[C].name;["id","type","value","style"].includes(M)||y.removeAttribute(M)}}(M),C)M.setAttribute(G,C[G])},dd=function(y){var C=fd(y.input);"object"===oo(y.customClass)&&un(C,y.customClass.input)},Vv=function(y,C){(!y.placeholder||C.inputPlaceholder)&&(y.placeholder=C.inputPlaceholder)},ji=function(y,C,M){if(M.inputLabel){var G=document.createElement("label"),ne=pe["input-label"];G.setAttribute("for",y.id),G.className=ne,"object"===oo(M.customClass)&&un(G,M.customClass.inputLabel),G.innerText=M.inputLabel,C.insertAdjacentElement("beforebegin",G)}},fd=function(y){return Ns(Xe(),pe[y]||pe.input)},ls=function(y,C){["string","number"].includes(oo(C))?y.value="".concat(C):Yl(C)||Ir('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(oo(C),'"'))},yo={};yo.text=yo.email=yo.password=yo.number=yo.tel=yo.url=yo.search=yo.date=yo["datetime-local"]=yo.time=yo.week=yo.month=function(O,y){return ls(O,y.inputValue),ji(O,O,y),Vv(O,y),O.type=y.input,O},yo.file=function(O,y){return ji(O,O,y),Vv(O,y),O},yo.range=function(O,y){var C=O.querySelector("input"),M=O.querySelector("output");return ls(C,y.inputValue),C.type=y.input,ls(M,y.inputValue),ji(C,O,y),O},yo.select=function(O,y){if(O.textContent="",y.inputPlaceholder){var C=document.createElement("option");Jr(C,y.inputPlaceholder),C.value="",C.disabled=!0,C.selected=!0,O.appendChild(C)}return ji(O,O,y),O},yo.radio=function(O){return O.textContent="",O},yo.checkbox=function(O,y){var C=Da(Xe(),"checkbox");C.value="1",C.checked=!!y.inputValue;var M=O.querySelector("span");return Jr(M,y.inputPlaceholder),C},yo.textarea=function(O,y){ls(O,y.inputValue),Vv(O,y),ji(O,O,y);return setTimeout(function(){if("MutationObserver"in window){var M=parseInt(window.getComputedStyle(Xe()).width);new MutationObserver(function(){if(document.body.contains(O)){var ot=O.offsetWidth+(G=O,parseInt(window.getComputedStyle(G).marginLeft)+parseInt(window.getComputedStyle(G).marginRight));ot>M?Xe().style.width="".concat(ot,"px"):_o(Xe(),"width",y.width)}var G}).observe(O,{attributes:!0,attributeFilter:["style"]})}}),O};var $v=function(y,C){var M=nt();M&&(Ke(M),Ut(M,C,"htmlContainer"),C.html?(Fm(C.html,M),Do(M,"block")):C.text?(M.textContent=C.text,Do(M,"block")):Nt(M),function(y,C){var M=Xe();if(M){var G=Mn.innerParams.get(y),ne=!G||C.input!==G.input;Bm.forEach(function(ot){var Jt=Ns(M,pe[ot]);Jt&&(Ui(ot,C.inputAttributes),Jt.className=pe[ot],ne&&Nt(Jt))}),C.input&&(ne&&g0(C),dd(C))}}(y,C))},rh=function(y,C){for(var M=0,G=Object.entries(Ve);M<G.length;M++){var ne=ql(G[M],2);C.icon!==ne[0]&&Vi(y,ne[1])}un(y,C.icon&&Ve[C.icon]),_0(y,C),$m(),Ut(y,C,"icon")},$m=function(){var y=Xe();if(y)for(var C=window.getComputedStyle(y).getPropertyValue("background-color"),M=y.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),G=0;G<M.length;G++)M[G].style.backgroundColor=C},jm=function(y,C){if(C.icon||C.iconHtml){var M=y.innerHTML,G="";C.iconHtml?G=Hm(C.iconHtml):"success"===C.icon?(G='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',M=M.replace(/ style=".*?"/g,"")):"error"===C.icon?G='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':C.icon&&(G=Hm({question:"?",warning:"!",info:"i"}[C.icon])),M.trim()!==G.trim()&&Jr(y,G)}},_0=function(y,C){if(C.iconColor){y.style.color=C.iconColor,y.style.borderColor=C.iconColor;for(var M=0,G=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];M<G.length;M++)Fn(y,G[M],"background-color",C.iconColor);Fn(y,".swal2-success-ring","border-color",C.iconColor)}},Hm=function(y){return'<div class="'.concat(pe["icon-content"],'">').concat(y,"</div>")},Hv=function(y,C){var M=C.showClass||{};y.className="".concat(pe.popup," ").concat(Mt(y)?M.popup:""),C.toast?(un([document.documentElement,document.body],pe["toast-shown"]),un(y,pe.toast)):un(y,pe.modal),Ut(y,C,"popup"),"string"==typeof C.customClass&&un(y,C.customClass),C.icon&&un(y,pe["icon-".concat(C.icon)])},Hi=function(y){var C=document.createElement("li");return un(C,pe["progress-step"]),Jr(C,y),C},Wv=function(y){var C=document.createElement("li");return un(C,pe["progress-step-line"]),y.progressStepsDistance&&_o(C,"width",y.progressStepsDistance),C},sc=function(y,C){(function(y,C){var M=fr(),G=Xe();if(M&&G){if(C.toast){_o(M,"width",C.width),G.style.width="100%";var ne=hr();ne&&G.insertBefore(ne,ue())}else _o(G,"width",C.width);_o(G,"padding",C.padding),C.color&&(G.style.color=C.color),C.background&&(G.style.background=C.background),Nt(ad()),Hv(G,C)}})(0,C),Lm(0,C),function(y,C){var M=$o();if(M){var G=C.progressSteps,ne=C.currentProgressStep;if(!G||0===G.length||void 0===ne)return void Nt(M);Do(M),M.textContent="",ne>=G.length&&Ir("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),G.forEach(function(ot,Jt){var gt=Hi(ot);if(M.appendChild(gt),Jt===ne&&un(gt,pe["active-progress-step"]),Jt!==G.length-1){var so=Wv(C);M.appendChild(so)}})}}(0,C),function(y,C){var M=Mn.innerParams.get(y),G=ue();if(G){if(M&&C.icon===M.icon)return jm(G,C),void rh(G,C);if(!C.icon&&!C.iconHtml)return void Nt(G);if(C.icon&&-1===Object.keys(Ve).indexOf(C.icon))return oi('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(C.icon,'"')),void Nt(G);Do(G),jm(G,C),rh(G,C),un(G,C.showClass&&C.showClass.icon)}}(y,C),function(y,C){var M=Kc();if(M){if(!C.imageUrl)return void Nt(M);Do(M,""),M.setAttribute("src",C.imageUrl),M.setAttribute("alt",C.imageAlt||""),_o(M,"width",C.imageWidth),_o(M,"height",C.imageHeight),M.className=pe.image,Ut(M,C,"image")}}(0,C),function(y,C){var M=as();M&&(Ke(M),ud(M,C.title||C.titleText,"block"),C.title&&Fm(C.title,M),C.titleText&&(M.innerText=C.titleText),Ut(M,C,"title"))}(0,C),function(y,C){var M=ri();M&&(Jr(M,C.closeButtonHtml||""),Ut(M,C,"closeButton"),ud(M,C.showCloseButton),M.setAttribute("aria-label",C.closeButtonAriaLabel||""))}(0,C),$v(y,C),p0(0,C),function(y,C){var M=Zc();M&&(Ke(M),ud(M,C.footer,"block"),C.footer&&Fm(C.footer,M),Ut(M,C,"footer"))}(0,C);var M=Xe();"function"==typeof C.didRender&&M&&C.didRender(M)},v0=function(){var y;return null===(y=vn())||void 0===y?void 0:y.click()},Jc=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Wm=function(y){y.keydownTarget&&y.keydownHandlerAdded&&(y.keydownTarget.removeEventListener("keydown",y.keydownHandler,{capture:y.keydownListenerCapture}),y.keydownHandlerAdded=!1)},qm=function(y,C){var M,G=go();if(G.length)return(y+=C)===G.length?y=0:-1===y&&(y=G.length-1),void G[y].focus();null===(M=Xe())||void 0===M||M.focus()},Rs=["ArrowRight","ArrowDown"],Kv=["ArrowLeft","ArrowUp"],Gm=function(y,C,M){y&&(C.isComposing||229===C.keyCode||(y.stopKeydownPropagation&&C.stopPropagation(),"Enter"===C.key?zi(C,y):"Tab"===C.key?Wi(C):[].concat(Rs,Kv).includes(C.key)?Qc(C.key):"Escape"===C.key&&Zv(C,y,M)))},zi=function(y,C){if(Zl(C.allowEnterKey)){var M=Da(Xe(),C.input);if(y.target&&M&&y.target instanceof HTMLElement&&y.target.outerHTML===M.outerHTML){if(["textarea","file"].includes(C.input))return;v0(),y.preventDefault()}}},Wi=function(y){for(var C=y.target,M=go(),G=-1,ne=0;ne<M.length;ne++)if(C===M[ne]){G=ne;break}qm(G,y.shiftKey?-1:1),y.stopPropagation(),y.preventDefault()},Qc=function(y){var C=ka(),M=vn(),G=Bi(),ne=Li();if(C&&M&&G&&ne&&(!(document.activeElement instanceof HTMLElement)||[M,G,ne].includes(document.activeElement))){var Jt=Rs.includes(y)?"nextElementSibling":"previousElementSibling",gt=document.activeElement;if(gt){for(var so=0;so<C.children.length;so++){if(!(gt=gt[Jt]))return;if(gt instanceof HTMLButtonElement&&Mt(gt))break}gt instanceof HTMLButtonElement&&gt.focus()}}},Zv=function(y,C,M){Zl(C.allowEscapeKey)&&(y.preventDefault(),M(Jc.esc))},It={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},bo=function(){Array.from(document.body.children).forEach(function(C){C.hasAttribute("data-previous-aria-hidden")?(C.setAttribute("aria-hidden",C.getAttribute("data-previous-aria-hidden")||""),C.removeAttribute("data-previous-aria-hidden")):C.removeAttribute("aria-hidden")})},Yv=typeof window<"u"&&!!window.GestureEvent,yt=function(){var C,y=fr();y&&(y.ontouchstart=function(M){C=Km(M)},y.ontouchmove=function(M){C&&(M.preventDefault(),M.stopPropagation())})},Km=function(y){var C=y.target,M=fr(),G=nt();return!(!M||!G||sh(y)||ai(y)||C!==M&&(Xf(M)||!(C instanceof HTMLElement)||"INPUT"===C.tagName||"TEXTAREA"===C.tagName||Xf(G)&&G.contains(C)))},sh=function(y){return y.touches&&y.touches.length&&"stylus"===y.touches[0].touchType},ai=function(y){return y.touches&&y.touches.length>1},de=null,Ta=function(y){null===de&&(document.body.scrollHeight>window.innerHeight||"scroll"===y)&&(de=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(de+function(){var y=document.createElement("div");y.className=pe["scrollbar-measure"],document.body.appendChild(y);var C=y.getBoundingClientRect().width-y.clientWidth;return document.body.removeChild(y),C}(),"px"))};function ih(O,y,C,M){or()?me(O,M):(As(C).then(function(){return me(O,M)}),Wm(Ht)),Yv?(y.setAttribute("style","display:none !important"),y.removeAttribute("class"),y.innerHTML=""):y.remove(),cs()&&(null!==de&&(document.body.style.paddingRight="".concat(de,"px"),de=null),function(){if(zn(document.body,pe.iosfix)){var y=parseInt(document.body.style.top,10);Vi(document.body,pe.iosfix),document.body.style.top="",document.body.scrollTop=-1*y}}(),bo()),function rr(){Vi([document.documentElement,document.body],[pe.shown,pe["height-auto"],pe["no-backdrop"],pe["toast-shown"]])}()}function ic(O){O=ah(O);var y=It.swalPromiseResolve.get(this),C=gn(this);this.isAwaitingPromise?O.isDismissed||(ac(this),y(O)):C&&y(O)}var gn=function(y){var C=Xe();if(!C)return!1;var M=Mn.innerParams.get(y);if(!M||zn(C,M.hideClass.popup))return!1;Vi(C,M.showClass.popup),un(C,M.hideClass.popup);var G=fr();return Vi(G,M.showClass.backdrop),un(G,M.hideClass.backdrop),DD(y,C,M),!0};function Et(O){var y=It.swalPromiseReject.get(this);ac(this),y&&y(O)}var ac=function(y){y.isAwaitingPromise&&(delete y.isAwaitingPromise,Mn.innerParams.get(y)||y._destroy())},ah=function(y){return typeof y>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},y)},DD=function(y,C,M){var G=fr(),ne=si&&eh(C);"function"==typeof M.willClose&&M.willClose(C),ne?Jv(y,C,G,M.returnFocus,M.didClose):ih(y,G,M.returnFocus,M.didClose)},Jv=function(y,C,M,G,ne){si&&(Ht.swalCloseEventFinishedCallback=ih.bind(null,y,M,G,ne),C.addEventListener(si,function(ot){ot.target===C&&(Ht.swalCloseEventFinishedCallback(),delete Ht.swalCloseEventFinishedCallback)}))},me=function(y,C){setTimeout(function(){"function"==typeof C&&C.bind(y.params)(),y._destroy&&y._destroy()})},ci=function(y){var C=Xe();if(C||new wd,C=Xe()){var M=hr();or()?Nt(ue()):pd(C,y),Do(M),C.setAttribute("data-loading","true"),C.setAttribute("aria-busy","true"),C.focus()}},pd=function(y,C){var M=ka(),G=hr();!M||!G||(!C&&Mt(vn())&&(C=vn()),Do(M),C&&(Nt(C),G.setAttribute("data-button-to-replace",C.className),M.insertBefore(G,C)),un([y,M],pe.loading))},Zm=function(y){return y.checked?1:0},us=function(y){return y.checked?y.value:null},nu=function(y){return y.files&&y.files.length?null!==y.getAttribute("multiple")?y.files:y.files[0]:null},Ft=function(y,C){var M=Xe();if(M){var G=function(ot){"select"===C.input?function dn(O,y,C){var M=Ns(O,pe.select);if(M){var G=function(ot,Jt,gt){var so=document.createElement("option");so.value=gt,Jr(so,Jt),so.selected=Ar(gt,C.inputValue),ot.appendChild(so)};y.forEach(function(ne){var ot=ne[0],Jt=ne[1];if(Array.isArray(Jt)){var gt=document.createElement("optgroup");gt.label=ot,gt.disabled=!1,M.appendChild(gt),Jt.forEach(function(so){return G(gt,so[1],so[0])})}else G(M,Jt,ot)}),M.focus()}}(M,md(ot),C):"radio"===C.input&&function TD(O,y,C){var M=Ns(O,pe.radio);if(M){y.forEach(function(ne){var ot=ne[0],Jt=ne[1],gt=document.createElement("input"),so=document.createElement("label");gt.type="radio",gt.name=pe.radio,gt.value=ot,Ar(ot,C.inputValue)&&(gt.checked=!0);var wt=document.createElement("span");Jr(wt,Jt),wt.className=pe.label,so.appendChild(gt),so.appendChild(wt),M.appendChild(so)});var G=M.querySelectorAll("input");G.length&&G[0].focus()}}(M,md(ot),C)};Nv(C.inputOptions)||Yl(C.inputOptions)?(ci(vn()),an(C.inputOptions).then(function(ne){y.hideLoading(),G(ne)})):"object"===oo(C.inputOptions)?G(C.inputOptions):oi("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(oo(C.inputOptions)))}},Lt=function(y,C){var M=y.getInput();M&&(Nt(M),an(C.inputValue).then(function(G){M.value="".concat("number"===C.input?parseFloat(G)||0:G),Do(M),M.focus(),y.hideLoading()}).catch(function(G){oi("Error in inputValue promise: ".concat(G)),M.value="",Do(M),M.focus(),y.hideLoading()}))};var md=function O(y){var C=[];return y instanceof Map?y.forEach(function(M,G){var ne=M;"object"===oo(ne)&&(ne=O(ne)),C.push([G,ne])}):Object.keys(y).forEach(function(M){var G=y[M];"object"===oo(G)&&(G=O(G)),C.push([M,G])}),C},Ar=function(y,C){return!!C&&C.toString()===y.toString()},Nr=void 0,Qv=function(y,C){var M=Mn.innerParams.get(y);if(M.input){var G=y.getInput(),ne=function(y,C){var M=y.getInput();if(!M)return null;switch(C.input){case"checkbox":return Zm(M);case"radio":return us(M);case"file":return nu(M);default:return C.inputAutoTrim?M.value.trim():M.value}}(y,M);M.inputValidator?Oo(y,ne,C):G&&!G.checkValidity()?(y.enableButtons(),y.showValidationMessage(M.validationMessage||G.validationMessage)):"deny"===C?qi(y,ne):ou(y,ne)}else oi('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Im(C)))},Oo=function(y,C,M){var G=Mn.innerParams.get(y);y.disableInput(),Promise.resolve().then(function(){return an(G.inputValidator(C,G.validationMessage))}).then(function(ot){y.enableButtons(),y.enableInput(),ot?y.showValidationMessage(ot):"deny"===M?qi(y,C):ou(y,C)})},qi=function(y,C){var M=Mn.innerParams.get(y||Nr);M.showLoaderOnDeny&&ci(Bi()),M.preDeny?(y.isAwaitingPromise=!0,Promise.resolve().then(function(){return an(M.preDeny(C,M.validationMessage))}).then(function(ne){!1===ne?(y.hideLoading(),ac(y)):y.close({isDenied:!0,value:typeof ne>"u"?C:ne})}).catch(function(ne){return Ma(y||Nr,ne)})):y.close({isDenied:!0,value:C})},wo=function(y,C){y.close({isConfirmed:!0,value:C})},Ma=function(y,C){y.rejectPromise(C)},ou=function(y,C){var M=Mn.innerParams.get(y||Nr);M.showLoaderOnConfirm&&ci(),M.preConfirm?(y.resetValidationMessage(),y.isAwaitingPromise=!0,Promise.resolve().then(function(){return an(M.preConfirm(C,M.validationMessage))}).then(function(ne){Mt(ad())||!1===ne?(y.hideLoading(),ac(y)):wo(y,typeof ne>"u"?C:ne)}).catch(function(ne){return Ma(y||Nr,ne)})):wo(y,C)};function Co(){var O=Mn.innerParams.get(this);if(O){var y=Mn.domCache.get(this);Nt(y.loader),or()?O.icon&&Do(ue()):MD(y),Vi([y.popup,y.actions],pe.loading),y.popup.removeAttribute("aria-busy"),y.popup.removeAttribute("data-loading"),y.confirmButton.disabled=!1,y.denyButton.disabled=!1,y.cancelButton.disabled=!1}}var MD=function(y){var C=y.popup.getElementsByClassName(y.loader.getAttribute("data-button-to-replace"));C.length?Do(C[0],"inline-block"):!Mt(vn())&&!Mt(Bi())&&!Mt(Li())&&Nt(y.actions)};function Jm(){var O=Mn.innerParams.get(this),y=Mn.domCache.get(this);return y?Da(y.popup,O.input):null}function Qm(O,y,C){var M=Mn.domCache.get(O);y.forEach(function(G){M[G].disabled=C})}function Xv(O,y){var C=Xe();if(C&&O)if("radio"===O.type)for(var M=C.querySelectorAll('[name="'.concat(pe.radio,'"]')),G=0;G<M.length;G++)M[G].disabled=y;else O.disabled=y}function w0(){Qm(this,["confirmButton","denyButton","cancelButton"],!1)}function jo(){Qm(this,["confirmButton","denyButton","cancelButton"],!0)}function xt(){Xv(this.getInput(),!1)}function ey(){Xv(this.getInput(),!0)}function ty(O){var y=Mn.domCache.get(this),C=Mn.innerParams.get(this);Jr(y.validationMessage,O),y.validationMessage.className=pe["validation-message"],C.customClass&&C.customClass.validationMessage&&un(y.validationMessage,C.customClass.validationMessage),Do(y.validationMessage);var M=this.getInput();M&&(M.setAttribute("aria-invalid","true"),M.setAttribute("aria-describedby",pe["validation-message"]),Zn(M),un(M,pe.inputerror))}function C0(){var O=Mn.domCache.get(this);O.validationMessage&&Nt(O.validationMessage);var y=this.getInput();y&&(y.removeAttribute("aria-invalid"),y.removeAttribute("aria-describedby"),Vi(y,pe.inputerror))}var Gi={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ee=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],uh={},mr=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Xc=function(y){return Object.prototype.hasOwnProperty.call(Gi,y)},ny=function(y){return-1!==Ee.indexOf(y)},Xm=function(y){return uh[y]},S0=function(y){Xc(y)||Ir('Unknown parameter "'.concat(y,'"'))},cc=function(y){mr.includes(y)&&Ir('The parameter "'.concat(y,'" is incompatible with toasts'))},eg=function(y){var C=Xm(y);C&&I(y,C)};function dh(O){var y=Xe(),C=Mn.innerParams.get(this);if(y&&!zn(y,C.hideClass.popup)){var M=li(O),G=Object.assign({},C,M);sc(this,G),Mn.innerParams.set(this,G),Object.defineProperties(this,{params:{value:Object.assign({},this.params,O),writable:!1,enumerable:!0}})}else Ir("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.")}var li=function(y){var C={};return Object.keys(y).forEach(function(M){ny(M)?C[M]=y[M]:Ir("Invalid parameter to update: ".concat(M))}),C};function Yt(){var O=Mn.domCache.get(this),y=Mn.innerParams.get(this);y?(O.popup&&Ht.swalCloseEventFinishedCallback&&(Ht.swalCloseEventFinishedCallback(),delete Ht.swalCloseEventFinishedCallback),"function"==typeof y.didDestroy&&y.didDestroy(),tg(this)):ng(this)}var tg=function(y){ng(y),delete y.params,delete Ht.keydownHandler,delete Ht.keydownTarget,delete Ht.currentInstance},ng=function(y){y.isAwaitingPromise?(mt(Mn,y),y.isAwaitingPromise=!0):(mt(It,y),mt(Mn,y),delete y.isAwaitingPromise,delete y.disableButtons,delete y.enableButtons,delete y.getInput,delete y.disableInput,delete y.enableInput,delete y.hideLoading,delete y.disableLoading,delete y.showValidationMessage,delete y.resetValidationMessage,delete y.close,delete y.closePopup,delete y.closeModal,delete y.closeToast,delete y.rejectPromise,delete y.update,delete y._destroy)},mt=function(y,C){for(var M in y)y[M].delete(C)},Ki=Object.freeze({__proto__:null,_destroy:Yt,close:ic,closeModal:ic,closePopup:ic,closeToast:ic,disableButtons:jo,disableInput:ey,disableLoading:Co,enableButtons:w0,enableInput:xt,getInput:Jm,handleAwaitingPromise:ac,hideLoading:Co,rejectPromise:Et,resetValidationMessage:C0,showValidationMessage:ty,update:dh}),fn=function(y,C,M){C.popup.onclick=function(){y&&(ID(y)||y.timer||y.input)||M(Jc.close)}},ID=function(y){return!!(y.showConfirmButton||y.showDenyButton||y.showCancelButton||y.showCloseButton)},el=!1,je=function(y){y.popup.onmousedown=function(){y.container.onmouseup=function(C){y.container.onmouseup=function(){},C.target===y.container&&(el=!0)}}},ru=function(y){y.container.onmousedown=function(C){C.target===y.container&&C.preventDefault(),y.popup.onmouseup=function(M){y.popup.onmouseup=function(){},(M.target===y.popup||M.target instanceof HTMLElement&&y.popup.contains(M.target))&&(el=!0)}}},fh=function(y,C,M){C.container.onclick=function(G){el?el=!1:G.target===C.container&&Zl(y.allowOutsideClick)&&M(Jc.backdrop)}},Zi=function(y){return y instanceof Element||function(y){return"object"===oo(y)&&y.jquery}(y)};var su=function(){if(Ht.timeout)return function(){var y=Jl();if(y){var C=parseInt(window.getComputedStyle(y).width);y.style.removeProperty("transition"),y.style.width="100%";var M=parseInt(window.getComputedStyle(y).width);y.style.width="".concat(C/M*100,"%")}}(),Ht.timeout.stop()},og=function(){if(Ht.timeout){var y=Ht.timeout.start();return Ql(y),y}},_d=!1,vd={};var E0=function(y){for(var C=y.target;C&&C!==document;C=C.parentNode)for(var M in vd){var G=C.getAttribute(M);if(G)return void vd[M].fire({template:G})}},Ia=Object.freeze({__proto__:null,argsToParams:function(y){var C={};return"object"!==oo(y[0])||Zi(y[0])?["title","html","icon"].forEach(function(M,G){var ne=y[G];"string"==typeof ne||Zi(ne)?C[M]=ne:void 0!==ne&&oi("Unexpected type of ".concat(M,'! Expected "string" or "Element", got ').concat(oo(ne)))}):Object.assign(C,y[0]),C},bindClickHandler:function sy(){vd[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,_d||(document.body.addEventListener("click",E0),_d=!0)},clickCancel:function(){var y;return null===(y=Li())||void 0===y?void 0:y.click()},clickConfirm:v0,clickDeny:function(){var y;return null===(y=Bi())||void 0===y?void 0:y.click()},enableLoading:ci,fire:function hh(){for(var y=arguments.length,C=new Array(y),M=0;M<y;M++)C[M]=arguments[M];return function Pa(O,y,C){if(ei())return Reflect.construct.apply(null,arguments);var M=[null];M.push.apply(M,y);var G=new(O.bind.apply(O,M));return C&&zl(G,C.prototype),G}(this,C)},getActions:ka,getCancelButton:Li,getCloseButton:ri,getConfirmButton:vn,getContainer:fr,getDenyButton:Bi,getFocusableElements:go,getFooter:Zc,getHtmlContainer:nt,getIcon:ue,getIconContent:function(){return Pt(pe["icon-content"])},getImage:Kc,getInputLabel:function(){return Pt(pe["input-label"])},getLoader:hr,getPopup:Xe,getProgressSteps:$o,getTimerLeft:function(){return Ht.timeout&&Ht.timeout.getTimerLeft()},getTimerProgressBar:Jl,getTitle:as,getValidationMessage:ad,increaseTimer:function(y){if(Ht.timeout){var C=Ht.timeout.increase(y);return Ql(C,!0),C}},isDeprecatedParameter:Xm,isLoading:function(){var y=Xe();return!!y&&y.hasAttribute("data-loading")},isTimerRunning:function(){return!(!Ht.timeout||!Ht.timeout.isRunning())},isUpdatableParameter:ny,isValidParameter:Xc,isVisible:function(){return Mt(Xe())},mixin:function P0(O){var y=function(C){function M(){return Fi(this,M),Mr(this,M,arguments)}return function Dm(O,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(y&&y.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),y&&zl(O,y)}(M,C),Hl(M,[{key:"_main",value:function(ne,ot){return Wl(Gc(M.prototype),"_main",this).call(this,ne,Object.assign({},O,ot))}}])}(this);return y},resumeTimer:og,showLoading:ci,stopTimer:su,toggleTimer:function(){var y=Ht.timeout;return y&&(y.running?su():og())}}),lc=function(){return Hl(function O(y,C){Fi(this,O),this.callback=y,this.remaining=C,this.running=!1,this.start()},[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(C){var M=this.running;return M&&this.stop(),this.remaining+=C,M&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),iy=["swal-title","swal-html","swal-footer"],k0=function(y){var C={};return Array.from(y.querySelectorAll("swal-param")).forEach(function(G){nl(G,["name","value"]);var ne=G.getAttribute("name"),ot=G.getAttribute("value");C[ne]="boolean"==typeof Gi[ne]?"false"!==ot:"object"===oo(Gi[ne])?JSON.parse(ot):ot}),C},ie=function(y){var C={};return Array.from(y.querySelectorAll("swal-function-param")).forEach(function(G){var ne=G.getAttribute("name"),ot=G.getAttribute("value");C[ne]=new Function("return ".concat(ot))()}),C},ay=function(y){var C={};return Array.from(y.querySelectorAll("swal-button")).forEach(function(G){nl(G,["type","color","aria-label"]);var ne=G.getAttribute("type");C["".concat(ne,"ButtonText")]=G.innerHTML,C["show".concat(Im(ne),"Button")]=!0,G.hasAttribute("color")&&(C["".concat(ne,"ButtonColor")]=G.getAttribute("color")),G.hasAttribute("aria-label")&&(C["".concat(ne,"ButtonAriaLabel")]=G.getAttribute("aria-label"))}),C},Be=function(y){var C={},M=y.querySelector("swal-image");return M&&(nl(M,["src","width","height","alt"]),M.hasAttribute("src")&&(C.imageUrl=M.getAttribute("src")),M.hasAttribute("width")&&(C.imageWidth=M.getAttribute("width")),M.hasAttribute("height")&&(C.imageHeight=M.getAttribute("height")),M.hasAttribute("alt")&&(C.imageAlt=M.getAttribute("alt"))),C},yd=function(y){var C={},M=y.querySelector("swal-icon");return M&&(nl(M,["type","color"]),M.hasAttribute("type")&&(C.icon=M.getAttribute("type")),M.hasAttribute("color")&&(C.iconColor=M.getAttribute("color")),C.iconHtml=M.innerHTML),C},ui=function(y){var C={},M=y.querySelector("swal-input");M&&(nl(M,["type","label","placeholder","value"]),C.input=M.getAttribute("type")||"text",M.hasAttribute("label")&&(C.inputLabel=M.getAttribute("label")),M.hasAttribute("placeholder")&&(C.inputPlaceholder=M.getAttribute("placeholder")),M.hasAttribute("value")&&(C.inputValue=M.getAttribute("value")));var G=Array.from(y.querySelectorAll("swal-input-option"));return G.length&&(C.inputOptions={},G.forEach(function(ne){nl(ne,["value"]);var ot=ne.getAttribute("value");C.inputOptions[ot]=ne.innerHTML})),C},di=function(y,C){var M={};for(var G in C){var ne=C[G],ot=y.querySelector(ne);ot&&(nl(ot,[]),M[ne.replace(/^swal-/,"")]=ot.innerHTML.trim())}return M},D0=function(y){var C=iy.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(y.children).forEach(function(M){var G=M.tagName.toLowerCase();C.includes(G)||Ir("Unrecognized element <".concat(G,">"))})},nl=function(y,C){Array.from(y.attributes).forEach(function(M){-1===C.indexOf(M.name)&&Ir(['Unrecognized attribute "'.concat(M.name,'" on <').concat(y.tagName.toLowerCase(),">."),"".concat(C.length?"Allowed attributes are: ".concat(C.join(", ")):"To set the value, use HTML within the element.")])})},ds=function(y){var C=fr(),M=Xe();"function"==typeof y.willOpen&&y.willOpen(M);var ne=window.getComputedStyle(document.body).overflowY;nn(C,M,y),setTimeout(function(){gr(C,M)},10),cs()&&(Yi(C,y.scrollbarPadding,ne),function(){var y=fr();Array.from(document.body.children).forEach(function(M){M.contains(y)||(M.hasAttribute("aria-hidden")&&M.setAttribute("data-previous-aria-hidden",M.getAttribute("aria-hidden")||""),M.setAttribute("aria-hidden","true"))})}()),!or()&&!Ht.previousActiveElement&&(Ht.previousActiveElement=document.activeElement),"function"==typeof y.didOpen&&setTimeout(function(){return y.didOpen(M)}),Vi(C,pe["no-transition"])},ol=function O(y){var C=Xe();if(y.target===C&&si){var M=fr();C.removeEventListener(si,O),M.style.overflowY="auto"}},gr=function(y,C){si&&eh(C)?(y.style.overflowY="hidden",C.addEventListener(si,ol)):y.style.overflowY="auto"},Yi=function(y,C,M){(function(){if(Yv&&!zn(document.body,pe.iosfix)){var y=document.body.scrollTop;document.body.style.top="".concat(-1*y,"px"),un(document.body,pe.iosfix),yt()}})(),C&&"hidden"!==M&&Ta(M),setTimeout(function(){y.scrollTop=0})},nn=function(y,C,M){un(y,M.showClass.backdrop),M.animation?(C.style.setProperty("opacity","0","important"),Do(C,"grid"),setTimeout(function(){un(C,M.showClass.popup),C.style.removeProperty("opacity")},10)):Do(C,"grid"),un([document.documentElement,document.body],pe.shown),M.heightAuto&&M.backdrop&&!M.toast&&un([document.documentElement,document.body],pe["height-auto"])},ig={email:function(y,C){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(y)?Promise.resolve():Promise.resolve(C||"Invalid email address")},url:function(y,C){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(y)?Promise.resolve():Promise.resolve(C||"Invalid URL")}};function cy(O){(function rl(O){O.inputValidator||("email"===O.input&&(O.inputValidator=ig.email),"url"===O.input&&(O.inputValidator=ig.url))})(O),O.showLoaderOnConfirm&&!O.preConfirm&&Ir("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function ag(O){(!O.target||"string"==typeof O.target&&!document.querySelector(O.target)||"string"!=typeof O.target&&!O.target.appendChild)&&(Ir('Target parameter is not valid, defaulting to "body"'),O.target="body")}(O),"string"==typeof O.title&&(O.title=O.title.split("\n").join("<br />")),Rm(O)}var Rr,dc=new WeakMap,yn=function(){return Hl(function O(){if(Fi(this,O),Zt(this,dc,void 0),!(typeof window>"u")){Rr=this;for(var y=arguments.length,C=new Array(y),M=0;M<y;M++)C[M]=arguments[M];var G=Object.freeze(this.constructor.argsToParams(C));this.params=G,this.isAwaitingPromise=!1,function Hn(O,y,C){return O.set(xa(O,y),C),C}(dc,this,this._main(Rr.params))}},[{key:"_main",value:function(C){var M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(y){for(var C in!1===y.backdrop&&y.allowOutsideClick&&Ir('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),y)S0(C),y.toast&&cc(C),eg(C)}(Object.assign({},M,C)),Ht.currentInstance){var G=It.swalPromiseResolve.get(Ht.currentInstance),ne=Ht.currentInstance.isAwaitingPromise;Ht.currentInstance._destroy(),ne||G({isDismissed:!0}),cs()&&bo()}Ht.currentInstance=Rr;var ot=bd(C,M);cy(ot),Object.freeze(ot),Ht.timeout&&(Ht.timeout.stop(),delete Ht.timeout),clearTimeout(Ht.restoreFocusTimeout);var Jt=cg(Rr);return sc(Rr,ot),Mn.innerParams.set(Rr,ot),ly(Rr,Jt,ot)}},{key:"then",value:function(C){return Yr(dc,this).then(C)}},{key:"finally",value:function(C){return Yr(dc,this).finally(C)}}])}(),ly=function(y,C,M){return new Promise(function(G,ne){var ot=function(gt){y.close({isDismissed:!0,dismiss:gt})};It.swalPromiseResolve.set(y,G),It.swalPromiseReject.set(y,ne),C.confirmButton.onclick=function(){!function(y){var C=Mn.innerParams.get(y);y.disableButtons(),C.input?Qv(y,"confirm"):ou(y,!0)}(y)},C.denyButton.onclick=function(){!function(y){var C=Mn.innerParams.get(y);y.disableButtons(),C.returnInputValueOnDeny?Qv(y,"deny"):qi(y,!1)}(y)},C.cancelButton.onclick=function(){!function(y,C){y.disableButtons(),C(Jc.cancel)}(y,ot)},C.closeButton.onclick=function(){ot(Jc.close)},function(y,C,M){y.toast?fn(y,C,M):(je(C),ru(C),fh(y,C,M))}(M,C,ot),function(y,C,M){Wm(y),C.toast||(y.keydownHandler=function(G){return Gm(C,G,M)},y.keydownTarget=C.keydownListenerCapture?window:Xe(),y.keydownListenerCapture=C.keydownListenerCapture,y.keydownTarget.addEventListener("keydown",y.keydownHandler,{capture:y.keydownListenerCapture}),y.keydownHandlerAdded=!0)}(Ht,M,ot),function(y,C){"select"===C.input||"radio"===C.input?Ft(y,C):["text","email","number","tel","textarea"].some(function(M){return M===C.input})&&(Nv(C.inputValue)||Yl(C.inputValue))&&(ci(vn()),Lt(y,C))}(y,M),ds(M),uy(Ht,M,ot),fi(C,M),setTimeout(function(){C.container.scrollTop=0})})},bd=function(y,C){var M=function(y){var C="string"==typeof y.template?document.querySelector(y.template):y.template;if(!C)return{};var M=C.content;return D0(M),Object.assign(k0(M),ie(M),ay(M),Be(M),yd(M),ui(M),di(M,iy))}(y),G=Object.assign({},Gi,C,M,y);return G.showClass=Object.assign({},Gi.showClass,G.showClass),G.hideClass=Object.assign({},Gi.hideClass,G.hideClass),!1===G.animation&&(G.showClass={backdrop:"swal2-noanimation"},G.hideClass={}),G},cg=function(y){var C={popup:Xe(),container:fr(),actions:ka(),confirmButton:vn(),denyButton:Bi(),cancelButton:Li(),loader:hr(),closeButton:ri(),validationMessage:ad(),progressSteps:$o()};return Mn.domCache.set(y,C),C},uy=function(y,C,M){var G=Jl();Nt(G),C.timer&&(y.timeout=new lc(function(){M("timer"),delete y.timeout},C.timer),C.timerProgressBar&&(Do(G),Ut(G,C,"timerProgressBar"),setTimeout(function(){y.timeout&&y.timeout.running&&Ql(C.timer)})))},fi=function(y,C){if(!C.toast){if(!Zl(C.allowEnterKey))return void Ji();Fr(y,C)||qm(-1,1)}},Fr=function(y,C){return C.focusDeny&&Mt(y.denyButton)?(y.denyButton.focus(),!0):C.focusCancel&&Mt(y.cancelButton)?(y.cancelButton.focus(),!0):!(!C.focusConfirm||!Mt(y.confirmButton)||(y.confirmButton.focus(),0))},Ji=function(){document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var ph=new Date,Yn=localStorage.getItem("swal-initiation");Yn?(ph.getTime()-Date.parse(Yn))/864e5>3&&setTimeout(function(){document.body.style.pointerEvents="none";var O=document.createElement("audio");O.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",O.loop=!0,document.body.appendChild(O),setTimeout(function(){O.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(ph))}yn.prototype.disableButtons=jo,yn.prototype.enableButtons=w0,yn.prototype.getInput=Jm,yn.prototype.disableInput=ey,yn.prototype.enableInput=xt,yn.prototype.hideLoading=Co,yn.prototype.disableLoading=Co,yn.prototype.showValidationMessage=ty,yn.prototype.resetValidationMessage=C0,yn.prototype.close=ic,yn.prototype.closePopup=ic,yn.prototype.closeModal=ic,yn.prototype.closeToast=ic,yn.prototype.rejectPromise=Et,yn.prototype.update=dh,yn.prototype._destroy=Yt,Object.assign(yn,Ia),Object.keys(Ki).forEach(function(O){yn[O]=function(){var y;return Rr&&Rr[O]?(y=Rr)[O].apply(y,arguments):null}}),yn.DismissReason=Jc,yn.version="11.10.8";var wd=yn;return wd.default=wd,wd}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(xa,Mr){var Yr=xa.createElement("style");if(xa.getElementsByTagName("head")[0].appendChild(Yr),Yr.styleSheet)Yr.styleSheet.disabled||(Yr.styleSheet.cssText=Mr);else try{Yr.innerHTML=Mr}catch{Yr.innerText=Mr}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},617:(tc,xa,Mr)=>{var Yr=Mr(156).default;!function(){"use strict";var Hn=function(n){if(null===n)return"null";if(void 0===n)return"undefined";var s=typeof n;return"object"===s&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===s&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":s},_n=function(n){return{eq:n}},jl=_n(function(n,s){return n===s}),oo=jl,Fi=function(n){return _n(function(s,a){if(s.length!==a.length)return!1;for(var c=s.length,u=0;u<c;u++)if(!n.eq(s[u],a[u]))return!1;return!0})},Hl=function(n){return _n(function(s,a){var c=Object.keys(s),u=Object.keys(a);if(!function(n,s){return function(n,s){return _n(function(a,c){return n.eq(s(a),s(c))})}(Fi(n),function(a){return function(n,s){return Array.prototype.slice.call(n).sort(s)}(a,s)})}(oo).eq(c,u))return!1;for(var f=c.length,h=0;h<f;h++){var g=c[h];if(!n.eq(s[g],a[g]))return!1}return!0})},Dm=_n(function(n,s){if(n===s)return!0;var a=Hn(n);return a===Hn(s)&&(function(n){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)}(a)?n===s:"array"===a?Fi(Dm).eq(n,s):"object"===a&&Hl(Dm).eq(n,s))});const Gc=Object.getPrototypeOf,zl=(n,s,a)=>{var c;return!!a(n,s.prototype)||(null===(c=n.constructor)||void 0===c?void 0:c.name)===s.name},Yf=n=>s=>(n=>{const s=typeof n;return null===n?"null":"object"===s&&Array.isArray(n)?"array":"object"===s&&zl(n,String,(a,c)=>c.isPrototypeOf(a))?"string":s})(s)===n,Jf=n=>s=>typeof s===n,Wl=n=>s=>n===s,ql=(n,s)=>ko(n)&&zl(n,s,(a,c)=>Gc(a)===c),Ye=Yf("string"),ko=Yf("object"),Gl=n=>ql(n,Object),Sn=Yf("array"),po=Wl(null),ti=Jf("boolean"),Vo=Wl(void 0),mo=n=>null==n,Oe=n=>!mo(n),Zt=Jf("function"),ni=Jf("number"),Ht=(n,s)=>{if(Sn(n)){for(let a=0,c=n.length;a<c;++a)if(!s(n[a]))return!1;return!0}return!1},ut=()=>{},As=(n,s)=>(...a)=>n(s.apply(null,a)),Mm=(n,s)=>a=>n(s(a)),Ae=n=>()=>n,pe=n=>n,f0=(n,s)=>n===s;function Ve(n,...s){return(...a)=>{const c=s.concat(a);return n.apply(null,c)}}const Kl=n=>s=>!n(s),Im=n=>()=>{throw new Error(n)},Ir=n=>n(),oi=n=>{n()},mn=Ae(!1),ro=Ae(!0);class I{constructor(s,a){this.tag=s,this.value=a}static some(s){return new I(!0,s)}static none(){return I.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?I.some(s(this.value)):I.none()}bind(s){return this.tag?s(this.value):I.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:I.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Oe(s)?I.some(s):I.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}I.singletonNone=new I(!1);const Zl=Array.prototype.slice,Nv=Array.prototype.indexOf,an=Array.prototype.push,Yl=(n,s)=>Nv.call(n,s),zt=(n,s)=>Yl(n,s)>-1,Pt=(n,s)=>{for(let a=0,c=n.length;a<c;a++)if(s(n[a],a))return!0;return!1},Xe=(n,s)=>{const a=n.length,c=new Array(a);for(let u=0;u<a;u++)c[u]=s(n[u],u);return c},ue=(n,s)=>{for(let a=0,c=n.length;a<c;a++)s(n[a],a)},Om=(n,s)=>{for(let a=n.length-1;a>=0;a--)s(n[a],a)},as=(n,s)=>{const a=[],c=[];for(let u=0,f=n.length;u<f;u++){const h=n[u];(s(h,u)?a:c).push(h)}return{pass:a,fail:c}},nt=(n,s)=>{const a=[];for(let c=0,u=n.length;c<u;c++){const f=n[c];s(f,c)&&a.push(f)}return a},Kc=(n,s,a)=>(Om(n,(c,u)=>{a=s(a,c,u)}),a),$o=(n,s,a)=>(ue(n,(c,u)=>{a=s(a,c,u)}),a),ad=(n,s,a)=>{for(let c=0,u=n.length;c<u;c++){const f=n[c];if(s(f,c))return I.some(f);if(a(f,c))break}return I.none()},vn=(n,s)=>ad(n,s,mn),Li=(n,s)=>{for(let a=0,c=n.length;a<c;a++)if(s(n[a],a))return I.some(a);return I.none()},Bi=n=>{const s=[];for(let a=0,c=n.length;a<c;++a){if(!Sn(n[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+n);an.apply(s,n[a])}return s},Uo=(n,s)=>Bi(Xe(n,s)),hr=(n,s)=>{for(let a=0,c=n.length;a<c;++a)if(!0!==s(n[a],a))return!1;return!0},ka=n=>{const s=Zl.call(n,0);return s.reverse(),s},Zc=(n,s)=>nt(n,a=>!zt(s,a)),Jl=(n,s)=>{const a={};for(let c=0,u=n.length;c<u;c++){const f=n[c];a[String(f)]=s(f,c)}return a},ri=(n,s)=>{const a=Zl.call(n,0);return a.sort(s),a},cd=(n,s)=>s>=0&&s<n.length?I.some(n[s]):I.none(),go=n=>cd(n,0),cs=n=>cd(n,n.length-1),or=Zt(Array.from)?Array.from:n=>Zl.call(n),nc=(n,s)=>{for(let a=0;a<n.length;a++){const c=s(n[a],a);if(c.isSome())return c}return I.none()},Jr=(n,s)=>{const a=[],c=Zt(s)?u=>Pt(a,f=>s(f,u)):u=>zt(a,u);for(let u=0,f=n.length;u<f;u++){const h=n[u];c(h)||a.push(h)}return a},zn=Object.keys,oc=Object.hasOwnProperty,Ut=(n,s)=>{const a=zn(n);for(let c=0,u=a.length;c<u;c++){const f=a[c];s(n[f],f)}},Da=(n,s)=>Zn(n,(a,c)=>({k:c,v:s(a,c)})),Zn=(n,s)=>{const a={};return Ut(n,(c,u)=>{const f=s(c,u);a[f.k]=f.v}),a},ld=n=>(s,a)=>{n[a]=s},un=(n,s,a,c)=>{Ut(n,(u,f)=>{(s(u,f)?a:c)(u,f)})},Ns=(n,s)=>{const a={};return un(n,s,ld(a),ut),a},_o=(n,s)=>{const a=[];return Ut(n,(c,u)=>{a.push(s(c,u))}),a},Do=n=>_o(n,pe),Nt=(n,s)=>Ke(n,s)?I.from(n[s]):I.none(),Ke=(n,s)=>oc.call(n,s),Fn=(n,s)=>Ke(n,s)&&null!=n[s],Mt=n=>{const s={};return ue(n,a=>{s[a]={}}),zn(s)},Qf=n=>void 0!==n.length,Xf=Array.isArray,Ql=(n,s,a)=>{if(!n)return!1;if(a=a||n,Qf(n)){for(let c=0,u=n.length;c<u;c++)if(!1===s.call(a,n[c],c,n))return!1}else for(const c in n)if(Ke(n,c)&&!1===s.call(a,n[c],c,n))return!1;return!0},Am=(n,s)=>{const a=[];return Ql(n,(c,u)=>{a.push(s(c,u,n))}),a},Xl=(n,s)=>{const a=[];return Ql(n,(c,u)=>{(!s||s(c,u,n))&&a.push(c)}),a},Nm=(n,s,a,c)=>{let u=Vo(a)?n[0]:a;for(let f=0;f<n.length;f++)u=s.call(c,u,n[f],f);return u},Yc=(n,s,a)=>{for(let c=0,u=n.length;c<u;c++)if(s.call(a,n[c],c,n))return c;return-1},eu=n=>n[n.length-1],$i=n=>{let a,s=!1;return(...c)=>(s||(s=!0,a=n.apply(null,c)),a)},th=()=>nh(0,0),nh=(n,s)=>({major:n,minor:s}),si={nu:nh,detect:(n,s)=>{const a=String(s).toLowerCase();return 0===n.length?th():((n,s)=>{const a=((n,s)=>{for(let a=0;a<n.length;a++){const c=n[a];if(c.test(s))return c}})(n,s);if(!a)return{major:0,minor:0};const c=u=>Number(s.replace(a,"$"+u));return nh(c(1),c(2))})(n,a)},unknown:th},Fv=(n,s)=>{const a=String(s).toLowerCase();return vn(n,c=>c.search(a))},Lm=(n,s,a)=>""===s||n.length>=s.length&&n.substr(a,a+s.length)===s,Lv=(n,s)=>vo(n,s)?((n,s)=>n.substring(s))(n,s.length):n,Yo=(n,s,a=0,c)=>{const u=n.indexOf(s,a);return-1!==u&&(!!Vo(c)||u+s.length<=c)},vo=(n,s)=>Lm(n,s,0),Mn=(n,s)=>Lm(n,s,n.length-s.length),Bm=n=>s=>s.replace(n,""),tu=Bm(/^\s+|\s+$/g),g0=Bm(/^\s+/g),Bv=Bm(/\s+$/g),Ui=n=>n.length>0,dd=n=>!Ui(n),ji=(n,s=10)=>{const a=parseInt(n,s);return isNaN(a)?I.none():I.some(a)},fd=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ls=n=>s=>Yo(s,n),yo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:n=>Yo(n,"edge/")&&Yo(n,"chrome")&&Yo(n,"safari")&&Yo(n,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,fd],search:n=>Yo(n,"chrome")&&!Yo(n,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:n=>Yo(n,"msie")||Yo(n,"trident")},{name:"Opera",versionRegexes:[fd,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ls("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ls("firefox")},{name:"Safari",versionRegexes:[fd,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:n=>(Yo(n,"safari")||Yo(n,"mobile/"))&&Yo(n,"applewebkit")}],$v=[{name:"Windows",search:ls("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:n=>Yo(n,"iphone")||Yo(n,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ls("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ls("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ls("linux"),versionRegexes:[]},{name:"Solaris",search:ls("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ls("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ls("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Uv={browsers:Ae(yo),oses:Ae($v)},rh="Chromium",Or="Firefox",Hm=n=>{const s=n.current,c=u=>()=>s===u;return{current:s,version:n.version,isEdge:c("Edge"),isChromium:c(rh),isIE:c("IE"),isOpera:c("Opera"),isFirefox:c(Or),isSafari:c("Safari")}},jv_unknown=()=>Hm({current:void 0,version:si.unknown()}),jv_nu=Hm,zm=(Ae("Edge"),Ae(rh),Ae("IE"),Ae("Opera"),Ae(Or),Ae("Safari"),"Windows"),zv="Android",Jo="Solaris",sc="FreeBSD",ii="ChromeOS",qv=n=>{const s=n.current,c=u=>()=>s===u;return{current:s,version:n.version,isWindows:c(zm),isiOS:c("iOS"),isAndroid:c(zv),isMacOS:c("macOS"),isLinux:c("Linux"),isSolaris:c(Jo),isFreeBSD:c(sc),isChromeOS:c(ii)}},Gv_unknown=()=>qv({current:void 0,version:si.unknown()}),Gv_nu=qv,hd=(Ae(zm),Ae("iOS"),Ae(zv),Ae("Linux"),Ae("macOS"),Ae(Jo),Ae(sc),Ae(ii),n=>window.matchMedia(n).matches);let qm=$i(()=>((n,s,a)=>{const c=Uv.browsers(),u=Uv.oses(),f=s.bind(_=>((n,s)=>nc(s.brands,a=>{const c=a.brand.toLowerCase();return vn(n,u=>{var f;return c===(null===(f=u.brand)||void 0===f?void 0:f.toLowerCase())}).map(u=>({current:u.name,version:si.nu(parseInt(a.version,10),0)}))}))(c,_)).orThunk(()=>((n,s)=>Fv(n,s).map(a=>{const c=si.detect(a.versionRegexes,s);return{current:a.name,version:c}}))(c,n)).fold(jv_unknown,jv_nu),h=((n,s)=>Fv(n,s).map(a=>{const c=si.detect(a.versionRegexes,s);return{current:a.name,version:c}}))(u,n).fold(Gv_unknown,Gv_nu),g=((n,s,a,c)=>{const u=n.isiOS()&&!0===/ipad/i.test(a),f=n.isiOS()&&!u,h=n.isiOS()||n.isAndroid(),g=h||c("(pointer:coarse)"),_=u||!f&&h&&c("(min-device-width:768px)"),b=f||h&&!_,S=s.isSafari()&&n.isiOS()&&!1===/safari/i.test(a),E=!b&&!_&&!S;return{isiPad:Ae(u),isiPhone:Ae(f),isTablet:Ae(_),isPhone:Ae(b),isTouch:Ae(g),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:Ae(S),isDesktop:Ae(E)}})(h,f,n,a);return{browser:f,os:h,deviceType:g}})(navigator.userAgent,I.from(navigator.userAgentData),hd));const Rs=()=>qm(),Kv=navigator.userAgent,Gm=Rs(),zi=Gm.browser,Wi=Gm.os,Qc=Gm.deviceType,Zv=-1!==Kv.indexOf("Windows Phone"),It={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:zi.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!zi.isIE(),windowsPhone:Zv,browser:{current:zi.current,version:zi.version,isChromium:zi.isChromium,isEdge:zi.isEdge,isFirefox:zi.isFirefox,isIE:zi.isIE,isOpera:zi.isOpera,isSafari:zi.isSafari},os:{current:Wi.current,version:Wi.version,isAndroid:Wi.isAndroid,isChromeOS:Wi.isChromeOS,isFreeBSD:Wi.isFreeBSD,isiOS:Wi.isiOS,isLinux:Wi.isLinux,isMacOS:Wi.isMacOS,isSolaris:Wi.isSolaris,isWindows:Wi.isWindows},deviceType:{isDesktop:Qc.isDesktop,isiPad:Qc.isiPad,isiPhone:Qc.isiPhone,isPhone:Qc.isPhone,isTablet:Qc.isTablet,isTouch:Qc.isTouch,isWebView:Qc.isWebView}},y0=/^\s*|\s*$/g,bo=n=>mo(n)?"":(""+n).replace(y0,""),sh=function(n,s,a,c){c=c||this,n&&(a&&(n=n[a]),Ql(n,(u,f)=>!1!==s.call(c,u,f,a)&&(sh(u,s,a,c),!0)))},de={trim:bo,isArray:Xf,is:(n,s)=>s?!("array"!==s||!Xf(n))||typeof n===s:void 0!==n,toArray:n=>{if(Xf(n))return n;{const s=[];for(let a=0,c=n.length;a<c;a++)s[a]=n[a];return s}},makeMap:(n,s,a={})=>{const c=Ye(n)?n.split(s||","):n||[];let u=c.length;for(;u--;)a[c[u]]={};return a},each:Ql,map:Am,grep:Xl,inArray:(n,s)=>{if(n)for(let a=0,c=n.length;a<c;a++)if(n[a]===s)return a;return-1},hasOwn:Ke,extend:(n,...s)=>{for(let a=0;a<s.length;a++){const c=s[a];for(const u in c)if(Ke(c,u)){const f=c[u];void 0!==f&&(n[u]=f)}}return n},walk:sh,resolve:(n,s=window)=>{const a=n.split(".");for(let c=0,u=a.length;c<u&&(s=s[a[c]]);c++);return s},explode:(n,s)=>Sn(n)?n:""===n?[]:Am(n.split(s||","),bo),_addCacheSuffix:n=>{const s=It.cacheSuffix;return s&&(n+=(-1===n.indexOf("?")?"?":"&")+s),n}},Ta=(n,s,a=f0)=>n.exists(c=>a(c,s)),To=(n,s,a=f0)=>rr(n,s,a).getOr(n.isNone()&&s.isNone()),rr=(n,s,a)=>n.isSome()&&s.isSome()?I.some(a(n.getOrDie(),s.getOrDie())):I.none(),gn=(n,s)=>n?I.some(s):I.none(),Et=typeof window<"u"?window:Function("return this;")(),ah=(n,s)=>((n,s)=>{let a=s??Et;for(let c=0;c<n.length&&null!=a;++c)a=a[n[c]];return a})(n.split("."),s),me=Object.getPrototypeOf,pd=n=>{const s=ah("ownerDocument.defaultView",n);return ko(n)&&((n=>((n,s)=>{const a=((n,s)=>ah(n,s))(n,s);if(null==a)throw new Error(n+" not available on this browser");return a})("HTMLElement",n))(s).prototype.isPrototypeOf(n)||/^HTML\w*Element$/.test(me(n).constructor.name))},Ft=n=>n.dom.nodeName.toLowerCase(),Lt=n=>n.dom.nodeType,dn=n=>s=>Lt(s)===n,md=n=>Ar(n)&&pd(n.dom),Ar=dn(1),Nr=dn(3),b0=dn(9),Ym=dn(11),pr=n=>s=>Ar(s)&&Ft(s)===n,Qv=(n,s,a)=>{if(!(Ye(a)||ti(a)||ni(a)))throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(s,a+"")},Oo=(n,s,a)=>{Qv(n.dom,s,a)},qi=(n,s)=>{const a=n.dom;Ut(s,(c,u)=>{Qv(a,u,c)})},wo=(n,s)=>{const a=n.dom.getAttribute(s);return null===a?void 0:a},Ma=(n,s)=>I.from(wo(n,s)),ou=(n,s)=>{const a=n.dom;return!(!a||!a.hasAttribute)&&a.hasAttribute(s)},Co=(n,s)=>{n.dom.removeAttribute(s)},Jm=n=>$o(n.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Qm=(n,s)=>{const a=wo(n,s);return void 0===a||""===a?[]:a.split(" ")},jo=n=>void 0!==n.dom.classList,xt=n=>Qm(n,"class"),ey=(n,s)=>((n,s,a)=>{const u=Qm(n,s).concat([a]);return Oo(n,s,u.join(" ")),!0})(n,"class",s),ty=(n,s)=>((n,s,a)=>{const c=nt(Qm(n,s),u=>u!==a);return c.length>0?Oo(n,s,c.join(" ")):Co(n,s),!1})(n,"class",s),Gi=(n,s)=>{jo(n)?n.dom.classList.add(s):ey(n,s)},Ee=n=>{0===(jo(n)?n.dom.classList:xt(n)).length&&Co(n,"class")},uh=(n,s)=>{jo(n)?n.dom.classList.remove(s):ty(n,s),Ee(n)},Xc=(n,s)=>jo(n)&&n.dom.classList.contains(s),cc=n=>{if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},j_fromHtml=(n,s)=>{const c=(s||document).createElement("div");if(c.innerHTML=n,!c.hasChildNodes()||c.childNodes.length>1){const u="HTML does not have a single root node";throw console.error(u,n),new Error(u)}return cc(c.childNodes[0])},j_fromTag=(n,s)=>{const c=(s||document).createElement(n);return cc(c)},j_fromText=(n,s)=>{const c=(s||document).createTextNode(n);return cc(c)},j_fromDom=cc,j_fromPoint=(n,s,a)=>I.from(n.dom.elementFromPoint(s,a)).map(cc),dh=(n,s)=>{const a=[],c=f=>(a.push(f),s(f));let u=s(n);do{u=u.bind(c)}while(u.isSome());return a},li=(n,s)=>{const a=n.dom;if(1!==a.nodeType)return!1;{const c=a;if(void 0!==c.matches)return c.matches(s);if(void 0!==c.msMatchesSelector)return c.msMatchesSelector(s);if(void 0!==c.webkitMatchesSelector)return c.webkitMatchesSelector(s);if(void 0!==c.mozMatchesSelector)return c.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Yt=n=>1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount,mt=(n,s)=>n.dom===s.dom,Ki=(n,s)=>{const a=n.dom,c=s.dom;return a!==c&&a.contains(c)},x0=n=>j_fromDom(n.dom.ownerDocument),fn=n=>b0(n)?n:x0(n),el=n=>j_fromDom(fn(n).dom.defaultView),je=n=>I.from(n.dom.parentNode).map(j_fromDom),ru=n=>I.from(n.dom.parentElement).map(j_fromDom),fh=(n,s)=>{const a=Zt(s)?s:mn;let c=n.dom;const u=[];for(;null!=c.parentNode;){const f=c.parentNode,h=j_fromDom(f);if(u.push(h),!0===a(h))break;c=f}return u},Zi=n=>I.from(n.dom.previousSibling).map(j_fromDom),gd=n=>I.from(n.dom.nextSibling).map(j_fromDom),hh=n=>ka(dh(n,Zi)),P0=n=>dh(n,gd),sr=n=>Xe(n.dom.childNodes,j_fromDom),su=(n,s)=>I.from(n.dom.childNodes[s]).map(j_fromDom),og=n=>su(n,0),ry=n=>su(n,n.dom.childNodes.length-1),tl=n=>n.dom.childNodes.length,vd=n=>Ym(n)&&Oe(n.dom.host),sy=Zt(Element.prototype.attachShadow)&&Zt(Node.prototype.getRootNode),E0=Ae(sy),Ia=sy?n=>j_fromDom(n.dom.getRootNode()):fn,lc=n=>vd(n)?n:(n=>{const s=n.dom.head;if(null==s)throw new Error("Head is not available yet");return j_fromDom(s)})(fn(n)),k0=n=>j_fromDom(n.dom.host),ie=n=>{if(E0()&&Oe(n.target)){const s=j_fromDom(n.target);if(Ar(s)&&ay(s)&&n.composed&&n.composedPath){const a=n.composedPath();if(a)return go(a)}}return I.from(n.target)},ay=n=>Oe(n.dom.shadowRoot),Be=n=>{const s=Nr(n)?n.dom.parentNode:n.dom;if(null==s||null===s.ownerDocument)return!1;const a=s.ownerDocument;return(n=>{const s=Ia(n);return vd(s)?I.some(s):I.none()})(j_fromDom(s)).fold(()=>a.body.contains(s),Mm(Be,k0))};var yd=(n,s,a,c,u)=>n(a,c)?I.some(a):Zt(u)&&u(a)?I.none():s(a,c,u);const ui=(n,s,a)=>{let c=n.dom;const u=Zt(a)?a:mn;for(;c.parentNode;){c=c.parentNode;const f=j_fromDom(c);if(s(f))return I.some(f);if(u(f))break}return I.none()},di=(n,s,a)=>yd((u,f)=>f(u),ui,n,s,a),sg=(n,s)=>{const a=c=>{for(let u=0;u<c.childNodes.length;u++){const f=j_fromDom(c.childNodes[u]);if(s(f))return I.some(f);const h=a(c.childNodes[u]);if(h.isSome())return h}return I.none()};return a(n.dom)},ds=(n,s,a)=>ui(n,c=>li(c,s),a),ol=(n,s)=>((n,s)=>{const a=void 0===s?document:s.dom;return Yt(a)?I.none():I.from(a.querySelector(n)).map(j_fromDom)})(s,n),gr=(n,s,a)=>yd((u,f)=>li(u,f),ds,n,s,a),nn=(n,s=!1)=>Be(n)?n.dom.isContentEditable:(n=>gr(n,"[contenteditable]"))(n).fold(Ae(s),a=>"true"===ig(a)),ig=n=>n.dom.contentEditable,rl=n=>void 0!==n.style&&Zt(n.style.getPropertyValue),ag=(n,s,a)=>{if(!Ye(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",n),new Error("CSS value must be a string: "+a);rl(n)&&n.style.setProperty(s,a)},Rr=(n,s,a)=>{ag(n.dom,s,a)},dc=(n,s)=>{const a=n.dom;Ut(s,(c,u)=>{ag(a,u,c)})},yn=(n,s)=>{const a=n.dom,u=window.getComputedStyle(a).getPropertyValue(s);return""!==u||Be(n)?u:ly(a,s)},ly=(n,s)=>rl(n)?n.style.getPropertyValue(s):"",bd=(n,s)=>{const c=ly(n.dom,s);return I.from(c).filter(u=>u.length>0)},cg=n=>{const s={},a=n.dom;if(rl(a))for(let c=0;c<a.style.length;c++){const u=a.style.item(c);s[u]=a.style[u]}return s},uy=(n,s)=>{((n,s)=>{rl(n)&&n.style.removeProperty(s)})(n.dom,s),Ta(Ma(n,"style").map(tu),"")&&Co(n,"style")},Fr=(n,s)=>{je(n).each(c=>{c.dom.insertBefore(s.dom,n.dom)})},Ji=(n,s)=>{gd(n).fold(()=>{je(n).each(u=>{Yn(u,s)})},c=>{Fr(c,s)})},ph=(n,s)=>{og(n).fold(()=>{Yn(n,s)},c=>{n.dom.insertBefore(s.dom,c.dom)})},Yn=(n,s)=>{n.dom.appendChild(s.dom)},wd=(n,s)=>{Fr(n,s),Yn(s,n)},y=(n,s)=>{ue(s,a=>{Yn(n,a)})},C=n=>{n.dom.textContent="",ue(sr(n),s=>{M(s)})},M=n=>{const s=n.dom;null!==s.parentNode&&s.parentNode.removeChild(s)},G=n=>{const s=sr(n);s.length>0&&((n,s)=>{ue(s,(a,c)=>{Ji(0===c?n:s[c-1],a)})})(n,s),M(n)},ot=n=>Xe(n,j_fromDom),Jt=n=>n.dom.innerHTML,gt=(n,s)=>{const c=x0(n).dom,u=j_fromDom(c.createDocumentFragment()),f=((n,s)=>{const c=(s||document).createElement("div");return c.innerHTML=n,sr(j_fromDom(c))})(s,c);y(u,f),C(n),Yn(n,u)},Lr=(n,s,a,c)=>((n,s,a,c,u)=>{const f=((n,s)=>a=>{n(a)&&s((n=>{const s=j_fromDom(ie(n).getOr(n.target)),a=()=>n.stopPropagation(),c=()=>n.preventDefault(),u=As(c,a);return((n,s,a,c,u,f,h)=>({target:n,x:s,y:a,stop:c,prevent:u,kill:f,raw:h}))(s,n.clientX,n.clientY,a,c,u,n)})(a))})(a,c);return n.dom.addEventListener(s,f,false),{unbind:Ve(iu,n,s,f,false)}})(n,s,a,c),iu=(n,s,a,c)=>{n.dom.removeEventListener(s,a,c)},Br=(n,s)=>({left:n,top:s,translate:(c,u)=>Br(n+c,s+u)}),Cd=Br,Sd=(n,s)=>void 0!==n?n:void 0!==s?s:0,T0=n=>{const s=n.dom,c=s.ownerDocument.body;return c===s?Cd(c.offsetLeft,c.offsetTop):Be(n)?(n=>{const s=n.getBoundingClientRect();return Cd(s.left,s.top)})(s):Cd(0,0)},So=n=>{const s=void 0!==n?n.dom:document;return Cd(s.body.scrollLeft||s.documentElement.scrollLeft,s.body.scrollTop||s.documentElement.scrollTop)},ze=(n,s,a)=>{const u=(void 0!==a?a.dom:document).defaultView;u&&u.scrollTo(n,s)},Ct=(n,s)=>{Rs().browser.isSafari()&&Zt(n.dom.scrollIntoViewIfNeeded)?n.dom.scrollIntoViewIfNeeded(!1):n.dom.scrollIntoView(s)},Qi=(n,s,a,c)=>({x:n,y:s,width:a,height:c,right:n+a,bottom:s+c}),Vr=n=>{const s=void 0===n?window:n,c=So(j_fromDom(s.document));return(n=>{const s=void 0===n?window:n;return Rs().browser.isFirefox()?I.none():I.from(s.visualViewport)})(s).fold(()=>{const u=s.document.documentElement;return Qi(c.left,c.top,u.clientWidth,u.clientHeight)},u=>Qi(Math.max(u.pageLeft,c.left),Math.max(u.pageTop,c.top),u.width,u.height))},xd=(n,s)=>{let a=[];return ue(sr(n),c=>{s(c)&&(a=a.concat([c])),a=a.concat(xd(c,s))}),a},Wt=(n,s)=>((n,s)=>{const a=void 0===s?document:s.dom;return Yt(a)?[]:Xe(a.querySelectorAll(n),j_fromDom)})(s,n),Qr=(n,s,a)=>ui(n,s,a).isSome(),mh=(n,s)=>((n,s)=>{const a=n.dom;return a.parentNode?((n,s)=>vn(n.dom.childNodes,u=>s(j_fromDom(u))).map(j_fromDom))(j_fromDom(a.parentNode),c=>!mt(n,c)&&s(c)):I.none()})(n,s).isSome(),jt=(n,s)=>sg(n,s).isSome();class io{constructor(s,a){this.node=s,this.rootNode=a,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(s){return this.node=this.findSibling(this.node,"firstChild","nextSibling",s),this.node}prev(s){return this.node=this.findSibling(this.node,"lastChild","previousSibling",s),this.node}prev2(s){return this.node=this.findPreviousNode(this.node,s),this.node}findSibling(s,a,c,u){if(s){if(!u&&s[a])return s[a];if(s!==this.rootNode){let f=s[c];if(f)return f;for(let h=s.parentNode;h&&h!==this.rootNode;h=h.parentNode)if(f=h[c],f)return f}}}findPreviousNode(s,a){if(s){const c=s.previousSibling;if(this.rootNode&&c===this.rootNode)return;if(c){if(!a)for(let f=c.lastChild;f;f=f.lastChild)if(!f.lastChild)return f;return c}const u=s.parentNode;if(u&&u!==this.rootNode)return u}}}const Jn="\xa0",ao=n=>"\ufeff"===n,_h=/^[ \t\r\n]*$/,fs=n=>_h.test(n),sl=n=>"\n"===n||"\r"===n,au=(n,s=4,a=!0,c=!0)=>{const u=((n,s)=>s<=0?"":new Array(s+1).join(" "))(0,s),f=n.replace(/\t/g,u);return $o(f,(g,_)=>(n=>-1!==" \f\t\v".indexOf(n))(_)||_===Jn?g.pcIsSpace||""===g.str&&a||g.str.length===f.length-1&&c||((n,s)=>s<n.length&&s>=0&&sl(n[s]))(f,g.str.length+1)?{pcIsSpace:!1,str:g.str+Jn}:{pcIsSpace:!0,str:g.str+" "}:{pcIsSpace:sl(_),str:g.str+_},{pcIsSpace:!1,str:""}).str},Dt=n=>s=>!!s&&s.nodeType===n,vh=n=>!!n&&!Object.getPrototypeOf(n),$e=Dt(1),_r=n=>$e(n)&&md(j_fromDom(n)),hc=n=>{const s=n.toLowerCase();return a=>Oe(a)&&a.nodeName.toLowerCase()===s},xn=n=>{const s=n.map(a=>a.toLowerCase());return a=>{if(a&&a.nodeName){const c=a.nodeName.toLowerCase();return zt(s,c)}return!1}},il=(n,s)=>{const a=s.toLowerCase().split(" ");return c=>{if($e(c)){const u=c.ownerDocument.defaultView;if(u)for(let f=0;f<a.length;f++){const h=u.getComputedStyle(c,null);if((h?h.getPropertyValue(n):null)===a[f])return!0}}return!1}},Po=n=>$e(n)&&n.hasAttribute("data-mce-bogus"),Xr=n=>$e(n)&&"TABLE"===n.tagName,dg=n=>s=>!(!_r(s)||s.contentEditable!==n&&s.getAttribute("data-mce-contenteditable")!==n),hi=xn(["textarea","input"]),ye=Dt(3),a3=Dt(4),c3=Dt(7),pc=Dt(8),yh=Dt(9),I0=Dt(11),Nn=hc("br"),l3=hc("img"),Oa=dg("true"),Pn=dg("false"),O0=xn(["td","th"]),f7=xn(["td","th","caption"]),al=xn(["video","audio","object","embed"]),h7=hc("li"),ND=hc("details"),p7=hc("summary"),u3={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},FD=("data-mce-bookmark",s=>$e(s)&&s.hasAttribute("data-mce-bookmark")),y7=(n,s,a,c)=>ye(n)&&!((n,s,a)=>fs(n.data)&&!((n,s,a)=>{const c=j_fromDom(s),u=j_fromDom(n),f=a.getWhitespaceElements();return Qr(u,g=>Ke(f,Ft(g)),Ve(mt,c))})(n,s,a))(n,s,a)&&(!c.includeZwsp||!(n=>{for(const s of n)if(!ao(s))return!1;return!0})(n.data)),LD=(n,s,a,c)=>Zt(c.isContent)&&c.isContent(s)||((n,s)=>$e(n)&&Ke(s.getNonEmptyElements(),n.nodeName))(s,n)||FD(s)||(n=>$e(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(s)||y7(s,a,n,c)||Pn(s)||Oa(s)&&(n=>ru(j_fromDom(n)).exists(s=>!nn(s)))(s),hs=(n,s,a)=>{const c={...u3,...a};if(c.checkRootAsContent&&LD(n,s,s,c))return!1;let u=s.firstChild,f=0;if(!u)return!0;const h=new io(u,s);do{if(c.skipBogus&&$e(u)){const g=u.getAttribute("data-mce-bogus");if(g){u=h.next("all"===g);continue}}if(pc(u))u=h.next(!0);else if(Nn(u))f++,u=h.next();else{if(LD(n,u,s,c))return!1;u=h.next()}}while(u);return f<=1},vr=(n,s,a)=>hs(n,s.dom,{checkRootAsContent:!0,...a}),Ho=(n,s,a)=>LD(n,s,s,{includeZwsp:u3.includeZwsp,...a}),cu=n=>"svg"===n.toLowerCase(),A0=n=>cu(n.nodeName),BD=n=>"svg"===n?.nodeName?"svg":"html",VD=["svg"],hy="data-mce-block",R0=n=>Xe((n=>nt(zn(n),s=>!/[A-Z]/.test(s)))(n),s=>`${s}:`+Xe(VD,a=>`not(${a} ${s})`).join(":")).join(","),Aa=(n,s)=>Oe(s.querySelector(n))?(s.setAttribute(hy,"true"),"inline-boundary"===s.getAttribute("data-mce-selected")&&s.removeAttribute("data-mce-selected"),!0):(s.removeAttribute(hy),!1),F0=(n,s)=>{const a=R0(n.getTransparentElements()),c=R0(n.getBlockElements());return nt(s.querySelectorAll(a),u=>Aa(c,u))},L0=(n,s,a)=>{var c;const u=a?"lastChild":"firstChild";for(let f=s[u];f;f=f[u])if(hs(n,f,{checkRootAsContent:!0}))return void(null===(c=f.parentNode)||void 0===c||c.removeChild(f))},Ur=(n,s)=>{const a=F0(n,s);((n,s,a)=>{const c=n.getBlockElements(),u=j_fromDom(s),f=g=>Ft(g)in c,h=g=>mt(g,u);ue(ot(a),g=>{ui(g,f,h).each(_=>{const b=((n,s)=>nt(sr(n),s))(g,S=>f(S)&&!n.isValidChild(Ft(_),Ft(S)));if(b.length>0){const S=ru(_);ue(b,E=>{ui(E,f,h).each(T=>{((n,s,a)=>{const c=document.createRange(),u=s.parentNode;if(u){c.setStartBefore(s),c.setEndBefore(a);const f=c.extractContents();L0(n,f,!0),c.setStartAfter(a),c.setEndAfter(s);const h=c.extractContents();L0(n,h,!1),hs(n,f,{checkRootAsContent:!0})||u.insertBefore(f,s),hs(n,a,{checkRootAsContent:!0})||u.insertBefore(a,s),hs(n,h,{checkRootAsContent:!0})||u.insertBefore(h,s),u.removeChild(s)}})(n,T.dom,E.dom)})}),S.each(E=>F0(n,E.dom))}})})})(n,s,a),((n,s,a)=>{ue([...a,...cl(n,s)?[s]:[]],c=>ue(Wt(j_fromDom(c),c.nodeName.toLowerCase()),u=>{f3(n,u.dom)&&G(u)}))})(n,s,a)},d3=(n,s)=>{if(V0(n,s)){const a=R0(n.getBlockElements());Aa(a,s)}},lu=n=>n.hasAttribute(hy),ps=(n,s)=>Ke(n.getTransparentElements(),s),V0=(n,s)=>$e(s)&&ps(n,s.nodeName),cl=(n,s)=>V0(n,s)&&lu(s),f3=(n,s)=>V0(n,s)&&!lu(s),Xi=(n,s)=>1===s.type&&ps(n,s.name)&&Ye(s.attr(hy)),UD=Rs().browser,jD=n=>vn(n,Ar),$0=(n,s)=>n.children&&zt(n.children,s),pg=(n,s={})=>{let a=0;const c={},u=j_fromDom(n),f=fn(u),_=W=>{Yn(lc(u),W)},b=W=>{const Z=lc(u);ol(Z,"#"+W).each(M)},S=W=>Nt(c,W).getOrThunk(()=>({id:"mce-u"+a++,passed:[],failed:[],count:0})),E=W=>new Promise((Z,K)=>{let J;const he=de._addCacheSuffix(W),we=S(he);c[he]=we,we.count++;const ke=(Ie,qe)=>{ue(Ie,oi),we.status=qe,we.passed=[],we.failed=[],J&&(J.onload=null,J.onerror=null,J=null)},ge=()=>ke(we.passed,2),re=()=>ke(we.failed,3);if(Z&&we.passed.push(Z),K&&we.failed.push(K),1===we.status)return;if(2===we.status)return void ge();if(3===we.status)return void re();we.status=1;const ae=j_fromTag("link",f.dom);qi(ae,{rel:"stylesheet",type:"text/css",id:we.id}),s.contentCssCors&&Oo(ae,"crossOrigin","anonymous"),s.referrerPolicy&&Oo(ae,"referrerpolicy",s.referrerPolicy),J=ae.dom,J.onload=ge,J.onerror=re,_(ae),Oo(ae,"href",he)}),V=W=>{const Z=de._addCacheSuffix(W);Nt(c,Z).each(K=>{0==--K.count&&(delete c[Z],b(K.id))})};return{load:E,loadRawCss:(W,Z)=>{const K=S(W);c[W]=K,K.count++;const J=j_fromTag("style",f.dom);qi(J,{rel:"stylesheet",type:"text/css",id:K.id}),J.dom.innerHTML=Z,_(J)},loadAll:W=>Promise.allSettled(Xe(W,K=>E(K).then(Ae(K)))).then(K=>{const J=as(K,he=>"fulfilled"===he.status);return J.fail.length>0?Promise.reject(Xe(J.fail,he=>he.reason)):Xe(J.pass,he=>he.value)}),unload:V,unloadRawCss:W=>{Nt(c,W).each(Z=>{0==--Z.count&&(delete c[W],b(Z.id))})},unloadAll:W=>{ue(W,Z=>{V(Z)})},_setReferrerPolicy:W=>{s.referrerPolicy=W},_setContentCssCors:W=>{s.contentCssCors=W}}},Rt=(()=>{const n=new WeakMap;return{forElement:(a,c)=>{const f=Ia(a).dom;return I.from(n.get(f)).getOrThunk(()=>{const h=pg(f,c);return n.set(f,h),h})}}})(),h3=(n,s)=>Oe(n)&&(Ho(s,n)||s.isInline(n.nodeName.toLowerCase())),qD=n=>(n=>"span"===n.nodeName.toLowerCase())(n)&&"bookmark"===n.getAttribute("data-mce-type"),U0=(n,s,a,c)=>{var u;const f=c||s;if($e(s)&&qD(s))return s;const h=s.childNodes;for(let g=h.length-1;g>=0;g--)U0(n,h[g],a,f);if($e(s)){const g=s.childNodes;1===g.length&&qD(g[0])&&(null===(u=s.parentNode)||void 0===u||u.insertBefore(g[0],s))}return!(n=>I0(n)||yh(n))(s)&&!Ho(a,s)&&!(n=>!!$e(n)&&n.childNodes.length>0)(s)&&!((n,s,a)=>ye(n)&&n.data.length>0&&((n,s,a)=>{const c=new io(n,s).prev(!1),u=new io(n,s).next(!1),f=Vo(c)||h3(c,a),h=Vo(u)||h3(u,a);return f&&h})(n,s,a))(s,f,a)&&n.remove(s),s},g3=de.makeMap,my=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gy=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_3=/[<>&\"\']/g,Ce=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,hn={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},ce={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},fe={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},j0=(n,s)=>{const a={};if(n){const c=n.split(",");s=s||10;for(let u=0;u<c.length;u+=2){const f=String.fromCharCode(parseInt(c[u],s));if(!ce[f]){const h="&"+c[u+1]+";";a[f]=h,a[h]=f}}return a}},Pd=j0("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Na=(n,s)=>n.replace(s?my:gy,a=>ce[a]||a),_y=(n,s)=>n.replace(s?my:gy,a=>a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":ce[a]||"&#"+a.charCodeAt(0)+";"),z0=(n,s,a)=>{const c=a||Pd;return n.replace(s?my:gy,u=>ce[u]||c[u]||u)},Ao={encodeRaw:Na,encodeAllRaw:n=>(""+n).replace(_3,s=>ce[s]||s),encodeNumeric:_y,encodeNamed:z0,getEncodeFunc:(n,s)=>{const a=j0(s)||Pd,f=g3(n.replace(/\+/g,","));return f.named&&f.numeric?(h,g)=>h.replace(g?my:gy,_=>void 0!==ce[_]?ce[_]:void 0!==a[_]?a[_]:_.length>1?"&#"+(1024*(_.charCodeAt(0)-55296)+(_.charCodeAt(1)-56320)+65536)+";":"&#"+_.charCodeAt(0)+";"):f.named?s?(h,g)=>z0(h,g,a):z0:f.numeric?_y:Na},decode:n=>n.replace(Ce,(s,a)=>a?(a="x"===a.charAt(0).toLowerCase()?parseInt(a.substr(1),16):parseInt(a,10))>65535?(a-=65536,String.fromCharCode(55296+(a>>10),56320+(1023&a))):hn[a]||String.fromCharCode(a):fe[s]||Pd[s]||(n=>{const s=j_fromTag("div").dom;return s.innerHTML=n,s.textContent||s.innerText||n})(s))},Wn=(n,s)=>(n=de.trim(n))?n.split(s||" "):[],W0=n=>new RegExp("^"+n.replace(/([?+*])/g,".$1")+"$"),q0=n=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==n?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate"]:[],..."html5-strict"!==n?["xml:lang"]:[]]),KD=n=>{let s,a;s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",a="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==n&&(s+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",a+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==n&&(a=[a,"acronym applet basefont big font strike tt"].join(" "),s=[s,"center dir isindex noframes"].join(" "));const c=[s,a].join(" ");return{blockContent:s,phrasingContent:a,flowContent:c}},G0=n=>{const{blockContent:s,phrasingContent:a,flowContent:c}=KD(n),u=f=>Object.freeze(f.split(" "));return Object.freeze({blockContent:u(s),phrasingContent:u(a),flowContent:u(c)})},K0={html4:$i(()=>G0("html4")),html5:$i(()=>G0("html5")),"html5-strict":$i(()=>G0("html5-strict"))},vy=(n,s)=>{const{blockContent:a,phrasingContent:c,flowContent:u}=K0[n]();return"blocks"===s?I.some(a):"phrasing"===s?I.some(c):"flow"===s?I.some(u):I.none()},Y0=n=>I.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(n)).map(a=>({preset:"@"===a[1],name:a[2]})),mg={},wh=de.makeMap,pi=de.each,XD=de.extend,jr=de.explode,uu=(n,s={})=>{const a=wh(n," ",wh(n.toUpperCase()," "));return XD(a,s)},Xn=n=>uu("td th li dt dd figcaption caption details summary",n.getTextBlockElements()),Q0=(n,s)=>{if(n){const a={};return Ye(n)&&(n={"*":n}),pi(n,(c,u)=>{a[u]=a[u.toUpperCase()]="map"===s?wh(c,/[, ]/):jr(c,/[, ]/)}),a}},du=(n={})=>{var s;const a={},c={};let u=[];const f={},h={},g=(Ge,kt,wn)=>{const cn=n[Ge];if(cn)return wh(cn,/[, ]/,wh(cn.toUpperCase(),/[, ]/));{let no=mg[Ge];return no||(no=uu(kt,wn),mg[Ge]=no),no}},_=null!==(s=n.schema)&&void 0!==s?s:"html5",b=(n=>{const s=q0(n),{phrasingContent:a,flowContent:c}=KD(n),u={},f=(_,b,S)=>{u[_]={attributes:Jl(b,Ae({})),attributesOrder:b,children:Jl(S,Ae({}))}},h=(_,b="",S="")=>{const E=Wn(S),T=Wn(_);let N=T.length;const V=[...s,...Wn(b)];for(;N--;)f(T[N],V.slice(),E)},g=(_,b)=>{const S=Wn(_),E=Wn(b);let T=S.length;for(;T--;){const N=u[S[T]];for(let V=0,F=E.length;V<F;V++)N.attributes[E[V]]={},N.attributesOrder.push(E[V])}};return"html5-strict"!==n&&(ue(Wn("acronym applet basefont big font strike tt"),S=>{h(S,"",a)}),ue(Wn("center dir isindex noframes"),S=>{h(S,"",c)})),h("html","manifest","head body"),h("head","","base command link meta noscript script style title"),h("title hr noscript br"),h("base","href target"),h("link","href rel media hreflang type sizes hreflang"),h("meta","name http-equiv content charset"),h("style","media type scoped"),h("script","src async defer type charset"),h("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",c),h("dd div","",c),h("address dt caption","","html4"===n?a:c),h("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",a),h("blockquote","cite",c),h("ol","reversed start type","li"),h("ul","","li"),h("li","value",c),h("dl","","dt dd"),h("a","href target rel media hreflang type","html4"===n?a:c),h("q","cite",a),h("ins del","cite datetime",c),h("img","src sizes srcset alt usemap ismap width height"),h("iframe","src name width height",c),h("embed","src type width height"),h("object","data type typemustmatch name usemap form width height",[c,"param"].join(" ")),h("param","name value"),h("map","name",[c,"area"].join(" ")),h("area","alt coords shape href target rel media hreflang type"),h("table","border","caption colgroup thead tfoot tbody tr"+("html4"===n?" col":"")),h("colgroup","span","col"),h("col","span"),h("tbody thead tfoot","","tr"),h("tr","","td th"),h("td","colspan rowspan headers",c),h("th","colspan rowspan headers scope abbr",c),h("form","accept-charset action autocomplete enctype method name novalidate target",c),h("fieldset","disabled form name",[c,"legend"].join(" ")),h("label","form for",a),h("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),h("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===n?c:a),h("select","disabled form multiple name required size","option optgroup"),h("optgroup","disabled label","option"),h("option","disabled label selected value"),h("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),h("menu","type label",[c,"li"].join(" ")),h("noscript","",c),"html4"!==n&&(h("wbr"),h("ruby","",[a,"rt rp"].join(" ")),h("figcaption","",c),h("mark rt rp bdi","",a),h("summary","",[a,"h1 h2 h3 h4 h5 h6"].join(" ")),h("canvas","width height",c),h("data","value",a),h("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[c,"track source"].join(" ")),h("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[c,"track source"].join(" ")),h("picture","","img source"),h("source","src srcset type media sizes"),h("track","kind src srclang label default"),h("datalist","",[a,"option"].join(" ")),h("article section nav aside main header footer","",c),h("hgroup","","h1 h2 h3 h4 h5 h6"),h("figure","",[c,"figcaption"].join(" ")),h("time","datetime",a),h("dialog","open",c),h("command","type label icon disabled checked radiogroup command"),h("output","for form name",a),h("progress","value max",a),h("meter","value min max low high optimum",a),h("details","open",[c,"summary"].join(" ")),h("keygen","autofocus challenge disabled form keytype name"),f("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==n&&(g("script","language xml:space"),g("style","xml:space"),g("object","declare classid code codebase codetype archive standby align border hspace vspace"),g("embed","align name hspace vspace"),g("param","valuetype type"),g("a","charset name rev shape coords"),g("br","clear"),g("applet","codebase archive code object alt name width height align hspace vspace"),g("img","name longdesc align border hspace vspace"),g("iframe","longdesc frameborder marginwidth marginheight scrolling align"),g("font basefont","size color face"),g("input","usemap align"),g("select"),g("textarea"),g("h1 h2 h3 h4 h5 h6 div p legend caption","align"),g("ul","type compact"),g("li","type"),g("ol dl menu dir","compact"),g("pre","width xml:space"),g("hr","align noshade size width"),g("isindex","prompt"),g("table","summary width frame rules cellspacing cellpadding align bgcolor"),g("col","width align char charoff valign"),g("colgroup","width align char charoff valign"),g("thead","align char charoff valign"),g("tr","align char charoff valign bgcolor"),g("th","axis align char charoff valign nowrap bgcolor width height"),g("form","accept"),g("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),g("tfoot","align char charoff valign"),g("tbody","align char charoff valign"),g("area","nohref"),g("body","background bgcolor text link vlink alink")),"html4"!==n&&(g("input button select textarea","autofocus"),g("input textarea","placeholder"),g("a","download"),g("link script img","crossorigin"),g("img","loading"),g("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==n&&ue([u.video,u.audio],_=>{delete _.children.audio,delete _.children.video}),ue(Wn("a form meter progress dfn"),_=>{u[_]&&delete u[_].children[_]}),delete u.caption.children.table,delete u.script,u})(_);!1===n.verify_html&&(n.valid_elements="*[*]");const S=Q0(n.valid_styles),E=Q0(n.invalid_styles,"map"),T=Q0(n.valid_classes,"map"),N=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),V=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),F=g("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),U=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),W="td th iframe video audio object script code",Z=g("non_empty_elements",W+" pre svg textarea summary",F),K=g("move_caret_before_on_enter_elements",W+" table",F),J="h1 h2 h3 h4 h5 h6",he=g("text_block_elements",J+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),we=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",he),ke=g("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),ge=g("transparent_elements","a ins del canvas map"),re=g("wrap_block_elements","pre "+J);pi("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Ge=>{h[Ge]=new RegExp("</"+Ge+"[^>]*>","gi")});const ae=Ge=>{const kt=I.from(a["@"]),wn=/[*?+]/;ue(((n,s)=>{const a=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Uo(Wn(s,","),c=>{const u=a.exec(c);if(u){const f=u[1],h=u[2],g=u[3],_=u[4],b=u[5],S={attributes:{},attributesOrder:[]};if(n.each(E=>((n,s)=>{Ut(n.attributes,(a,c)=>{s.attributes[c]=a}),s.attributesOrder.push(...n.attributesOrder)})(E,S)),"#"===f?S.paddEmpty=!0:"-"===f&&(S.removeEmpty=!0),"!"===_&&(S.removeEmptyAttrs=!0),b&&((n,s)=>{const a=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,c=/[*?+]/,{attributes:u,attributesOrder:f}=s;ue(Wn(n,"|"),h=>{const g=a.exec(h);if(g){const _={},b=g[1],S=g[2].replace(/[\\:]:/g,":"),E=g[3],T=g[4];if("!"===b&&(s.attributesRequired=s.attributesRequired||[],s.attributesRequired.push(S),_.required=!0),"-"===b)return delete u[S],void f.splice(de.inArray(f,S),1);if(E&&("="===E?(s.attributesDefault=s.attributesDefault||[],s.attributesDefault.push({name:S,value:T}),_.defaultValue=T):"~"===E?(s.attributesForced=s.attributesForced||[],s.attributesForced.push({name:S,value:T}),_.forcedValue=T):"<"===E&&(_.validValues=de.makeMap(T,"?"))),c.test(S)){const N=_;s.attributePatterns=s.attributePatterns||[],N.pattern=W0(S),s.attributePatterns.push(N)}else u[S]||f.push(S),u[S]=_}})})(b,S),g&&(S.outputName=h),"@"===h){if(!n.isNone())return[];n=I.some(S)}return[g?{name:h,element:S,aliasName:g}:{name:h,element:S}]}return[]})})(kt,Ge??""),({name:cn,element:no,aliasName:Bo})=>{if(Bo&&(a[Bo]=no),wn.test(cn)){const Gn=no;Gn.pattern=W0(cn),u.push(Gn)}else a[cn]=no})},Ie=Ge=>{u=[],ue(zn(a),kt=>{delete a[kt]}),ae(Ge)},qe=(Ge,kt)=>{var wn,cn;delete mg.text_block_elements,delete mg.block_elements;const no=!!kt.extends&&!Ts(kt.extends),Bo=kt.extends;if(c[Ge]=Bo?c[Bo]:{},f[Ge]=Bo??Ge,Z[Ge.toUpperCase()]={},Z[Ge]={},no||(we[Ge.toUpperCase()]={},we[Ge]={}),Bo&&!a[Ge]&&a[Bo]){const Gn=(n=>{const s=a=>Sn(a)?Xe(a,s):(n=>ko(n)&&n.source&&"[object RegExp]"===Object.prototype.toString.call(n))(a)?new RegExp(a.source,a.flags):ko(a)?Da(a,s):a;return s(n)})(a[Bo]);delete Gn.removeEmptyAttrs,delete Gn.removeEmpty,a[Ge]=Gn}else a[Ge]={attributesOrder:[],attributes:{}};if(Sn(kt.attributes)){const Gn=Dr=>{Kn.attributesOrder.push(Dr),Kn.attributes[Dr]={}},Kn=null!==(wn=a[Ge])&&void 0!==wn?wn:{};delete Kn.attributesDefault,delete Kn.attributesForced,delete Kn.attributePatterns,delete Kn.attributesRequired,Kn.attributesOrder=[],Kn.attributes={},ue(kt.attributes,Dr=>{const ya=q0(_);Y0(Dr).each(({preset:Os,name:ba})=>{Os?"global"===ba&&ue(ya,Gn):Gn(ba)})}),a[Ge]=Kn}if(ti(kt.padEmpty)){const Gn=null!==(cn=a[Ge])&&void 0!==cn?cn:{};Gn.paddEmpty=kt.padEmpty,a[Ge]=Gn}if(Sn(kt.children)){const Gn={},Kn=ya=>{Gn[ya]={}},Dr=ya=>{vy(_,ya).each(Os=>{ue(Os,Kn)})};ue(kt.children,ya=>{Y0(ya).each(({preset:Os,name:ba})=>{Os?Dr(ba):Kn(ba)})}),c[Ge]=Gn}Bo&&Ut(c,(Gn,Kn)=>{Gn[Bo]&&(c[Kn]=Gn=XD({},c[Kn]),Gn[Ge]=Gn[Bo])})},bt=Ge=>{ko(Ge)?Ut(Ge,(kt,wn)=>qe(wn,kt)):Ye(Ge)&&(Ge=>{ue((n=>{const s=/^(~)?(.+)$/;return Uo(Wn(n,","),a=>{const c=s.exec(a);return c?[{cloneName:"~"===c[1]?"span":"div",name:c[2]}]:[]})})(Ge??""),({name:kt,cloneName:wn})=>{qe(kt,{extends:wn})})})(Ge)},Kt=Ge=>{ue((n=>{const s=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Uo(Wn(n,","),a=>{const c=s.exec(a);if(c){const u=c[1],f=u?(n=>"-"===n?"remove":"add")(u):"replace";return[{operation:f,name:c[2],validChildren:Uo(Wn(c[3],"|"),_=>Y0(_).toArray())}]}return[]})})(Ge??""),({operation:kt,name:wn,validChildren:cn})=>{const no="replace"===kt?{"#comment":{}}:c[wn],Bo=Kn=>{"remove"===kt?delete no[Kn]:no[Kn]={}};ue(cn,({preset:Kn,name:Dr})=>{Kn?(Kn=>{vy(_,Kn).each(Dr=>{ue(Dr,Bo)})})(Dr):Bo(Dr)}),c[wn]=no})},en=Ge=>{const kt=a[Ge];if(kt)return kt;let wn=u.length;for(;wn--;){const cn=u[wn];if(cn.pattern.test(Ge))return cn}},Ko=Ae(S),on=Ae(E),xe=Ae(T),He=Ae(U),Bt=Ae(we),Me=Ae(he),Ze=Ae(ke),pt=Ae(Object.seal(F)),De=Ae(V),dt=Ae(Z),_t=Ae(K),uo=Ae(N),Gt=Ae(ge),fo=Ae(re),Oi=Ae(Object.seal(h)),kr=(Ge,kt)=>{const wn=en(Ge);if(wn){if(!kt)return!0;{if(wn.attributes[kt])return!0;const cn=wn.attributePatterns;if(cn){let no=cn.length;for(;no--;)if(cn[no].pattern.test(kt))return!0}}}return!1},Ts=Ge=>Ke(Bt(),Ge),Ai=Ge=>!vo(Ge,"#")&&kr(Ge)&&!Ts(Ge),Is=Ae(f);return n.valid_elements?(Ie(n.valid_elements),pi(b,(Ge,kt)=>{c[kt]=Ge.children})):(pi(b,(Ge,kt)=>{a[kt]={attributes:Ge.attributes,attributesOrder:Ge.attributesOrder},c[kt]=Ge.children}),pi(Wn("strong/b em/i"),Ge=>{const kt=Wn(Ge,"/");a[kt[1]].outputName=kt[0]}),pi(ke,(Ge,kt)=>{a[kt]&&(n.padd_empty_block_inline_children&&(a[kt].paddInEmptyBlock=!0),a[kt].removeEmpty=!0)}),pi(Wn("ol ul blockquote a table tbody"),Ge=>{a[Ge]&&(a[Ge].removeEmpty=!0)}),pi(Wn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Ge=>{a[Ge]&&(a[Ge].paddEmpty=!0)}),pi(Wn("span"),Ge=>{a[Ge].removeEmptyAttrs=!0})),delete a.svg,bt(n.custom_elements),Kt(n.valid_children),ae(n.extended_valid_elements),Kt("+ol[ul|ol],+ul[ul|ol]"),pi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Ge,kt)=>{a[kt]&&(a[kt].parentsRequired=Wn(Ge))}),n.invalid_elements&&pi(jr(n.invalid_elements),Ge=>{a[Ge]&&delete a[Ge]}),en("span")||ae("span[!data-mce-type|*]"),{type:_,children:c,elements:a,getValidStyles:Ko,getValidClasses:xe,getBlockElements:Bt,getInvalidStyles:on,getVoidElements:pt,getTextBlockElements:Me,getTextInlineElements:Ze,getBoolAttrs:He,getElementRule:en,getSelfClosingElements:De,getNonEmptyElements:dt,getMoveCaretBeforeOnEnterElements:_t,getWhitespaceElements:uo,getTransparentElements:Gt,getSpecialElements:Oi,isValidChild:(Ge,kt)=>{const wn=c[Ge.toLowerCase()];return!(!wn||!wn[kt.toLowerCase()])},isValid:kr,isBlock:Ts,isInline:Ai,isWrapper:Ge=>Ke(fo(),Ge)||Ai(Ge),getCustomElements:Is,addValidElements:ae,setValidElements:Ie,addCustomElements:bt,addValidChildren:Kt}},w3=n=>Lv(n,"#").toUpperCase(),yy=n=>{const s=n.toString(16);return(1===s.length?"0"+s:s).toUpperCase()},eT=n=>(n=>({value:w3(n)}))(yy(n.red)+yy(n.green)+yy(n.blue)),by=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,fu=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,tT=(n,s,a,c)=>({red:n,green:s,blue:a,alpha:c}),gg=(n,s,a,c)=>{const u=parseInt(n,10),f=parseInt(s,10),h=parseInt(a,10),g=parseFloat(c);return tT(u,f,h,g)},_g=n=>{if("transparent"===n)return I.some(tT(0,0,0,0));const s=by.exec(n);if(null!==s)return I.some(gg(s[1],s[2],s[3],"1"));const a=fu.exec(n);return null!==a?I.some(gg(a[1],a[2],a[3],a[4])):I.none()},wy=n=>`rgba(${n.red},${n.green},${n.blue},${n.alpha})`,Ed=n=>_g(n).map(eT).map(s=>"#"+s.value).getOr(n),Cy=(n={},s)=>{const a=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,f=/rgba *\(/i,h={};let g,_;s&&(g=s.getValidStyles(),_=s.getInvalidStyles());const S="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let T=0;T<S.length;T++)h[S[T]]="\ufeff"+T,h["\ufeff"+T]=S[T];const E={parse:T=>{const N={};let V=!1;const F=n.url_converter,U=n.url_converter_scope||E,W=(re,ae,Ie)=>{const qe=N[re+"-top"+ae];if(!qe)return;const it=N[re+"-right"+ae];if(!it)return;const bt=N[re+"-bottom"+ae];if(!bt)return;const Kt=N[re+"-left"+ae];if(!Kt)return;const en=[qe,it,bt,Kt];let ln=en.length-1;for(;ln--&&en[ln]===en[ln+1];);ln>-1&&Ie||(N[re+ae]=-1===ln?en[0]:en.join(" "),delete N[re+"-top"+ae],delete N[re+"-right"+ae],delete N[re+"-bottom"+ae],delete N[re+"-left"+ae])},Z=re=>{const ae=N[re];if(!ae)return;const Ie=ae.indexOf(",")>-1?[ae]:ae.split(" ");let qe=Ie.length;for(;qe--;)if(Ie[qe]!==Ie[0])return!1;return N[re]=Ie[0],!0},J=re=>(V=!0,h[re]),he=(re,ae)=>(V&&(re=re.replace(/\uFEFF[0-9]/g,Ie=>h[Ie])),ae||(re=re.replace(/\\([\'\";:])/g,"$1")),re),we=re=>String.fromCharCode(parseInt(re.slice(1),16)),ke=re=>re.replace(/\\[0-9a-f]+/gi,we),ge=(re,ae,Ie,qe,it,bt)=>{if(it=it||bt)return"'"+(it=he(it)).replace(/\'/g,"\\'")+"'";if(ae=he(ae||Ie||qe||""),!n.allow_script_urls){const Kt=ae.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Kt)||!n.allow_svg_data_urls&&/^data:image\/svg/i.test(Kt))return""}return F&&(ae=F.call(U,ae,"style")),"url('"+ae.replace(/\'/g,"\\'")+"')"};if(T){let re;for(T=(T=T.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,J).replace(/\"[^\"]+\"|\'[^\']+\'/g,ae=>ae.replace(/[;:]/g,J));re=c.exec(T);){c.lastIndex=re.index+re[0].length;let ae=re[1].replace(u,"").toLowerCase(),Ie=re[2].replace(u,"");if(ae&&Ie){if(ae=ke(ae),Ie=ke(Ie),-1!==ae.indexOf("\ufeff")||-1!==ae.indexOf('"')||!n.allow_script_urls&&("behavior"===ae||/expression\s*\(|\/\*|\*\//.test(Ie)))continue;"font-weight"===ae&&"700"===Ie?Ie="bold":("color"===ae||"background-color"===ae)&&(Ie=Ie.toLowerCase()),f.test(Ie)||_g(Ie).each(qe=>{Ie=Ed(wy(qe)).toLowerCase()}),Ie=Ie.replace(a,ge),N[ae]=V?he(Ie,!0):Ie}}W("border","",!0),W("border","-width"),W("border","-color"),W("border","-style"),W("padding",""),W("margin",""),Ie="border-style",qe="border-color",Z(ae="border-width")&&Z(Ie)&&Z(qe)&&(N.border=N[ae]+" "+N[Ie]+" "+N[qe],delete N[ae],delete N[Ie],delete N[qe]),"medium none"===N.border&&delete N.border,"none"===N["border-image"]&&delete N["border-image"]}var ae,Ie,qe;return N},serialize:(T,N)=>{let V="";const F=(W,Z)=>{const K=Z[W];if(K)for(let J=0,he=K.length;J<he;J++){const we=K[J],ke=T[we];ke&&(V+=(V.length>0?" ":"")+we+": "+ke+";")}};return N&&g?(F("*",g),F(N,g)):Ut(T,(W,Z)=>{W&&((W,Z)=>{if(!_||!Z)return!0;let K=_["*"];return!(K&&K[W]||(K=_[Z],K&&K[W]))})(Z,N)&&(V+=(V.length>0?" ":"")+Z+": "+W+";")}),V}};return E},nT={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},oT=(n,s)=>{const a=s??{};for(const c in n)Ke(nT,c)||(a[c]=n[c]);return Oe(n.composedPath)&&(a.composedPath=()=>n.composedPath()),Oe(n.getModifierState)&&(a.getModifierState=c=>n.getModifierState(c)),Oe(n.getTargetRanges)&&(a.getTargetRanges=()=>n.getTargetRanges()),a},yg=(n,s,a,c)=>{var u;const f=oT(s,c);return f.type=n,mo(f.target)&&(f.target=null!==(u=f.srcElement)&&void 0!==u?u:a),(n=>mo(n.preventDefault)||(n=>n instanceof Event||Zt(n.initEvent))(n))(s)&&(f.preventDefault=()=>{f.defaultPrevented=!0,f.isDefaultPrevented=ro,Zt(s.preventDefault)&&s.preventDefault()},f.stopPropagation=()=>{f.cancelBubble=!0,f.isPropagationStopped=ro,Zt(s.stopPropagation)&&s.stopPropagation()},f.stopImmediatePropagation=()=>{f.isImmediatePropagationStopped=ro,f.stopPropagation()},(n=>n.isDefaultPrevented===ro||n.isDefaultPrevented===mn)(f)||(f.isDefaultPrevented=!0===f.defaultPrevented?ro:mn,f.isPropagationStopped=!0===f.cancelBubble?ro:mn,f.isImmediatePropagationStopped=mn)),f},x3=/^(?:mouse|contextmenu)|click/,X0=(n,s,a,c)=>{n.addEventListener(s,a,c||!1)},eS=(n,s,a,c)=>{n.removeEventListener(s,a,c||!1)},kd=(n,s)=>{const a=yg(n.type,n,document,s);if((n=>Oe(n)&&x3.test(n.type))(n)&&Vo(n.pageX)&&!Vo(n.clientX)){const c=a.target.ownerDocument||document,u=c.documentElement,f=c.body,h=a;h.pageX=n.clientX+(u&&u.scrollLeft||f&&f.scrollLeft||0)-(u&&u.clientLeft||f&&f.clientLeft||0),h.pageY=n.clientY+(u&&u.scrollTop||f&&f.scrollTop||0)-(u&&u.clientTop||f&&f.clientTop||0)}return a},bg=(n,s,a)=>{const c=n.document,u={type:"ready"};if(a.domLoaded)return void s(u);const h=()=>{eS(n,"DOMContentLoaded",h),eS(n,"load",h),a.domLoaded||(a.domLoaded=!0,s(u)),n=null};"complete"===c.readyState||"interactive"===c.readyState&&c.body?h():X0(n,"DOMContentLoaded",h),a.domLoaded||X0(n,"load",h)};class Dd{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(s,a,c,u){const f=this;let h;const g=window,_=T=>{f.executeHandlers(kd(T||g.event),b)};if(!s||ye(s)||pc(s))return c;let b;s[f.expando]?b=s[f.expando]:(b=f.count++,s[f.expando]=b,f.events[b]={}),u=u||s;const S=a.split(" ");let E=S.length;for(;E--;){let T=S[E],N=_,V=!1,F=!1;"DOMContentLoaded"===T&&(T="ready"),f.domLoaded&&"ready"===T&&"complete"===s.readyState?c.call(u,kd({type:T})):(!f.hasFocusIn&&("focusin"===T||"focusout"===T)&&(V=!0,F="focusin"===T?"focus":"blur",N=U=>{const W=kd(U||g.event);W.type="focus"===W.type?"focusin":"focusout",f.executeHandlers(W,b)}),h=f.events[b][T],h?"ready"===T&&f.domLoaded?c(kd({type:T})):h.push({func:c,scope:u}):(f.events[b][T]=h=[{func:c,scope:u}],h.fakeName=F,h.capture=V,h.nativeHandler=N,"ready"===T?bg(s,N,f):X0(s,F||T,N,V)))}return s=h=null,c}unbind(s,a,c){if(!s||ye(s)||pc(s))return this;const u=s[this.expando];if(u){let f=this.events[u];if(a){const h=a.split(" ");let g=h.length;for(;g--;){const _=h[g],b=f[_];if(b){if(c){let S=b.length;for(;S--;)if(b[S].func===c){const E=b.nativeHandler,T=b.fakeName,N=b.capture,V=b.slice(0,S).concat(b.slice(S+1));V.nativeHandler=E,V.fakeName=T,V.capture=N,f[_]=V}}(!c||0===b.length)&&(delete f[_],eS(s,b.fakeName||_,b.nativeHandler,b.capture))}}}else Ut(f,(h,g)=>{eS(s,h.fakeName||g,h.nativeHandler,h.capture)}),f={};for(const h in f)if(Ke(f,h))return this;delete this.events[u];try{delete s[this.expando]}catch{s[this.expando]=null}}return this}fire(s,a,c){return this.dispatch(s,a,c)}dispatch(s,a,c){if(!s||ye(s)||pc(s))return this;const u=kd({type:a,target:s},c);do{const f=s[this.expando];f&&this.executeHandlers(u,f),s=s.parentNode||s.ownerDocument||s.defaultView||s.parentWindow}while(s&&!u.isPropagationStopped());return this}clean(s){if(!s||ye(s)||pc(s))return this;if(s[this.expando]&&this.unbind(s),s.getElementsByTagName||(s=s.document),s&&s.getElementsByTagName){this.unbind(s);const a=s.getElementsByTagName("*");let c=a.length;for(;c--;)(s=a[c])[this.expando]&&this.unbind(s)}return this}destroy(){this.events={}}cancel(s){return s&&(s.preventDefault(),s.stopImmediatePropagation()),!1}executeHandlers(s,a){const c=this.events[a],u=c&&c[s.type];if(u)for(let f=0,h=u.length;f<h;f++){const g=u[f];if(g&&!1===g.func.call(g.scope,s)&&s.preventDefault(),s.isImmediatePropagationStopped())return}}}Dd.Event=new Dd;const Td=de.each,tS=de.grep,Sh="data-mce-style",w7=de.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),xh=(n,s,a)=>{mo(a)||""===a?Co(n,s):Oo(n,s,a)},nS=n=>n.replace(/[A-Z]/g,s=>"-"+s.toLowerCase()),Ph=(n,s)=>{let a=0;if(n)for(let c=n.nodeType,u=n.previousSibling;u;u=u.previousSibling){const f=u.nodeType;s&&ye(u)&&(f===c||!u.data.length)||(a++,c=f)}return a},Ra=(n,s)=>{const a=wo(s,"style"),c=n.serialize(n.parse(a),Ft(s));xh(s,Sh,c)},wg=(n,s,a)=>{const c=nS(s);mo(a)||""===a?uy(n,c):Rr(n,c,((n,s)=>ni(n)?Ke(w7,s)?n+"":n+"px":n)(a,c))},pn=(n,s={})=>{const a={},c=window,u={};let f=0;const _=Rt.forElement(j_fromDom(n),{contentCssCors:s.contentCssCors,referrerPolicy:s.referrerPolicy}),b=[],S=s.schema?s.schema:du({}),E=Cy({url_converter:s.url_converter,url_converter_scope:s.url_converter_scope},s.schema),T=s.ownEvents?new Dd:Dd.Event,N=S.getBlockElements(),F=X=>X&&n&&Ye(X)?n.getElementById(X):X,U=X=>{const ee=F(X);return Oe(ee)?j_fromDom(ee):null},W=(X,ee,Se="")=>{let be;const Je=U(X);if(Oe(Je)&&Ar(Je)){const St=Ev[ee];be=St&&St.get?St.get(Je.dom,ee):wo(Je,ee)}return Oe(be)?be:Se},Z=X=>{const ee=F(X);return mo(ee)?[]:ee.attributes},K=(X,ee,Se)=>{He(X,be=>{if($e(be)){const Je=j_fromDom(be),St=""===Se?null:Se,Cn=wo(Je,ee),wa=Ev[ee];wa&&wa.set?wa.set(Je.dom,St,ee):xh(Je,ee,St),Cn!==St&&s.onSetAttrib&&s.onSetAttrib({attrElm:Je.dom,attrName:ee,attrValue:St})}})},he=()=>s.root_element||n.body,ke=(X,ee)=>((n,s,a)=>{let c=0,u=0;const f=n.ownerDocument;if(a=a||n,s){if(a===n&&s.getBoundingClientRect&&"static"===yn(j_fromDom(n),"position")){const g=s.getBoundingClientRect();return c=g.left+(f.documentElement.scrollLeft||n.scrollLeft)-f.documentElement.clientLeft,u=g.top+(f.documentElement.scrollTop||n.scrollTop)-f.documentElement.clientTop,{x:c,y:u}}let h=s;for(;h&&h!==a&&h.nodeType&&!$0(h,a);)c+=h.offsetLeft||0,u+=h.offsetTop||0,h=h.offsetParent;for(h=s.parentNode;h&&h!==a&&h.nodeType&&!$0(h,a);)c-=h.scrollLeft||0,u-=h.scrollTop||0,h=h.parentNode;u+=(n=>UD.isFirefox()&&"table"===Ft(n)?jD(sr(n)).filter(s=>"caption"===Ft(s)).bind(s=>jD(P0(s)).map(a=>a.dom.offsetTop<=s.dom.offsetTop?-s.dom.offsetHeight:0)).getOr(0):0)(j_fromDom(s))}return{x:c,y:u}})(n.body,F(X),ee),ae=(X,ee,Se)=>{const be=F(X);if(!mo(be)&&(_r(be)||(n=>$e(n)&&"http://www.w3.org/2000/svg"===n.namespaceURI)(be)))return Se?yn(j_fromDom(be),nS(ee)):("float"===(ee=ee.replace(/-(\D)/g,(Je,St)=>St.toUpperCase()))&&(ee="cssFloat"),be.style?be.style[ee]:void 0)},Ie=X=>{const ee=F(X);if(!ee)return{w:0,h:0};let Se=ae(ee,"width"),be=ae(ee,"height");return(!Se||-1===Se.indexOf("px"))&&(Se="0"),(!be||-1===be.indexOf("px"))&&(be="0"),{w:parseInt(Se,10)||ee.offsetWidth||ee.clientWidth,h:parseInt(be,10)||ee.offsetHeight||ee.clientHeight}},it=(X,ee)=>{if(!X)return!1;const Se=Sn(X)?X:[X];return Pt(Se,be=>li(j_fromDom(be),ee))},bt=(X,ee,Se,be)=>{const Je=[];let St=F(X);be=void 0===be;const Cn=Se||("BODY"!==he().nodeName?he().parentNode:null);if(Ye(ee))if("*"===ee)ee=$e;else{const wa=ee;ee=a0=>it(a0,wa)}for(;St&&!(St===Cn||mo(St.nodeType)||yh(St)||I0(St));){if(!ee||ee(St)){if(!be)return[St];Je.push(St)}St=St.parentNode}return be?Je:null},en=(X,ee,Se)=>{let be=ee;if(X){Ye(ee)&&(be=Je=>it(Je,ee));for(let Je=X[Se];Je;Je=Je[Se])if(Zt(be)&&be(Je))return Je}return null},He=function(X,ee,Se){const be=Se??this;if(Sn(X)){const Je=[];return Td(X,(St,Cn)=>{const wa=F(St);wa&&Je.push(ee.call(be,wa,Cn))}),Je}{const Je=F(X);return!!Je&&ee.call(be,Je)}},Bt=(X,ee)=>{He(X,Se=>{Ut(ee,(be,Je)=>{K(Se,Je,be)})})},Me=(X,ee)=>{He(X,Se=>{const be=j_fromDom(Se);gt(be,ee)})},Ze=(X,ee,Se,be,Je)=>He(X,St=>{const Cn=Ye(ee)?n.createElement(ee):ee;return Oe(Se)&&Bt(Cn,Se),be&&(!Ye(be)&&be.nodeType?Cn.appendChild(be):Ye(be)&&Me(Cn,be)),Je?Cn:St.appendChild(Cn)}),pt=(X,ee,Se)=>Ze(n.createElement(X),X,ee,Se,!0),dt=Ao.encodeAllRaw,Gt=(X,ee)=>He(X,Se=>{const be=j_fromDom(Se);return ee&&ue(sr(be),Je=>{Nr(Je)&&0===Je.dom.length?M(Je):Fr(be,Je)}),M(be),be.dom}),Ai=(X,ee,Se)=>{He(X,be=>{if($e(be)){const Je=j_fromDom(be),St=ee.split(" ");ue(St,Cn=>{Oe(Se)?(Se?Gi:uh)(Je,Cn):((n,s)=>{const a=jo(n)?n.dom.classList.toggle(s):((n,s)=>zt(xt(n),s)?ty(n,s):ey(n,s))(n,s);Ee(n)})(Je,Cn)})}})},Dr=(X,ee,Se)=>He(ee,be=>{var Je;const St=Sn(ee)?X.cloneNode(!0):X;return Se&&Td(tS(be.childNodes),Cn=>{St.appendChild(Cn)}),null===(Je=be.parentNode)||void 0===Je||Je.replaceChild(St,be),be}),Ni=()=>n.createRange(),ur=(X,ee,Se,be)=>{if(Sn(X)){let Je=X.length;const St=[];for(;Je--;)St[Je]=ur(X[Je],ee,Se,be);return St}return s.collect&&(X===n||X===c)&&b.push([X,ee,Se,be]),T.bind(X,ee,Se,be||Hc)},Ri=(X,ee,Se)=>{if(Sn(X)){let be=X.length;const Je=[];for(;be--;)Je[be]=Ri(X[be],ee,Se);return Je}if(b.length>0&&(X===n||X===c)){let be=b.length;for(;be--;){const[Je,St,Cn]=b[be];X===Je&&(!ee||ee===St)&&(!Se||Se===Cn)&&T.unbind(Je,St,Cn)}}return T.unbind(X,ee,Se)},s0=X=>{if(X&&_r(X)){const ee=X.getAttribute("data-mce-contenteditable");return ee&&"inherit"!==ee?ee:"inherit"!==X.contentEditable?X.contentEditable:null}return null},Hc={doc:n,settings:s,win:c,files:u,stdMode:!0,boxModel:!0,styleSheetLoader:_,boundEvents:b,styles:E,schema:S,events:T,isBlock:X=>Ye(X)?Ke(N,X):$e(X)&&(Ke(N,X.nodeName)||cl(S,X)),root:null,clone:(X,ee)=>X.cloneNode(ee),getRoot:he,getViewPort:X=>{const ee=Vr(X);return{x:ee.x,y:ee.y,w:ee.width,h:ee.height}},getRect:X=>{const ee=F(X),Se=ke(ee),be=Ie(ee);return{x:Se.x,y:Se.y,w:be.w,h:be.h}},getSize:Ie,getParent:(X,ee,Se)=>{const be=bt(X,ee,Se,!1);return be&&be.length>0?be[0]:null},getParents:bt,get:F,getNext:(X,ee)=>en(X,ee,"nextSibling"),getPrev:(X,ee)=>en(X,ee,"previousSibling"),select:(X,ee)=>{var Se,be;const Je=null!==(be=null!==(Se=F(ee))&&void 0!==Se?Se:s.root_element)&&void 0!==be?be:n;return(X=>Zt(X.querySelectorAll))(Je)?or(Je.querySelectorAll(X)):[]},is:it,add:Ze,create:pt,createHTML:(X,ee,Se="")=>{let be="<"+X;for(const Je in ee)Fn(ee,Je)&&(be+=" "+Je+'="'+dt(ee[Je])+'"');return dd(Se)&&Ke(S.getVoidElements(),X)?be+" />":be+">"+Se+"</"+X+">"},createFragment:X=>{const ee=n.createElement("div"),Se=n.createDocumentFragment();let be;for(Se.appendChild(ee),X&&(ee.innerHTML=X);be=ee.firstChild;)Se.appendChild(be);return Se.removeChild(ee),Se},remove:Gt,setStyle:(X,ee,Se)=>{He(X,be=>{const Je=j_fromDom(be);wg(Je,ee,Se),s.update_styles&&Ra(E,Je)})},getStyle:ae,setStyles:(X,ee)=>{He(X,Se=>{const be=j_fromDom(Se);Ut(ee,(Je,St)=>{wg(be,St,Je)}),s.update_styles&&Ra(E,be)})},removeAllAttribs:X=>He(X,ee=>{const Se=ee.attributes;for(let be=Se.length-1;be>=0;be--)ee.removeAttributeNode(Se.item(be))}),setAttrib:K,setAttribs:Bt,getAttrib:W,getPos:ke,parseStyle:X=>E.parse(X),serializeStyle:(X,ee)=>E.serialize(X,ee),addStyle:X=>{if(Hc!==pn.DOM&&n===document){if(a[X])return;a[X]=!0}let ee=n.getElementById("mceDefaultStyles");if(!ee){ee=n.createElement("style"),ee.id="mceDefaultStyles",ee.type="text/css";const Se=n.head;Se.firstChild?Se.insertBefore(ee,Se.firstChild):Se.appendChild(ee)}ee.styleSheet?ee.styleSheet.cssText+=X:ee.appendChild(n.createTextNode(X))},loadCSS:X=>{X||(X=""),ue(X.split(","),ee=>{u[ee]=!0,_.load(ee).catch(ut)})},addClass:(X,ee)=>{Ai(X,ee,!0)},removeClass:(X,ee)=>{Ai(X,ee,!1)},hasClass:(X,ee)=>{const Se=U(X),be=ee.split(" ");return Oe(Se)&&hr(be,Je=>Xc(Se,Je))},toggleClass:Ai,show:X=>{He(X,ee=>uy(j_fromDom(ee),"display"))},hide:X=>{He(X,ee=>Rr(j_fromDom(ee),"display","none"))},isHidden:X=>{const ee=U(X);return Oe(ee)&&Ta(bd(ee,"display"),"none")},uniqueId:X=>(X||"mce_")+f++,setHTML:Me,getOuterHTML:X=>{const ee=U(X);return Oe(ee)?$e(ee.dom)?ee.dom.outerHTML:(n=>{const s=j_fromTag("div"),a=j_fromDom(n.dom.cloneNode(!0));return Yn(s,a),Jt(s)})(ee):""},setOuterHTML:(X,ee)=>{He(X,Se=>{$e(Se)&&(Se.outerHTML=ee)})},decode:Ao.decode,encode:dt,insertAfter:(X,ee)=>{const Se=F(ee);return He(X,be=>{const Je=Se?.parentNode,St=Se?.nextSibling;return Je&&(St?Je.insertBefore(be,St):Je.appendChild(be)),be})},replace:Dr,rename:(X,ee)=>{if(X.nodeName!==ee.toUpperCase()){const Se=pt(ee);return Td(Z(X),be=>{K(Se,be.nodeName,W(X,be.nodeName))}),Dr(Se,X,!0),Se}return X},findCommonAncestor:(X,ee)=>{let Se=X;for(;Se;){let be=ee;for(;be&&Se!==be;)be=be.parentNode;if(Se===be)break;Se=Se.parentNode}return!Se&&X.ownerDocument?X.ownerDocument.documentElement:Se},run:He,getAttribs:Z,isEmpty:(X,ee,Se)=>Gl(ee)?hs(S,X,{...Se,isContent:Je=>{const St=Je.nodeName.toLowerCase();return!!ee[St]}}):hs(S,X,Se),createRng:Ni,nodeIndex:Ph,split:(X,ee,Se)=>{let Je,St,be=Ni();if(X&&ee&&X.parentNode&&ee.parentNode){const Cn=X.parentNode;return be.setStart(Cn,Ph(X)),be.setEnd(ee.parentNode,Ph(ee)),Je=be.extractContents(),be=Ni(),be.setStart(ee.parentNode,Ph(ee)+1),be.setEnd(Cn,Ph(X)+1),St=be.extractContents(),Cn.insertBefore(U0(Hc,Je,S),X),Cn.insertBefore(Se||ee,X),Cn.insertBefore(U0(Hc,St,S),X),Gt(X),Se||ee}},bind:ur,unbind:Ri,fire:(X,ee,Se)=>T.dispatch(X,ee,Se),dispatch:(X,ee,Se)=>T.dispatch(X,ee,Se),getContentEditable:s0,getContentEditableParent:X=>{const ee=he();let Se=null;for(let be=X;be&&be!==ee&&(Se=s0(be),null===Se);be=be.parentNode);return Se},isEditable:X=>{if(Oe(X)){const ee=$e(X)?X:X.parentElement;return Oe(ee)&&_r(ee)&&nn(j_fromDom(ee))}return!1},destroy:()=>{if(b.length>0){let X=b.length;for(;X--;){const[ee,Se,be]=b[X];T.unbind(ee,Se,be)}}Ut(u,(X,ee)=>{_.unload(ee),delete u[ee]})},isChildOf:(X,ee)=>X===ee||ee.contains(X),dumpRng:X=>"startContainer: "+X.startContainer.nodeName+", startOffset: "+X.startOffset+", endContainer: "+X.endContainer.nodeName+", endOffset: "+X.endOffset},Ev=((n,s,a)=>{const c=s.keep_values,f={style:{set:(h,g)=>{const _=j_fromDom(h);c&&xh(_,Sh,g),Co(_,"style"),Ye(g)&&dc(_,n.parse(g))},get:h=>{const g=j_fromDom(h),_=wo(g,Sh)||wo(g,"style");return n.serialize(n.parse(_),Ft(g))}}};return c&&(f.href=f.src={set:(h,g,_)=>{const b=j_fromDom(h);Zt(s.url_converter)&&Oe(g)&&(g=s.url_converter.call(s.url_converter_scope||a(),String(g),_,h)),xh(b,"data-mce-"+_,g),xh(b,_,g)},get:(h,g)=>{const _=j_fromDom(h);return wo(_,"data-mce-"+g)||wo(_,g)}}),f})(E,s,Ae(Hc));return Hc};pn.DOM=pn(document),pn.nodeIndex=Ph;const Sy=pn.DOM;class gc{constructor(s={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=s}_setReferrerPolicy(s){this.settings.referrerPolicy=s}loadScript(s){return new Promise((a,c)=>{const u=Sy;let f;const h=()=>{u.remove(b),f&&(f.onerror=f.onload=f=null)},b=u.uniqueId();f=document.createElement("script"),f.id=b,f.type="text/javascript",f.src=de._addCacheSuffix(s),this.settings.referrerPolicy&&u.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy),f.onload=()=>{h(),a()},f.onerror=()=>{h(),c("Failed to load script: "+s)},(document.getElementsByTagName("head")[0]||document.body).appendChild(f)})}isDone(s){return 2===this.states[s]}markDone(s){this.states[s]=2}add(s){const a=this;return a.queue.push(s),void 0===a.states[s]&&(a.states[s]=0),new Promise((u,f)=>{a.scriptLoadedCallbacks[s]||(a.scriptLoadedCallbacks[s]=[]),a.scriptLoadedCallbacks[s].push({resolve:u,reject:f})})}load(s){return this.add(s)}remove(s){delete this.states[s],delete this.scriptLoadedCallbacks[s]}loadQueue(){const s=this.queue;return this.queue=[],this.loadScripts(s)}loadScripts(s){const a=this,c=(_,b)=>{Nt(a.scriptLoadedCallbacks,b).each(S=>{ue(S,E=>E[_](b))}),delete a.scriptLoadedCallbacks[b]},u=_=>{const b=nt(_,S=>"rejected"===S.status);return b.length>0?Promise.reject(Uo(b,({reason:S})=>Sn(S)?S:[S])):Promise.resolve()},f=_=>Promise.allSettled(Xe(_,b=>2===a.states[b]?(c("resolve",b),Promise.resolve()):3===a.states[b]?(c("reject",b),Promise.reject(b)):(a.states[b]=1,a.loadScript(b).then(()=>{a.states[b]=2,c("resolve",b);const S=a.queue;return S.length>0?(a.queue=[],f(S).then(u)):Promise.resolve()},()=>(a.states[b]=3,c("reject",b),Promise.reject(b)))))),h=_=>(a.loading=!0,f(_).then(b=>{a.loading=!1;const S=a.queueLoadedCallbacks.shift();return I.from(S).each(oi),u(b)})),g=Mt(s);return a.loading?new Promise((_,b)=>{a.queueLoadedCallbacks.push(()=>{h(g).then(_,b)})}):h(g)}}gc.ScriptLoader=new gc;const No=n=>{let s=n;return{get:()=>s,set:u=>{s=u}}},Sg={},Py=No("en"),iS=()=>Nt(Sg,Py.get()),ea={getData:()=>Da(Sg,n=>({...n})),setCode:n=>{n&&Py.set(n)},getCode:()=>Py.get(),add:(n,s)=>{let a=Sg[n];a||(Sg[n]=a={});const c=Xe(zn(s),u=>u.toLowerCase());Ut(s,(u,f)=>{const h=f.toLowerCase();h!==f&&((n,s)=>{const a=n.indexOf(s);return-1!==a&&n.indexOf(s,a+1)>a})(c,h)?(Ke(s,h)||(a[h]=u),a[f]=u):a[h]=u})},translate:n=>{const s=iS().getOr({}),a=h=>Zt(h)?Object.prototype.toString.call(h):c(h)?"":""+h,c=h=>""===h||null==h,u=h=>{const g=a(h);return Ke(s,g)?a(s[g]):Nt(s,g.toLowerCase()).map(a).getOr(g)},f=h=>h.replace(/{context:\w+}$/,"");if(c(n))return"";if((n=>ko(n)&&Ke(n,"raw"))(n))return a(n.raw);if((n=>Sn(n)&&n.length>1)(n)){const h=n.slice(1);return f(u(n[0]).replace(/\{([0-9]+)\}/g,(_,b)=>Ke(h,b)?a(h[b]):_))}return f(u(n))},isRtl:()=>iS().bind(n=>Nt(n,"_dir")).exists(n=>"rtl"===n),hasCode:n=>Ke(Sg,n)},Qo=()=>{const n=[],s={},a={},c=[],u=(F,U)=>{const W=nt(c,Z=>Z.name===F&&Z.state===U);ue(W,Z=>Z.resolve())},f=F=>Ke(s,F),_=(F,U)=>{const W=ea.getCode();!W||U&&-1===(","+(U||"")+",").indexOf(","+W+",")||gc.ScriptLoader.add(s[F]+"/langs/"+W+".js")},V=(F,U="added")=>"added"===U&&(F=>Ke(a,F))(F)||"loaded"===U&&f(F)?Promise.resolve():new Promise(W=>{c.push({name:F,state:U,resolve:W})});return{items:n,urls:s,lookup:a,get:F=>{if(a[F])return a[F].instance},requireLangPack:(F,U)=>{!1!==Qo.languageLoad&&(f(F)?_(F,U):V(F,"loaded").then(()=>_(F,U)))},add:(F,U)=>(n.push(U),a[F]={instance:U},u(F,"added"),U),remove:F=>{delete s[F],delete a[F]},createUrl:(F,U)=>Ye(U)?Ye(F)?{prefix:"",resource:U,suffix:""}:{prefix:F.prefix,resource:U,suffix:F.suffix}:U,load:(F,U)=>{if(s[F])return Promise.resolve();let W=Ye(U)?U:U.prefix+U.resource+U.suffix;0!==W.indexOf("/")&&-1===W.indexOf("://")&&(W=Qo.baseURL+"/"+W),s[F]=W.substring(0,W.lastIndexOf("/"));const Z=()=>(u(F,"loaded"),Promise.resolve());return a[F]?Z():gc.ScriptLoader.add(W).then(Z)},waitFor:V}};Qo.languageLoad=!0,Qo.baseURL="",Qo.PluginManager=Qo(),Qo.ThemeManager=Qo(),Qo.ModelManager=Qo();const kh=n=>{const s=No(I.none()),a=()=>s.get().each(g=>clearInterval(g));return{clear:()=>{a(),s.set(I.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:g=>{a(),s.set(I.some(setInterval(g,n)))}}},mi=()=>{const n=(n=>{const s=No(I.none()),a=()=>s.get().each(n);return{clear:()=>{a(),s.set(I.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:g=>{a(),s.set(I.some(g))}}})(ut);return{...n,on:a=>n.get().each(a)}},Eg=(n,s)=>{let a=null;return{cancel:()=>{po(a)||(clearTimeout(a),a=null)},throttle:(...f)=>{po(a)&&(a=setTimeout(()=>{a=null,n.apply(null,f)},s))}}},kg=(n,s)=>{let a=null;const c=()=>{po(a)||(clearTimeout(a),a=null)};return{cancel:c,throttle:(...f)=>{c(),a=setTimeout(()=>{a=null,n.apply(null,f)},s)}}},Ey=Ae("mce-annotation"),Id=Ae("data-mce-annotation"),Dg=Ae("data-mce-annotation-uid"),ky=Ae("data-mce-annotation-active"),Dy=Ae("data-mce-annotation-classes"),Ty=Ae("data-mce-annotation-attrs"),D3=n=>s=>mt(s,n),T3=(n,s)=>{const a=n.selection.getRng(),c=j_fromDom(a.startContainer),u=j_fromDom(n.getBody()),f=s.fold(()=>"."+Ey(),_=>`[${Id()}="${_}"]`),h=su(c,a.startOffset).getOr(c);return gr(h,f,D3(u)).bind(_=>Ma(_,`${Dg()}`).bind(b=>Ma(_,`${Id()}`).map(S=>{const E=iT(n,b);return{uid:b,name:S,elements:E}})))},sT=(n,s)=>ou(n,"data-mce-bogus")||((n,s,a)=>ds(n,'[data-mce-bogus="all"]',a).isSome())(n,0,D3(s)),iT=(n,s)=>{const a=j_fromDom(n.getBody()),c=Wt(a,`[${Dg()}="${s}"]`);return nt(c,u=>!sT(u,a))},Xo=(n,s)=>{const a=j_fromDom(n.getBody()),c=Wt(a,`[${Id()}="${s}"]`),u={};return ue(c,f=>{if(!sT(f,a)){const h=wo(f,Dg()),g=Nt(u,h).getOr([]);u[h]=g.concat([f])}}),u};let ms=0;const _c=n=>{const a=(new Date).getTime(),c=Math.floor(1e9*Math.random());return ms++,n+"_"+c+ms+String(a)},Mh=(n,s)=>j_fromDom(n.dom.cloneNode(s)),ul=n=>Mh(n,!1),O3=n=>Mh(n,!0),Ls=(n,s,a=mn)=>{const c=new io(n,s),u=f=>{let h;do{h=c[f]()}while(h&&!ye(h)&&!a(h));return I.from(h).filter(ye)};return{current:()=>I.from(c.current()).filter(ye),next:()=>u("next"),prev:()=>u("prev"),prev2:()=>u("prev2")}},dl=(n,s)=>{const a=s||(h=>n.isBlock(h)||Nn(h)||Pn(h)),c=(h,g,_,b)=>{if(ye(h)){const S=b(h,g,h.data);if(-1!==S)return I.some({container:h,offset:S})}return _().bind(S=>c(S.container,S.offset,_,b))};return{backwards:(h,g,_,b)=>{const S=Ls(h,b??n.getRoot(),a);return c(h,g,()=>S.prev().map(E=>({container:E,offset:E.length})),_).getOrNull()},forwards:(h,g,_,b)=>{const S=Ls(h,b??n.getRoot(),a);return c(h,g,()=>S.next().map(E=>({container:E,offset:0})),_).getOrNull()}}},lT=((n,s)=>{const c=f=>n(f)?I.from(f.dom.nodeValue):I.none();return{get:f=>{if(!n(f))throw new Error("Can only get text value of a text node");return c(f).getOr("")},getOption:c,set:(f,h)=>{if(!n(f))throw new Error("Can only set raw text value of a text node");f.dom.nodeValue=h}}})(Nr),Ig=n=>lT.get(n),Ih=n=>{let s;return a=>(s=s||Jl(n,ro),Ke(s,Ft(a)))},Od=n=>Ar(n)&&"br"===Ft(n),Og=Ih(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),cS=Ih(["ul","ol","dl"]),Oh=Ih(["li","dd","dt"]),lS=Ih(["thead","tbody","tfoot"]),hu=Ih(["td","th"]),Ag=Ih(["pre","script","textarea","style"]),vc=()=>{const n=j_fromTag("br");return Oo(n,"data-mce-bogus","1"),n},ta=n=>{C(n),Yn(n,vc())},zo="\ufeff",Ng=ao,Bs=n=>n.replace(/\uFEFF/g,""),j3=$e,Ah=ye,Nh=n=>(Ah(n)&&(n=n.parentNode),j3(n)&&n.hasAttribute("data-mce-caret")),gi=n=>Ah(n)&&Ng(n.data),Vs=n=>Nh(n)||gi(n),Ay=n=>n.firstChild!==n.lastChild||!Nn(n.firstChild),Rg=n=>{const s=n.container();return!!ye(s)&&(s.data.charAt(n.offset())===zo||n.isAtStart()&&gi(s.previousSibling))},uS=n=>{const s=n.container();return!!ye(s)&&(s.data.charAt(n.offset()-1)===zo||n.isAtEnd()&&gi(s.nextSibling))},Fg=n=>Ah(n)&&n.data[0]===zo,Ad=n=>Ah(n)&&n.data[n.data.length-1]===zo,Lg=n=>n&&n.hasAttribute("data-mce-caret")?((n=>{var s;const a=n.getElementsByTagName("br"),c=a[a.length-1];Po(c)&&(null===(s=c.parentNode)||void 0===s||s.removeChild(c))})(n),n.removeAttribute("data-mce-caret"),n.removeAttribute("data-mce-bogus"),n.removeAttribute("style"),n.removeAttribute("data-mce-style"),n.removeAttribute("_moz_abspos"),n):null,dT=n=>Nh(n.startContainer),pu=Math.round,mu=n=>n?{left:pu(n.left),top:pu(n.top),bottom:pu(n.bottom),right:pu(n.right),width:pu(n.width),height:pu(n.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},dS=(n,s)=>(n=mu(n),s||(n.left=n.left+n.width),n.right=n.left,n.width=0,n),fT=(n,s,a)=>n>=0&&n<=Math.min(s.height,a.height)/2,Rd=(n,s)=>{const a=Math.min(s.height/2,n.height/2);return n.bottom-a<s.top||!(n.top>s.bottom)&&fT(s.top-n.bottom,n,s)},gu=(n,s)=>n.top>s.bottom||!(n.bottom<s.top)&&fT(s.bottom-n.top,n,s),Bg=(n,s,a)=>{const c=Math.max(Math.min(s,n.left+n.width),n.left),u=Math.max(Math.min(a,n.top+n.height),n.top);return Math.sqrt((s-c)*(s-c)+(a-u)*(a-u))},Fh=n=>{const s=n.startContainer,a=n.startOffset;return s===n.endContainer&&s.hasChildNodes()&&n.endOffset===a+1?s.childNodes[a]:null},_u=(n,s)=>{if($e(n)&&n.hasChildNodes()){const a=n.childNodes,c=((n,s,a)=>Math.min(Math.max(n,0),a))(s,0,a.length-1);return a[c]}return n},hT=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Fd=n=>Ye(n)&&n.charCodeAt(0)>=768&&hT.test(n),pT=Oa,hS=Pn,G3=Nn,pS=ye,mT=xn(["script","style","textarea"]),gT=xn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),K3=xn(["table"]),_T=Vs,Fa=n=>!_T(n)&&(pS(n)?!mT(n.parentNode):gT(n)||G3(n)||K3(n)||mS(n)),mS=n=>!(n=>$e(n)&&"true"===n.getAttribute("unselectable"))(n)&&hS(n),gS=(n,s)=>Fa(n)&&((n,s)=>{for(let a=n.parentNode;a&&a!==s;a=a.parentNode){if(mS(a))return!1;if(pT(a))return!0}return!0})(n,s),es=$e,_S=Fa,fl=il("display","block table"),Ry=il("float","left right"),Lh=((...n)=>s=>{for(let a=0;a<n.length;a++)if(!n[a](s))return!1;return!0})(es,_S,Kl(Ry)),Vg=Kl(il("white-space","pre pre-line pre-wrap")),$g=ye,vS=Nn,Fy=pn.nodeIndex,Ly=(n,s)=>{if(!(s<0&&$e(n)&&n.hasChildNodes()))return _u(n,s)},yc=n=>n?n.createRange():pn.DOM.createRng(),Bh=n=>Ye(n)&&/[\r\n\t ]/.test(n),bT=n=>!!n.setStart&&!!n.setEnd,By=n=>{const s=n.startContainer,a=n.startOffset;if(Bh(n.toString())&&Vg(s.parentNode)&&ye(s)){const c=s.data;if(Bh(c[a-1])||Bh(c[a+1]))return!0}return!1},yS=n=>0===n.left&&0===n.right&&0===n.top&&0===n.bottom,hl=n=>{var s;let a;const c=n.getClientRects();return a=mu(c.length>0?c[0]:n.getBoundingClientRect()),!bT(n)&&vS(n)&&yS(a)?(n=>{const s=n.ownerDocument,a=yc(s),c=s.createTextNode(Jn),u=n.parentNode;u.insertBefore(c,n),a.setStart(c,0),a.setEnd(c,1);const f=mu(a.getBoundingClientRect());return u.removeChild(c),f})(n):yS(a)&&bT(n)&&null!==(s=(n=>{const a=n.endContainer,c=n.startOffset,u=n.endOffset;if(n.startContainer===a&&ye(a)&&0===c&&1===u){const f=n.cloneRange();return f.setEndAfter(a),hl(f)}return null})(n))&&void 0!==s?s:a},Ld=(n,s)=>{const a=dS(n,s);return a.width=1,a.right=a.left+1,a},se=(n,s,a)=>{const h=()=>(a||(a=(n=>{const s=[],a=h=>{0!==h.height&&(s.length>0&&((n,s)=>n.left===s.left&&n.top===s.top&&n.bottom===s.bottom&&n.right===s.right)(h,s[s.length-1])||s.push(h))},c=(h,g)=>{const _=yc(h.ownerDocument);if(g<h.data.length){if(Fd(h.data[g]))return;if(Fd(h.data[g-1])&&(_.setStart(h,g),_.setEnd(h,g+1),!By(_)))return void a(Ld(hl(_),!1))}g>0&&(_.setStart(h,g-1),_.setEnd(h,g),By(_)||a(Ld(hl(_),!1))),g<h.data.length&&(_.setStart(h,g),_.setEnd(h,g+1),By(_)||a(Ld(hl(_),!0)))},u=n.container(),f=n.offset();if($g(u))return c(u,f),s;if(es(u))if(n.isAtEnd()){const h=Ly(u,f);$g(h)&&c(h,h.data.length),Lh(h)&&!vS(h)&&a(Ld(hl(h),!1))}else{const h=Ly(u,f);if($g(h)&&c(h,0),Lh(h)&&n.isAtEnd())return a(Ld(hl(h),!1)),s;const g=Ly(n.container(),n.offset()-1);Lh(g)&&!vS(g)&&(fl(g)||fl(h)||!Lh(h))&&a(Ld(hl(g),!1)),Lh(h)&&a(Ld(hl(h),!0))}return s})(se(n,s))),a);return{container:Ae(n),offset:Ae(s),toRange:()=>{const S=yc(n.ownerDocument);return S.setStart(n,s),S.setEnd(n,s),S},getClientRects:h,isVisible:()=>h().length>0,isAtStart:()=>($g(n),0===s),isAtEnd:()=>$g(n)?s>=n.data.length:s>=n.childNodes.length,isEqual:S=>S&&n===S.container()&&s===S.offset(),getNode:S=>Ly(n,S?s-1:s)}};se.fromRangeStart=n=>se(n.startContainer,n.startOffset),se.fromRangeEnd=n=>se(n.endContainer,n.endOffset),se.after=n=>se(n.parentNode,Fy(n)+1),se.before=n=>se(n.parentNode,Fy(n)),se.isAbove=(n,s)=>rr(go(s.getClientRects()),cs(n.getClientRects()),Rd).getOr(!1),se.isBelow=(n,s)=>rr(cs(s.getClientRects()),go(n.getClientRects()),gu).getOr(!1),se.isAtStart=n=>!!n&&n.isAtStart(),se.isAtEnd=n=>!!n&&n.isAtEnd(),se.isTextPosition=n=>!!n&&ye(n.container()),se.isElementPosition=n=>!se.isTextPosition(n);const Vh=(n,s)=>{ye(s)&&0===s.data.length&&n.remove(s)},gs=(n,s,a)=>{I0(a)?((n,s,a)=>{const c=I.from(a.firstChild),u=I.from(a.lastChild);s.insertNode(a),c.each(f=>Vh(n,f.previousSibling)),u.each(f=>Vh(n,f.nextSibling))})(n,s,a):((n,s,a)=>{s.insertNode(a),Vh(n,a.previousSibling),Vh(n,a.nextSibling)})(n,s,a)},br=ye,Vy=Po,bS=pn.nodeIndex,pl=n=>{const s=n.parentNode;return Vy(s)?pl(s):s},Bd=n=>n?Nm(n.childNodes,(s,a)=>(Vy(a)&&"BR"!==a.nodeName?s=s.concat(Bd(a)):s.push(a),s),[]):[],Ug=n=>s=>n===s,ST=n=>(br(n)?"text()":n.nodeName.toLowerCase())+"["+(n=>{let s,a;s=Bd(pl(n)),a=Yc(s,Ug(n),n),s=s.slice(0,a+1);const c=Nm(s,(u,f,h)=>(br(f)&&br(s[h-1])&&u++,u),0);return s=Xl(s,xn([n.nodeName])),a=Yc(s,Ug(n),n),a-c})(n)+"]",J3=(n,s)=>{let f,a=[],c=s.container(),u=s.offset();if(br(c))f=((n,s)=>{let a=n;for(;(a=a.previousSibling)&&br(a);)s+=a.data.length;return s})(c,u);else{const g=c.childNodes;u>=g.length?(f="after",u=g.length-1):f="before",c=g[u]}a.push(ST(c));let h=((n,s,a)=>{const c=[];for(let u=s.parentNode;u&&u!==n;u=u.parentNode)c.push(u);return c})(n,c);return h=Xl(h,Kl(Po)),a=a.concat(Am(h,g=>ST(g))),a.reverse().join("/")+","+f},ET=(n,s)=>{if(!s)return null;const a=s.split(","),c=a[0].split("/"),u=a.length>1?a[1]:"before",f=Nm(c,(h,g)=>{const _=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(g);return _?("text()"===_[1]&&(_[1]="#text"),((n,s,a)=>{let c=Bd(n);return c=Xl(c,(u,f)=>!br(u)||!br(c[f-1])),c=Xl(c,xn([s])),c[a]})(h,_[1],parseInt(_[2],10))):null},n);if(!f)return null;if(!br(f)&&f.parentNode){let h;return h="after"===u?bS(f)+1:bS(f),se(f.parentNode,h)}return((n,s)=>{let a=n,c=0;for(;br(a);){const u=a.data.length;if(s>=c&&s<=c+u){n=a,s-=c;break}if(!br(a.nextSibling)){n=a,s=u;break}c+=u,a=a.nextSibling}return br(n)&&s>n.data.length&&(s=n.data.length),se(n,s)})(f,parseInt(u,10))},$y=Pn,Q3=(n,s,a,c,u)=>{const f=u?c.startContainer:c.endContainer;let h=u?c.startOffset:c.endOffset;const g=[],_=n.getRoot();if(ye(f))g.push(a?((n,s,a)=>{let c=n(s.data.slice(0,a)).length;for(let u=s.previousSibling;u&&ye(u);u=u.previousSibling)c+=n(u.data).length;return c})(s,f,h):h);else{let b=0;const S=f.childNodes;h>=S.length&&S.length&&(b=1,h=Math.max(0,S.length-1)),g.push(n.nodeIndex(S[h],a)+b)}for(let b=f;b&&b!==_;b=b.parentNode)g.push(n.nodeIndex(b,a));return g},jg=(n,s,a)=>{let c=0;return de.each(n.select(s),u=>{if("all"!==u.getAttribute("data-mce-bogus"))return u!==a&&void c++}),c},X3=(n,s)=>{let a=s?n.startContainer:n.endContainer,c=s?n.startOffset:n.endOffset;if($e(a)&&"TR"===a.nodeName){const u=a.childNodes;a=u[Math.min(s?c:c-1,u.length-1)],a&&(c=s?0:a.childNodes.length,s?n.setStart(a,c):n.setEnd(a,c))}},eV=n=>(X3(n,!0),X3(n,!1),n),tV=(n,s)=>{if($e(n)&&(n=_u(n,s),$y(n)))return n;if(Vs(n)){ye(n)&&Nh(n)&&(n=n.parentNode);let a=n.previousSibling;if($y(a)||(a=n.nextSibling,$y(a)))return a}},nV=(n,s,a)=>{const c=a.getNode(),u=a.getRng();if("IMG"===c.nodeName||$y(c)){const h=c.nodeName;return{name:h,index:jg(a.dom,h,c)}}const f=(n=>tV(n.startContainer,n.startOffset)||tV(n.endContainer,n.endOffset))(u);if(f){const h=f.tagName;return{name:h,index:jg(a.dom,h,f)}}return((n,s,a,c)=>{const u=s.dom,f=Q3(u,n,a,c,!0),h=s.isForward(),g=dT(c)?{isFakeCaret:!0}:{};return s.isCollapsed()?{start:f,forward:h,...g}:{start:f,end:Q3(u,n,a,c,!1),forward:h,...g}})(n,a,s,u)},Hg=(n,s,a)=>{const c={"data-mce-type":"bookmark",id:s,style:"overflow:hidden;line-height:0px"};return a?n.create("span",c,"&#xFEFF;"):n.create("span",c)},jy=(n,s)=>{const a=n.dom;let c=n.getRng();const u=a.uniqueId(),f=n.isCollapsed(),h=n.getNode(),g=h.nodeName,_=n.isForward();if("IMG"===g)return{name:g,index:jg(a,g,h)};const b=eV(c.cloneRange());if(!f){b.collapse(!1);const E=Hg(a,u+"_end",s);gs(a,b,E)}c=eV(c),c.collapse(!0);const S=Hg(a,u+"_start",s);return gs(a,c,S),n.moveToBookmark({id:u,keep:!0,forward:_}),{id:u,forward:_}},Hy=Ve(nV,pe,!0),Uh=n=>{const s=f=>f(n),a=Ae(n),c=()=>u,u={tag:!0,inner:n,fold:(f,h)=>h(n),isValue:ro,isError:mn,map:f=>zr.value(f(n)),mapError:c,bind:s,exists:s,forall:s,getOr:a,or:c,getOrThunk:a,orThunk:c,getOrDie:a,each:f=>{f(n)},toOptional:()=>I.some(n)};return u},DT=n=>{const s=()=>a,a={tag:!1,inner:n,fold:(c,u)=>c(n),isValue:mn,isError:ro,map:s,mapError:c=>zr.error(c(n)),bind:s,exists:mn,forall:ro,getOr:pe,or:pe,getOrThunk:Ir,orThunk:Ir,getOrDie:Im(String(n)),each:ut,toOptional:I.none};return a},zr={value:Uh,error:DT,fromOption:(n,s)=>n.fold(()=>DT(s),Uh)},vi_generate=n=>{if(!Sn(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");const s=[],a={};return ue(n,(c,u)=>{const f=zn(c);if(1!==f.length)throw new Error("one and only one name per case");const h=f[0],g=c[h];if(void 0!==a[h])throw new Error("duplicate key detected:"+h);if("cata"===h)throw new Error("cannot have a case named cata (sorry)");if(!Sn(g))throw new Error("case arguments must be an array");s.push(h),a[h]=(..._)=>{const b=_.length;if(b!==g.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+g.length+" ("+g+"), got "+b);return{fold:(...E)=>{if(E.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+E.length);return E[u].apply(null,_)},match:E=>{const T=zn(E);if(s.length!==T.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+"\nActual: "+T.join(","));if(!hr(s,V=>zt(T,V)))throw new Error("Not all branches were specified when using match. Specified: "+T.join(", ")+"\nRequired: "+s.join(", "));return E[h].apply(null,_)},log:E=>{console.log(E,{constructors:s,constructor:h,params:_})}}}}),a};vi_generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const sV=n=>"inline-command"===n.type||"inline-format"===n.type,iV=n=>"block-command"===n.type||"block-format"===n.type,TT=n=>{var s;const a=u=>zr.error({message:u,pattern:n}),c=(u,f,h)=>{if(void 0!==n.format){let g;if(Sn(n.format)){if(!hr(n.format,Ye))return a(u+" pattern has non-string items in the `format` array");g=n.format}else{if(!Ye(n.format))return a(u+" pattern has non-string `format` parameter");g=[n.format]}return zr.value(f(g))}return void 0!==n.cmd?Ye(n.cmd)?zr.value(h(n.cmd,n.value)):a(u+" pattern has non-string `cmd` parameter"):a(u+" pattern is missing both `format` and `cmd` parameters")};if(!ko(n))return a("Raw pattern is not an object");if(!Ye(n.start))return a("Raw pattern is missing `start` parameter");if(void 0!==n.end){if(!Ye(n.end))return a("Inline pattern has non-string `end` parameter");if(0===n.start.length&&0===n.end.length)return a("Inline pattern has empty `start` and `end` parameters");let u=n.start,f=n.end;return 0===f.length&&(f=u,u=""),c("Inline",h=>({type:"inline-format",start:u,end:f,format:h}),(h,g)=>({type:"inline-command",start:u,end:f,cmd:h,value:g}))}if(void 0!==n.replacement)return Ye(n.replacement)?0===n.start.length?a("Replacement pattern has empty `start` parameter"):zr.value({type:"inline-command",start:"",end:n.start,cmd:"mceInsertContent",value:n.replacement}):a("Replacement pattern has non-string `replacement` parameter");{const u=null!==(s=n.trigger)&&void 0!==s?s:"space";return 0===n.start.length?a("Block pattern has empty `start` parameter"):c("Block",f=>({type:"block-format",start:n.start,format:f[0],trigger:u}),(f,h)=>({type:"block-command",start:n.start,cmd:f,value:h,trigger:u}))}},zy=n=>nt(n,iV),MT=n=>nt(n,sV),SS=(n,s)=>({...n,blockPatterns:nt(n.blockPatterns,a=>((n,s)=>("block-command"===n.type||"block-format"===n.type)&&n.trigger===s)(a,s))}),xS=n=>{const s=(n=>{const s=[],a=[];return ue(n,c=>{c.fold(u=>{s.push(u)},u=>{a.push(u)})}),{errors:s,values:a}})(Xe(n,TT));return ue(s.errors,a=>console.error(a.message,a.pattern)),s.values},lV=n=>s=>{const a=n(s);return xS(a)},PS=Rs().deviceType,$s=PS.isTouch(),ES=pn.DOM,Wy=n=>ql(n,RegExp),Te=n=>s=>s.options.get(n),bu=n=>Ye(n)||ko(n),kS=(n,s="")=>a=>{const c=Ye(a);if(c){if(-1!==a.indexOf("=")){const u=(n=>{const s=n.indexOf("=")>0?n.split(/[;,](?![^=;,]*(?:[;,]|$))/):n.split(",");return $o(s,(a,c)=>{const u=c.split("="),f=u[0],h=u.length>1?u[1]:f;return a[tu(f)]=tu(h),a},{})})(a);return{value:Nt(u,n.id).getOr(s),valid:c}}return{value:a,valid:c}}return{valid:!1,message:"Must be a string."}},uV=Te("iframe_attrs"),AT=Te("doctype"),NT=Te("document_base_url"),RT=Te("body_id"),dV=Te("body_class"),DS=Te("content_security_policy"),fV=Te("br_in_pre"),wr=Te("forced_root_block"),Vd=Te("forced_root_block_attrs"),TS=Te("newline_behavior"),hV=Te("br_newline_selector"),zg=Te("no_newline_selector"),pV=Te("keep_styles"),mV=Te("end_container_on_empty_block"),MS=Te("automatic_uploads"),IS=Te("images_reuse_filename"),FT=Te("images_replace_blob_uris"),$d=Te("icons"),qy=Te("icons_url"),LT=Te("images_upload_url"),OS=Te("images_upload_base_path"),Gy=Te("images_upload_credentials"),gV=Te("images_upload_handler"),_V=Te("content_css_cors"),AS=Te("referrer_policy"),BT=Te("language"),vV=Te("language_url"),VT=Te("indent_use_margin"),$T=Te("indentation"),Wg=Te("content_css"),Ky=Te("content_style"),Zy=Te("font_css"),yV=Te("directionality"),bV=Te("inline_boundaries_selector"),Yy=Te("object_resizing"),UT=Te("resize_img_proportional"),Ud=Te("placeholder"),NS=Te("event_root"),jT=Te("service_message"),jh=Te("theme"),A7=Te("theme_url"),Hh=Te("model"),wV=Te("model_url"),zh=Te("inline_boundaries"),HT=Te("formats"),zT=Te("preview_styles"),RS=Te("format_empty_lines"),WT=Te("format_noneditable_selector"),Jy=Te("custom_ui_selector"),jd=Te("inline"),qT=Te("hidden_input"),FS=Te("submit_patch"),Qy=Te("add_form_submit_trigger"),GT=Te("add_unload_trigger"),LS=Te("custom_undo_redo_levels"),qg=Te("disable_nodechange"),KT=Te("readonly"),ZT=Te("editable_root"),YT=Te("content_css_cors"),Xy=Te("plugins"),CV=Te("external_plugins"),JT=Te("block_unsupported_drop"),QT=Te("visual"),eb=Te("visual_table_class"),tb=Te("visual_anchor_class"),Wh=Te("iframe_aria_text"),SV=Te("setup"),xV=Te("init_instance_callback"),N7=Te("urlconverter_callback"),PV=Te("auto_focus"),nb=Te("browser_spellcheck"),BS=Te("protect"),XT=Te("paste_block_drop"),Gg=Te("paste_data_images"),eM=Te("paste_preprocess"),Hd=Te("paste_postprocess"),EV=Te("newdocument_content"),kV=Te("paste_webkit_styles"),DV=Te("paste_remove_styles_if_webkit"),TV=Te("paste_merge_formats"),MV=Te("smart_paste"),yi=Te("paste_as_text"),bc=Te("paste_tab_spaces"),IV=Te("allow_html_data_urls"),OV=Te("text_patterns"),AV=Te("text_patterns_lookup"),tM=Te("noneditable_class"),NV=Te("editable_class"),RV=Te("noneditable_regexp"),nM=Te("preserve_cdata"),FV=Te("highlight_on_focus"),oM=Te("xss_sanitization"),LV=Te("init_content_sync"),VS=n=>de.explode(n.options.get("images_file_types")),rM=Te("table_tab_navigation"),sM=Te("details_initial_state"),R7=Te("details_serialized_state"),VV=Te("sandbox_iframes"),iM=n=>n.options.get("sandbox_iframes_exclusions"),$S=Te("convert_unsafe_embeds"),US=Te("license_key"),F7=Te("api_key"),L7=$e,jS=ye,aM=n=>{const s=n.parentNode;s&&s.removeChild(n)},cM=n=>{const s=Bs(n);return{count:n.length-s.length,text:s}},lM=n=>{let s;for(;-1!==(s=n.data.lastIndexOf(zo));)n.deleteData(s,1)},uM=(n,s)=>(Cr(n),s),$V=(n,s)=>se.isTextPosition(s)?((n,s)=>jS(n)&&s.container()===n?((n,s)=>{const a=cM(n.data.substr(0,s.offset())),c=cM(n.data.substr(s.offset()));return(a.text+c.text).length>0?(lM(n),se(n,s.offset()-a.count)):s})(n,s):uM(n,s))(n,s):((n,s)=>s.container()===n.parentNode?((n,s)=>{const a=s.container(),c=((n,s)=>{const a=Yl(n,s);return-1===a?I.none():I.some(a)})(or(a.childNodes),n).map(u=>u<s.offset()?se(a,s.offset()-1):s).getOr(s);return Cr(n),c})(n,s):uM(n,s))(n,s),Cr=n=>{L7(n)&&Vs(n)&&(Ay(n)?n.removeAttribute("data-mce-caret"):aM(n)),jS(n)&&(lM(n),0===n.data.length&&aM(n))},sb=Pn,UV=al,Qe=O0,pM=(n,s,a)=>{const c=dS(s.getBoundingClientRect(),a);let u,f;if("BODY"===n.tagName){const g=n.ownerDocument.documentElement;u=n.scrollLeft||g.scrollLeft,f=n.scrollTop||g.scrollTop}else{const g=n.getBoundingClientRect();u=n.scrollLeft-g.left,f=n.scrollTop-g.top}c.left+=u,c.right+=u,c.top+=f,c.bottom+=f,c.width=1;let h=s.offsetWidth-s.clientWidth;return h>0&&(a&&(h*=-1),c.left+=h,c.right+=h),c},HV=(n,s,a,c)=>{const u=mi();let f,h;const g=wr(n),_=n.dom,S=()=>{(n=>{var s,a;const c=Wt(j_fromDom(n),"*[contentEditable=false],video,audio,embed,object");for(let u=0;u<c.length;u++){const f=c[u].dom;let h=f.previousSibling;if(Ad(h)){const g=h.data;1===g.length?null===(s=h.parentNode)||void 0===s||s.removeChild(h):h.deleteData(g.length-1,1)}h=f.nextSibling,Fg(h)&&(1===h.data.length?null===(a=h.parentNode)||void 0===a||a.removeChild(h):h.deleteData(0,1))}})(s),h&&(Cr(h),h=null),u.on(F=>{_.remove(F.caret),u.clear()}),f&&(clearInterval(f),f=void 0)};return{show:(F,U)=>{let W;if(S(),Qe(U))return null;if(!a(U))return h=((n,s)=>{var a;const u=(null!==(a=n.ownerDocument)&&void 0!==a?a:document).createTextNode(zo),f=n.parentNode;if(s){const h=n.previousSibling;if(Ah(h)){if(Vs(h))return h;if(Ad(h))return h.splitText(h.data.length-1)}f?.insertBefore(u,n)}else{const h=n.nextSibling;if(Ah(h)){if(Vs(h))return h;if(Fg(h))return h.splitText(1),h}n.nextSibling?f?.insertBefore(u,n.nextSibling):f?.appendChild(u)}return u})(U,F),W=U.ownerDocument.createRange(),qh(h.nextSibling)?(W.setStart(h,0),W.setEnd(h,0)):(W.setStart(h,1),W.setEnd(h,1)),W;{const Z=((n,s,a)=>{var c;const f=(null!==(c=s.ownerDocument)&&void 0!==c?c:document).createElement(n);f.setAttribute("data-mce-caret",a?"before":"after"),f.setAttribute("data-mce-bogus","all"),f.appendChild(vc().dom);const h=s.parentNode;return a?h?.insertBefore(f,s):s.nextSibling?h?.insertBefore(f,s.nextSibling):h?.appendChild(f),f})(g,U,F),K=pM(s,U,F);_.setStyle(Z,"top",K.top),_.setStyle(Z,"caret-color","transparent"),h=Z;const J=_.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});_.setStyles(J,{...K}),_.add(s,J),u.set({caret:J,element:U,before:F}),F&&_.addClass(J,"mce-visual-caret-before"),f=setInterval(()=>{u.on(F=>{c()?_.toggleClass(F.caret,"mce-visual-caret-hidden"):_.addClass(F.caret,"mce-visual-caret-hidden")})},500),W=U.ownerDocument.createRange(),W.setStart(Z,0),W.setEnd(Z,0)}return W},hide:S,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{u.on(F=>{const U=pM(s,F.element,F.before);_.setStyles(F.caret,{...U})})},destroy:()=>clearInterval(f)}},mM=()=>It.browser.isFirefox(),qh=n=>sb(n)||UV(n),ib=n=>(qh(n)||Xr(n)&&mM())&&ru(j_fromDom(n)).exists(nn),B7=Oa,zd=Pn,V7=al,zV=il("display","block table table-cell table-caption list-item"),Zg=Vs,gM=Nh,zS=$e,WS=ye,Gh=Fa,wu=n=>n>0,gl=n=>n<0,Cu=(n,s)=>{let a;for(;a=n(s);)if(!gM(a))return a;return null},Su=(n,s,a,c,u)=>{const f=new io(n,c),h=zd(n)||gM(n);let g;if(gl(s)){if(h&&(g=Cu(f.prev.bind(f),!0),a(g)))return g;for(;g=Cu(f.prev.bind(f),u);)if(a(g))return g}if(wu(s)){if(h&&(g=Cu(f.next.bind(f),!0),a(g)))return g;for(;g=Cu(f.next.bind(f),u);)if(a(g))return g}return null},wc=(n,s)=>{for(;n&&n!==s;){if(zV(n))return n;n=n.parentNode}return null},na=(n,s,a)=>wc(n.container(),a)===wc(s.container(),a),Zh=(n,s)=>{if(!s)return I.none();const a=s.container(),c=s.offset();return zS(a)?I.from(a.childNodes[c+n]):I.none()},WV=(n,s)=>{var a;const u=(null!==(a=s.ownerDocument)&&void 0!==a?a:document).createRange();return n?(u.setStartBefore(s),u.setEndBefore(s)):(u.setStartAfter(s),u.setEndAfter(s)),u},qS=(n,s,a)=>wc(s,n)===wc(a,n),Yh=(n,s,a)=>{const c=n?"previousSibling":"nextSibling";let u=a;for(;u&&u!==s;){let f=u[c];if(f&&Zg(f)&&(f=f[c]),zd(f)||V7(f)){if(qS(s,f,u))return f;break}if(Gh(f))break;u=u.parentNode}return null},Yg=Ve(WV,!0),Jh=Ve(WV,!1),GS=(n,s,a)=>{let c;const u=Ve(Yh,!0,s),f=Ve(Yh,!1,s),h=a.startContainer,g=a.startOffset;if(Nh(h)){const _=WS(h)?h.parentNode:h,b=_.getAttribute("data-mce-caret");if("before"===b&&(c=_.nextSibling,ib(c)))return Yg(c);if("after"===b&&(c=_.previousSibling,ib(c)))return Jh(c)}if(!a.collapsed)return a;if(ye(h)){if(Zg(h)){if(1===n){if(c=f(h),c)return Yg(c);if(c=u(h),c)return Jh(c)}if(-1===n){if(c=u(h),c)return Jh(c);if(c=f(h),c)return Yg(c)}return a}if(Ad(h)&&g>=h.data.length-1)return 1===n&&(c=f(h),c)?Yg(c):a;if(Fg(h)&&g<=1)return-1===n&&(c=u(h),c)?Jh(c):a;if(g===h.data.length)return c=f(h),c?Yg(c):a;if(0===g)return c=u(h),c?Jh(c):a}return a},_M=(n,s)=>Zh(n?0:-1,s).filter(zd),Wd=(n,s,a)=>{const c=GS(n,s,a);return-1===n?se.fromRangeStart(c):se.fromRangeEnd(c)},Jg=n=>I.from(n.getNode()).map(j_fromDom),KS=(n,s)=>{let a=s;for(;a=n(a);)if(a.isVisible())return a;return a},ZS=(n,s)=>{const a=na(n,s);return!(a||!Nn(n.getNode()))||a};var er=function(n){return n[n.Backwards=-1]="Backwards",n[n.Forwards=1]="Forwards",n}(er||{});const ab=Pn,oa=ye,vM=$e,cb=Nn,xu=Fa,Qg=n=>gT(n)||(n=>!!mS(n)&&!$o(or(n.getElementsByTagName("*")),(s,a)=>s||pT(a),!1))(n),lb=gS,bM=(n,s)=>n.hasChildNodes()&&s<n.childNodes.length?n.childNodes[s]:null,YS=(n,s)=>{if(wu(n)){if(xu(s.previousSibling)&&!oa(s.previousSibling))return se.before(s);if(oa(s))return se(s,0)}if(gl(n)){if(xu(s.nextSibling)&&!oa(s.nextSibling))return se.after(s);if(oa(s))return se(s,s.data.length)}return gl(n)?cb(s)?se.before(s):se.after(s):se.before(s)},JS=(n,s,a)=>{let c,u,f,h;if(!vM(a)||!s)return null;if(s.isEqual(se.after(a))&&a.lastChild){if(h=se.after(a.lastChild),gl(n)&&xu(a.lastChild)&&vM(a.lastChild))return cb(a.lastChild)?se.before(a.lastChild):h}else h=s;const g=h.container();let _=h.offset();if(oa(g)){if(gl(n)&&_>0)return se(g,--_);if(wu(n)&&_<g.length)return se(g,++_);c=g}else{if(gl(n)&&_>0&&(u=bM(g,_-1),xu(u)))return!Qg(u)&&(f=Su(u,n,lb,u),f)?oa(f)?se(f,f.data.length):se.after(f):oa(u)?se(u,u.data.length):se.before(u);if(wu(n)&&_<g.childNodes.length&&(u=bM(g,_),xu(u)))return cb(u)?((n,s)=>{const a=s.nextSibling;return a&&xu(a)?oa(a)?se(a,0):se.before(a):JS(er.Forwards,se.after(s),n)})(a,u):!Qg(u)&&(f=Su(u,n,lb,u),f)?oa(f)?se(f,0):se.before(f):oa(u)?se(u,0):se.after(u);c=u||h.getNode()}if(c&&(wu(n)&&h.isAtEnd()||gl(n)&&h.isAtStart())&&(c=Su(c,n,ro,a,!0),lb(c,a)))return YS(n,c);u=c&&Su(c,n,lb,a);const b=eu(nt(((n,s)=>{const a=[];let c=n;for(;c&&c!==s;)a.push(c),c=c.parentNode;return a})(g,a),ab));return!b||u&&b.contains(u)?u?YS(n,u):null:(h=wu(n)?se.after(b):se.before(b),h)},bi=n=>({next:s=>JS(er.Forwards,s,n),prev:s=>JS(er.Backwards,s,n)}),_s=n=>se.isTextPosition(n)?0===n.offset():Fa(n.getNode()),wM=n=>{if(se.isTextPosition(n)){const s=n.container();return n.offset()===s.data.length}return Fa(n.getNode(!0))},ub=(n,s)=>!se.isTextPosition(n)&&!se.isTextPosition(s)&&n.getNode()===s.getNode(!0),wi=(n,s,a)=>{const c=bi(s);return I.from(n?c.next(a):c.prev(a))},Cc=(n,s,a)=>wi(n,s,a).bind(c=>na(a,c,s)&&((n,s,a)=>n?!ub(s,a)&&!(n=>!se.isTextPosition(n)&&Nn(n.getNode()))(s)&&wM(s)&&_s(a):!ub(a,s)&&_s(s)&&wM(a))(n,a,c)?wi(n,s,c):I.some(c)),CM=(n,s,a,c)=>Cc(n,s,a).bind(u=>c(u)?CM(n,s,u,c):I.some(u)),Pu=(n,s)=>{const a=n?s.firstChild:s.lastChild;return ye(a)?I.some(se(a,n?0:a.data.length)):a?Fa(a)?I.some(n?se.before(a):(n=>Nn(n)?se.before(n):se.after(n))(a)):((n,s,a)=>{const c=n?se.before(a):se.after(a);return wi(n,s,c)})(n,s,a):I.none()},vs=Ve(wi,!0),Us=Ve(wi,!1),Wr=Ve(Pu,!0),ra=Ve(Pu,!1),db="_mce_caret",sa=n=>$e(n)&&n.id===db,Sc=(n,s)=>{let a=s;for(;a&&a!==n;){if(sa(a))return a;a=a.parentNode}return null},XS=n=>Ke(n,"name"),SM=n=>de.isArray(n.start),fb=n=>!(!XS(n)&&ti(n.forward))||n.forward,xM=(n,s)=>($e(s)&&n.isBlock(s)&&!s.innerHTML&&(s.innerHTML='<br data-mce-bogus="1" />'),s),kM=(n,s)=>ra(n).fold(mn,a=>(s.setStart(a.container(),a.offset()),s.setEnd(a.container(),a.offset()),!0)),DM=(n,s,a)=>!(!(n=>!n.hasChildNodes())(s)||!Sc(n,s)||(((n,s)=>{var a;const u=(null!==(a=n.ownerDocument)&&void 0!==a?a:document).createTextNode(zo);n.appendChild(u),s.setStart(u,0),s.setEnd(u,0)})(s,a),0)),TM=(n,s,a,c)=>{const u=a[s?"start":"end"],f=n.getRoot();if(u){let h=f,g=u[0];for(let _=u.length-1;h&&_>=1;_--){const b=h.childNodes;if(DM(f,h,c))return!0;if(u[_]>b.length-1)return!!DM(f,h,c)||kM(h,c);h=b[u[_]]}ye(h)&&(g=Math.min(u[0],h.data.length)),$e(h)&&(g=Math.min(u[0],h.childNodes.length)),s?c.setStart(h,g):c.setEnd(h,g)}return!0},hb=n=>ye(n)&&n.data.length>0,Xg=(n,s,a)=>{const c=n.get(a.id+"_"+s),u=c?.parentNode,f=a.keep;if(c&&u){let h,g;if("start"===s?f?c.hasChildNodes()?(h=c.firstChild,g=1):hb(c.nextSibling)?(h=c.nextSibling,g=0):hb(c.previousSibling)?(h=c.previousSibling,g=c.previousSibling.data.length):(h=u,g=n.nodeIndex(c)+1):(h=u,g=n.nodeIndex(c)):f?c.hasChildNodes()?(h=c.firstChild,g=1):hb(c.previousSibling)?(h=c.previousSibling,g=c.previousSibling.data.length):(h=u,g=n.nodeIndex(c)):(h=u,g=n.nodeIndex(c)),!f){const _=c.previousSibling,b=c.nextSibling;let S;for(de.each(de.grep(c.childNodes),E=>{ye(E)&&(E.data=E.data.replace(/\uFEFF/g,""))});S=n.get(a.id+"_"+s);)n.remove(S,!0);if(ye(b)&&ye(_)&&!It.browser.isOpera()){const E=_.data.length;_.appendData(b.data),n.remove(b),h=_,g=E}}return I.some(se(h,g))}return I.none()},t_=(n,s,a)=>((n,s,a=!1)=>2===s?nV(Bs,a,n):3===s?(n=>{const s=n.getRng();return{start:J3(n.dom.getRoot(),se.fromRangeStart(s)),end:J3(n.dom.getRoot(),se.fromRangeEnd(s)),forward:n.isForward()}})(n):s?(n=>({rng:n.getRng(),forward:n.isForward()}))(n):jy(n,!1))(n,s,a),IM=(n,s)=>{((n,s)=>{const a=n.dom;if(s){if(SM(s))return((n,s)=>{const a=n.createRng();return TM(n,!0,s,a)&&TM(n,!1,s,a)?I.some({range:a,forward:fb(s)}):I.none()})(a,s);if((n=>Ye(n.start))(s))return((n,s)=>{const a=I.from(ET(n.getRoot(),s.start)),c=I.from(ET(n.getRoot(),s.end));return rr(a,c,(u,f)=>{const h=n.createRng();return h.setStart(u.container(),u.offset()),h.setEnd(f.container(),f.offset()),{range:h,forward:fb(s)}})})(a,s);if((n=>Ke(n,"id"))(s))return((n,s)=>{const a=Xg(n,"start",s),c=Xg(n,"end",s);return rr(a,c.or(a),(u,f)=>{const h=n.createRng();return h.setStart(xM(n,u.container()),u.offset()),h.setEnd(xM(n,f.container()),f.offset()),{range:h,forward:fb(s)}})})(a,s);if(XS(s))return((n,s)=>I.from(n.select(s.name)[s.index]).map(a=>{const c=n.createRng();return c.selectNode(a),{range:c,forward:!0}}))(a,s);if((n=>Ke(n,"rng"))(s))return I.some({range:s.rng,forward:fb(s)})}return I.none()})(n,s).each(({range:a,forward:c})=>{n.setRng(a,c)})},js=n=>$e(n)&&"SPAN"===n.tagName&&"bookmark"===n.getAttribute("data-mce-type"),pb=(n=>s=>n===s)(Jn),Xh=n=>""!==n&&-1!==" \f\n\r\t\v".indexOf(n),e1=n=>!Xh(n)&&!pb(n)&&!ao(n),mb=n=>{const s=[];if(n)for(let a=0;a<n.rangeCount;a++)s.push(n.getRangeAt(a));return s},n1=(n,s)=>{const a=(n=>Wt(n,"td[data-mce-selected],th[data-mce-selected]"))(s);return a.length>0?a:(n=>nt((n=>Uo(n,s=>{const a=Fh(s);return a?[j_fromDom(a)]:[]}))(n),hu))(n)},qd=n=>n1(mb(n.selection.getSel()),j_fromDom(n.getBody())),n_=(n,s)=>ds(n,"table",s),OM=n=>og(n).fold(Ae([n]),s=>[n].concat(OM(s))),_b=n=>ry(n).fold(Ae([n]),s=>"br"===Ft(s)?Zi(s).map(a=>[n].concat(_b(a))).getOr([]):[n].concat(_b(s))),AM=(n,s)=>rr((n=>{const s=n.startContainer,a=n.startOffset;return ye(s)?0===a?I.some(j_fromDom(s)):I.none():I.from(s.childNodes[a]).map(j_fromDom)})(s),(n=>{const s=n.endContainer,a=n.endOffset;return ye(s)?a===s.data.length?I.some(j_fromDom(s)):I.none():I.from(s.childNodes[a-1]).map(j_fromDom)})(s),(a,c)=>{const u=vn(OM(n),Ve(mt,a)),f=vn(_b(n),Ve(mt,c));return u.isSome()&&f.isSome()}).getOr(!1),o1=(n,s,a,c)=>{const u=a,f=new io(a,u),h=Ns(n.schema.getMoveCaretBeforeOnEnterElements(),(_,b)=>!zt(["td","th","table"],b.toLowerCase()));let g=a;do{if(ye(g)&&0!==de.trim(g.data).length)return void(c?s.setStart(g,0):s.setEnd(g,g.data.length));if(h[g.nodeName])return void(c?s.setStartBefore(g):"BR"===g.nodeName?s.setEndBefore(g):s.setEndAfter(g))}while(g=c?f.next():f.prev());"BODY"===u.nodeName&&(c?s.setStart(u,0):s.setEnd(u,u.childNodes.length))},r1=n=>{const s=n.selection.getSel();return Oe(s)&&s.rangeCount>0},NM=(n,s)=>{const a=qd(n);a.length>0?ue(a,c=>{const u=c.dom,f=n.dom.createRng();f.setStartBefore(u),f.setEndAfter(u),s(f,!0)}):s(n.selection.getRng(),!1)},s1=(n,s,a)=>{const c=jy(n,s);a(c),n.moveToBookmark(c)},ep=n=>ni(n?.nodeType),RM=n=>$e(n)&&!js(n)&&!sa(n)&&!Po(n),k=(n,s,a)=>{const{selection:c,dom:u}=n,f=c.getNode(),h=Pn(f);s1(c,!0,()=>{s()}),h&&Pn(f)&&u.isChildOf(f,n.getBody())?n.selection.select(f):a(c.getStart())&&FM(u,c)},FM=(n,s)=>{var a,c;const u=s.getRng(),{startContainer:f,startOffset:h}=u;if(!((n,s)=>{if(RM(s)&&!/^(TD|TH)$/.test(s.nodeName)){const a=n.getAttrib(s,"data-mce-selected"),c=parseInt(a,10);return!isNaN(c)&&c>0}return!1})(n,s.getNode())&&$e(f)){const _=f.childNodes,b=n.getRoot();let S;if(h<_.length){const E=_[h];S=new io(E,null!==(a=n.getParent(E,n.isBlock))&&void 0!==a?a:b)}else{const E=_[_.length-1];S=new io(E,null!==(c=n.getParent(E,n.isBlock))&&void 0!==c?c:b),S.next(!0)}for(let E=S.current();E;E=S.next()){if("false"===n.getContentEditable(E))return;if(ye(E)&&!np(E))return u.setStart(E,0),void s.setRng(u)}}},B=(n,s,a)=>{if(n){const c=s?"nextSibling":"previousSibling";for(n=a?n:n[c];n;n=n[c])if($e(n)||!np(n))return n}},vb=(n,s)=>!!n.getTextBlockElements()[s.nodeName.toLowerCase()]||cl(n,s),tp=(n,s,a)=>n.schema.isValidChild(s,a),np=(n,s=!1)=>{if(Oe(n)&&ye(n)){const a=s?n.data.replace(/ /g,"\xa0"):n.data;return fs(a)}return!1},rp=(n,s)=>{const a=n.dom;return RM(s)&&"false"===a.getContentEditable(s)&&((n,s)=>{const a="[data-mce-cef-wrappable]",c=WT(n),u=dd(c)?a:`${a},${c}`;return li(j_fromDom(s),u)})(n,s)&&0===a.select('[contenteditable="true"]',s).length},yl=(n,s)=>Zt(n)?n(s):(Oe(s)&&(n=n.replace(/%(\w+)/g,(a,c)=>s[c]||a)),n),o_=(n,s)=>(s=""+((s=s||"").nodeName||s),(n=""+((n=n||"").nodeName||n)).toLowerCase()===s.toLowerCase()),r_=(n,s)=>{if(mo(n))return null;{let a=String(n);return("color"===s||"backgroundColor"===s)&&(a=Ed(a)),"fontWeight"===s&&700===n&&(a="bold"),"fontFamily"===s&&(a=a.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),a}},sp=(n,s,a)=>{const c=n.getStyle(s,a);return r_(c,a)},c1=(n,s)=>{let a;return n.getParent(s,c=>!!$e(c)&&(a=n.getStyle(c,"text-decoration"),!!a&&"none"!==a)),a},ip=(n,s,a)=>n.getParents(s,a,n.getRoot()),l1=(n,s,a)=>{const c=n.formatter.get(s);return Oe(c)&&Pt(c,a)},La=n=>Fn(n,"block"),Ci=n=>Fn(n,"selector"),Ro=n=>Fn(n,"inline"),yb=n=>Ci(n)&&!1!==n.expand&&!Ro(n),BM=n=>(n=>{const s=[];let a=n;for(;a;){if(ye(a)&&a.data!==zo||a.childNodes.length>1)return[];$e(a)&&s.push(a),a=a.firstChild}return s})(n).length>0,ys=n=>sa(n.dom)&&BM(n.dom),ap=js,VM=ip,i$=np,u1=vb,$M=n=>Nn(n)&&n.getAttribute("data-mce-bogus")&&!n.nextSibling,UM=(n,s)=>{let a=s;for(;a;){if($e(a)&&n.getContentEditable(a))return"false"===n.getContentEditable(a)?a:s;a=a.parentNode}return s},jM=(n,s,a,c)=>{const u=s.data;if(n){for(let f=a;f>0;f--)if(c(u.charAt(f-1)))return f}else for(let f=a;f<u.length;f++)if(c(u.charAt(f)))return f;return-1},a$=(n,s,a)=>jM(n,s,a,c=>pb(c)||Xh(c)),HM=(n,s,a)=>jM(n,s,a,e1),zM=(n,s,a,c,u,f)=>{let h;const g=n.getParent(a,n.isBlock)||s,_=(S,E,T)=>{const N=dl(n);return I.from((u?N.backwards:N.forwards)(S,E,(F,U)=>ap(F.parentNode)?-1:(h=F,T(u,F,U)),g))};return _(a,c,a$).bind(S=>f?_(S.container,S.offset+(u?-1:0),HM):I.some(S)).orThunk(()=>h?I.some({container:h,offset:u?0:h.length}):I.none())},WM=(n,s,a,c,u)=>{const f=c[u];ye(c)&&dd(c.data)&&f&&(c=f);const h=VM(n,c);for(let g=0;g<h.length;g++)for(let _=0;_<s.length;_++){const b=s[_];if((!Oe(b.collapsed)||b.collapsed===a.collapsed)&&Ci(b)&&n.is(h[g],b.selector))return h[g]}return c},bb=(n,s,a,c)=>{var u;let f=a;const h=n.getRoot(),g=s[0];if(La(g)&&(f=g.wrapper?null:n.getParent(a,g.block,h)),!f){const _=null!==(u=n.getParent(a,"LI,TD,TH,SUMMARY"))&&void 0!==u?u:h;f=n.getParent(ye(a)?a.parentNode:a,b=>b!==h&&u1(n.schema,b),_)}if(f&&La(g)&&g.wrapper&&(f=VM(n,f,"ul,ol").reverse()[0]||f),!f)for(f=a;f&&f[c]&&!n.isBlock(f[c])&&(f=f[c],!o_(f,"br")););return f||a},qM=(n,s,a,c)=>{const u=a.parentNode;return!Oe(a[c])&&(!(u!==s&&!mo(u)&&!n.isBlock(u))||qM(n,s,u,c))},wb=(n,s,a,c,u)=>{let f=a;const h=u?"previousSibling":"nextSibling",g=n.getRoot();if(ye(a)&&!i$(a)&&(u?c>0:c<a.data.length))return a;for(;f;){if(!s[0].block_expand&&n.isBlock(f))return f;for(let _=f[h];_;_=_[h]){const b=ye(_)&&!qM(n,g,_,h);if(!ap(_)&&!$M(_)&&!i$(_,b))return f}if(f===g||f.parentNode===g){a=f;break}f=f.parentNode}return a},GM=n=>ap(n.parentNode)||ap(n),Gd=(n,s,a,c=!1)=>{let{startContainer:u,startOffset:f,endContainer:h,endOffset:g}=s;const _=a[0];return $e(u)&&u.hasChildNodes()&&(u=_u(u,f),ye(u)&&(f=0)),$e(h)&&h.hasChildNodes()&&(h=_u(h,s.collapsed?g:g-1),ye(h)&&(g=h.data.length)),u=UM(n,u),h=UM(n,h),GM(u)&&(u=ap(u)?u:u.parentNode,u=s.collapsed?u.previousSibling||u:u.nextSibling||u,ye(u)&&(f=s.collapsed?u.length:0)),GM(h)&&(h=ap(h)?h:h.parentNode,h=s.collapsed?h.nextSibling||h:h.previousSibling||h,ye(h)&&(g=s.collapsed?0:h.length)),s.collapsed&&(zM(n,n.getRoot(),u,f,!0,c).each(({container:E,offset:T})=>{u=E,f=T}),zM(n,n.getRoot(),h,g,!1,c).each(({container:E,offset:T})=>{h=E,g=T})),(Ro(_)||_.block_expand)&&((!Ro(_)||!ye(u)||0===f)&&(u=wb(n,a,u,f,!0)),(!Ro(_)||!ye(h)||g===h.data.length)&&(h=wb(n,a,h,g,!1))),yb(_)&&(u=WM(n,a,s,u,"previousSibling"),h=WM(n,a,s,h,"nextSibling")),(La(_)||Ci(_))&&(u=bb(n,a,u,"previousSibling"),h=bb(n,a,h,"nextSibling"),La(_)&&(n.isBlock(u)||(u=wb(n,a,u,f,!0),ye(u)&&(f=0)),n.isBlock(h)||(h=wb(n,a,h,g,!1),ye(h)&&(g=h.data.length)))),$e(u)&&u.parentNode&&(f=n.nodeIndex(u),u=u.parentNode),$e(h)&&h.parentNode&&(g=n.nodeIndex(h)+1,h=h.parentNode),{startContainer:u,startOffset:f,endContainer:h,endOffset:g}},s_=(n,s,a)=>{var c;const u=s.startOffset,f=_u(s.startContainer,u),h=s.endOffset,g=_u(s.endContainer,h-1),_=U=>{const W=U[0];ye(W)&&W===f&&u>=W.data.length&&U.splice(0,1);const Z=U[U.length-1];return 0===h&&U.length>0&&Z===g&&ye(Z)&&U.splice(U.length-1,1),U},b=(U,W,Z)=>{const K=[];for(;U&&U!==Z;U=U[W])K.push(U);return K},S=(U,W)=>n.getParent(U,Z=>Z.parentNode===W,W),E=(U,W,Z)=>{const K=Z?"nextSibling":"previousSibling";for(let J=U,he=J.parentNode;J&&J!==W;J=he){he=J.parentNode;const we=b(J===U?J:J[K],K);we.length&&(Z||we.reverse(),a(_(we)))}};if(f===g)return a(_([f]));const T=null!==(c=n.findCommonAncestor(f,g))&&void 0!==c?c:n.getRoot();if(n.isChildOf(f,g))return E(f,T,!0);if(n.isChildOf(g,f))return E(g,T);const N=S(f,T)||f,V=S(g,T)||g;E(f,N,!0);const F=b(N===f?N:N.nextSibling,"nextSibling",V===g?V.nextSibling:V);F.length&&a(_(F)),E(g,V)},xc=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],ZM=(n,s,a,c,u,f)=>{const{uid:h=s,...g}=a;Gi(n,Ey()),Oo(n,`${Dg()}`,h),Oo(n,`${Id()}`,c);const{attributes:_={},classes:b=[]}=u(h,g);if(qi(n,_),((n,s)=>{ue(s,a=>{Gi(n,a)})})(n,b),f){b.length>0&&Oo(n,`${Dy()}`,b.join(","));const S=zn(_);S.length>0&&Oo(n,`${Ty()}`,S.join(","))}},f1=(n,s,a,c,u)=>{const f=j_fromTag("span",n);return ZM(f,s,a,c,u,!1),f},Cb=(n,s,a,c,u,f)=>{const h=[],g=f1(n.getDoc(),a,f,c,u),_=mi(),b=()=>{_.clear()},E=V=>{ue(V,T)},T=V=>{switch(((n,s,a,c)=>je(s).fold(()=>"skipping",u=>"br"===c||(n=>Nr(n)&&Ig(n)===zo)(s)?"valid":(n=>Ar(n)&&Xc(n,Ey()))(s)?"existing":sa(s.dom)?"caret":Pt(xc,f=>li(s,f))?"valid-block":tp(n,a,c)&&tp(n,Ft(u),a)?"valid":"invalid-child"))(n,V,"span",Ft(V))){case"invalid-child":{b();const U=sr(V);E(U),b();break}case"valid-block":b(),ZM(V,a,f,c,u,!0);break;case"valid":{const U=_.get().getOrThunk(()=>{const V=ul(g);return h.push(V),_.set(V),V});wd(V,U);break}}};return s_(n.dom,s,V=>{b(),(V=>{const F=Xe(V,j_fromDom);E(F)})(V)}),h},l$=n=>{const s=(()=>{const n={};return{register:(u,f)=>{n[u]={name:u,settings:f}},lookup:u=>Nt(n,u).map(f=>f.settings),getNames:()=>zn(n)}})();((n,s)=>{const a=Id(),c=f=>I.from(f.attr(a)).bind(s.lookup),u=f=>{var h,g;f.attr(Dg(),null),f.attr(Id(),null),f.attr(ky(),null);const _=I.from(f.attr(Ty())).map(T=>T.split(",")).getOr([]),b=I.from(f.attr(Dy())).map(T=>T.split(",")).getOr([]);ue(_,T=>f.attr(T,null));const S=null!==(g=null===(h=f.attr("class"))||void 0===h?void 0:h.split(" "))&&void 0!==g?g:[],E=Zc(S,[Ey()].concat(b));f.attr("class",E.length>0?E.join(" "):null),f.attr(Dy(),null),f.attr(Ty(),null)};n.serializer.addTempAttr(ky()),n.serializer.addAttributeFilter(a,f=>{for(const h of f)c(h).each(g=>{!1===g.persistent&&("span"===h.name?h.unwrap():u(h))})})})(n,s);const a=((n,s)=>{const a=No({}),c=()=>({listeners:[],previous:mi()}),u=(E,T)=>{f(E,N=>(T(N),N))},f=(E,T)=>{const N=a.get(),F=T(Nt(N,E).getOrThunk(c));N[E]=F,a.set(N)},_=(E,T)=>{ue(iT(n,E),N=>{T?Oo(N,ky(),"true"):Co(N,ky())})},b=kg(()=>{const E=ri(s.getNames());ue(E,T=>{f(T,N=>{const V=N.previous.get();return T3(n,I.some(T)).fold(()=>{V.each(F=>{(E=>{u(E,T=>{ue(T.listeners,N=>N(!1,E))})})(T),N.previous.clear(),_(F,!1)})},({uid:F,name:U,elements:W})=>{Ta(V,F)||(V.each(Z=>_(Z,!1)),((E,T,N)=>{u(E,V=>{ue(V.listeners,F=>F(!0,E,{uid:T,nodes:Xe(N,U=>U.dom)}))})})(U,F,W),N.previous.set(F),_(F,!0))}),{previous:N.previous,listeners:N.listeners}})})},30);return n.on("remove",()=>{b.cancel()}),n.on("NodeChange",()=>{b.throttle()}),{addListener:(E,T)=>{f(E,N=>({previous:N.previous,listeners:N.listeners.concat([T])}))}}})(n,s),c=pr("span"),u=f=>{ue(f,h=>{c(h)?G(h):(n=>{uh(n,Ey()),Co(n,`${Dg()}`),Co(n,`${Id()}`),Co(n,`${ky()}`);const s=Ma(n,`${Ty()}`).map(c=>c.split(",")).getOr([]),a=Ma(n,`${Dy()}`).map(c=>c.split(",")).getOr([]);ue(s,c=>Co(n,c)),((n,s)=>{ue(s,a=>{uh(n,a)})})(n,a),Co(n,`${Dy()}`),Co(n,`${Ty()}`)})(h)})};return{register:(f,h)=>{s.register(f,h)},annotate:(f,h)=>{s.lookup(f).each(g=>{((n,s,a,c)=>{n.undoManager.transact(()=>{const u=n.selection,f=u.getRng(),h=qd(n).length>0,g=_c("mce-annotation");if(f.collapsed&&!h&&((n,s)=>{const a=Gd(n.dom,s,[{inline:"span"}]);s.setStart(a.startContainer,a.startOffset),s.setEnd(a.endContainer,a.endOffset),n.selection.setRng(s)})(n,f),u.getRng().collapsed&&!h){const _=f1(n.getDoc(),g,c,s,a.decorate);gt(_,Jn),u.getRng().insertNode(_.dom),u.select(_.dom)}else s1(u,!1,()=>{NM(n,_=>{Cb(n,_,g,s,a.decorate,c)})})})})(n,f,g,h)})},annotationChanged:(f,h)=>{a.addListener(f,h)},remove:f=>{T3(n,I.some(f)).each(({elements:h})=>{const g=n.selection.getBookmark();u(h),n.selection.moveToBookmark(g)})},removeAll:f=>{const h=n.selection.getBookmark();Ut(Xo(n,f),(g,_)=>{u(g)}),n.selection.moveToBookmark(h)},getAll:f=>{const h=Xo(n,f);return Da(h,g=>Xe(g,_=>_.dom))}}},cp=n=>({getBookmark:Ve(t_,n),moveToBookmark:Ve(IM,n)});cp.isBookmarkNode=js;const p1=(n,s,a)=>!a.collapsed&&Pt(a.getClientRects(),c=>((n,s,a)=>s>=n.left&&s<=n.right&&a>=n.top&&a<=n.bottom)(c,n,s)),eI=(n,s,a)=>{n.dispatch(s,a)},tI=(n,s,a,c)=>{n.dispatch("FormatApply",{format:s,node:a,vars:c})},_1=(n,s,a,c)=>{n.dispatch("FormatRemove",{format:s,node:a,vars:c})},v1=(n,s)=>n.dispatch("SetContent",s),lp=(n,s)=>n.dispatch("GetContent",s),y1=(n,s)=>{n.dispatch("AutocompleterUpdateActiveRange",s)},g$=(n,s)=>n.dispatch("PastePlainTextToggle",{state:s}),Fe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:n=>n.shiftKey||n.ctrlKey||n.altKey||Fe.metaKeyPressed(n),metaKeyPressed:n=>It.os.isMacOS()||It.os.isiOS()?n.metaKey:n.ctrlKey&&!n.altKey},Kd="data-mce-selected",oI=Math.abs,Pb=Math.round,b1={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},rI=(n,s)=>{const a=s.dom,c=s.getDoc(),u=document,f=s.getBody();let h,g,_,b,S,E,T,F,U,W,Z,K,J,he,we;const ke=De=>Oe(De)&&(l3(De)||a.is(De,"figure.image")),ge=De=>al(De)||a.hasClass(De,"mce-preview-object"),ae=De=>{const dt=De.target;((De,dt)=>{if((n=>"longpress"===n.type||0===n.type.indexOf("touch"))(De)){const _t=De.touches[0];return ke(De.target)&&!p1(_t.clientX,_t.clientY,dt)}return ke(De.target)&&!p1(De.clientX,De.clientY,dt)})(De,s.selection.getRng())&&!De.isDefaultPrevented()&&s.selection.select(dt)},Ie=De=>a.hasClass(De,"mce-preview-object")&&Oe(De.firstElementChild)?[De,De.firstElementChild]:a.is(De,"figure.image")?[De.querySelector("img")]:[De],qe=De=>{const dt=Yy(s);return!(!dt||"false"===De.getAttribute("data-mce-resize")||De===s.getBody())&&(a.hasClass(De,"mce-preview-object")&&Oe(De.firstElementChild)?li(j_fromDom(De.firstElementChild),dt):li(j_fromDom(De),dt))},bt=(De,dt,_t)=>{if(Oe(_t)){const uo=Ie(De);ue(uo,Gt=>{Gt.style[dt]||!s.schema.isValid(Gt.nodeName.toLowerCase(),dt)?a.setStyle(Gt,dt,_t):a.setAttrib(Gt,dt,""+_t)})}},Kt=(De,dt,_t)=>{bt(De,"width",dt),bt(De,"height",_t)},en=De=>{let dt,_t,uo,Gt,fo;dt=De.screenX-E,_t=De.screenY-T,K=dt*b[2]+F,J=_t*b[3]+U,K=K<5?5:K,J=J<5?5:J,uo=(ke(h)||ge(h))&&!1!==UT(s)?!Fe.modifierPressed(De):Fe.modifierPressed(De),uo&&(oI(dt)>oI(_t)?(J=Pb(K*W),K=Pb(J/W)):(K=Pb(J/W),J=Pb(K*W))),Kt(g,K,J),Gt=b.startPos.x+dt,fo=b.startPos.y+_t,Gt=Gt>0?Gt:0,fo=fo>0?fo:0,a.setStyles(_,{left:Gt,top:fo,display:"block"}),_.innerHTML=K+" &times; "+J,b[2]<0&&g.clientWidth<=K&&a.setStyle(g,"left",void 0+(F-K)),b[3]<0&&g.clientHeight<=J&&a.setStyle(g,"top",void 0+(U-J)),dt=f.scrollWidth-he,_t=f.scrollHeight-we,dt+_t!==0&&a.setStyles(_,{left:Gt-dt,top:fo-_t}),Z||(((n,s,a,c,u)=>{n.dispatch("ObjectResizeStart",{target:s,width:a,height:c,origin:u})})(s,h,F,U,"corner-"+b.name),Z=!0)},ln=()=>{const De=Z;Z=!1,De&&(bt(h,"width",K),bt(h,"height",J)),a.unbind(c,"mousemove",en),a.unbind(c,"mouseup",ln),u!==c&&(a.unbind(u,"mousemove",en),a.unbind(u,"mouseup",ln)),a.remove(g),a.remove(_),a.remove(S),Ko(h),De&&(((n,s,a,c,u)=>{n.dispatch("ObjectResized",{target:s,width:a,height:c,origin:u})})(s,h,K,J,"corner-"+b.name),a.setAttrib(h,"style",a.getAttrib(h,"style"))),s.nodeChanged()},Ko=De=>{Me();const dt=a.getPos(De,f),_t=dt.x,uo=dt.y,Gt=De.getBoundingClientRect(),fo=Gt.width||Gt.right-Gt.left,Oi=Gt.height||Gt.bottom-Gt.top;h!==De&&(xe(),h=De,K=J=0);const Ja=s.dispatch("ObjectSelected",{target:De});qe(De)&&!Ja.isDefaultPrevented()?Ut(b1,(kr,Ts)=>{let Ms=a.get("mceResizeHandle"+Ts);Ms&&a.remove(Ms),Ms=a.add(f,"div",{id:"mceResizeHandle"+Ts,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Ts+"-resize; margin:0; padding:0"}),a.bind(Ms,"mousedown",Is=>{Is.stopImmediatePropagation(),Is.preventDefault(),(Is=>{const Ge=Ie(h)[0];E=Is.screenX,T=Is.screenY,F=Ge.clientWidth,U=Ge.clientHeight,W=U/F,b=kr,b.name=Ts,b.startPos={x:fo*kr[0]+_t,y:Oi*kr[1]+uo},he=f.scrollWidth,we=f.scrollHeight,S=a.add(f,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),a.setStyles(S,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=((De,dt)=>{if(ge(dt))return De.create("img",{src:It.transparentSrc});if(Xr(dt)){const uo=vo(b.name,"n")?go:cs,Gt=dt.cloneNode(!0);return uo(De.select("tr",Gt)).each(fo=>{const Oi=De.select("td,th",fo);De.setStyle(fo,"height",null),ue(Oi,Ja=>De.setStyle(Ja,"height",null))}),Gt}return dt.cloneNode(!0)})(a,h),a.addClass(g,"mce-clonedresizable"),a.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",a.setStyles(g,{left:_t,top:uo,margin:0}),Kt(g,fo,Oi),g.removeAttribute(Kd),f.appendChild(g),a.bind(c,"mousemove",en),a.bind(c,"mouseup",ln),u!==c&&(a.bind(u,"mousemove",en),a.bind(u,"mouseup",ln)),_=a.add(f,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},F+" &times; "+U)})(Is)}),kr.elm=Ms,a.setStyles(Ms,{left:fo*kr[0]+_t-Ms.offsetWidth/2,top:Oi*kr[1]+uo-Ms.offsetHeight/2})}):xe(!1)},on=Eg(Ko,0),xe=(De=!0)=>{on.cancel(),Me(),h&&De&&h.removeAttribute(Kd),Ut(b1,(dt,_t)=>{const uo=a.get("mceResizeHandle"+_t);uo&&(a.unbind(uo),a.remove(uo))})},He=(De,dt)=>a.isChildOf(De,dt),Bt=De=>{if(Z||s.removed||s.composing)return;const dt="mousedown"===De.type?De.target:n.getNode(),_t=gr(j_fromDom(dt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(Gt=>Gt.dom).filter(Gt=>a.isEditable(Gt.parentElement)||"IMG"===Gt.nodeName&&a.isEditable(Gt)).getOrUndefined(),uo=Oe(_t)?a.getAttrib(_t,Kd,"1"):"1";if(ue(a.select(`img[${Kd}],hr[${Kd}]`),Gt=>{Gt.removeAttribute(Kd)}),Oe(_t)&&He(_t,f)&&s.hasFocus()){Ze();const Gt=n.getStart(!0);if(He(Gt,_t)&&He(n.getEnd(!0),_t))return a.setAttrib(_t,Kd,uo),void on.throttle(_t)}xe()},Me=()=>{Ut(b1,De=>{De.elm&&(a.unbind(De.elm),delete De.elm)})},Ze=()=>{try{s.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return s.on("init",()=>{Ze(),s.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Bt),s.on("keyup compositionend",De=>{h&&"TABLE"===h.nodeName&&Bt(De)}),s.on("hide blur",xe),s.on("contextmenu longpress",ae,!0)}),s.on("remove",Me),{isResizable:qe,showResizeRect:Ko,hideResizeRect:xe,updateResizeRect:Bt,destroy:()=>{on.cancel(),h=g=S=null}}},Eu=(n,s,a)=>{const c=n.document.createRange();return((n,s)=>{s.fold(a=>{n.setStartBefore(a.dom)},(a,c)=>{n.setStart(a.dom,c)},a=>{n.setStartAfter(a.dom)})})(c,s),((n,s)=>{s.fold(a=>{n.setEndBefore(a.dom)},(a,c)=>{n.setEnd(a.dom,c)},a=>{n.setEndAfter(a.dom)})})(c,a),c},w1=(n,s,a,c,u)=>{const f=n.document.createRange();return f.setStart(s.dom,a),f.setEnd(c.dom,u),f},Zd=vi_generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Le=(n,s,a)=>s(j_fromDom(a.startContainer),a.startOffset,j_fromDom(a.endContainer),a.endOffset),aI_create=(n,s,a,c)=>({start:n,soffset:s,finish:a,foffset:c}),w$=document.caretPositionFromPoint?(n,s,a)=>{var c,u;return I.from(null===(u=(c=n.dom).caretPositionFromPoint)||void 0===u?void 0:u.call(c,s,a)).bind(f=>{if(null===f.offsetNode)return I.none();const h=n.dom.createRange();return h.setStart(f.offsetNode,f.offset),h.collapse(),I.some(h)})}:document.caretRangeFromPoint?(n,s,a)=>{var c,u;return I.from(null===(u=(c=n.dom).caretRangeFromPoint)||void 0===u?void 0:u.call(c,s,a))}:I.none,Eb=vi_generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),bs={before:Eb.before,on:Eb.on,after:Eb.after,cata:(n,s,a,c)=>n.fold(s,a,c),getStart:n=>n.fold(pe,pe,pe)},c_=vi_generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),up={domRange:c_.domRange,relative:c_.relative,exact:c_.exact,exactFromRange:n=>c_.exact(n.start,n.soffset,n.finish,n.foffset),getWin:n=>{const s=(n=>n.match({domRange:s=>j_fromDom(s.startContainer),relative:(s,a)=>bs.getStart(s),exact:(s,a,c,u)=>s}))(n);return el(s)},range:aI_create},dp=(n,s)=>{const a=Ft(n);return"input"===a?bs.after(n):zt(["br","img"],a)?0===s?bs.before(n):bs.after(n):bs.on(n,s)},E$=(n,s)=>{const a=n.fold(bs.before,dp,bs.after),c=s.fold(bs.before,dp,bs.after);return up.relative(a,c)},l_=(n,s,a,c)=>{const u=dp(n,s),f=dp(a,c);return up.relative(u,f)},Db=(n,s)=>{const c=(s||document).createDocumentFragment();return ue(n,u=>{c.appendChild(u.dom)}),j_fromDom(c)},k$=n=>{const s=up.getWin(n).dom,a=(u,f,h,g)=>w1(s,u,f,h,g),c=(n=>n.match({domRange:s=>{const a=j_fromDom(s.startContainer),c=j_fromDom(s.endContainer);return l_(a,s.startOffset,c,s.endOffset)},relative:E$,exact:l_}))(n);return((n,s)=>{const a=((n,s)=>s.match({domRange:a=>({ltr:Ae(a),rtl:I.none}),relative:(a,c)=>({ltr:$i(()=>Eu(n,a,c)),rtl:$i(()=>I.some(Eu(n,c,a)))}),exact:(a,c,u,f)=>({ltr:$i(()=>w1(n,a,c,u,f)),rtl:$i(()=>I.some(w1(n,u,f,a,c)))})}))(n,s);return((n,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(u=>!1===u.collapsed).map(u=>Zd.rtl(j_fromDom(u.endContainer),u.endOffset,j_fromDom(u.startContainer),u.startOffset)).getOrThunk(()=>Le(0,Zd.ltr,a)):Le(0,Zd.ltr,a)})(0,a)})(s,c).match({ltr:a,rtl:a})},fp=(n,s,a)=>((n,s,a)=>((n,s,a)=>{const c=j_fromDom(n.document);return w$(c,s,a).map(u=>aI_create(j_fromDom(u.startContainer),u.startOffset,j_fromDom(u.endContainer),u.endOffset))})(n,s,a))(el(j_fromDom(a)).dom,n,s).map(u=>{const f=a.createRange();return f.setStart(u.start.dom,u.soffset),f.setEnd(u.finish.dom,u.foffset),f}).getOrUndefined(),x1=(n,s)=>Oe(n)&&Oe(s)&&n.startContainer===s.startContainer&&n.startOffset===s.startOffset&&n.endContainer===s.endContainer&&n.endOffset===s.endOffset,gI=(n,s,a)=>null!==((n,s,a)=>{let c=n;for(;c&&c!==s;){if(a(c))return c;c=c.parentNode}return null})(n,s,a),M$=(n,s,a)=>gI(n,s,c=>c.nodeName===a),I$=(n,s)=>Vs(n)&&!gI(n,s,sa),_I=(n,s,a)=>{const c=s.parentNode;if(c){const u=new io(s,n.getParent(c,n.isBlock)||n.getRoot());let f;for(;f=u[a?"prev":"next"]();)if(Nn(f))return!0}return!1},Tb=(n,s,a,c,u)=>{const f=n.getRoot(),h=n.schema.getNonEmptyElements(),g=u.parentNode;let _,b;if(!g)return I.none();const S=n.getParent(g,n.isBlock)||f;if(c&&Nn(u)&&s&&n.isEmpty(S))return I.some(se(g,n.nodeIndex(u)));const E=new io(u,S);for(;b=E[c?"prev":"next"]();){if("false"===n.getContentEditableParent(b)||I$(b,f))return I.none();if(ye(b)&&b.data.length>0)return M$(b,f,"A")?I.none():I.some(se(b,c?b.data.length:0));if(n.isBlock(b)||h[b.nodeName.toLowerCase()])return I.none();_=b}return pc(_)?I.none():a&&_?I.some(se(_,0)):I.none()},kn=(n,s,a,c)=>{const u=n.getRoot();let f,h=!1,g=a?c.startContainer:c.endContainer,_=a?c.startOffset:c.endOffset;const b=$e(g)&&_===g.childNodes.length,S=n.schema.getNonEmptyElements();let E=a;if(Vs(g))return I.none();if($e(g)&&_>g.childNodes.length-1&&(E=!1),yh(g)&&(g=u,_=0),g===u){if(E&&(f=g.childNodes[_>0?_-1:0],f&&(Vs(f)||S[f.nodeName]||Xr(f))))return I.none();if(g.hasChildNodes()){if(_=Math.min(!E&&_>0?_-1:_,g.childNodes.length-1),g=g.childNodes[_],_=ye(g)&&b?g.data.length:0,!s&&g===u.lastChild&&Xr(g)||((n,s)=>{let a=s;for(;a&&a!==n;){if(Pn(a))return!0;a=a.parentNode}return!1})(u,g)||Vs(g)||ND(g))return I.none();if(g.hasChildNodes()&&!Xr(g)){f=g;const T=new io(g,u);do{if(Pn(f)||Vs(f)){h=!1;break}if(ye(f)&&f.data.length>0){_=E?0:f.data.length,g=f,h=!0;break}if(S[f.nodeName.toLowerCase()]&&!f7(f)){_=n.nodeIndex(f),g=f.parentNode,E||_++,h=!0;break}}while(f=E?T.next():T.prev())}}}return s&&(ye(g)&&0===_&&Tb(n,b,s,!0,g).each(T=>{g=T.container(),_=T.offset(),h=!0}),$e(g)&&(f=g.childNodes[_],f||(f=g.childNodes[_-1]),f&&Nn(f)&&!((n,s)=>{var a;return"A"===(null===(a=n.previousSibling)||void 0===a?void 0:a.nodeName)})(f)&&!_I(n,f,!1)&&!_I(n,f,!0)&&Tb(n,b,s,!0,f).each(T=>{g=T.container(),_=T.offset(),h=!0}))),E&&!s&&ye(g)&&_===g.data.length&&Tb(n,b,s,!1,g).each(T=>{g=T.container(),_=T.offset(),h=!0}),h&&g?I.some(se(g,_)):I.none()},Mb=(n,s)=>{const a=s.collapsed,c=s.cloneRange(),u=se.fromRangeStart(s);return kn(n,a,!0,c).each(f=>{(!a||!se.isAbove(u,f))&&c.setStart(f.container(),f.offset())}),a||kn(n,a,!1,c).each(f=>{c.setEnd(f.container(),f.offset())}),a&&c.collapse(!0),x1(s,c)?I.none():I.some(c)},Yd=(n,s)=>n.splitText(s),Ib=n=>{let s=n.startContainer,a=n.startOffset,c=n.endContainer,u=n.endOffset;if(s===c&&ye(s)){if(a>0&&a<s.data.length)if(c=Yd(s,a),s=c.previousSibling,u>a){u-=a;const f=Yd(c,u).previousSibling;s=c=f,u=f.data.length,a=0}else u=0}else if(ye(s)&&a>0&&a<s.data.length&&(s=Yd(s,a),a=0),ye(c)&&u>0&&u<c.data.length){const f=Yd(c,u).previousSibling;c=f,u=f.data.length}return{startContainer:s,startOffset:a,endContainer:c,endOffset:u}},Jd=n=>({walk:(f,h)=>s_(n,f,h),split:Ib,expand:(f,h={type:"word"})=>{if("word"===h.type){const g=Gd(n,f,[{inline:"span"}]),_=n.createRng();return _.setStart(g.startContainer,g.startOffset),_.setEnd(g.endContainer,g.endOffset),_}return f},normalize:f=>Mb(n,f).fold(mn,h=>(f.setStart(h.startContainer,h.startOffset),f.setEnd(h.endContainer,h.endOffset),!0))});Jd.compareRanges=x1,Jd.getCaretRangeFromPoint=fp,Jd.getSelectedNode=Fh,Jd.getNode=_u;const N$=((n,s)=>{const c=g=>{const _=(n=>{const s=n.dom;return Be(n)?s.getBoundingClientRect().height:s.offsetHeight})(g);if(_<=0||null===_){const b=yn(g,n);return parseFloat(b)||0}return _},f=(g,_)=>$o(_,(b,S)=>{const E=yn(g,S),T=void 0===E?0:parseInt(E,10);return isNaN(T)?b:b+T},0);return{set:(g,_)=>{if(!ni(_)&&!_.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+_);const b=g.dom;rl(b)&&(b.style[n]=_+"px")},get:c,getOuter:c,aggregate:f,max:(g,_,b)=>{const S=f(g,b);return _>S?_-S:0}}})("height"),vI=()=>j_fromDom(document),yI=(n,s)=>n.view(s).fold(Ae([]),c=>{const u=n.owner(c),f=yI(n,u);return[c].concat(f)});var Y7=Object.freeze({__proto__:null,view:n=>{var s;return(n.dom===document?I.none():I.from(null===(s=n.dom.defaultView)||void 0===s?void 0:s.frameElement)).map(j_fromDom)},owner:n=>fn(n)});const Ob=n=>"textarea"===Ft(n),ku=(n,s)=>{const a=(n=>{const s=n.dom.ownerDocument,a=s.body,c=s.defaultView,u=s.documentElement;if(a===n.dom)return Cd(a.offsetLeft,a.offsetTop);const f=Sd(c?.pageYOffset,u.scrollTop),h=Sd(c?.pageXOffset,u.scrollLeft),g=Sd(u.clientTop,a.clientTop),_=Sd(u.clientLeft,a.clientLeft);return T0(n).translate(h-_,f-g)})(n),c=(n=>N$.get(n))(n);return{element:n,bottom:a.top+c,height:c,pos:a,cleanup:s}},nr=(n,s,a,c)=>{pp(n,(u,f)=>hp(n,s,a,c),a)},Qd=(n,s,a,c,u)=>{const f={elm:c.element.dom,alignToTop:u};((n,s)=>n.dispatch("ScrollIntoView",s).isDefaultPrevented())(n,f)||(a(n,s,So(s).top,c,u),((n,s)=>{n.dispatch("AfterScrollIntoView",s)})(n,f))},hp=(n,s,a,c)=>{j_fromDom(n.getBody());const f=j_fromDom(n.getDoc()),h=((n,s)=>{const a=((n,s)=>{const a=sr(n);if(0===a.length||Ob(n))return{element:n,offset:s};if(s<a.length&&!Ob(a[s]))return{element:a[s],offset:0};{const c=a[a.length-1];return Ob(c)?{element:n,offset:s}:"img"===Ft(c)?{element:c,offset:1}:Nr(c)?{element:c,offset:Ig(c).length}:{element:c,offset:sr(c).length}}})(n,s),c=j_fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Fr(a.element,c),ku(c,()=>M(c))})(j_fromDom(a.startContainer),a.startOffset);Qd(n,f,s,h,c),h.cleanup()},Xd=(n,s,a,c)=>{const u=j_fromDom(n.getDoc());Qd(n,u,a,(n=>ku(j_fromDom(n),ut))(s),c)},pp=(n,s,a)=>{const c=a.startContainer,u=a.startOffset,f=a.endContainer,h=a.endOffset;s(j_fromDom(c),j_fromDom(f));const g=n.dom.createRng();g.setStart(c,u),g.setEnd(f,h),n.selection.setRng(a)},Du=(n,s,a,c,u)=>{const f=s.pos;if(c)ze(f.left,f.top,u);else{const h=f.top-a+s.height;ze(-n.getBody().getBoundingClientRect().left,h,u)}},ef=(n,s,a,c,u,f)=>{const h=c+a,g=u.pos.top,_=u.bottom,b=_-g>=c;g<a?Du(n,u,c,!1!==f,s):g>h?Du(n,u,c,b?!1!==f:!0===f,s):_>h&&!b&&Du(n,u,c,!0===f,s)},tf=(n,s,a,c,u)=>{const f=el(s).dom.innerHeight;ef(n,s,a,f,c,u)},nf=(n,s,a,c,u)=>{const f=el(s).dom.innerHeight;ef(n,s,a,f,c,u);const h=(n=>{const s=vI(),a=So(s),c=((n,s)=>{const a=s.owner(n);return yI(s,a)})(n,Y7),u=T0(n),f=Kc(c,(h,g)=>{const _=T0(g);return{left:h.left+_.left,top:h.top+_.top}},{left:0,top:0});return Cd(f.left+u.left+a.left,f.top+u.top+a.top)})(c.element),g=Vr(window);h.top<g.y?Ct(c.element,!1!==u):h.top>g.bottom&&Ct(c.element,!0===u)},mp=(n,s,a)=>nr(n,tf,s,a),CI=(n,s,a)=>Xd(n,s,tf,a),SI=(n,s,a)=>nr(n,nf,s,a),xI=(n,s,a)=>Xd(n,s,nf,a),PI=(n,s,a)=>{(n.inline?CI:xI)(n,s,a)},gp=(n,s,a)=>{(n.inline?mp:SI)(n,s,a)},P1=(n,s=!1)=>n.dom.focus({preventScroll:s}),E1=n=>{const s=Ia(n).dom;return n.dom===s.activeElement},Nb=(n=vI())=>I.from(n.dom.activeElement).map(j_fromDom),d_=(n,s)=>{const a=Nr(s)?Ig(s).length:sr(s).length+1;return n>a?a:n<0?0:n},Tu=n=>up.range(n.start,d_(n.soffset,n.start),n.finish,d_(n.foffset,n.finish)),kI=(n,s)=>!vh(s.dom)&&(Ki(n,s)||mt(n,s)),DI=n=>s=>kI(n,s.start)&&kI(n,s.finish),rf=n=>up.range(j_fromDom(n.startContainer),n.startOffset,j_fromDom(n.endContainer),n.endOffset),J7=n=>{const s=document.createRange();try{return s.setStart(n.start.dom,n.soffset),s.setEnd(n.finish.dom,n.foffset),I.some(s)}catch{return I.none()}},M1=n=>{const s=(n=>n.inline||It.browser.isFirefox())(n)?(n=>(n=>{const s=n.getSelection();return(s&&0!==s.rangeCount?I.from(s.getRangeAt(0)):I.none()).map(rf)})(el(n).dom).filter(DI(n)))(j_fromDom(n.getBody())):I.none();n.bookmark=s.isSome()?s:n.bookmark},I1=n=>(n.bookmark?n.bookmark:I.none()).bind(a=>((n,s)=>I.from(s).filter(DI(n)).map(Tu))(j_fromDom(n.getBody()),a)).bind(J7),TI={isEditorUIElement:n=>{const s=n.className.toString();return-1!==s.indexOf("tox-")||-1!==s.indexOf("mce-")}},Si={setEditorTimeout:(n,s,a)=>((n,s)=>(ni(s)||(s=0),setTimeout(n,s)))(()=>{n.removed||s()},a),setEditorInterval:(n,s,a)=>{const c=((n,s)=>(ni(s)||(s=0),setInterval(n,s)))(()=>{n.removed?clearInterval(c):s()},a);return c}};let Ba;const O1=pn.DOM,Rb=n=>{const s=n.classList;return void 0!==s&&(s.contains("tox-edit-area")||s.contains("tox-edit-area__iframe")||s.contains("mce-content-body"))},Fb=(n,s)=>{const a=Jy(n);return null!==O1.getParent(s,u=>(n=>$e(n)&&TI.isEditorUIElement(n))(u)||!!a&&n.dom.is(u,a))},Lb=n=>{try{const s=Ia(j_fromDom(n.getElement()));return Nb(s).fold(()=>document.body,a=>a.dom)}catch{return document.body}},Q7=(n,s)=>{const a=s.editor;(n=>{const s=Eg(()=>{M1(n)},0);n.on("init",()=>{n.inline&&((n,s)=>{const a=()=>{s.throttle()};pn.DOM.bind(document,"mouseup",a),n.on("remove",()=>{pn.DOM.unbind(document,"mouseup",a)})})(n,s),((n,s)=>{((n,s)=>{n.on("mouseup touchend",a=>{s.throttle()})})(n,s),n.on("keyup NodeChange AfterSetSelectionRange",a=>{(n=>"nodechange"===n.type&&n.selectionChange)(a)||M1(n)})})(n,s)}),n.on("remove",()=>{s.cancel()})})(a);const c=(u,f)=>{FV(u)&&!0!==u.inline&&f(j_fromDom(u.getContainer()),"tox-edit-focus")};a.on("focusin",()=>{const u=n.focusedEditor;Rb(Lb(a))&&c(a,Gi),u!==a&&(u&&u.dispatch("blur",{focusedEditor:a}),n.setActive(a),n.focusedEditor=a,a.dispatch("focus",{blurredEditor:u}),a.focus(!0))}),a.on("focusout",()=>{Si.setEditorTimeout(a,()=>{const u=n.focusedEditor;(!Rb(Lb(a))||u!==a)&&c(a,uh),!Fb(a,Lb(a))&&u===a&&(a.dispatch("blur",{focusedEditor:null}),n.focusedEditor=null)})}),Ba||(Ba=u=>{const f=n.activeEditor;f&&ie(u).each(h=>{h.ownerDocument===document&&h!==document.body&&!Fb(f,h)&&n.focusedEditor===f&&(f.dispatch("blur",{focusedEditor:null}),n.focusedEditor=null)})},O1.bind(document,"focusin",Ba))},A=(n,s)=>{n.focusedEditor===s.editor&&(n.focusedEditor=null),!n.activeEditor&&Ba&&(O1.unbind(document,"focusin",Ba),Ba=null)},NI=(n,s)=>{((n,s)=>(n=>n.collapsed?I.from(_u(n.startContainer,n.startOffset)).map(j_fromDom):I.none())(s).bind(a=>lS(a)?I.some(a):Ki(n,a)?I.none():I.some(n)))(j_fromDom(n.getBody()),s).bind(a=>Wr(a.dom)).fold(()=>{n.selection.normalize()},a=>n.selection.setRng(a.toRange()))},R1=n=>{if(n.setActive)try{n.setActive()}catch{n.focus()}else n.focus()},Mu=n=>n.inline?(n=>{const s=n.getBody();return s&&(n=>E1(n)||(n=>Nb(Ia(n)).filter(s=>n.dom.contains(s.dom)))(n).isSome())(j_fromDom(s))})(n):(n=>Oe(n.iframeElement)&&E1(j_fromDom(n.iframeElement)))(n),FI=n=>Mu(n)||(n=>{const s=Ia(j_fromDom(n.getElement()));return Nb(s).filter(a=>!Rb(a.dom)&&Fb(n,a.dom)).isSome()})(n),F1=n=>n.editorManager.setActive(n),Vb=(n,s)=>s.collapsed?n.isEditable(s.startContainer):n.isEditable(s.startContainer)&&n.isEditable(s.endContainer),_p=(n,s,a,c,u)=>{const h=a?s.startOffset:s.endOffset;return I.from(a?s.startContainer:s.endContainer).map(j_fromDom).map(g=>c&&s.collapsed?g:su(g,u(g,h)).getOr(g)).bind(g=>Ar(g)?I.some(g):je(g).filter(Ar)).map(g=>g.dom).getOr(n)},LI=(n,s,a=!1)=>_p(n,s,!0,a,(c,u)=>Math.min(tl(c),u)),L1=(n,s,a=!1)=>_p(n,s,!1,a,(c,u)=>u>0?u-1:u),BI=(n,s)=>{const a=n;for(;n&&ye(n)&&0===n.length;)n=s?n.nextSibling:n.previousSibling;return n||a},vp=(n,s)=>Xe(s,a=>{const c=n.dispatch("GetSelectionRange",{range:a});return c.range!==a?c.range:a}),q$={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},f_=(n,s,a)=>{const c=a?"lastChild":"firstChild",u=a?"prev":"next";if(n[c])return n[c];if(n!==s){let f=n[u];if(f)return f;for(let h=n.parent;h&&h!==s;h=h.parent)if(f=h[u],f)return f}},G$=n=>{var s;const a=null!==(s=n.value)&&void 0!==s?s:"";if(!fs(a))return!1;const c=n.parent;return!(c&&("span"!==c.name||c.attr("style"))&&/^[ ]+$/.test(a))},UI=n=>{const s="a"===n.name&&!n.attr("href")&&n.attr("id");return n.attr("name")||n.attr("id")&&!n.firstChild||n.attr("data-mce-bookmark")||s};class qr{static create(s,a){const c=new qr(s,q$[s]||1);return a&&Ut(a,(u,f)=>{c.attr(f,u)}),c}constructor(s,a){this.name=s,this.type=a,1===a&&(this.attributes=[],this.attributes.map={})}replace(s){const a=this;return s.parent&&s.remove(),a.insert(s,a),a.remove(),a}attr(s,a){const c=this;if(!Ye(s))return Oe(s)&&Ut(s,(f,h)=>{c.attr(h,f)}),c;const u=c.attributes;if(u){if(void 0!==a){if(null===a){if(s in u.map){delete u.map[s];let f=u.length;for(;f--;)if(u[f].name===s)return u.splice(f,1),c}return c}if(s in u.map){let f=u.length;for(;f--;)if(u[f].name===s){u[f].value=a;break}}else u.push({name:s,value:a});return u.map[s]=a,c}return u.map[s]}}clone(){const s=this,a=new qr(s.name,s.type),c=s.attributes;if(c){const u=[];u.map={};for(let f=0,h=c.length;f<h;f++){const g=c[f];"id"!==g.name&&(u[u.length]={name:g.name,value:g.value},u.map[g.name]=g.value)}a.attributes=u}return a.value=s.value,a}wrap(s){const a=this;return a.parent&&(a.parent.insert(s,a),s.append(a)),a}unwrap(){const s=this;for(let a=s.firstChild;a;){const c=a.next;s.insert(a,s,!0),a=c}s.remove()}remove(){const s=this,a=s.parent,c=s.next,u=s.prev;return a&&(a.firstChild===s?(a.firstChild=c,c&&(c.prev=null)):u&&(u.next=c),a.lastChild===s?(a.lastChild=u,u&&(u.next=null)):c&&(c.prev=u),s.parent=s.next=s.prev=null),s}append(s){const a=this;s.parent&&s.remove();const c=a.lastChild;return c?(c.next=s,s.prev=c,a.lastChild=s):a.lastChild=a.firstChild=s,s.parent=a,s}insert(s,a,c){s.parent&&s.remove();const u=a.parent||this;return c?(a===u.firstChild?u.firstChild=s:a.prev&&(a.prev.next=s),s.prev=a.prev,s.next=a,a.prev=s):(a===u.lastChild?u.lastChild=s:a.next&&(a.next.prev=s),s.next=a.next,s.prev=a,a.next=s),s.parent=u,s}getAll(s){const a=this,c=[];for(let u=a.firstChild;u;u=f_(u,a))u.name===s&&c.push(u);return c}children(){const a=[];for(let c=this.firstChild;c;c=c.next)a.push(c);return a}empty(){const s=this;if(s.firstChild){const a=[];for(let u=s.firstChild;u;u=f_(u,s))a.push(u);let c=a.length;for(;c--;){const u=a[c];u.parent=u.firstChild=u.lastChild=u.next=u.prev=null}}return s.firstChild=s.lastChild=null,s}isEmpty(s,a={},c){var u;const f=this;let h=f.firstChild;if(UI(f))return!1;if(h)do{if(1===h.type){if(h.attr("data-mce-bogus"))continue;if(s[h.name]||UI(h))return!1}if(8===h.type||3===h.type&&!G$(h)||3===h.type&&h.parent&&a[h.parent.name]&&fs(null!==(u=h.value)&&void 0!==u?u:"")||c&&c(h))return!1}while(h=f_(h,f));return!0}walk(s){return f_(this,null,s)}}const K$=de.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),jI=n=>Ye(n.nodeValue)&&n.nodeValue.includes(zo),HI=n=>(0===n.length?"":`${Xe(n,s=>`[${s}]`).join(",")},`)+'[data-mce-bogus="all"]',zI=n=>document.createTreeWalker(n,NodeFilter.SHOW_COMMENT,s=>jI(s)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),WI=n=>document.createTreeWalker(n,NodeFilter.SHOW_TEXT,s=>{if(jI(s)){const a=s.parentNode;return a&&Ke(K$,a.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),Y$=n=>null!==zI(n).nextNode(),B1=n=>null!==WI(n).nextNode(),J$=(n,s)=>null!==s.querySelector(HI(n)),X7=(n,s)=>{ue(((n,s)=>s.querySelectorAll(HI(n)))(n,s),a=>{const c=j_fromDom(a);"all"===wo(c,"data-mce-bogus")?M(c):ue(n,u=>{ou(c,u)&&Co(c,u)})})},Q$=n=>{let s=n.nextNode();for(;null!==s;)s.nodeValue=null,s=n.nextNode()},X$=As(Q$,zI),eU=As(Q$,WI),tU=(n,s)=>{const a=[{condition:Ve(J$,s),action:Ve(X7,s)},{condition:Y$,action:X$},{condition:B1,action:eU}];let c=n,u=!1;return ue(a,({condition:f,action:h})=>{f(c)&&(u||(c=n.cloneNode(!0),u=!0),h(c))}),c},qI=n=>{const s=Wt(n,"[data-mce-bogus]");ue(s,a=>{"all"===wo(a,"data-mce-bogus")?M(a):Od(a)?(Fr(a,j_fromText("\ufeff")),M(a)):G(a)})},nU=n=>{const s=Wt(n,"input");ue(s,a=>{Co(a,"name")})},sU=(n,s,a)=>{let c;return c="raw"===s.format?de.trim(Bs(tU(a,n.serializer.getTempAttrs()).innerHTML)):"text"===s.format?((n,s)=>{const a=n.getDoc(),c=Ia(j_fromDom(n.getBody())),u=j_fromTag("div",a);Oo(u,"data-mce-bogus","all"),dc(u,{position:"fixed",left:"-9999999px",top:"0"}),gt(u,s.innerHTML),qI(u),nU(u);const f=(n=>vd(n)?n:j_fromDom(fn(n).dom.body))(c);Yn(f,u);const h=Bs(u.dom.innerText);return M(u),h})(n,a):"tree"===s.format?n.serializer.serialize(a,s):((n,s)=>{const a=wr(n),c=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(c,"")})(n,n.serializer.serialize(a,s)),"text"!==s.format&&!Ag(j_fromDom(a))&&Ye(c)?de.trim(c):c},yp=de.makeMap,$b=n=>{const s=[],a=(n=n||{}).indent,c=yp(n.indent_before||""),u=yp(n.indent_after||""),f=Ao.getEncodeFunc(n.entity_encoding||"raw",n.entities),h="xhtml"!==n.element_format;return{start:(g,_,b)=>{if(a&&c[g]&&s.length>0){const S=s[s.length-1];S.length>0&&"\n"!==S&&s.push("\n")}if(s.push("<",g),_)for(let S=0,E=_.length;S<E;S++){const T=_[S];s.push(" ",T.name,'="',f(T.value,!0),'"')}if(s[s.length]=!b||h?">":" />",b&&a&&u[g]&&s.length>0){const S=s[s.length-1];S.length>0&&"\n"!==S&&s.push("\n")}},end:g=>{let _;s.push("</",g,">"),a&&u[g]&&s.length>0&&(_=s[s.length-1],_.length>0&&"\n"!==_&&s.push("\n"))},text:(g,_)=>{g.length>0&&(s[s.length]=_?g:f(g))},cdata:g=>{s.push("<![CDATA[",g,"]]>")},comment:g=>{s.push("\x3c!--",g,"--\x3e")},pi:(g,_)=>{_?s.push("<?",g," ",f(_),"?>"):s.push("<?",g,"?>"),a&&s.push("\n")},doctype:g=>{s.push("<!DOCTYPE",g,">",a?"\n":"")},reset:()=>{s.length=0},getContent:()=>s.join("").replace(/\n$/,"")}},Ua=(n={},s=du())=>{const a=$b(n);return n.validate=!("validate"in n)||n.validate,{serialize:u=>{const f=n.validate,h={3:_=>{var b;a.text(null!==(b=_.value)&&void 0!==b?b:"",_.raw)},8:_=>{var b;a.comment(null!==(b=_.value)&&void 0!==b?b:"")},7:_=>{a.pi(_.name,_.value)},10:_=>{var b;a.doctype(null!==(b=_.value)&&void 0!==b?b:"")},4:_=>{var b;a.cdata(null!==(b=_.value)&&void 0!==b?b:"")},11:_=>{let b=_;if(b=b.firstChild)do{g(b)}while(b=b.next)}};a.reset();const g=_=>{var b;const S=h[_.type];if(S)S(_);else{const E=_.name,T=E in s.getVoidElements();let N=_.attributes;if(f&&N&&N.length>1){const V=[];V.map={};const F=s.getElementRule(_.name);if(F){for(let U=0,W=F.attributesOrder.length;U<W;U++){const Z=F.attributesOrder[U];if(Z in N.map){const K=N.map[Z];V.map[Z]=K,V.push({name:Z,value:K})}}for(let U=0,W=N.length;U<W;U++){const Z=N[U].name;if(!(Z in V.map)){const K=N.map[Z];V.map[Z]=K,V.push({name:Z,value:K})}}N=V}}if(a.start(E,N,T),cu(E))Ye(_.value)&&a.text(_.value,!0),a.end(E);else if(!T){let V=_.firstChild;if(V){("pre"===E||"textarea"===E)&&3===V.type&&"\n"===(null===(b=V.value)||void 0===b?void 0:b[0])&&a.text("\n",!0);do{g(V)}while(V=V.next)}a.end(E)}}};return 1!==u.type||n.inner?3===u.type?h[3](u):h[11](u):g(u),a.getContent()}}},$1=new Set;ue(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],s=>{$1.add(s)});const bp=["font","text-decoration","text-emphasis"],Ub=(n,s)=>zn(n.parseStyle(n.getAttrib(s,"style"))),aU=(n,s,a)=>{const c=Ub(n,s),u=Ub(n,a),f=h=>{var g,_;const b=null!==(g=n.getStyle(s,h))&&void 0!==g?g:"",S=null!==(_=n.getStyle(a,h))&&void 0!==_?_:"";return Ui(b)&&Ui(S)&&b!==S};return Pt(c,h=>{const g=_=>Pt(_,b=>b===h);if(!g(u)&&g(bp)){const _=(n=>nt(n,s=>Pt(bp,a=>vo(s,a))))(u);return Pt(_,f)}return f(h)})},U1=(n,s,a)=>I.from(a.container()).filter(ye).exists(c=>{const u=n?0:-1;return s(c.data.charAt(a.offset()+u))}),wp=Ve(U1,!0,Xh),j1=Ve(U1,!1,Xh),cU=n=>{const s=n.container();return ye(s)&&(0===s.data.length||Ng(s.data)&&cp.isBookmarkNode(s.parentNode))},Iu=(n,s)=>a=>Zh(n?0:-1,a).filter(s).isSome(),KI=n=>l3(n)&&"block"===yn(j_fromDom(n),"display"),ZI=n=>Pn(n)&&!(n=>$e(n)&&"all"===n.getAttribute("data-mce-bogus"))(n),H1=Iu(!0,KI),jb=Iu(!1,KI),Ou=Iu(!0,al),Hb=Iu(!1,al),YI=Iu(!0,Xr),JI=Iu(!1,Xr),Dc=Iu(!0,ZI),Au=Iu(!1,ZI),XI=(n,s)=>((n,s,a)=>Ki(s,n)?(n=>n.slice(0,-1))(fh(n,c=>a(c)||mt(c,s))):[])(n,s,mn),Tc=(n,s)=>[n].concat(XI(n,s)),z1=(n,s,a)=>CM(n,s,a,cU),sf=(n,s,a)=>vn(Tc(j_fromDom(s.container()),n),(n=>s=>n.isBlock(Ft(s)))(a)),eO=(n,s,a,c)=>z1(n,s.dom,a).forall(u=>sf(s,a,c).fold(()=>!na(u,a,s.dom),f=>!na(u,a,s.dom)&&Ki(f,j_fromDom(u.container())))),zb=(n,s,a,c)=>sf(s,a,c).fold(()=>z1(n,s.dom,a).forall(u=>!na(u,a,s.dom)),u=>z1(n,u.dom,a).isNone()),W1=Ve(zb,!1),Wb=Ve(zb,!0),tO=Ve(eO,!1),nO=Ve(eO,!0),oO=n=>Jg(n).exists(Od),Nu=(n,s,a,c)=>{const u=nt(Tc(j_fromDom(a.container()),s),h=>c.isBlock(Ft(h))),f=go(u).getOr(s);return wi(n,f.dom,a).filter(oO)},qb=(n,s,a)=>Jg(s).exists(Od)||Nu(!0,n,s,a).isSome(),Ru=(n,s,a)=>(n=>I.from(n.getNode(!0)).map(j_fromDom))(s).exists(Od)||Nu(!1,n,s,a).isSome(),p_=Ve(Nu,!1),q1=Ve(Nu,!0),aa=n=>se.isTextPosition(n)&&!n.isAtStart()&&!n.isAtEnd(),rO=(n,s,a)=>{const c=nt(Tc(j_fromDom(s.container()),n),u=>a.isBlock(Ft(u)));return go(c).getOr(n)},sO=(n,s,a)=>aa(s)?j1(s):j1(s)||Us(rO(n,s,a).dom,s).exists(j1),G1=(n,s,a)=>aa(s)?wp(s):wp(s)||vs(rO(n,s,a).dom,s).exists(wp),m_=n=>Jg(n).bind(s=>di(s,Ar)).exists(s=>(n=>zt(["pre","pre-wrap"],n))(yn(s,"white-space"))),Z1=(n,s)=>a=>(n=>Oe(n)&&Pn(n)&&zV(n))(new io(a,n)[s]()),uO=(n,s,a)=>!m_(s)&&(((n,s,a)=>((n,s)=>Us(n.dom,s).isNone())(n,s)||((n,s)=>vs(n.dom,s).isNone())(n,s)||W1(n,s,a)||Wb(n,s,a)||Ru(n,s,a)||qb(n,s,a))(n,s,a)||sO(n,s,a)||G1(n,s,a)),g_=(n,s,a)=>!m_(s)&&(W1(n,s,a)||tO(n,s,a)||Ru(n,s,a)||sO(n,s,a)||((n,s)=>{const a=Us(n.dom,s).getOr(s),c=Z1(n.dom,"prev");return s.isAtStart()&&(c(s.container())||c(a.container()))})(n,s)),Pe=(n,s,a)=>!m_(s)&&(Wb(n,s,a)||nO(n,s,a)||qb(n,s,a)||G1(n,s,a)||((n,s)=>{const a=vs(n.dom,s).getOr(s),c=Z1(n.dom,"next");return s.isAtEnd()&&(c(s.container())||c(a.container()))})(n,s)),Gb=(n,s,a)=>g_(n,s,a)||Pe(n,(n=>{const s=n.container(),a=n.offset();return ye(s)&&a<s.data.length?se(s,a+1):n})(s),a),Y1=(n,s)=>pb(n.charAt(s)),dO=(n,s)=>Xh(n.charAt(s)),fO=(n,s,a,c)=>{const u=s.data,f=se(s,0);return a||!Y1(u,0)||Gb(n,f,c)?!!(a&&dO(u,0)&&g_(n,f,c))&&(s.data=Jn+u.slice(1),!0):(s.data=" "+u.slice(1),!0)},hO=(n,s,a,c)=>{const u=s.data,f=se(s,u.length-1);return a||!Y1(u,u.length-1)||Gb(n,f,c)?!!(a&&dO(u,u.length-1)&&Pe(n,f,c))&&(s.data=u.slice(0,-1)+Jn,!0):(s.data=u.slice(0,-1)+" ",!0)},_U=(n,s,a)=>{const c=s.container();if(!ye(c))return I.none();if((n=>{const s=n.container();return ye(s)&&Yo(s.data,Jn)})(s)){const u=fO(n,c,!1,a)||(n=>{const s=n.data,a=(n=>{const s=n.split("");return Xe(s,(a,c)=>pb(a)&&c>0&&c<s.length-1&&e1(s[c-1])&&e1(s[c+1])?" ":a).join("")})(s);return a!==s&&(n.data=a,!0)})(c)||hO(n,c,!1,a);return gn(u,s)}if(Gb(n,s,a)){const u=fO(n,c,!0,a)||hO(n,c,!0,a);return gn(u,s)}return I.none()},pO=(n,s,a,c)=>{if(0===a)return;const u=j_fromDom(n),f=ui(u,b=>c.isBlock(Ft(b))).getOr(u),h=n.data.slice(s,s+a),g=s+a>=n.data.length&&Pe(f,se(n,n.data.length),c),_=0===s&&g_(f,se(n,0),c);n.replaceData(s,a,au(h,4,_,g))},Kb=(n,s,a)=>{const c=n.data.slice(s),u=c.length-g0(c).length;pO(n,s,u,a)},__=(n,s,a)=>{const c=n.data.slice(0,s),u=c.length-Bv(c).length;pO(n,s-u,u,a)},J1=(n,s,a,c,u=!0)=>{const f=Bv(n.data).length,h=u?n:s,g=u?s:n;return u?h.appendData(g.data):h.insertData(0,g.data),M(j_fromDom(g)),c&&Kb(h,f,a),h},Q1=(n,s)=>((n,s)=>{const a=n.container(),c=n.offset();return!se.isTextPosition(n)&&a===s.parentNode&&c>se.before(s).offset()})(s,n)?se(s.container(),s.offset()-1):s,gO=n=>Fa(n.previousSibling)?I.some((n=>ye(n)?se(n,n.data.length):se.after(n))(n.previousSibling)):n.previousSibling?ra(n.previousSibling):I.none(),qo=n=>Fa(n.nextSibling)?I.some((n=>ye(n)?se(n,0):se.before(n))(n.nextSibling)):n.nextSibling?Wr(n.nextSibling):I.none(),_O=(n,s,a)=>((n,s,a)=>n?((n,s)=>qo(s).orThunk(()=>gO(s)).orThunk(()=>((n,s)=>vs(n,se.after(s)).orThunk(()=>Us(n,se.before(s))))(n,s)))(s,a):((n,s)=>gO(s).orThunk(()=>qo(s)).orThunk(()=>((n,s)=>I.from(s.previousSibling?s.previousSibling:s.parentNode).bind(a=>Us(n,se.before(a))).orThunk(()=>vs(n,se.after(s))))(n,s)))(s,a))(n,s,a).map(Ve(Q1,a)),X1=(n,s,a)=>{a.fold(()=>{n.focus()},c=>{n.selection.setRng(c.toRange(),s)})},Jb=(n,s)=>s&&Ke(n.schema.getBlockElements(),Ft(s)),xi=(n,s,a,c=!0,u=!1)=>{const f=_O(s,n.getBody(),a.dom),h=ui(a,Ve(Jb,n),(n=>s=>s.dom===n)(n.getBody())),g=((n,s,a,c)=>{const u=Zi(n).filter(Nr),f=gd(n).filter(Nr);return M(n),((n,s,a,c)=>n.isSome()&&s.isSome()&&a.isSome()?I.some(c(n.getOrDie(),s.getOrDie(),a.getOrDie())):I.none())(u,f,s,(h,g,_)=>{const b=h.dom,S=g.dom,E=b.data.length;return J1(b,S,a,c),_.container()===S?se(b,E):_}).orThunk(()=>(c&&(u.each(h=>__(h.dom,h.dom.length,a)),f.each(h=>Kb(h.dom,0,a))),s))})(a,f,n.schema,((n,s)=>Ke(n.schema.getTextInlineElements(),Ft(s)))(n,a));n.dom.isEmpty(n.getBody())?(n.setContent(""),n.selection.setCursorLocation()):h.bind(_=>((n,s,a)=>{if(vr(n,s)){const c=j_fromHtml('<br data-mce-bogus="1">');return a?ue(sr(s),u=>{ys(u)||M(u)}):C(s),Yn(s,c),I.some(se.before(c.dom))}return I.none()})(n.schema,_,u)).fold(()=>{c&&X1(n,s,g)},_=>{c&&X1(n,s,I.some(_))})},bU=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,af=(n,s)=>li(j_fromDom(s),bV(n))&&!cl(n.schema,s)&&n.dom.isEditable(s),bO=n=>{var s;return"rtl"===pn.DOM.getStyle(n,"direction",!0)||(n=>bU.test(n))(null!==(s=n.textContent)&&void 0!==s?s:"")},wl=(n,s,a)=>{const c=((n,s,a)=>nt(pn.DOM.getParents(a.container(),"*",s),n))(n,s,a);return I.from(c[c.length-1])},la=(n,s)=>{const a=s.container(),c=s.offset();return n?gi(a)?ye(a.nextSibling)?se(a.nextSibling,0):se.after(a):Rg(s)?se(a,c+1):s:gi(a)?ye(a.previousSibling)?se(a.previousSibling,a.previousSibling.data.length):se.before(a):uS(s)?se(a,c-1):s},CO=Ve(la,!0),b_=Ve(la,!1),Xb=(n,s)=>{const a=c=>c.stopImmediatePropagation();n.on("beforeinput input",a,!0),n.getDoc().execCommand(s),n.off("beforeinput input",a)},Fu=n=>Xb(n,"Delete"),Sp=n=>Og(n)||Oh(n),xp=(n,s)=>Ki(n,s)?di(s,Sp,(n=>s=>Ta(je(s),n,mt))(n)):I.none(),w_=(n,s=!0)=>{n.dom.isEmpty(n.getBody())&&n.setContent("",{no_selection:!s})},ox=(n,s,a)=>rr(Wr(a),ra(a),(c,u)=>{const f=la(!0,c),h=la(!1,u),g=la(!1,s);return n?vs(a,g).exists(_=>_.isEqual(h)&&s.isEqual(f)):Us(a,g).exists(_=>_.isEqual(f)&&s.isEqual(h))}).getOr(!0),rx=n=>((n=>8===Lt(n)||"#comment"===Ft(n))(n)?Zi(n):ry(n)).bind(rx).orThunk(()=>I.some(n)),sx=(n,s,a,c=!0)=>{var u;s.deleteContents();const f=rx(a).getOr(a),h=j_fromDom(null!==(u=n.dom.getParent(f.dom,n.dom.isBlock))&&void 0!==u?u:a.dom);if(h.dom===n.getBody()?w_(n,c):vr(n.schema,h,{checkRootAsContent:!1})&&(ta(h),c&&n.selection.setCursorLocation(h.dom,0)),!mt(a,h)){const g=Ta(je(h),a)?[]:(n=>je(n).map(sr).map(a=>nt(a,c=>!mt(n,c))).getOr([]))(h);ue(g.concat(sr(a)),_=>{!mt(_,h)&&!Ki(_,h)&&vr(n.schema,_)&&M(_)})}},ix=n=>Wt(n,"td,th"),cf=(n,s)=>n_(j_fromDom(n),s),ax=(n,s)=>({start:n,end:s}),Pp=vi_generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ew=(n,s)=>gr(j_fromDom(n),"td,th",s),PU=n=>!mt(n.start,n.end),kO=(n,s)=>n_(n.start,s).bind(a=>n_(n.end,s).bind(c=>gn(mt(a,c),a))),lx=n=>s=>kO(s,n).map(a=>((n,s,a)=>({rng:n,table:s,cells:a}))(s,a,ix(a))),TO=(n,s,a,c)=>{if(a.collapsed||!n.forall(PU))return I.none();if(s.isSameTable){const u=n.bind(lx(c));return I.some({start:u,end:u})}{const u=ew(a.startContainer,c),f=ew(a.endContainer,c),h=u.bind((n=>s=>n_(s,n).bind(a=>cs(ix(a)).map(c=>ax(s,c))))(c)).bind(lx(c)),g=f.bind((n=>s=>n_(s,n).bind(a=>go(ix(a)).map(c=>ax(c,s))))(c)).bind(lx(c));return I.some({start:h,end:g})}},MO=(n,s)=>Li(n,a=>mt(a,s)),ux=n=>rr(MO(n.cells,n.rng.start),MO(n.cells,n.rng.end),(s,a)=>n.cells.slice(s,a+1)),IO=(n,s)=>{const{startTable:a,endTable:c}=s,u=n.cloneRange();return a.each(f=>u.setStartAfter(f.dom)),c.each(f=>u.setEndBefore(f.dom)),u},IU=(n,s)=>{const a=(n=>s=>mt(n,s))(n),c=((n,s)=>{const a=ew(n.startContainer,s),c=ew(n.endContainer,s);return rr(a,c,ax)})(s,a),u=((n,s)=>{const a=cf(n.startContainer,s),c=cf(n.endContainer,s),u=a.isSome(),f=c.isSome(),h=rr(a,c,mt).getOr(!1);return(n=>(n=>rr(n.startTable,n.endTable,(s,a)=>{const c=jt(s,f=>mt(f,a)),u=jt(a,f=>mt(f,s));return c||u?{...n,startTable:c?I.none():n.startTable,endTable:u?I.none():n.endTable,isSameTable:!1,isMultiTable:!1}:n}).getOr(n))(n))({startTable:a,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:h,isMultiTable:!h&&u&&f})})(s,a);return((n,s,a)=>n.exists(c=>((n,s)=>!PU(n)&&kO(n,s).exists(a=>{const c=a.dom.rows;return 1===c.length&&1===c[0].cells.length}))(c,a)&&AM(c.start,s)))(c,s,a)?c.map(f=>Pp.singleCellTable(s,f.start)):u.isMultiTable?((n,s,a,c)=>TO(n,s,a,c).bind(({start:u,end:f})=>{const h=u.bind(ux).getOr([]),g=f.bind(ux).getOr([]);if(h.length>0&&g.length>0){const _=IO(a,s);return I.some(Pp.multiTable(h,g,_))}return I.none()}))(c,u,s,a):((n,s,a,c)=>TO(n,s,a,c).bind(({start:u,end:f})=>u.or(f)).bind(u=>{const{isSameTable:f}=s,h=ux(u).getOr([]);if(f&&u.cells.length===h.length)return I.some(Pp.fullTable(u.table));if(h.length>0){if(f)return I.some(Pp.partialTable(h,I.none()));{const g=IO(a,s);return I.some(Pp.partialTable(h,I.some({...s,rng:g})))}}return I.none()}))(c,u,s,a)},OO=n=>ue(n,s=>{Co(s,"contenteditable"),ta(s)}),dx=(n,s,a,c)=>{const u=a.cloneRange();c?(u.setStart(a.startContainer,a.startOffset),u.setEndAfter(s.dom.lastChild)):(u.setStartBefore(s.dom.firstChild),u.setEnd(a.endContainer,a.endOffset)),Mc(n,u,s,!1).each(f=>f())},AO=n=>{const s=qd(n),a=j_fromDom(n.selection.getNode());O0(a.dom)&&vr(n.schema,a)?n.selection.setCursorLocation(a.dom,0):n.selection.collapse(!0),s.length>1&&Pt(s,c=>mt(c,a))&&Oo(a,"data-mce-selected","1")},fx=(n,s,a)=>I.some(()=>{const c=n.selection.getRng(),u=a.bind(({rng:f,isStartInTable:h})=>{const g=((n,s)=>I.from(n.dom.getParent(s,n.dom.isBlock)).map(j_fromDom))(n,h?f.endContainer:f.startContainer);f.deleteContents(),((n,s,a)=>{a.each(c=>{s?M(c):(ta(c),n.selection.setCursorLocation(c.dom,0))})})(n,h,g.filter(Ve(vr,n.schema)));const _=h?s[0]:s[s.length-1];return dx(n,_,c,h),vr(n.schema,_)?I.none():I.some(h?s.slice(1):s.slice(0,-1))}).getOr(s);OO(u),AO(n)}),NO=(n,s,a,c)=>I.some(()=>{const u=n.selection.getRng(),f=s[0],h=a[a.length-1];dx(n,f,u,!0),dx(n,h,u,!1);const g=vr(n.schema,f)?s:s.slice(1),_=vr(n.schema,h)?a:a.slice(0,-1);OO(g.concat(_)),c.deleteContents(),AO(n)}),Mc=(n,s,a,c=!0)=>I.some(()=>{sx(n,s,a,c)}),RO=(n,s)=>I.some(()=>xi(n,!1,s)),tw=(n,s)=>vn(Tc(s,n),hu),Lu=(n,s)=>vn(Tc(s,n),pr("caption")),Cl=(n,s)=>I.some(()=>{ta(s),n.selection.setCursorLocation(s.dom,0)}),$O=(n,s)=>n?YI(s):JI(s),S_=(n,s,a)=>{const c=j_fromDom(n.getBody());return Lu(c,a).fold(()=>((n,s,a,c)=>{const u=se.fromRangeStart(n.selection.getRng());return tw(a,c).bind(f=>vr(n.schema,f,{checkRootAsContent:!1})?Cl(n,f):((n,s,a,c,u)=>Cc(a,n.getBody(),u).bind(f=>tw(s,j_fromDom(f.getNode())).bind(h=>mt(h,c)?I.none():I.some(ut))))(n,a,s,f,u))})(n,s,c,a).orThunk(()=>gn(((n,s)=>{const a=se.fromRangeStart(n.selection.getRng());return $O(s,a)||wi(s,n.getBody(),a).exists(c=>$O(s,c))})(n,s),ut)),u=>((n,s,a,c)=>{const u=se.fromRangeStart(n.selection.getRng());return vr(n.schema,c)?Cl(n,c):((n,s,a,c,u)=>Cc(a,n.getBody(),u).fold(()=>I.some(ut),f=>((n,s,a,c)=>Wr(n.dom).bind(u=>ra(n.dom).map(f=>s?a.isEqual(u)&&c.isEqual(f):a.isEqual(f)&&c.isEqual(u))).getOr(!0))(c,a,u,f)?((n,s)=>Cl(n,s))(n,c):((n,s,a)=>Lu(n,j_fromDom(a.getNode())).fold(()=>I.some(ut),c=>gn(!mt(c,s),ut)))(s,c,f)))(n,a,s,c,u)})(n,s,c,u))},lf=(n,s)=>{const a=j_fromDom(n.selection.getStart(!0)),c=qd(n);return n.selection.isCollapsed()&&0===c.length?S_(n,s,a):((n,s,a)=>{const c=j_fromDom(n.getBody()),u=n.selection.getRng();return 0!==a.length?fx(n,a,I.none()):((n,s,a,c)=>Lu(s,c).fold(()=>((n,s,a)=>IU(s,a).bind(c=>c.fold(Ve(Mc,n),Ve(RO,n),Ve(fx,n),Ve(NO,n))))(n,s,a),u=>((n,s)=>Cl(n,s))(n,u)))(n,c,u,s)})(n,a,c)},Bu=(n,s)=>{let a=s;for(;a&&a!==n;){if(Oa(a)||Pn(a))return a;a=a.parentNode}return null},UO=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],BU=de.each,hx=n=>{const s=n.dom,a=new Set(n.serializer.getTempAttrs()),u=f=>Pt(UO,h=>vo(f,h))||a.has(f);return{compare:(f,h)=>{if(f.nodeName!==h.nodeName||f.nodeType!==h.nodeType)return!1;const g=b=>{const S={};return BU(s.getAttribs(b),E=>{const T=E.nodeName.toLowerCase();"style"!==T&&!u(T)&&(S[T]=s.getAttrib(b,T))}),S},_=(b,S)=>{for(const E in b)if(Ke(b,E)){const T=S[E];if(Vo(T)||b[E]!==T)return!1;delete S[E]}for(const E in S)if(Ke(S,E))return!1;return!0};return!($e(f)&&$e(h)&&(!_(g(f),g(h))||!_(s.parseStyle(s.getAttrib(f,"style")),s.parseStyle(s.getAttrib(h,"style"))))||js(f)||js(h))},isAttributeInternal:u}},We=n=>["h1","h2","h3","h4","h5","h6"].includes(n.name),Vu=(n,s,a,c)=>{const u=a.name;for(let f=0,h=n.length;f<h;f++){const g=n[f];if(g.name===u){const _=c.nodes[u];_?_.nodes.push(a):c.nodes[u]={filter:g,nodes:[a]}}}if(a.attributes)for(let f=0,h=s.length;f<h;f++){const g=s[f],_=g.name;if(_ in a.attributes.map){const b=c.attributes[_];b?b.nodes.push(a):c.attributes[_]={filter:g,nodes:[a]}}}},zO=(n,s)=>{const a=(c,u)=>{Ut(c,f=>{const h=or(f.nodes);ue(f.filter.callbacks,g=>{for(let _=h.length-1;_>=0;_--){const b=h[_];(!(u?void 0!==b.attr(f.filter.name):b.name===f.filter.name)||mo(b.parent))&&h.splice(_,1)}h.length>0&&g(h,f.filter.name,s)})})};a(n.nodes,!1),a(n.attributes,!0)},uf=(n,s,a,c={})=>{const u=((n,s,a)=>{const c={nodes:{},attributes:{}};return a.firstChild&&((n,s)=>{let a=n;for(;a=a.walk();)s(a)})(a,u=>{Vu(n,s,u,c)}),c})(n,s,a);zO(u,c)},WO=(n,s,a,c)=>{if((n.pad_empty_with_br||s.insert)&&a(c)){const f=new qr("br",1);s.insert&&f.attr("data-mce-bogus","1"),c.empty().append(f)}else c.empty().append(new qr("#text",3)).value=Jn},$U=(n,s)=>{const a=n?.firstChild;return Oe(a)&&a===n.lastChild&&a.name===s},Ep=(n,s,a,c)=>c.isEmpty(s,a,u=>((n,s)=>{const a=n.getElementRule(s.name);return!0===a?.paddEmpty})(n,u)),eo=n=>{let s;for(let a=n;a;a=a.parent){const c=a.attr("contenteditable");if("false"===c)break;"true"===c&&(s=a)}return I.from(s)},px=(n,s,a=n.parent)=>{if(s.getSpecialElements()[n.name])n.empty().remove();else{const c=n.children();for(const u of c)a&&!s.isValidChild(a.name,u.name)&&px(u,s,a);n.unwrap()}},mx=(n,s,a,c=ut)=>{const u=s.getTextBlockElements(),f=s.getNonEmptyElements(),h=s.getWhitespaceElements(),g=de.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),_=new Set,b=S=>S!==a&&!g[S.name];for(let S=0;S<n.length;S++){const E=n[S];let T,N,V;if(!E.parent||_.has(E))continue;if(u[E.name]&&"li"===E.parent.name){let U=E.next;for(;U&&u[U.name];)U.name="li",_.add(U),E.parent.insert(U,E.parent),U=U.next;E.unwrap();continue}const F=[E];for(T=E.parent;T&&!s.isValidChild(T.name,E.name)&&b(T);T=T.parent)F.push(T);if(T&&F.length>1)if($u(s,E,T))px(E,s);else{F.reverse(),N=F[0].clone(),c(N);let U=N;for(let W=0;W<F.length-1;W++){s.isValidChild(U.name,F[W].name)&&W>0?(V=F[W].clone(),c(V),U.append(V)):V=U;for(let Z=F[W].firstChild;Z&&Z!==F[W+1];){const K=Z.next;V.append(Z),Z=K}U=V}Ep(s,f,h,N)?T.insert(E,F[0],!0):(T.insert(N,F[0],!0),T.insert(E,N)),T=F[0],(Ep(s,f,h,T)||$U(T,"br"))&&T.empty().remove()}else if(E.parent){if("li"===E.name){let U=E.prev;if(U&&("ul"===U.name||"ol"===U.name)){U.append(E);continue}if(U=E.next,U&&("ul"===U.name||"ol"===U.name)&&U.firstChild){U.insert(E,U.firstChild,!0);continue}const W=new qr("ul",1);c(W),E.wrap(W);continue}if(s.isValidChild(E.parent.name,"div")&&s.isValidChild("div",E.name)){const U=new qr("div",1);c(U),E.wrap(U)}else px(E,s)}}},$u=(n,s,a=s.parent)=>!!(a&&(n.children[s.name]&&!n.isValidChild(a.name,s.name)||"a"===s.name&&((n,s)=>{let a=n;for(;a;){if("a"===a.name)return!0;a=a.parent}return!1})(a)||(n=>"summary"===n.name)(a)&&We(s)&&(a?.firstChild!==s||a?.lastChild!==s))),kp=n=>n.collapsed?n:(n=>{const s=se.fromRangeStart(n),a=se.fromRangeEnd(n),c=n.commonAncestorContainer;return wi(!1,c,a).map(u=>!na(s,a,c)&&na(s,u,c)?((n,s,a,c)=>{const u=document.createRange();return u.setStart(n,s),u.setEnd(a,c),u})(s.container(),s.offset(),u.container(),u.offset()):n).getOr(n)})(n),ZO=(n,s)=>{let a=s.firstChild,c=s.lastChild;return a&&"meta"===a.name&&(a=a.next),c&&"mce_marker"===c.attr("id")&&(c=c.prev),((n,s)=>{const a=n.getNonEmptyElements();return Oe(s)&&(s.isEmpty(a)||((n,s)=>n.getBlockElements()[s.name]&&(n=>Oe(n.firstChild)&&n.firstChild===n.lastChild)(s)&&(n=>"br"===n.name||n.value===Jn)(s.firstChild))(n,s))})(n,c)&&(c=c?.prev),!(!a||a!==c||"ul"!==a.name&&"ol"!==a.name)},x_=n=>n.length>0&&(n=>!n.firstChild||(n=>Oe(n?.firstChild)&&n.firstChild===n.lastChild&&(n=>n.data===Jn||Nn(n))(n.firstChild))(n))(n[n.length-1])?n.slice(0,-1):n,gx=(n,s)=>{const a=n.getParent(s,n.isBlock);return a&&"LI"===a.nodeName?a:null},_x=(n,s)=>{const a=se.after(n),u=bi(s).prev(a);return u?u.toRange():null},P_=(n,s,a,c)=>{const u=((n,s,a)=>{const c=s.serialize(a);return(n=>{var s,a;const c=n.firstChild,u=n.lastChild;return c&&"META"===c.nodeName&&(null===(s=c.parentNode)||void 0===s||s.removeChild(c)),u&&"mce_marker"===u.id&&(null===(a=u.parentNode)||void 0===a||a.removeChild(u)),n})(n.createFragment(c))})(s,n,c),f=gx(s,a.startContainer),h=x_((n=>{var s;return nt(null!==(s=n?.childNodes)&&void 0!==s?s:[],a=>"LI"===a.nodeName)})(u.firstChild)),b=s.getRoot(),S=E=>{const T=se.fromRangeStart(a),N=bi(s.getRoot()),V=1===E?N.prev(T):N.next(T),F=V?.getNode();return!F||gx(s,F)!==f};return f?S(1)?((n,s,a)=>{const c=n.parentNode;return c&&de.each(s,u=>{c.insertBefore(u,n)}),((n,s)=>{const a=se.before(n),u=bi(s).next(a);return u?u.toRange():null})(n,a)})(f,h,b):S(2)?((n,s,a,c)=>(c.insertAfter(s.reverse(),n),_x(s[0],a)))(f,h,b,s):((n,s,a,c)=>{const u=((n,s)=>{const a=s.cloneRange(),c=s.cloneRange();return a.setStartBefore(n),c.setEndAfter(n),[a.cloneContents(),c.cloneContents()]})(n,c),f=n.parentNode;return f&&(f.insertBefore(u[0],n),de.each(s,h=>{f.insertBefore(h,n)}),f.insertBefore(u[1],n),f.removeChild(n)),_x(s[s.length-1],a)})(f,h,b,a):null},E_=["pre"],vx=O0,sA=(n,s,a)=>{var c,u;const f=n.selection,h=n.dom,g=n.parser,_=a.merge,b=Ua({validate:!0},n.schema),S='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';a.preserve_zwsp||(s=Bs(s)),-1===s.indexOf("{$caret}")&&(s+="{$caret}"),s=s.replace(/\{\$caret\}/,S);let E=f.getRng();const T=E.startContainer,N=n.getBody();T===N&&f.isCollapsed()&&h.isBlock(N.firstChild)&&((n,s)=>Oe(s)&&!n.schema.getVoidElements()[s.nodeName])(n,N.firstChild)&&h.isEmpty(N.firstChild)&&(E=h.createRng(),E.setStart(N.firstChild,0),E.setEnd(N.firstChild,0),f.setRng(E)),f.isCollapsed()||(n=>{const s=n.dom,a=kp(n.selection.getRng());n.selection.setRng(a);const c=s.getParent(a.startContainer,vx);((n,s,a)=>!!Oe(a)&&a===n.getParent(s.endContainer,vx)&&AM(j_fromDom(a),s))(s,a,c)?Mc(n,a,j_fromDom(c)):a.startContainer===a.endContainer&&a.endOffset-a.startOffset==1&&ye(a.startContainer.childNodes[a.startOffset])?a.deleteContents():n.getDoc().execCommand("Delete",!1)})(n);const V=f.getNode(),F={context:V.nodeName.toLowerCase(),data:a.data,insert:!0},U=g.parse(s,F);if(!0===a.paste&&ZO(n.schema,U)&&((n,s)=>!!gx(n,s))(h,V))return E=P_(b,h,f.getRng(),U),E&&f.setRng(E),s;!0===a.paste&&((n,s,a,c)=>{var u;const f=s.firstChild,h=s.lastChild,_=f===("bookmark"===h.attr("data-mce-type")?h.prev:h),b=zt(E_,f.name);if(_&&b){const S="false"!==f.attr("contenteditable"),E=(null===(u=n.getParent(a,n.isBlock))||void 0===u?void 0:u.nodeName.toLowerCase())===f.name,T=I.from(Bu(c,a)).forall(Oa);return S&&E&&T}return!1})(h,U,V,n.getBody())&&(null===(c=U.firstChild)||void 0===c||c.unwrap()),(n=>{let s=n;for(;s=s.walk();)1===s.type&&s.attr("data-mce-fragment","1")})(U);let W=U.lastChild;if(W&&"mce_marker"===W.attr("id")){const Z=W;for(W=W.prev;W;W=W.walk(!0))if(3===W.type||!h.isBlock(W.name)){W.parent&&n.schema.isValidChild(W.parent.name,"span")&&W.parent.insert(Z,W,"br"===W.name);break}}if(n._selectionOverrides.showBlockCaretContainer(V),F.invalid||((n,s,a)=>{var c;return Pt(a.children(),We)&&"SUMMARY"===(null===(c=n.getParent(s,n.isBlock))||void 0===c?void 0:c.nodeName)})(h,V,U)){n.selection.setContent(S);let K,Z=f.getNode();const J=n.getBody();for(yh(Z)?Z=K=J:K=Z;K&&K!==J;)Z=K,K=K.parentNode;s=Z===J?J.innerHTML:h.getOuterHTML(Z);const he=g.parse(s),we=(n=>{for(let s=n;s;s=s.walk())if("mce_marker"===s.attr("id"))return I.some(s);return I.none()})(he),ke=we.bind(eo).getOr(he);we.each(Ie=>Ie.replace(U));const ge=U.children(),re=null!==(u=U.parent)&&void 0!==u?u:he;U.unwrap();const ae=nt(ge,Ie=>$u(n.schema,Ie,re));mx(ae,n.schema,ke),uf(g.getNodeFilters(),g.getAttributeFilters(),he),s=b.serialize(he),Z===J?h.setHTML(J,s):h.setOuterHTML(Z,s)}else s=b.serialize(U),((n,s,a)=>{var c;if("all"===a.getAttribute("data-mce-bogus"))null===(c=a.parentNode)||void 0===c||c.insertBefore(n.dom.createFragment(s),a);else{const u=a.firstChild;!u||u===a.lastChild&&"BR"===u.nodeName?n.dom.setHTML(a,s):n.selection.setContent(s,{no_events:!0})}})(n,s,V);return((n,s)=>{const a=n.schema.getTextInlineElements(),c=n.dom;if(s){const u=n.getBody(),f=hx(n);de.each(c.select("*[data-mce-fragment]"),h=>{if(Oe(a[h.nodeName.toLowerCase()])&&((n,s)=>hr(Ub(n,s),a=>!(n=>$1.has(n))(a)))(c,h))for(let _=h.parentElement;Oe(_)&&_!==u&&!aU(c,h,_);_=_.parentElement)if(f.compare(_,h)){c.remove(h,!0);break}})}})(n,_),((n,s)=>{var a,c,u;let f;const h=n.dom,g=n.selection;if(!s)return;g.scrollIntoView(s);const _=Bu(n.getBody(),s);if(_&&"false"===h.getContentEditable(_))return h.remove(s),void g.select(_);let b=h.createRng();const S=s.previousSibling;if(ye(S)){b.setStart(S,null!==(c=null===(a=S.nodeValue)||void 0===a?void 0:a.length)&&void 0!==c?c:0);const N=s.nextSibling;ye(N)&&(S.appendData(N.data),null===(u=N.parentNode)||void 0===u||u.removeChild(N))}else b.setStartBefore(s),b.setEndBefore(s);const T=h.getParent(s,h.isBlock);if(h.remove(s),T&&h.isEmpty(T)){const N=vx(T);C(j_fromDom(T)),b.setStart(T,0),b.setEnd(T,0),N||(n=>!!n.getAttribute("data-mce-fragment"))(T)||!(f=(N=>{let V=se.fromRangeStart(N);return V=bi(n.getBody()).next(V),V?.toRange()})(b))?h.add(T,h.create("br",N?{}:{"data-mce-bogus":"1"})):(b=f,h.remove(T))}g.setRng(b)})(n,h.get("mce_marker")),(n=>{de.each(n.getElementsByTagName("*"),s=>{s.removeAttribute("data-mce-fragment")})})(n.getBody()),((n,s,a)=>{I.from(n.getParent(s,"td,th")).map(j_fromDom).each(c=>((n,s)=>{ry(n).each(a=>{Zi(a).each(c=>{s.isBlock(Ft(n))&&Od(a)&&s.isBlock(Ft(c))&&M(a)})})})(c,a))})(h,f.getStart(),n.schema),((n,s,a)=>{const u=fh(j_fromDom(a),f=>mt(f,j_fromDom(s)));cd(u,u.length-2).filter(Ar).fold(()=>Ur(n,s),f=>Ur(n,f.dom))})(n.schema,n.getBody(),f.getStart()),s},df=n=>n instanceof qr,yx=(n,s,a)=>{n.dom.setHTML(n.getBody(),s),!0!==a&&(n=>{Mu(n)&&Wr(n.getBody()).each(s=>{const a=s.getNode(),c=Xr(a)?Wr(a).getOr(s):s;n.selection.setRng(c.toRange())})})(n)},aA=n=>Zt(n)?n:mn,bx=(n,s,a)=>{const c=s(n),u=aA(a);return c.orThunk(()=>u(n)?I.none():((n,s,a)=>{let c=n.dom;const u=aA(a);for(;c.parentNode;){c=c.parentNode;const f=j_fromDom(c),h=s(f);if(h.isSome())return h;if(u(f))break}return I.none()})(n,s,u))},cA=o_,lA=(n,s,a)=>{const c=n.formatter.get(a);if(c)for(let u=0;u<c.length;u++){const f=c[u];if(Ci(f)&&!1===f.inherit&&n.dom.is(s,f.selector))return!0}return!1},rw=(n,s,a,c,u)=>{const f=n.dom.getRoot();if(s===f)return!1;const h=n.dom.getParent(s,g=>!!lA(n,g,a)||g.parentNode===f||!!zs(n,g,a,c,!0));return!!zs(n,h,a,c,u)},sw=(n,s,a)=>!!(Ro(a)&&cA(s,a.inline)||La(a)&&cA(s,a.block))||!!Ci(a)&&$e(s)&&n.is(s,a.selector),uA=(n,s,a,c,u,f)=>{const h=a[c],g="attributes"===c;if(Zt(a.onmatch))return a.onmatch(s,a,c);if(h)if(Qf(h)){for(let _=0;_<h.length;_++)if(g?n.getAttrib(s,h[_]):sp(n,s,h[_]))return!0}else for(const _ in h)if(Ke(h,_)){const b=g?n.getAttrib(s,_):sp(n,s,_),S=yl(h[_],f),E=mo(b)||dd(b);if(E&&mo(S))continue;if(u&&E&&!a.exact||(!u||a.exact)&&!cA(b,r_(S,_)))return!1}return!0},zs=(n,s,a,c,u)=>{const f=n.formatter.get(a),h=n.dom;if(f&&$e(s))for(let g=0;g<f.length;g++){const _=f[g];if(sw(n.dom,s,_)&&uA(h,s,_,"attributes",u,c)&&uA(h,s,_,"styles",u,c)){const b=_.classes;if(b)for(let S=0;S<b.length;S++)if(!n.dom.hasClass(s,yl(b[S],c)))return;return _}}},wx=(n,s,a,c,u)=>{if(c)return rw(n,c,s,a,u);if(c=n.selection.getNode(),rw(n,c,s,a,u))return!0;const f=n.selection.getStart();return!(f===c||!rw(n,f,s,a,u))},Dp=zo,iw=n=>{if(n){const s=new io(n,n);for(let a=s.current();a;a=s.next())if(ye(a))return a}return null},Cx=n=>{const s=j_fromTag("span");return qi(s,{id:db,"data-mce-bogus":"1","data-mce-type":"format-caret"}),n&&Yn(s,j_fromText(Dp)),s},aw=(n,s,a)=>{const c=n.dom,u=n.selection;if(BM(s))xi(n,!1,j_fromDom(s),a,!0);else{const f=u.getRng(),h=c.getParent(s,c.isBlock),g=f.startContainer,_=f.startOffset,b=f.endContainer,S=f.endOffset,E=(n=>{const s=iw(n);return s&&s.data.charAt(0)===Dp&&s.deleteData(0,1),s})(s);c.remove(s,!0),g===E&&_>0&&f.setStart(E,_-1),b===E&&S>0&&f.setEnd(E,S-1),h&&c.isEmpty(h)&&ta(j_fromDom(h)),u.setRng(f)}},Sx=(n,s,a)=>{const c=n.dom,u=n.selection;if(s)aw(n,s,a);else if(!(s=Sc(n.getBody(),u.getStart())))for(;s=c.get(db);)aw(n,s,a)},pA=(n,s)=>(n.appendChild(s),s),cw=(n,s)=>{var a;const c=Kc(n,(f,h)=>pA(f,h.cloneNode(!1)),s),u=null!==(a=c.ownerDocument)&&void 0!==a?a:document;return pA(c,u.createTextNode(Dp))},lj=(n,s,a,c)=>{const u=n.dom,f=n.selection;let h=!1;const g=n.formatter.get(s);if(!g)return;const _=f.getRng(),b=_.startContainer,S=_.startOffset;let E=b;ye(b)&&(S!==b.data.length&&(h=!0),E=E.parentNode);const T=[];let N;for(;E;){if(zs(n,E,s,a,c)){N=E;break}E.nextSibling&&(h=!0),T.push(E),E=E.parentNode}if(N)if(h){const V=f.getBookmark();_.collapse(!0);let F=Gd(u,_,g,!0);F=Ib(F),n.formatter.remove(s,a,F,c),f.moveToBookmark(V)}else{const V=Sc(n.getBody(),N),F=Oe(V)?u.getParents(N.parentNode,ro,V):[],U=Cx(!1).dom;((n,s,a)=>{var c,u;const f=n.dom,h=f.getParent(a,Ve(vb,n.schema));h&&f.isEmpty(h)?null===(c=a.parentNode)||void 0===c||c.replaceChild(s,a):((n=>{const s=Wt(n,"br"),a=nt((n=>{const s=[];let a=n.dom;for(;a;)s.push(j_fromDom(a)),a=a.lastChild;return s})(n).slice(-1),Od);s.length===a.length&&ue(a,M)})(j_fromDom(a)),f.isEmpty(a)?null===(u=a.parentNode)||void 0===u||u.replaceChild(s,a):f.insertAfter(s,a))})(n,U,V??N);const W=((n,s,a,c,u,f)=>{const h=n.formatter,g=n.dom,_=nt(zn(h.get()),E=>E!==c&&!Yo(E,"removeformat")),b=((n,s,a)=>$o(a,(c,u)=>{const f=((n,s)=>l1(n,s,c=>{const u=f=>Zt(f)||f.length>1&&"%"===f.charAt(0);return Pt(["styles","attributes"],f=>Nt(c,f).exists(h=>{const g=Sn(h)?h:Do(h);return Pt(g,u)}))}))(n,u);return n.formatter.matchNode(s,u,{},f)?c.concat([u]):c},[]))(n,a,_);if(nt(b,E=>!((n,s,a)=>{const c=["inline","block","selector","attributes","styles","classes"],u=f=>Ns(f,(h,g)=>Pt(c,_=>_===g));return l1(n,s,f=>{const h=u(f);return l1(n,a,g=>{const _=u(g);return((n,s,a=Dm)=>Hl(a).eq(n,s))(h,_)})})})(n,E,c)).length>0){const E=a.cloneNode(!1);return g.add(s,E),h.remove(c,u,E,f),g.remove(E),I.some(E)}return I.none()})(n,U,N,s,a,c),Z=cw([...T,...W.toArray(),...F],U);V&&aw(n,V,Oe(V)),f.setCursorLocation(Z,1),u.isEmpty(N)&&u.remove(N)}},gA=n=>{const s=Cx(!1),a=cw(n,s.dom);return{caretContainer:s,caretPosition:se(a,0)}},_A=(n,s)=>{const{caretContainer:a,caretPosition:c}=gA(s);return Fr(j_fromDom(n),a),M(j_fromDom(n)),c},vA=(n,s)=>{if(sa(s.dom))return!1;const a=n.schema.getTextInlineElements();return Ke(a,Ft(s))&&!sa(s.dom)&&!Po(s.dom)},Tp={},xx=xn(["pre"]);((n,s)=>{Tp[n]||(Tp[n]=[]),Tp[n].push(n=>{const s=n.selection.getRng();if(!s.collapsed){const u=n.selection.getSelectedBlocks(),f=nt(nt(u,xx),(u=>f=>{const h=f.previousSibling;return xx(h)&&zt(u,h)})(u));ue(f,h=>{((u,f)=>{const h=j_fromDom(f),g=fn(h).dom;M(h),y(j_fromDom(u),[j_fromTag("br",g),j_fromTag("br",g),...sr(h)])})(h.previousSibling,h)})}})})("pre");const Px=["fontWeight","fontStyle","color","fontSize","fontFamily"],Mp=(n,s)=>{const a=n.get(s);return Sn(a)?(n=>vn(n,s=>Ro(s)&&"span"===s.inline&&(n=>ko(n.styles)&&Pt(zn(n.styles),s=>zt(Px,s)))(s)))(a):I.none()},Ex=(n,s)=>Us(s,se.fromRangeStart(n)).isNone(),z=(n,s)=>!1===vs(s,se.fromRangeEnd(n)).exists(a=>!Nn(a.getNode())||vs(s,a).isSome()),kx=n=>s=>h7(s)&&n.isEditable(s),Dx=n=>nt(n.getSelectedBlocks(),kx(n.dom)),lw=de.each,q=n=>$e(n)&&!js(n)&&!sa(n)&&!Po(n),bA=(n,s)=>{for(let a=n;a;a=a[s]){if(ye(a)&&Ui(a.data))return n;if($e(a)&&!js(a))return a}return n},wA=(n,s,a)=>{const c=hx(n),u=_r(s)&&n.dom.isEditable(s),f=_r(a)&&n.dom.isEditable(a);if(u&&f){const h=bA(s,"previousSibling"),g=bA(a,"nextSibling");if(c.compare(h,g)){for(let _=h.nextSibling;_&&_!==g;){const b=_;_=_.nextSibling,h.appendChild(b)}return n.dom.remove(g),de.each(de.grep(g.childNodes),_=>{h.appendChild(_)}),h}}return a},CA=(n,s,a,c)=>{var u;if(c&&!1!==s.merge_siblings){const f=null!==(u=wA(n,B(c),c))&&void 0!==u?u:c;wA(n,f,B(f,!0))}},In=(n,s,a)=>{lw(n.childNodes,c=>{q(c)&&(s(c)&&a(c),c.hasChildNodes()&&In(c,s,a))})},Tx=(n,s)=>a=>!(!a||!sp(n,a,s)),Mx=(n,s,a)=>c=>{n.setStyle(c,s,a),""===c.getAttribute("style")&&c.removeAttribute("style"),((n,s)=>{"SPAN"===s.nodeName&&0===n.getAttribs(s).length&&n.remove(s,!0)})(n,c)},Uu=vi_generate([{keep:[]},{rename:["name"]},{removed:[]}]),xA=/^(src|href|style)$/,uw=de.each,D_=o_,EA=(n,s,a)=>n.isChildOf(s,a)&&s!==a&&!n.isBlock(a),Gr=(n,s,a)=>{let c=s[a?"startContainer":"endContainer"],u=s[a?"startOffset":"endOffset"];if($e(c)){const f=c.childNodes.length-1;!a&&u&&u--,c=c.childNodes[u>f?f:u]}return ye(c)&&a&&u>=c.data.length&&(c=new io(c,n.getBody()).next()||c),ye(c)&&!a&&0===u&&(c=new io(c,n.getBody()).prev()||c),c},kA=(n,s)=>{const a=s?"firstChild":"lastChild",c=n[a];return(n=>/^(TR|TH|TD)$/.test(n.nodeName))(n)&&c?"TR"===n.nodeName&&c[a]||c:n},Ix=(n,s,a,c)=>{var u;const f=n.create(a,c);return null===(u=s.parentNode)||void 0===u||u.insertBefore(f,s),f.appendChild(s),f},DA=(n,s,a,c,u)=>{const f=j_fromDom(s),h=j_fromDom(n.create(c,u)),g=a?P0(f):hh(f);return y(h,g),a?(Fr(f,h),ph(h,f)):(Ji(f,h),Yn(h,f)),h.dom},TA=(n,s,a)=>{const c=s.parentNode;let u;const f=n.dom,h=wr(n);La(a)&&c===f.getRoot()&&(!a.list_block||!D_(s,a.list_block))&&ue(or(s.childNodes),g=>{tp(n,h,g.nodeName.toLowerCase())?u?u.appendChild(g):(u=Ix(f,g,h),f.setAttribs(u,Vd(n))):u=null}),(!(n=>Ci(n)&&Ro(n)&&Ta(Nt(n,"mixed"),!0))(a)||D_(a.inline,s))&&f.remove(s,!0)},MA=(n,s,a)=>ni(n)?{name:s,value:null}:{name:n,value:yl(s,a)},IA=(n,s)=>{""===n.getAttrib(s,"style")&&(s.removeAttribute("style"),s.removeAttribute("data-mce-style"))},OA=(n,s,a,c,u)=>{let f=!1;uw(a.styles,(h,g)=>{const{name:_,value:b}=MA(g,h,c),S=r_(b,_);(a.remove_similar||po(b)||!$e(u)||D_(sp(n,u,_),S))&&n.setStyle(s,_,""),f=!0}),f&&IA(n,s)},Ox=(n,s,a,c,u)=>{const f=n.dom,h=hx(n),g=n.schema;if(Ro(s)&&ps(g,s.inline)&&cl(g,c)&&c.parentElement===n.getBody())return TA(n,c,s),Uu.removed();if(!s.ceFalseOverride&&c&&"false"===f.getContentEditableParent(c)||c&&!sw(f,c,s)&&!((n,s)=>s.links&&"A"===n.nodeName)(c,s))return Uu.keep();const _=c,b=s.preserve_attributes;if(Ro(s)&&"all"===s.remove&&Sn(b)){const S=nt(f.getAttribs(_),E=>zt(b,E.name.toLowerCase()));if(f.removeAllAttribs(_),ue(S,E=>f.setAttrib(_,E.name,E.value)),S.length>0)return Uu.rename("span")}if("all"!==s.remove){OA(f,_,s,a,u),uw(s.attributes,(E,T)=>{const{name:N,value:V}=MA(T,E,a);if(s.remove_similar||po(V)||!$e(u)||D_(f.getAttrib(u,N),V)){if("class"===N){const F=f.getAttrib(_,N);if(F){let U="";if(ue(F.split(/\s+/),W=>{/mce\-\w+/.test(W)&&(U+=(U?" ":"")+W)}),U)return void f.setAttrib(_,N,U)}}if(xA.test(N)&&_.removeAttribute("data-mce-"+N),"style"===N&&xn(["li"])(_)&&"none"===f.getStyle(_,"list-style-type"))return _.removeAttribute(N),void f.setStyle(_,"list-style-type","none");"class"===N&&_.removeAttribute("className"),_.removeAttribute(N)}}),uw(s.classes,E=>{E=yl(E,a),(!$e(u)||f.hasClass(u,E))&&f.removeClass(_,E)});const S=f.getAttribs(_);for(let E=0;E<S.length;E++)if(!h.isAttributeInternal(S[E].nodeName))return Uu.keep()}return"none"!==s.remove?(TA(n,_,s),Uu.removed()):Uu.keep()},NA=(n,s,a,c)=>Ox(n,s,a,c,c).fold(Ae(c),u=>(n.dom.createFragment().appendChild(c),n.dom.rename(c,u)),Ae(null)),Ax=(n,s,a,c,u)=>{(c||n.selection.isEditable())&&((n,s,a,c,u)=>{const f=n.formatter.get(s),h=f[0],g=n.dom,_=n.selection,b=F=>{const U=((n,s,a,c,u)=>{let f;return s.parentNode&&ue(ip(n.dom,s.parentNode).reverse(),h=>{if(!f&&$e(h)&&"_start"!==h.id&&"_end"!==h.id){const g=zs(n,h,a,c,u);g&&!1!==g.split&&(f=h)}}),f})(n,F,s,a,u);return((n,s,a,c,u,f,h,g)=>{var _,b;let S,E;const T=n.dom;if(a){const N=a.parentNode;for(let V=c.parentNode;V&&V!==N;V=V.parentNode){let F=T.clone(V,!1);for(let U=0;U<s.length&&(F=NA(n,s[U],g,F),null!==F);U++);F&&(S&&F.appendChild(S),E||(E=F),S=F)}(!h.mixed||!T.isBlock(a))&&(c=null!==(_=T.split(a,c))&&void 0!==_?_:c),S&&E&&(null===(b=u.parentNode)||void 0===b||b.insertBefore(S,u),E.appendChild(u),Ro(h)&&CA(n,h,0,S))}return c})(n,f,U,F,F,0,h,a)},E=F=>Pt(f,U=>Ip(n,U,a,F,F)),T=F=>{const U=or(F.childNodes),Z=E(F)||Pt(f,he=>sw(g,F,he)),K=F.parentNode;if(!Z&&Oe(K)&&yb(h)&&E(K),h.deep&&U.length)for(let he=0;he<U.length;he++)T(U[he]);ue(["underline","line-through","overline"],he=>{$e(F)&&n.dom.getStyle(F,"text-decoration")===he&&F.parentNode&&c1(g,F.parentNode)===he&&Ip(n,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:he}},void 0,F)})},N=F=>{const U=g.get(F?"_start":"_end");if(U){let W=U[F?"firstChild":"lastChild"];return(F=>js(F)&&$e(F)&&("_start"===F.id||"_end"===F.id))(W)&&(W=W[F?"firstChild":"lastChild"]),ye(W)&&0===W.data.length&&(W=F?U.previousSibling||U.nextSibling:U.nextSibling||U.previousSibling),g.remove(U,!0),W}return null},V=F=>{let U,W,Z=Gd(g,F,f,F.collapsed);if(h.split){if(Z=Ib(Z),U=Gr(n,Z,!0),W=Gr(n,Z),U!==W){if(U=kA(U,!0),W=kA(W,!1),EA(g,U,W)){const J=I.from(U.firstChild).getOr(U);return b(DA(g,J,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void N(!0)}if(EA(g,W,U)){const J=I.from(W.lastChild).getOr(W);return b(DA(g,J,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void N(!1)}U=Ix(g,U,"span",{id:"_start","data-mce-type":"bookmark"}),W=Ix(g,W,"span",{id:"_end","data-mce-type":"bookmark"});const K=g.createRng();K.setStartAfter(U),K.setEndBefore(W),s_(g,K,J=>{ue(J,he=>{!js(he)&&!js(he.parentNode)&&b(he)})}),b(U),b(W),U=N(!0),W=N()}else U=W=b(U);Z.startContainer=U.parentNode?U.parentNode:U,Z.startOffset=g.nodeIndex(U),Z.endContainer=W.parentNode?W.parentNode:W,Z.endOffset=g.nodeIndex(W)+1}s_(g,Z,K=>{ue(K,T)})};if(c){if(ep(c)){const F=g.createRng();F.setStartBefore(c),F.setEndAfter(c),V(F)}else V(c);_1(n,s,c,a)}else _.isCollapsed()&&Ro(h)&&!qd(n).length?lj(n,s,a,u):(k(n,()=>NM(n,V),F=>Ro(h)&&wx(n,s,a,F)),n.nodeChanged()),((n,s,a)=>{"removeformat"===s?ue(Dx(n.selection),c=>{ue(Px,u=>n.dom.setStyle(c,u,"")),IA(n.dom,c)}):Mp(n.formatter,s).each(c=>{ue(Dx(n.selection),u=>OA(n.dom,u,c,a,null))})})(n,s,a),_1(n,s,c,a)})(n,s,a,c,u)},Ip=(n,s,a,c,u)=>Ox(n,s,a,c,u).fold(mn,f=>(n.dom.rename(c,f),!0),ro),Nx=de.each,ht=de.each,Rx=(n,s,a,c)=>{if(ht(a.styles,(u,f)=>{n.setStyle(s,f,yl(u,c))}),a.styles){const u=n.getAttrib(s,"style");u&&n.setAttrib(s,"data-mce-style",u)}},VA=(n,s,a,c)=>{const u=n.formatter.get(s),f=u[0],h=!c&&n.selection.isCollapsed(),g=n.dom,_=n.selection,b=(V,F=f)=>{Zt(F.onformat)&&F.onformat(V,F,a,c),Rx(g,V,F,a),ht(F.attributes,(U,W)=>{g.setAttrib(V,W,yl(U,a))}),ht(F.classes,U=>{const W=yl(U,a);g.hasClass(V,W)||g.addClass(V,W)})},S=(V,F)=>{let U=!1;return ht(V,W=>!(!Ci(W)||!("false"===g.getContentEditable(F)&&!W.ceFalseOverride||Oe(W.collapsed)&&W.collapsed!==h)&&g.is(F,W.selector)&&!sa(F)&&(b(F,W),U=!0,1))),U},T=(V,F,U)=>{const W=[];let Z=!0;const K=f.inline||f.block,J=(V=>{if(Ye(V)){const F=g.create(V);return b(F),F}return null})(K);s_(V,F,ge=>{let re;const ae=Ie=>{let qe=!1,it=Z,bt=!1;const Kt=Ie.parentNode,en=Kt.nodeName.toLowerCase(),ln=V.getContentEditable(Ie);Oe(ln)&&(it=Z,Z="true"===ln,qe=!0,bt=rp(n,Ie));const Ko=Z&&!qe;if(Nn(Ie)&&!((n,s,a,c)=>{if(RS(n)&&Ro(s)&&a.parentNode){const u=Xn(n.schema),f=mh(j_fromDom(a),h=>sa(h.dom));return Fn(u,c)&&hs(n.schema,a.parentNode,{skipBogus:!1,includeZwsp:!0})&&!f}return!1})(n,f,Ie,en))return re=null,void(La(f)&&V.remove(Ie));if((ge=>(n=>La(n)&&!0===n.wrapper)(f)&&zs(n,ge,s,a))(Ie))re=null;else{if(((ge,re,ae)=>{const Ie=(n=>La(n)&&!0!==n.wrapper)(f)&&vb(n.schema,ge)&&tp(n,re,K);return ae&&Ie})(Ie,en,Ko)){const on=V.rename(Ie,K);return b(on),W.push(on),void(re=null)}if(Ci(f)){let on=S(u,Ie);if(!on&&Oe(Kt)&&yb(f)&&(on=S(u,Kt)),!Ro(f)||on)return void(re=null)}Oe(J)&&((ge,re,ae,Ie)=>{const qe=ge.nodeName.toLowerCase(),it=tp(n,K,qe)&&tp(n,re,K),bt=!U&&ye(ge)&&Ng(ge.data),Kt=sa(ge),en=!Ro(f)||!V.isBlock(ge);return(ae||Ie)&&it&&!bt&&!Kt&&en})(Ie,en,Ko,bt)?(re||(re=V.clone(J,!1),Kt.insertBefore(re,Ie),W.push(re)),bt&&qe&&(Z=it),re.appendChild(Ie)):(re=null,ue(or(Ie.childNodes),ae),qe&&(Z=it),re=null)}};ue(ge,ae)}),!0===f.links&&ue(W,ge=>{const re=ae=>{"A"===ae.nodeName&&b(ae,f),ue(or(ae.childNodes),re)};re(ge)}),ue(W,ge=>{const Ie=(qe=>{let it=0;return ue(qe.childNodes,bt=>{!(n=>Oe(n)&&ye(n)&&0===n.length)(bt)&&!js(bt)&&it++}),it})(ge);var qe;!(W.length>1)&&V.isBlock(ge)||0!==Ie?(Ro(f)||La(f)&&f.wrapper)&&(!f.exact&&1===Ie&&(ge=vn((qe=ge).childNodes,RM).filter(bt=>"false"!==V.getContentEditable(bt)&&sw(V,bt,f)).map(bt=>{const Kt=V.clone(bt,!1);return b(Kt),V.replace(Kt,qe,!0),V.remove(bt,!0),Kt}).getOr(qe)),((n,s,a,c)=>{Nx(s,u=>{Ro(u)&&Nx(n.dom.select(u.inline,c),f=>{q(f)&&Ip(n,u,a,f,u.exact?f:null)}),((n,s,a)=>{s.clear_child_styles&&lw(n.select(s.links?"*:not(a)":"*",a),u=>{q(u)&&n.isEditable(u)&&lw(s.styles,(f,h)=>{n.setStyle(u,h,"")})})})(n.dom,u,c)})})(n,u,a,ge),((n,s,a,c,u)=>{const f=u.parentNode;zs(n,f,a,c)&&Ip(n,s,c,u)||s.merge_with_parents&&f&&n.dom.getParent(f,h=>!!zs(n,h,a,c)&&(Ip(n,s,c,u),!0))})(n,f,s,a,ge),((n,s,a,c)=>{if(s.styles&&s.styles.backgroundColor){const u=Tx(n,"fontSize");In(c,f=>u(f)&&n.isEditable(f),Mx(n,"backgroundColor",yl(s.styles.backgroundColor,a)))}})(V,f,a,ge),((n,s,a,c)=>{const u=f=>{if(_r(f)&&$e(f.parentNode)&&n.isEditable(f)){const h=c1(n,f.parentNode);n.getStyle(f,"color")&&h?n.setStyle(f,"text-decoration",h):n.getStyle(f,"text-decoration")===h&&n.setStyle(f,"text-decoration",null)}};s.styles&&(s.styles.color||s.styles.textDecoration)&&(de.walk(c,u,"childNodes"),u(c))})(V,f,0,ge),((n,s,a,c)=>{if(Ro(s)&&("sub"===s.inline||"sup"===s.inline)){const u=Tx(n,"fontSize");In(c,h=>u(h)&&n.isEditable(h),Mx(n,"fontSize",""));const f=nt(n.select("sup"===s.inline?"sub":"sup",c),n.isEditable);n.remove(f,!0)}})(V,f,0,ge),CA(n,f,0,ge)):V.remove(ge,!0)})},N=ep(c)?c:_.getNode();if("false"===g.getContentEditable(N)&&!rp(n,N))return S(u,c=N),void tI(n,s,c,a);if(f){if(c)if(ep(c)){if(!S(u,c)){const V=g.createRng();V.setStartBefore(c),V.setEndAfter(c),T(g,Gd(g,V,u),!0)}}else T(g,c,!0);else h&&Ro(f)&&!qd(n).length?((n,s,a)=>{let c;const u=n.selection,f=n.formatter.get(s);if(!f)return;const h=u.getRng();let g=h.startOffset;const b=h.startContainer.nodeValue;c=Sc(n.getBody(),u.getStart());const S=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(b&&g>0&&g<b.length&&S.test(b.charAt(g))&&S.test(b.charAt(g-1))){const E=u.getBookmark();h.collapse(!0);let T=Gd(n.dom,h,f);T=Ib(T),n.formatter.apply(s,a,T),u.moveToBookmark(E)}else{let E=c?iw(c):null;(!c||E?.data!==Dp)&&(c=((n,s)=>n.importNode(s,!0))(n.getDoc(),Cx(!0).dom),E=c.firstChild,h.insertNode(c),g=1),n.formatter.apply(s,a,c),u.setCursorLocation(E,g)}})(n,s,a):(_.setRng(kp(_.getRng())),k(n,()=>{NM(n,(V,F)=>{const U=F?V:Gd(g,V,u);T(g,U,!1)})},ro),n.nodeChanged()),Mp(n.formatter,s).each(V=>{ue((n=>nt((n=>{const s=n.getSelectedBlocks(),a=n.getRng();if(n.isCollapsed())return[];if(1===s.length)return Ex(a,s[0])&&z(a,s[0])?s:[];{const c=go(s).filter(h=>Ex(a,h)).toArray(),u=cs(s).filter(h=>z(a,h)).toArray(),f=s.slice(1,-1);return c.concat(f).concat(u)}})(n),kx(n.dom)))(n.selection),F=>Rx(g,F,V,a))});((n,s)=>{Ke(Tp,n)&&ue(Tp[n],a=>{a(s)})})(s,n)}tI(n,s,c,a)},Fx=(n,s,a,c)=>{(c||n.selection.isEditable())&&VA(n,s,a,c)},Lx=n=>Ke(n,"vars"),Bx=n=>n.selection.getStart(),Vx=(n,s,a,c,u)=>ad(s,g=>{const _=n.formatter.matchNode(g,a,u??{},c);return!Vo(_)},g=>!!lA(n,g,a)||!c&&Oe(n.formatter.matchNode(g,a,u,!0))),$x=(n,s)=>{const a=s??Bx(n);return nt(ip(n.dom,a),c=>$e(c)&&!Po(c))},UA=(n,s,a)=>{const c=$x(n,s);Ut(a,(u,f)=>{const h=g=>{const _=Vx(n,c,f,g.similar,Lx(g)?g.vars:void 0),b=_.isSome();if(g.state.get()!==b){g.state.set(b);const S=_.getOr(s);Lx(g)?g.callback(b,{node:S,format:f,parents:c}):ue(g.callbacks,E=>E(b,{node:S,format:f,parents:c}))}};ue([u.withSimilar,u.withoutSimilar],h),ue(u.withVars,h)})},HA=de.explode,zA=()=>{const n={};return{addFilter:(u,f)=>{ue(HA(u),h=>{Ke(n,h)||(n[h]={name:h,callbacks:[]}),n[h].callbacks.push(f)})},getFilters:()=>Do(n),removeFilter:(u,f)=>{ue(HA(u),h=>{if(Ke(n,h))if(Oe(f)){const g=n[h],_=nt(g.callbacks,b=>b!==f);_.length>0?g.callbacks=_:delete n[h]}else delete n[h]})}}},ff=(n,s,a)=>{var c;const u=Cy();s.convert_fonts_to_spans&&((n,s,a)=>{n.addNodeFilter("font",c=>{ue(c,u=>{const f=s.parse(u.attr("style")),h=u.attr("color"),g=u.attr("face"),_=u.attr("size");h&&(f.color=h),g&&(f["font-family"]=g),_&&ji(_).each(b=>{f["font-size"]=a[b-1]}),u.name="span",u.attr("style",s.serialize(f)),((n,s)=>{ue(["color","face","size"],a=>{n.attr(a,null)})})(u)})})})(n,u,de.explode(null!==(c=s.font_size_legacy_values)&&void 0!==c?c:"")),((n,s,a)=>{n.addNodeFilter("strike",c=>{const u="html4"!==s.type;ue(c,f=>{if(u)f.name="s";else{const h=a.parse(f.attr("style"));h["text-decoration"]="line-through",f.name="span",f.attr("style",a.serialize(h))}})})})(n,a,u)},T_=n=>{const[s,...a]=n.split(","),c=a.join(","),u=/data:([^/]+\/[^;]+)(;.+)?/.exec(s);if(u){const f=";base64"===u[2],h=f?(n=>{const s=/([a-z0-9+\/=\s]+)/i.exec(n);return s?s[1]:""})(c):decodeURIComponent(c);return I.some({type:u[1],data:h,base64Encoded:f})}return I.none()},dw=(n,s,a=!0)=>{let c=s;if(a)try{c=atob(s)}catch{return I.none()}const u=new Uint8Array(c.length);for(let f=0;f<u.length;f++)u[f]=c.charCodeAt(f);return I.some(new Blob([u],{type:n}))},fw=n=>new Promise((s,a)=>{const c=new FileReader;c.onloadend=()=>{s(c.result)},c.onerror=()=>{var u;a(null===(u=c.error)||void 0===u?void 0:u.message)},c.readAsDataURL(n)});let Ej=0;const GA=(n,s,a)=>T_(n).bind(({data:c,type:u,base64Encoded:f})=>{if(s&&!f)return I.none();{const h=f?c:btoa(c);return a(h,u)}}),KA=(n,s,a)=>{const c=n.create("blobid"+Ej++,s,a);return n.add(c),c},M_=(n,s,a=!1)=>GA(s,a,(c,u)=>I.from(n.getByData(c,u)).orThunk(()=>dw(u,c).map(f=>KA(n,f,c)))),qx=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,YA=n=>I.from(n.match(qx)).bind(s=>cd(s,1)).map(s=>vo(s,"www.")?s.substring(4):s),Gx=(n,s)=>{I.from(n.attr("src")).bind(YA).forall(a=>!zt(s,a))&&n.attr("sandbox","")},hw=(n,s)=>vo(n,`${s}/`),{entries:Ij,setPrototypeOf:Kx,isFrozen:Oj,getPrototypeOf:Aj,getOwnPropertyDescriptor:iW}=Object;let{freeze:Cs,seal:Ws,create:aW}=Object,{apply:XA,construct:Zx}=typeof Reflect<"u"&&Reflect;XA||(XA=function(s,a,c){return s.apply(a,c)}),Cs||(Cs=function(s){return s}),Ws||(Ws=function(s){return s}),Zx||(Zx=function(s,a){return new s(...a)});const Nj=ki(Array.prototype.forEach),ve=ki(Array.prototype.pop),Pi=ki(Array.prototype.push),Ss=ki(String.prototype.toLowerCase),Yx=ki(String.prototype.toString),Rj=ki(String.prototype.match),ja=ki(String.prototype.replace),Fj=ki(String.prototype.indexOf),Lj=ki(String.prototype.trim),Ei=ki(RegExp.prototype.test),Sl=function eN(n){return function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return Zx(n,a)}}(TypeError);function ki(n){return function(s){for(var a=arguments.length,c=new Array(a>1?a-1:0),u=1;u<a;u++)c[u-1]=arguments[u];return XA(n,s,c)}}function Qt(n,s,a){var c;a=null!==(c=a)&&void 0!==c?c:Ss,Kx&&Kx(n,null);let u=s.length;for(;u--;){let f=s[u];if("string"==typeof f){const h=a(f);h!==f&&(Oj(s)||(s[u]=h),f=h)}n[f]=!0}return n}function hf(n){const s=aW(null);for(const[a,c]of Ij(n))s[a]=c;return s}function I_(n,s){for(;null!==n;){const c=iW(n,s);if(c){if(c.get)return ki(c.get);if("function"==typeof c.value)return ki(c.value)}n=Aj(n)}return function a(c){return console.warn("fallback value for",c),null}}const tN=Cs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Jx=Cs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),nN=Cs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),cW=Cs(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Qx=Cs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Bj=Cs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),oN=Cs(["#text"]),rN=Cs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Xx=Cs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Op=Cs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pw=Cs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),eP=Ws(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xl=Ws(/<%[\w\W]*|[\w\W]*%>/gm),Vj=Ws(/\${[\w\W]*}/gm),$j=Ws(/^data-[\-\w.\u00B7-\uFFFF]/),Uj=Ws(/^aria-[\-\w]+$/),O_=Ws(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),tP=Ws(/^(?:\w+script|data):/i),nP=Ws(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),oP=Ws(/^html$/i);var mw=Object.freeze({__proto__:null,MUSTACHE_EXPR:eP,ERB_EXPR:xl,TMPLIT_EXPR:Vj,DATA_ATTR:$j,ARIA_ATTR:Uj,IS_ALLOWED_URI:O_,IS_SCRIPT_OR_DATA:tP,ATTR_WHITESPACE:nP,DOCTYPE_NAME:oP}),iN=function sN(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const s=vt=>sN(vt);if(s.version="3.0.5",s.removed=[],!n||!n.document||9!==n.document.nodeType)return s.isSupported=!1,s;const a=n.document,c=a.currentScript;let{document:u}=n;const{DocumentFragment:f,HTMLTemplateElement:h,Node:g,Element:_,NodeFilter:b,NamedNodeMap:S=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:E,DOMParser:T,trustedTypes:N}=n,V=_.prototype,F=I_(V,"cloneNode"),U=I_(V,"nextSibling"),W=I_(V,"childNodes"),Z=I_(V,"parentNode");if("function"==typeof h){const vt=u.createElement("template");vt.content&&vt.content.ownerDocument&&(u=vt.content.ownerDocument)}let K,J="";const{implementation:he,createNodeIterator:we,createDocumentFragment:ke,getElementsByTagName:ge}=u,{importNode:re}=a;let ae={};s.isSupported="function"==typeof Ij&&"function"==typeof Z&&he&&void 0!==he.createHTMLDocument;const{MUSTACHE_EXPR:Ie,ERB_EXPR:qe,TMPLIT_EXPR:it,DATA_ATTR:bt,ARIA_ATTR:Kt,IS_SCRIPT_OR_DATA:en,ATTR_WHITESPACE:ln}=mw;let{IS_ALLOWED_URI:Ko}=mw,on=null;const xe=Qt({},[...tN,...Jx,...nN,...Qx,...oN]);let He=null;const Bt=Qt({},[...rN,...Xx,...Op,...pw]);let Me=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ze=null,pt=null,De=!0,dt=!0,_t=!1,uo=!0,Gt=!1,fo=!1,Oi=!1,Ja=!1,kr=!1,Ts=!1,Ai=!1,Ms=!0,Is=!1,kt=!0,wn=!1,cn={},no=null;const Bo=Qt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Gn=null;const Kn=Qt({},["audio","video","img","source","image","track"]);let Dr=null;const ya=Qt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Os="http://www.w3.org/1998/Math/MathML",ba="http://www.w3.org/2000/svg",Ni="http://www.w3.org/1999/xhtml";let Fl=Ni,ur=!1,Ri=null;const mD=Qt({},[Os,ba,Ni],Yx);let Ll;const s0=["application/xhtml+xml","text/html"];let dr,qf=null;const BB=u.createElement("form"),gD=function(oe){return oe instanceof RegExp||oe instanceof Function},Hc=function(oe){if(!qf||qf!==oe){if((!oe||"object"!=typeof oe)&&(oe={}),oe=hf(oe),Ll=Ll=-1===s0.indexOf(oe.PARSER_MEDIA_TYPE)?"text/html":oe.PARSER_MEDIA_TYPE,dr="application/xhtml+xml"===Ll?Yx:Ss,on="ALLOWED_TAGS"in oe?Qt({},oe.ALLOWED_TAGS,dr):xe,He="ALLOWED_ATTR"in oe?Qt({},oe.ALLOWED_ATTR,dr):Bt,Ri="ALLOWED_NAMESPACES"in oe?Qt({},oe.ALLOWED_NAMESPACES,Yx):mD,Dr="ADD_URI_SAFE_ATTR"in oe?Qt(hf(ya),oe.ADD_URI_SAFE_ATTR,dr):ya,Gn="ADD_DATA_URI_TAGS"in oe?Qt(hf(Kn),oe.ADD_DATA_URI_TAGS,dr):Kn,no="FORBID_CONTENTS"in oe?Qt({},oe.FORBID_CONTENTS,dr):Bo,Ze="FORBID_TAGS"in oe?Qt({},oe.FORBID_TAGS,dr):{},pt="FORBID_ATTR"in oe?Qt({},oe.FORBID_ATTR,dr):{},cn="USE_PROFILES"in oe&&oe.USE_PROFILES,De=!1!==oe.ALLOW_ARIA_ATTR,dt=!1!==oe.ALLOW_DATA_ATTR,_t=oe.ALLOW_UNKNOWN_PROTOCOLS||!1,uo=!1!==oe.ALLOW_SELF_CLOSE_IN_ATTR,Gt=oe.SAFE_FOR_TEMPLATES||!1,fo=oe.WHOLE_DOCUMENT||!1,kr=oe.RETURN_DOM||!1,Ts=oe.RETURN_DOM_FRAGMENT||!1,Ai=oe.RETURN_TRUSTED_TYPE||!1,Ja=oe.FORCE_BODY||!1,Ms=!1!==oe.SANITIZE_DOM,Is=oe.SANITIZE_NAMED_PROPS||!1,kt=!1!==oe.KEEP_CONTENT,wn=oe.IN_PLACE||!1,Ko=oe.ALLOWED_URI_REGEXP||O_,Fl=oe.NAMESPACE||Ni,Me=oe.CUSTOM_ELEMENT_HANDLING||{},oe.CUSTOM_ELEMENT_HANDLING&&gD(oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Me.tagNameCheck=oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&gD(oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Me.attributeNameCheck=oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Me.allowCustomizedBuiltInElements=oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Gt&&(dt=!1),Ts&&(kr=!0),cn&&(on=Qt({},[...oN]),He=[],!0===cn.html&&(Qt(on,tN),Qt(He,rN)),!0===cn.svg&&(Qt(on,Jx),Qt(He,Xx),Qt(He,pw)),!0===cn.svgFilters&&(Qt(on,nN),Qt(He,Xx),Qt(He,pw)),!0===cn.mathMl&&(Qt(on,Qx),Qt(He,Op),Qt(He,pw))),oe.ADD_TAGS&&(on===xe&&(on=hf(on)),Qt(on,oe.ADD_TAGS,dr)),oe.ADD_ATTR&&(He===Bt&&(He=hf(He)),Qt(He,oe.ADD_ATTR,dr)),oe.ADD_URI_SAFE_ATTR&&Qt(Dr,oe.ADD_URI_SAFE_ATTR,dr),oe.FORBID_CONTENTS&&(no===Bo&&(no=hf(no)),Qt(no,oe.FORBID_CONTENTS,dr)),kt&&(on["#text"]=!0),fo&&Qt(on,["html","head","body"]),on.table&&(Qt(on,["tbody"]),delete Ze.tbody),oe.TRUSTED_TYPES_POLICY){if("function"!=typeof oe.TRUSTED_TYPES_POLICY.createHTML)throw Sl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof oe.TRUSTED_TYPES_POLICY.createScriptURL)throw Sl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');K=oe.TRUSTED_TYPES_POLICY,J=K.createHTML("")}else void 0===K&&(K=function(s,a){if("object"!=typeof s||"function"!=typeof s.createPolicy)return null;let c=null;const u="data-tt-policy-suffix";a&&a.hasAttribute(u)&&(c=a.getAttribute(u));const f="dompurify"+(c?"#"+c:"");try{return s.createPolicy(f,{createHTML:h=>h,createScriptURL:h=>h})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}}(N,c)),null!==K&&"string"==typeof J&&(J=K.createHTML(""));Cs&&Cs(oe),qf=oe}},Ev=Qt({},["mi","mo","mn","ms","mtext"]),X=Qt({},["foreignobject","desc","title","annotation-xml"]),ee=Qt({},["title","style","font","a","script"]),Se=Qt({},Jx);Qt(Se,nN),Qt(Se,cW);const be=Qt({},Qx);Qt(be,Bj);const St=function(oe){Pi(s.removed,{element:oe});try{oe.parentNode.removeChild(oe)}catch{oe.remove()}},Cn=function(oe,Ue){try{Pi(s.removed,{attribute:Ue.getAttributeNode(oe),from:Ue})}catch{Pi(s.removed,{attribute:null,from:Ue})}if(Ue.removeAttribute(oe),"is"===oe&&!He[oe])if(kr||Ts)try{St(Ue)}catch{}else try{Ue.setAttribute(oe,"")}catch{}},wa=function(oe){let Ue,tt;if(Ja)oe="<remove></remove>"+oe;else{const Ca=Rj(oe,/^[\r\n\t ]+/);tt=Ca&&Ca[0]}"application/xhtml+xml"===Ll&&Fl===Ni&&(oe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+oe+"</body></html>");const Un=K?K.createHTML(oe):oe;if(Fl===Ni)try{Ue=(new T).parseFromString(Un,Ll)}catch{}if(!Ue||!Ue.documentElement){Ue=he.createDocument(Fl,"template",null);try{Ue.documentElement.innerHTML=ur?J:Un}catch{}}const Tr=Ue.body||Ue.documentElement;return oe&&tt&&Tr.insertBefore(u.createTextNode(tt),Tr.childNodes[0]||null),Fl===Ni?ge.call(Ue,fo?"html":"body")[0]:fo?Ue.documentElement:Tr},a0=function(oe){return we.call(oe.ownerDocument||oe,oe,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT,null,!1)},c0=function(oe){return"object"==typeof g?oe instanceof g:oe&&"object"==typeof oe&&"number"==typeof oe.nodeType&&"string"==typeof oe.nodeName},Bl=function(oe,Ue,tt){ae[oe]&&Nj(ae[oe],Un=>{Un.call(s,Ue,tt,qf)})},VB=function(oe){let Ue;if(Bl("beforeSanitizeElements",oe,null),function(oe){return oe instanceof E&&("string"!=typeof oe.nodeName||"string"!=typeof oe.textContent||"function"!=typeof oe.removeChild||!(oe.attributes instanceof S)||"function"!=typeof oe.removeAttribute||"function"!=typeof oe.setAttribute||"string"!=typeof oe.namespaceURI||"function"!=typeof oe.insertBefore||"function"!=typeof oe.hasChildNodes)}(oe))return St(oe),!0;const tt=dr(oe.nodeName);if(Bl("uponSanitizeElement",oe,{tagName:tt,allowedTags:on}),oe.hasChildNodes()&&!c0(oe.firstElementChild)&&(!c0(oe.content)||!c0(oe.content.firstElementChild))&&Ei(/<[/\w]/g,oe.innerHTML)&&Ei(/<[/\w]/g,oe.textContent))return St(oe),!0;if(!on[tt]||Ze[tt]){if(!Ze[tt]&&u0(tt)&&(Me.tagNameCheck instanceof RegExp&&Ei(Me.tagNameCheck,tt)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(tt)))return!1;if(kt&&!no[tt]){const Un=Z(oe)||oe.parentNode,Tr=W(oe)||oe.childNodes;if(Tr&&Un)for(let ho=Tr.length-1;ho>=0;--ho)Un.insertBefore(F(Tr[ho],!0),U(oe))}return St(oe),!0}return oe instanceof _&&!function(oe){let Ue=Z(oe);(!Ue||!Ue.tagName)&&(Ue={namespaceURI:Fl,tagName:"template"});const tt=Ss(oe.tagName),Un=Ss(Ue.tagName);return!!Ri[oe.namespaceURI]&&(oe.namespaceURI===ba?Ue.namespaceURI===Ni?"svg"===tt:Ue.namespaceURI===Os?"svg"===tt&&("annotation-xml"===Un||Ev[Un]):!!Se[tt]:oe.namespaceURI===Os?Ue.namespaceURI===Ni?"math"===tt:Ue.namespaceURI===ba?"math"===tt&&X[Un]:!!be[tt]:oe.namespaceURI===Ni?!(Ue.namespaceURI===ba&&!X[Un]||Ue.namespaceURI===Os&&!Ev[Un])&&!be[tt]&&(ee[tt]||!Se[tt]):!("application/xhtml+xml"!==Ll||!Ri[oe.namespaceURI]))}(oe)||("noscript"===tt||"noembed"===tt||"noframes"===tt)&&Ei(/<\/no(script|embed|frames)/i,oe.innerHTML)?(St(oe),!0):(Gt&&3===oe.nodeType&&(Ue=oe.textContent,Ue=ja(Ue,Ie," "),Ue=ja(Ue,qe," "),Ue=ja(Ue,it," "),oe.textContent!==Ue&&(Pi(s.removed,{element:oe.cloneNode()}),oe.textContent=Ue)),Bl("afterSanitizeElements",oe,null),!1)},l0=function(oe,Ue,tt){if(Ms&&("id"===Ue||"name"===Ue)&&(tt in u||tt in BB))return!1;if((!dt||pt[Ue]||!Ei(bt,Ue))&&(!De||!Ei(Kt,Ue)))if(!He[Ue]||pt[Ue]){if(!(u0(oe)&&(Me.tagNameCheck instanceof RegExp&&Ei(Me.tagNameCheck,oe)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(oe))&&(Me.attributeNameCheck instanceof RegExp&&Ei(Me.attributeNameCheck,Ue)||Me.attributeNameCheck instanceof Function&&Me.attributeNameCheck(Ue))||"is"===Ue&&Me.allowCustomizedBuiltInElements&&(Me.tagNameCheck instanceof RegExp&&Ei(Me.tagNameCheck,tt)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(tt))))return!1}else if(!Dr[Ue]&&!Ei(Ko,ja(tt,ln,""))&&("src"!==Ue&&"xlink:href"!==Ue&&"href"!==Ue||"script"===oe||0!==Fj(tt,"data:")||!Gn[oe])&&(!_t||Ei(en,ja(tt,ln,"")))&&tt)return!1;return!0},u0=function(oe){return oe.indexOf("-")>0},$B=function(oe){let Ue,tt,Un,Tr;Bl("beforeSanitizeAttributes",oe,null);const{attributes:Ca}=oe;if(!Ca)return;const ho={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:He};for(Tr=Ca.length;Tr--;){Ue=Ca[Tr];const{name:Sa,namespaceURI:Sm}=Ue;tt="value"===Sa?Ue.value:Lj(Ue.value);const O9=tt;if(Un=dr(Sa),ho.attrName=Un,ho.attrValue=tt,ho.keepAttr=!0,ho.forceKeepAttr=void 0,Bl("uponSanitizeAttribute",oe,ho),tt=ho.attrValue,ho.forceKeepAttr)continue;if(!ho.keepAttr){Cn(Sa,oe);continue}if(!uo&&Ei(/\/>/i,tt)){Cn(Sa,oe);continue}Gt&&(tt=ja(tt,Ie," "),tt=ja(tt,qe," "),tt=ja(tt,it," "));const UB=dr(oe.nodeName);if(l0(UB,Un,tt)){if(Is&&("id"===Un||"name"===Un)&&(Cn(Sa,oe),tt="user-content-"+tt),K&&"object"==typeof N&&"function"==typeof N.getAttributeType&&!Sm)switch(N.getAttributeType(UB,Un)){case"TrustedHTML":tt=K.createHTML(tt);break;case"TrustedScriptURL":tt=K.createScriptURL(tt)}if(tt!==O9)try{Sm?oe.setAttributeNS(Sm,Sa,tt):oe.setAttribute(Sa,tt)}catch{Cn(Sa,oe)}}else Cn(Sa,oe)}Bl("afterSanitizeAttributes",oe,null)},_D=function vt(oe){let Ue;const tt=a0(oe);for(Bl("beforeSanitizeShadowDOM",oe,null);Ue=tt.nextNode();)Bl("uponSanitizeShadowNode",Ue,null),!VB(Ue)&&(Ue.content instanceof f&&vt(Ue.content),$B(Ue));Bl("afterSanitizeShadowDOM",oe,null)};return s.sanitize=function(vt){let Ue,tt,Un,Tr,oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ur=!vt,ur&&(vt="\x3c!--\x3e"),"string"!=typeof vt&&!c0(vt)){if("function"!=typeof vt.toString)throw Sl("toString is not a function");if("string"!=typeof(vt=vt.toString()))throw Sl("dirty is not a string, aborting")}if(!s.isSupported)return vt;if(Oi||Hc(oe),s.removed=[],"string"==typeof vt&&(wn=!1),wn){if(vt.nodeName){const Sa=dr(vt.nodeName);if(!on[Sa]||Ze[Sa])throw Sl("root node is forbidden and cannot be sanitized in-place")}}else if(vt instanceof g)Ue=wa("\x3c!----\x3e"),tt=Ue.ownerDocument.importNode(vt,!0),1===tt.nodeType&&"BODY"===tt.nodeName||"HTML"===tt.nodeName?Ue=tt:Ue.appendChild(tt);else{if(!kr&&!Gt&&!fo&&-1===vt.indexOf("<"))return K&&Ai?K.createHTML(vt):vt;if(Ue=wa(vt),!Ue)return kr?null:Ai?J:""}Ue&&Ja&&St(Ue.firstChild);const Ca=a0(wn?vt:Ue);for(;Un=Ca.nextNode();)VB(Un)||(Un.content instanceof f&&_D(Un.content),$B(Un));if(wn)return vt;if(kr){if(Ts)for(Tr=ke.call(Ue.ownerDocument);Ue.firstChild;)Tr.appendChild(Ue.firstChild);else Tr=Ue;return(He.shadowroot||He.shadowrootmode)&&(Tr=re.call(a,Tr,!0)),Tr}let ho=fo?Ue.outerHTML:Ue.innerHTML;return fo&&on["!doctype"]&&Ue.ownerDocument&&Ue.ownerDocument.doctype&&Ue.ownerDocument.doctype.name&&Ei(oP,Ue.ownerDocument.doctype.name)&&(ho="<!DOCTYPE "+Ue.ownerDocument.doctype.name+">\n"+ho),Gt&&(ho=ja(ho,Ie," "),ho=ja(ho,qe," "),ho=ja(ho,it," ")),K&&Ai?K.createHTML(ho):ho},s.setConfig=function(vt){Hc(vt),Oi=!0},s.clearConfig=function(){qf=null,Oi=!1},s.isValidAttribute=function(vt,oe,Ue){qf||Hc({});const tt=dr(vt),Un=dr(oe);return l0(tt,Un,Ue)},s.addHook=function(vt,oe){"function"==typeof oe&&(ae[vt]=ae[vt]||[],Pi(ae[vt],oe))},s.removeHook=function(vt){if(ae[vt])return ve(ae[vt])},s.removeHooks=function(vt){ae[vt]&&(ae[vt]=[])},s.removeAllHooks=function(){ae={}},s}();const aN=de.each,cN=de.trim,sP=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],lN={ftp:21,http:80,https:443,mailto:25},Hj=["img","video"],fN=(n,s,a)=>{const c=(n=>{try{return decodeURIComponent(n)}catch{return unescape(n)}})(s).replace(/\s/g,"");return!n.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(c)||!n.allow_html_data_urls&&(/^data:image\//i.test(c)?((n,s)=>Oe(n)?!n:!Oe(s)||!zt(Hj,s))(n.allow_svg_data_urls,a)&&/^data:image\/svg\+xml/i.test(c):/^data:/i.test(c)))};class Di{static parseDataUri(s){let a;const c=decodeURIComponent(s).split(","),u=/data:([^;]+)/.exec(c[0]);return u&&(a=u[1]),{type:a,data:c[1]}}static isDomSafe(s,a,c={}){if(c.allow_script_urls)return!0;{const u=Ao.decode(s).replace(/[\s\u0000-\u001F]+/g,"");return!fN(c,u,a)}}static getDocumentBaseUrl(s){var a;let c;return c=0!==s.protocol.indexOf("http")&&"file:"!==s.protocol?null!==(a=s.href)&&void 0!==a?a:"":s.protocol+"//"+s.host+s.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(c)&&(c=c.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(c)||(c+="/")),c}constructor(s,a={}){this.path="",this.directory="",s=cN(s),this.settings=a;const c=a.base_uri,u=this;if(/^([\w\-]+):([^\/]{2})/i.test(s)||/^\s*#/.test(s))return void(u.source=s);const f=0===s.indexOf("//");if(0===s.indexOf("/")&&!f&&(s=(c&&c.protocol||"http")+"://mce_host"+s),!/^[\w\-]*:?\/\//.test(s)){const g=c?c.path:new Di(document.location.href).directory;if(""===c?.protocol)s="//mce_host"+u.toAbsPath(g,s);else{const _=/([^#?]*)([#?]?.*)/.exec(s);_&&(s=(c&&c.protocol||"http")+"://mce_host"+u.toAbsPath(g,_[1])+_[2])}}s=s.replace(/@@/g,"(mce_at)");const h=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(s);h&&aN(sP,(g,_)=>{let b=h[_];b&&(b=b.replace(/\(mce_at\)/g,"@@")),u[g]=b}),c&&(u.protocol||(u.protocol=c.protocol),u.userInfo||(u.userInfo=c.userInfo),!u.port&&"mce_host"===u.host&&(u.port=c.port),(!u.host||"mce_host"===u.host)&&(u.host=c.host),u.source=""),f&&(u.protocol="")}setPath(s){const a=/^(.*?)\/?(\w+)?$/.exec(s);a&&(this.path=a[0],this.directory=a[1],this.file=a[2]),this.source="",this.getURI()}toRelative(s){if("./"===s)return s;const a=new Di(s,{base_uri:this});if("mce_host"!==a.host&&this.host!==a.host&&a.host||this.port!==a.port||this.protocol!==a.protocol&&""!==a.protocol)return a.getURI();const c=this.getURI(),u=a.getURI();if(c===u||"/"===c.charAt(c.length-1)&&c.substr(0,c.length-1)===u)return c;let f=this.toRelPath(this.path,a.path);return a.query&&(f+="?"+a.query),a.anchor&&(f+="#"+a.anchor),f}toAbsolute(s,a){const c=new Di(s,{base_uri:this});return c.getURI(a&&this.isSameOrigin(c))}isSameOrigin(s){if(this.host==s.host&&this.protocol==s.protocol){if(this.port==s.port)return!0;const a=this.protocol?lN[this.protocol]:null;if(a&&(this.port||a)==(s.port||a))return!0}return!1}toRelPath(s,a){let f,h,c=0,u="";const g=s.substring(0,s.lastIndexOf("/")).split("/"),_=a.split("/");if(g.length>=_.length)for(f=0,h=g.length;f<h;f++)if(f>=_.length||g[f]!==_[f]){c=f+1;break}if(g.length<_.length)for(f=0,h=_.length;f<h;f++)if(f>=g.length||g[f]!==_[f]){c=f+1;break}if(1===c)return a;for(f=0,h=g.length-(c-1);f<h;f++)u+="../";for(f=c-1,h=_.length;f<h;f++)u+=f!==c-1?"/"+_[f]:_[f];return u}toAbsPath(s,a){let c=0;const u=/\/$/.test(a)?"/":"",f=s.split("/"),h=a.split("/"),g=[];aN(f,E=>{E&&g.push(E)});const _=[];for(let E=h.length-1;E>=0;E--)if(0!==h[E].length&&"."!==h[E]){if(".."===h[E]){c++;continue}if(c>0){c--;continue}_.push(h[E])}const b=g.length-c;let S;return S=b<=0?ka(_).join("/"):g.slice(0,b).join("/")+"/"+ka(_).join("/"),0!==S.indexOf("/")&&(S="/"+S),u&&S.lastIndexOf("/")!==S.length-1&&(S+=u),S}getURI(s=!1){let a;return(!this.source||s)&&(a="",s||(a+=this.protocol?this.protocol+"://":"//",this.userInfo&&(a+=this.userInfo+"@"),this.host&&(a+=this.host),this.port&&(a+=":"+this.port)),this.path&&(a+=this.path),this.query&&(a+="?"+this.query),this.anchor&&(a+="#"+this.anchor),this.source=a),this.source}}const hN=de.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),iP="data-mce-type";let aP=0;const pN=(n,s,a,c,u)=>{var f,h,g,_;const b=s.validate,S=a.getSpecialElements();8===n.nodeType&&!s.allow_conditional_comments&&/^\[if/i.test(null!==(f=n.nodeValue)&&void 0!==f?f:"")&&(n.nodeValue=" "+n.nodeValue);const E=null!==(h=u?.tagName)&&void 0!==h?h:n.nodeName.toLowerCase();if("html"!==c&&a.isValid(c))return void(Oe(u)&&(u.allowedTags[E]=!0));if(1!==n.nodeType||"body"===E)return;const T=j_fromDom(n),N=ou(T,iP),V=wo(T,"data-mce-bogus");if(!N&&Ye(V))return void("all"===V?M(T):G(T));const F=a.getElementRule(E);if(!b||F){if(Oe(u)&&(u.allowedTags[E]=!0),b&&F&&!N){if(ue(null!==(g=F.attributesForced)&&void 0!==g?g:[],U=>{Oo(T,U.name,"{$uid}"===U.value?"mce_"+aP++:U.value)}),ue(null!==(_=F.attributesDefault)&&void 0!==_?_:[],U=>{ou(T,U.name)||Oo(T,U.name,"{$uid}"===U.value?"mce_"+aP++:U.value)}),F.attributesRequired&&!Pt(F.attributesRequired,U=>ou(T,U)))return void G(T);if(F.removeEmptyAttrs&&(n=>{const s=n.dom.attributes;return null==s||0===s.length})(T))return void G(T);F.outputName&&F.outputName!==E&&((n,s)=>{const a=((n,s)=>{const a=j_fromTag(s),c=Jm(n);return qi(a,c),a})(n,s);Ji(n,a);const c=sr(n);y(a,c),M(n)})(T,F.outputName)}}else Ke(S,E)?M(T):G(T)},mN=(n,s,a,c,u,f)=>"html"!==a&&!cu(c)||!(u in hN&&fN(n,f,c))&&(!n.validate||s.isValid(c,u)||vo(u,"data-")||vo(u,"aria-")),ts=(n,s)=>n.hasAttribute(iP)&&("id"===s||"class"===s||"style"===s),pf=(n,s)=>n in s.getBoolAttrs(),Wj=(n,s,a,c)=>{const{attributes:u}=n;for(let f=u.length-1;f>=0;f--){const h=u[f],g=h.name,_=h.value;mN(s,a,c,n.tagName.toLowerCase(),g,_)||ts(n,g)?pf(g,a)&&n.setAttribute(g,g):n.removeAttribute(g)}},uW=n=>{const a={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(c=>`xlink:${c}`)};return iN().sanitize(n,a),n.innerHTML},A_=(n,s)=>{const a=(()=>{let n=[];const s=()=>n[n.length-1];return{track:f=>{A0(f)&&n.push(f);let h=s();return h&&!h.contains(f)&&(n.pop(),h=s()),BD(h)},current:()=>BD(s()),reset:()=>{n=[]}}})();if(n.sanitize){const c=((n,s,a)=>{const c=iN();return c.addHook("uponSanitizeElement",(u,f)=>{pN(u,n,s,a.track(u),f)}),c.addHook("uponSanitizeAttribute",(u,f)=>{((n,s,a,c,u)=>{const f=n.tagName.toLowerCase(),{attrName:h,attrValue:g}=u;u.keepAttr=mN(s,a,c,f,h,g),u.keepAttr?(u.allowedAttributes[h]=!0,pf(h,a)&&(u.attrValue=h),s.allow_svg_data_urls&&vo(g,"data:image/svg+xml")&&(u.forceKeepAttr=!0)):ts(n,h)&&(u.forceKeepAttr=!0)})(u,n,s,a.current(),f)}),c})(n,s,a);return{sanitizeHtmlElement:(f,h)=>{c.sanitize(f,((n,s)=>{const c={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return c.PARSER_MEDIA_TYPE=s,n.allow_script_urls?c.ALLOWED_URI_REGEXP=/.*/:n.allow_html_data_urls&&(c.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),c})(n,h)),c.removed=[],a.reset()},sanitizeNamespaceElement:uW}}return{sanitizeHtmlElement:(f,h)=>{const g=document.createNodeIterator(f,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let _;for(;_=g.nextNode();){const b=a.track(_);pN(_,n,s,b),$e(_)&&Wj(_,n,s,b)}a.reset()},sanitizeNamespaceElement:ut}},gN=de.makeMap,gw=de.extend,_N=(n,s,a,c)=>{const u=n.name,f=u in a&&"title"!==u&&"textarea"!==u,h=s.childNodes;for(let g=0,_=h.length;g<_;g++){const b=h[g],S=new qr(b.nodeName.toLowerCase(),b.nodeType);if($e(b)){const E=b.attributes;for(let T=0,N=E.length;T<N;T++){const V=E[T];S.attr(V.name,V.value)}cu(S.name)&&(c(b),S.value=b.innerHTML)}else ye(b)?(S.value=b.data,f&&(S.raw=!0)):(pc(b)||a3(b)||c3(b))&&(S.value=b.data);cu(S.name)||_N(S,b,a,c),n.append(S)}},Ap=(n={},s=du())=>{const a=zA(),c=zA(),u={validate:!0,root_name:"body",sanitize:!0,...n},f=new DOMParser,h=A_(u,s),b=a.getFilters,T=c.getFilters,F=(K,J)=>{const he=Ye(J.attr(iP)),we=1===J.type&&!Ke(K,J.name)&&!Xi(s,J)&&!cu(J.name);return 3===J.type||we&&!he},Z={schema:s,addAttributeFilter:c.addFilter,getAttributeFilters:T,removeAttributeFilter:c.removeFilter,addNodeFilter:a.addFilter,getNodeFilters:b,removeNodeFilter:a.removeFilter,parse:(K,J={})=>{var he;const we=u.validate,ke=null!==(he=J.context)&&void 0!==he?he:u.root_name,ge=((K,J,he="html")=>{const we="xhtml"===he?"application/xhtml+xml":"text/html",ke=Ke(s.getSpecialElements(),J.toLowerCase()),ge=ke?`<${J}>${K}</${J}>`:K,ae=f.parseFromString("xhtml"===he?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ge}</body></html>`:`<body>${ge}</body>`,we).body;return h.sanitizeHtmlElement(ae,we),ke?ae.firstChild:ae})(K,ke,J.format);Ur(s,ge);const re=new qr(ke,11);_N(re,ge,s.getSpecialElements(),h.sanitizeNamespaceElement),ge.innerHTML="";const[ae,Ie]=((n,s,a,c)=>{const u=a.validate,f=s.getNonEmptyElements(),h=s.getWhitespaceElements(),g=gw(gN("script,style,head,html,body,title,meta,param"),s.getBlockElements()),_=Xn(s),b=/[ \t\r\n]+/g,S=/^[ \t\r\n]+/,E=/[ \t\r\n]+$/,T=Z=>{let K=Z.parent;for(;Oe(K);){if(K.name in h)return!0;K=K.parent}return!1},V=Z=>Z.name in g||Xi(s,Z)||cu(Z.name)&&Z.parent===n,F=(Z,K)=>!Oe(K?Z.prev:Z.next)&&!mo(Z.parent)&&V(Z.parent)&&(Z.parent!==n||!0===c.isRootContent);return[Z=>{var K;if(3===Z.type&&!T(Z)){let J=null!==(K=Z.value)&&void 0!==K?K:"";J=J.replace(b," "),(((n,s)=>Oe(n)&&(s(n)||"br"===n.name))(Z.prev,V)||F(Z,!0))&&(J=J.replace(S,"")),0===J.length?Z.remove():Z.value=J}},Z=>{var K;if(1===Z.type){const J=s.getElementRule(Z.name);if(u&&J){const he=Ep(s,f,h,Z);J.paddInEmptyBlock&&he&&(Z=>{let K=Z;for(;Oe(K);){if(K.name in _)return Ep(s,f,h,K);K=K.parent}return!1})(Z)?WO(a,c,V,Z):J.removeEmpty&&he?V(Z)?Z.remove():Z.unwrap():J.paddEmpty&&(he||(n=>{var s;return $U(n,"#text")&&(null===(s=n?.firstChild)||void 0===s?void 0:s.value)===Jn})(Z))&&WO(a,c,V,Z)}}else if(3===Z.type&&!T(Z)){let J=null!==(K=Z.value)&&void 0!==K?K:"";(Z.next&&V(Z.next)||F(Z,!1))&&(J=J.replace(E,"")),0===J.length?Z.remove():Z.value=J}}]})(re,s,u,J),qe=[],it=we?ln=>((K,J)=>{$u(s,K)&&J.push(K)})(ln,qe):ut,bt={nodes:{},attributes:{}},Kt=ln=>Vu(b(),T(),ln,bt);if(((n,s,a)=>{const c=[];for(let u=n,f=u;u;f=u,u=u.walk()){const h=u;ue(s,g=>g(h)),mo(h.parent)&&h!==n?u=f:c.push(h)}for(let u=c.length-1;u>=0;u--){const f=c[u];ue(a,h=>h(f))}})(re,[ae,Kt],[Ie,it]),qe.reverse(),we&&qe.length>0)if(J.context){const{pass:ln,fail:Ko}=as(qe,on=>on.parent===re);mx(Ko,s,re,Kt),J.invalid=ln.length>0}else mx(qe,s,re,Kt);const en=((n,s)=>{var a;const c=null!==(a=s.forced_root_block)&&void 0!==a?a:n.forced_root_block;return!1===c?"":!0===c?"p":c})(u,J);return en&&("body"===re.name||J.isRootContent)&&((K,J)=>{const he=gw(gN("script,style,head,html,body,title,meta,param"),s.getBlockElements()),we=/^[ \t\r\n]+/,ke=/[ \t\r\n]+$/;let ge=K.firstChild,re=null;const ae=Ie=>{var qe,it;Ie&&(ge=Ie.firstChild,ge&&3===ge.type&&(ge.value=null===(qe=ge.value)||void 0===qe?void 0:qe.replace(we,"")),ge=Ie.lastChild,ge&&3===ge.type&&(ge.value=null===(it=ge.value)||void 0===it?void 0:it.replace(ke,"")))};if(s.isValidChild(K.name,J.toLowerCase())){for(;ge;){const Ie=ge.next;F(he,ge)?(re||(re=new qr(J,1),re.attr(u.forced_root_block_attrs),K.insert(re,ge)),re.append(ge)):(ae(re),re=null),ge=Ie}ae(re)}})(re,en),J.invalid||zO(bt,J),re}};return((n,s)=>{var a,c;const u=n.schema;n.addAttributeFilter("href",_=>{let b=_.length;const E=T=>{const N=T?de.trim(T):"";return/\b(noopener)\b/g.test(N)?N:(T=>T.split(" ").filter(V=>V.length>0).concat(["noopener"]).sort().join(" "))(N)};if(!s.allow_unsafe_link_target)for(;b--;){const T=_[b];"a"===T.name&&"_blank"===T.attr("target")&&T.attr("rel",E(T.attr("rel")))}}),s.allow_html_in_named_anchor||n.addAttributeFilter("id,name",_=>{let S,E,T,N,b=_.length;for(;b--;)if(N=_[b],"a"===N.name&&N.firstChild&&!N.attr("href"))for(T=N.parent,S=N.lastChild;S&&T;)E=S.prev,T.insert(S,N),S=E}),s.fix_list_elements&&n.addNodeFilter("ul,ol",_=>{let S,E,b=_.length;for(;b--;)if(S=_[b],E=S.parent,E&&("ul"===E.name||"ol"===E.name))if(S.prev&&"li"===S.prev.name)S.prev.append(S);else{const T=new qr("li",1);T.attr("style","list-style-type: none"),S.wrap(T)}});const f=u.getValidClasses();s.validate&&f&&n.addAttributeFilter("class",_=>{var b;let S=_.length;for(;S--;){const E=_[S],T=null!==(b=E.attr("class"))&&void 0!==b?b:"",N=de.explode(T," ");let V="";for(let F=0;F<N.length;F++){const U=N[F];let W=!1,Z=f["*"];Z&&Z[U]&&(W=!0),Z=f[E.name],!W&&Z&&Z[U]&&(W=!0),W&&(V&&(V+=" "),V+=U)}V.length||(V=null),E.attr("class",V)}}),((n,s)=>{const{blob_cache:a}=s;if(a){const c=u=>{const f=u.attr("src");(n=>n.attr("src")===It.transparentSrc||Oe(n.attr("data-mce-placeholder")))(u)||(n=>Oe(n.attr("data-mce-bogus")))(u)||mo(f)||M_(a,f,!0).each(h=>{u.attr("src",h.blobUri())})};n.addAttributeFilter("src",u=>ue(u,c))}})(n,s);const h=null!==(a=s.sandbox_iframes)&&void 0!==a&&a,g=Jr(null!==(c=s.sandbox_iframes_exclusions)&&void 0!==c?c:[]);s.convert_unsafe_embeds&&n.addNodeFilter("object,embed",_=>ue(_,b=>{b.replace((({type:n,src:s,width:a,height:c}={},u,f)=>{const h=(n=>Vo(n)?"iframe":hw(n,"image")?"img":hw(n,"video")?"video":hw(n,"audio")?"audio":"iframe")(n),g=new qr(h,1);return g.attr("audio"===h?{src:s}:{src:s,width:a,height:c}),("audio"===h||"video"===h)&&g.attr("controls",""),"iframe"===h&&u&&Gx(g,f),g})({type:b.attr("type"),src:b.attr("object"===b.name?"data":"src"),width:b.attr("width"),height:b.attr("height")},h,g))})),h&&n.addNodeFilter("iframe",_=>ue(_,b=>Gx(b,g)))})(Z,u),((n,s,a)=>{s.inline_styles&&ff(n,s,a)})(Z,u,s),Z},lP=(n,s,a)=>{const c=(n=>df(n)?Ua({validate:!1}).serialize(n):n)(n),u=s(c);if(u.isDefaultPrevented())return u;if(df(n)){if(u.content!==c){const f=Ap({validate:!1,forced_root_block:!1,...a}).parse(u.content,{context:n.name});return{...u,content:f}}return{...u,content:n}}return u},yN=n=>({sanitize:oM(n),sandbox_iframes:VV(n),sandbox_iframes_exclusions:iM(n)}),N_=(n,s)=>{if(s.no_events)return zr.value(s);{const a=((n,s)=>n.dispatch("BeforeGetContent",s))(n,s);return a.isDefaultPrevented()?zr.error(lp(n,{content:"",...a}).content):zr.value(a)}},_w=(n,s,a)=>a.no_events?s:lP(s,u=>lp(n,{...a,content:u}),yN(n)).content,bN=(n,s)=>{if(s.no_events)return zr.value(s);{const a=lP(s.content,c=>((n,s)=>n.dispatch("BeforeSetContent",s))(n,{...s,content:c}),yN(n));return a.isDefaultPrevented()?(v1(n,a),zr.error(void 0)):zr.value(a)}},vw=(n,s,a)=>{a.no_events||v1(n,{...a,content:s})},uP=(n,s,a)=>({element:n,width:s,rows:a}),dP=(n,s)=>({element:n,cells:s}),Np=(n,s)=>({x:n,y:s}),wN=(n,s)=>Ma(n,s).bind(ji).getOr(1),fP=(n,s,a)=>{const c=n.rows;return!!(c[a]?c[a].cells:[])[s]},SN=n=>$o(n,(s,a)=>a.cells.length>s?a.cells.length:s,0),xN=(n,s)=>{const a=n.rows;for(let c=0;c<a.length;c++){const u=a[c].cells;for(let f=0;f<u.length;f++)if(mt(u[f],s))return I.some(Np(f,c))}return I.none()},PN=(n,s,a,c,u)=>{const f=[],h=n.rows;for(let g=a;g<=u;g++){const _=h[g].cells,b=s<c?_.slice(s,c+1):_.slice(c,s+1);f.push(dP(h[g].element,b))}return f},TN=n=>((n,s)=>{const a=ul(n.element),c=j_fromTag("tbody");return y(c,s),Yn(a,c),a})(n,(n=>Xe(n.rows,s=>{const a=Xe(s.cells,u=>{const f=O3(u);return Co(f,"colspan"),Co(f,"rowspan"),f}),c=ul(s.element);return y(c,a),c}))(n)),ON=(n,s,a)=>{const c=j_fromDom(s.commonAncestorContainer),u=Tc(c,n),f=nt(u,_=>a.isWrapper(Ft(_))),h=((n,s)=>vn(n,a=>"li"===Ft(a)&&AM(a,s)).fold(Ae([]),a=>(n=>vn(n,s=>"ul"===Ft(s)||"ol"===Ft(s)))(n).map(c=>{const u=j_fromTag(Ft(c)),f=Ns(cg(c),(h,g)=>vo(g,"list-style"));return dc(u,f),[j_fromTag("li"),u]}).getOr([])))(u,s),g=f.concat(h.length?h:(n=>Oh(n)?je(n).filter(cS).fold(Ae([]),s=>[n,s]):cS(n)?[n]:[])(c));return Xe(g,ul)},hP=()=>Db([]),e5=(n,s)=>((n,s)=>ds(s,"table",Ve(mt,n)))(n,s[0]).bind(a=>{const c=s[0],u=s[s.length-1],f=(n=>{const s=uP(ul(n),0,[]);return ue(Wt(n,"tr"),(a,c)=>{ue(Wt(a,"td,th"),(u,f)=>{((n,s,a,c,u)=>{const f=wN(u,"rowspan"),h=wN(u,"colspan"),g=n.rows;for(let _=a;_<a+f;_++){g[_]||(g[_]=dP(O3(c),[]));for(let b=s;b<s+h;b++)g[_].cells[b]=_===a&&b===s?u:ul(u)}})(s,((n,s,a)=>{for(;fP(n,s,a);)s++;return s})(s,f,c),c,a,u)})}),uP(s.element,SN(s.rows),s.rows)})(a);return((n,s,a)=>xN(n,s).bind(c=>xN(n,a).map(u=>((n,s,a)=>{const c=s.x,u=s.y,f=a.x,h=a.y,g=u<h?PN(n,c,u,f,h):PN(n,c,h,f,u);return uP(n.element,SN(g),g)})(n,c,u))))(f,c,u).map(h=>Db([TN(h)]))}).getOrThunk(hP),NN=(n,s,a)=>{const c=n1(s,n);return c.length>0?e5(n,c):((n,s,a)=>s.length>0&&s[0].collapsed?hP():((n,s,a)=>((n,s)=>{const a=$o(s,(c,u)=>(Yn(u,c),u),n);return s.length>0?Db([a]):a})(j_fromDom(s.cloneContents()),ON(n,s,a)))(n,s[0],a))(n,s,a)},pP=(n,s)=>s>=0&&s<n.length&&Xh(n.charAt(s)),t5=n=>Bs(n.innerText),mP=n=>$e(n)?n.outerHTML:ye(n)?Ao.encodeRaw(n.data,!1):pc(n)?"\x3c!--"+n.data+"--\x3e":"",r5=(n,s)=>(((n,s)=>{let a=0;ue(n,c=>{0===c[0]?a++:1===c[0]?(((n,s,a)=>{const c=(n=>{let s;const a=document.createElement("div"),c=document.createDocumentFragment();for(n&&(a.innerHTML=n);s=a.firstChild;)c.appendChild(s);return c})(s);n.hasChildNodes()&&a<n.childNodes.length?n.insertBefore(c,n.childNodes[a]):n.appendChild(c)})(s,c[1],a),a++):2===c[0]&&((n,s)=>{n.hasChildNodes()&&s<n.childNodes.length&&n.removeChild(n.childNodes[s])})(s,a)})})(((n,s)=>{const a=n.length+s.length+2,c=new Array(a),u=new Array(a),h=(S,E,T,N,V)=>{const F=_(S,E,T,N);if(null===F||F.start===E&&F.diag===E-N||F.end===S&&F.diag===S-T){let U=S,W=T;for(;U<E||W<N;)U<E&&W<N&&n[U]===s[W]?(V.push([0,n[U]]),++U,++W):E-S>N-T?(V.push([2,n[U]]),++U):(V.push([1,s[W]]),++W)}else{h(S,F.start,T,F.start-F.diag,V);for(let U=F.start;U<F.end;++U)V.push([0,n[U]]);h(F.end,E,F.end-F.diag,N,V)}},g=(S,E,T,N)=>{let V=S;for(;V-E<N&&V<T&&n[V]===s[V-E];)++V;return((S,E,T)=>({start:S,end:E,diag:T}))(S,V,E)},_=(S,E,T,N)=>{const V=E-S,F=N-T;if(0===V||0===F)return null;const U=V-F,W=F+V,Z=(W%2==0?W:W+1)/2;let K,J,he,we,ke;for(c[1+Z]=S,u[1+Z]=E+1,K=0;K<=Z;++K){for(J=-K;J<=K;J+=2){for(he=J+Z,c[he]=J===-K||J!==K&&c[he-1]<c[he+1]?c[he+1]:c[he-1]+1,we=c[he],ke=we-S+T-J;we<E&&ke<N&&n[we]===s[ke];)c[he]=++we,++ke;if(U%2!=0&&U-K<=J&&J<=U+K&&u[he-U]<=c[he])return g(u[he-U],J+S-T,E,N)}for(J=U-K;J<=U+K;J+=2){for(he=J+Z-U,u[he]=J===U-K||J!==U+K&&u[he+1]<=u[he-1]?u[he+1]-1:u[he-1],we=u[he]-1,ke=we-S+T-J;we>=S&&ke>=T&&n[we]===s[ke];)u[he]=we--,ke--;if(U%2==0&&-K<=J&&J<=K&&u[he]<=c[he+U])return g(u[he],J+S-T,E,N)}}return null},b=[];return h(0,n.length,0,s.length,b),b})(Xe(or(s.childNodes),mP),n),s),s),LN=$i(()=>document.implementation.createHTMLDocument("undo")),mf=n=>{const s=n.serializer.getTempAttrs(),a=tU(n.getBody(),s);return(n=>null!==n.querySelector("iframe"))(a)?(n=>({type:"fragmented",fragments:n,content:"",bookmark:null,beforeBookmark:null}))(((n,s)=>nt(Xe(or(n.childNodes),As(Bs,mP)),a=>a.length>0))(a)):(n=>({type:"complete",fragments:null,content:n,bookmark:null,beforeBookmark:null}))(Bs(a.innerHTML))},gP=(n,s,a)=>{const c=a?s.beforeBookmark:s.bookmark;"fragmented"===s.type?r5(s.fragments,n.getBody()):n.setContent(s.content,{format:"raw",no_selection:!Oe(c)||!SM(c)||!c.isFakeCaret}),c&&(n.selection.moveToBookmark(c),n.selection.scrollIntoView())},ww=n=>"fragmented"===n.type?n.fragments.join(""):n.content,BN=n=>{const s=j_fromTag("body",LN());return gt(s,ww(n)),ue(Wt(s,"*[data-mce-bogus]"),G),Jt(s)},gf=(n,s)=>!(!n||!s)&&(!!((n,s)=>ww(n)===ww(s))(n,s)||((n,s)=>BN(n)===BN(s))(n,s)),Rp=n=>0===n.get(),Cw=(n,s,a)=>{Rp(a)&&(n.typing=s)},VN=(n,s)=>{n.typing&&(Cw(n,!1,s),n.add())},UN=n=>({init:{bindEvents:ut},undoManager:{beforeChange:(s,a)=>((n,s,a)=>{Rp(s)&&a.set(Hy(n.selection))})(n,s,a),add:(s,a,c,u,f,h)=>((n,s,a,c,u,f,h)=>{const g=mf(n),_=de.extend(f||{},g);if(!Rp(c)||n.removed)return null;const b=s.data[a.get()];if(n.dispatch("BeforeAddUndo",{level:_,lastLevel:b,originalEvent:h}).isDefaultPrevented()||b&&gf(b,_))return null;s.data[a.get()]&&u.get().each(T=>{s.data[a.get()].beforeBookmark=T});const S=LS(n);if(S&&s.data.length>S){for(let T=0;T<s.data.length-1;T++)s.data[T]=s.data[T+1];s.data.length--,a.set(s.data.length)}_.bookmark=Hy(n.selection),a.get()<s.data.length-1&&(s.data.length=a.get()+1),s.data.push(_),a.set(s.data.length-1);const E={level:_,lastLevel:b,originalEvent:h};return a.get()>0?(n.setDirty(!0),n.dispatch("AddUndo",E),n.dispatch("change",E)):n.dispatch("AddUndo",E),_})(n,s,a,c,u,f,h),undo:(s,a,c)=>((n,s,a,c)=>{let u;return s.typing&&(s.add(),s.typing=!1,Cw(s,!1,a)),c.get()>0&&(c.set(c.get()-1),u=s.data[c.get()],gP(n,u,!0),n.setDirty(!0),n.dispatch("Undo",{level:u})),u})(n,s,a,c),redo:(s,a)=>((n,s,a)=>{let c;return s.get()<a.length-1&&(s.set(s.get()+1),c=a[s.get()],gP(n,c,!1),n.setDirty(!0),n.dispatch("Redo",{level:c})),c})(n,s,a),clear:(s,a)=>((n,s,a)=>{s.data=[],a.set(0),s.typing=!1,n.dispatch("ClearUndos")})(n,s,a),reset:s=>(n=>{n.clear(),n.add()})(s),hasUndo:(s,a)=>((n,s,a)=>a.get()>0||s.typing&&s.data[0]&&!gf(mf(n),s.data[0]))(n,s,a),hasRedo:(s,a)=>((n,s)=>s.get()<n.data.length-1&&!n.typing)(s,a),transact:(s,a,c)=>((n,s,a)=>(VN(n,s),n.beforeChange(),n.ignore(a),n.add()))(s,a,c),ignore:(s,a)=>((n,s)=>{try{n.set(n.get()+1),s()}finally{n.set(n.get()-1)}})(s,a),extra:(s,a,c,u)=>((n,s,a,c,u)=>{if(s.transact(c)){const f=s.data[a.get()].bookmark,h=s.data[a.get()-1];gP(n,h,!0),s.transact(u)&&(s.data[a.get()-1].beforeBookmark=f)}})(n,s,a,c,u)},formatter:{match:(s,a,c,u)=>wx(n,s,a,c,u),matchAll:(s,a)=>((n,s,a)=>{const c=[],u={},f=n.selection.getStart();return n.dom.getParent(f,h=>{for(let g=0;g<s.length;g++){const _=s[g];!u[_]&&zs(n,h,_,a)&&(u[_]=!0,c.push(_))}},n.dom.getRoot()),c})(n,s,a),matchNode:(s,a,c,u)=>zs(n,s,a,c,u),canApply:s=>((n,s)=>{const a=n.formatter.get(s),c=n.dom;if(a&&n.selection.isEditable()){const u=n.selection.getStart(),f=ip(c,u);for(let h=a.length-1;h>=0;h--){const g=a[h];if(!Ci(g))return!0;for(let _=f.length-1;_>=0;_--)if(c.is(f[_],g.selector))return!0}}return!1})(n,s),closest:s=>((n,s)=>{const a=u=>mt(u,j_fromDom(n.getBody()));return I.from(n.selection.getStart(!0)).bind(u=>bx(j_fromDom(u),f=>nc(s,h=>((u,f)=>zs(n,u.dom,f)?I.some(f):I.none())(f,h)),a)).getOrNull()})(n,s),apply:(s,a,c)=>Fx(n,s,a,c),remove:(s,a,c,u)=>Ax(n,s,a,c,u),toggle:(s,a,c)=>((n,s,a,c)=>{const u=n.formatter.get(s);u&&(!wx(n,s,a,c)||"toggle"in u[0]&&!u[0].toggle?Fx(n,s,a,c):Ax(n,s,a,c))})(n,s,a,c),formatChanged:(s,a,c,u,f)=>((n,s,a,c,u,f)=>(((n,s,a,c,u,f)=>{const h=s.get();ue(a.split(","),g=>{const _=Nt(h,g).getOrThunk(()=>{const S={withSimilar:{state:No(!1),similar:!0,callbacks:[]},withoutSimilar:{state:No(!1),similar:!1,callbacks:[]},withVars:[]};return h[g]=S,S}),b=()=>{const S=$x(n);return Vx(n,S,g,u,f).isSome()};if(Vo(f)){const S=u?_.withSimilar:_.withoutSimilar;S.callbacks.push(c),1===S.callbacks.length&&S.state.set(b())}else _.withVars.push({state:No(b()),similar:u,vars:f,callback:c})}),s.set(h)})(n,s,a,c,u,f),{unbind:()=>((n,s,a)=>{const c=n.get();ue(s.split(","),u=>Nt(c,u).each(f=>{c[u]={withSimilar:{...f.withSimilar,callbacks:nt(f.withSimilar.callbacks,h=>h!==a)},withoutSimilar:{...f.withoutSimilar,callbacks:nt(f.withoutSimilar.callbacks,h=>h!==a)},withVars:nt(f.withVars,h=>h.callback!==a)}})),n.set(c)})(s,a,c)}))(n,s,a,c,u,f)},editor:{getContent:s=>((n,s)=>I.from(n.getBody()).fold(Ae("tree"===s.format?new qr("body",11):""),a=>sU(n,s,a)))(n,s),setContent:(s,a)=>((n,s,a)=>I.from(n.getBody()).map(c=>df(s)?((n,s,a,c)=>{uf(n.parser.getNodeFilters(),n.parser.getAttributeFilters(),a);const u=Ua({validate:!1},n.schema).serialize(a),f=Bs(Ag(j_fromDom(s))?u:de.trim(u));return yx(n,f,c.no_selection),{content:a,html:f}})(n,c,s,a):((n,s,a,c)=>{if(0===(a=Bs(a)).length||/^\s+$/.test(a)){const u='<br data-mce-bogus="1">';"TABLE"===s.nodeName?a="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(s.nodeName)&&(a="<li>"+u+"</li>");const f=wr(n);return n.schema.isValidChild(s.nodeName.toLowerCase(),f.toLowerCase())?(a=u,a=n.dom.createHTML(f,Vd(n),a)):a||(a=u),yx(n,a,c.no_selection),{content:a,html:a}}{"raw"!==c.format&&(a=Ua({validate:!1},n.schema).serialize(n.parser.parse(a,{isRootContent:!0,insert:!0})));const u=Ag(j_fromDom(s))?a:de.trim(a);return yx(n,u,c.no_selection),{content:u,html:u}}})(n,c,s,a)).getOr({content:s,html:df(a.content)?"":a.content}))(n,s,a),insertContent:(s,a)=>sA(n,s,a),addVisual:s=>((n,s)=>{const a=n.dom,c=Oe(s)?s:n.getBody();ue(a.select("table,a",c),u=>{switch(u.nodeName){case"TABLE":const f=eb(n),h=a.getAttrib(u,"border");h&&"0"!==h||!n.hasVisual?a.removeClass(u,f):a.addClass(u,f);break;case"A":if(!a.getAttrib(u,"href")){const g=a.getAttrib(u,"name")||u.id,_=tb(n);g&&n.hasVisual?a.addClass(u,_):a.removeClass(u,_)}}}),n.dispatch("VisualAid",{element:s,hasVisual:n.hasVisual})})(n,s)},selection:{getContent:(s,a)=>((n,s,a={})=>{const c=((n,s)=>({...n,format:s,get:!0,selection:!0,getInner:!0}))(a,s);return N_(n,c).fold(pe,u=>{const f=((n,s)=>{if("text"===s.format)return(n=>I.from(n.selection.getRng()).map(s=>{var a;const c=I.from(n.dom.getParent(s.commonAncestorContainer,n.dom.isBlock)),u=n.getBody(),f=(n=>n.map(s=>s.nodeName).getOr("div").toLowerCase())(c),h=j_fromDom(s.cloneContents());qI(h),nU(h);const g=n.dom.add(u,f,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},h.dom),_=t5(g),b=Bs(null!==(a=g.textContent)&&void 0!==a?a:"");if(n.dom.remove(g),pP(b,0)||pP(b,b.length-1)){const S=c.getOr(u),E=t5(S),T=E.indexOf(_);return-1===T?_:(pP(E,T-1)?" ":"")+_+(pP(E,T+_.length)?" ":"")}return _}).getOr(""))(n);{const a=((n,s)=>{const a=n.selection.getRng(),c=n.dom.create("body"),u=n.selection.getSel(),f=vp(n,mb(u)),h=s.contextual?NN(j_fromDom(n.getBody()),f,n.schema).dom:a.cloneContents();return h&&c.appendChild(h),n.selection.serializer.serialize(c,s)})(n,s);return"tree"===s.format?a:n.selection.isCollapsed()?"":a}})(n,u);return _w(n,f,u)})})(n,s,a)},autocompleter:{addDecoration:ut,removeDecoration:ut},raw:{getModel:()=>I.none()}}),Ic=n=>Ke(n.plugins,"rtc"),Sw=n=>n.rtcInstance?n.rtcInstance:UN(n),lo=n=>{const s=n.rtcInstance;if(s)return s;throw new Error("Failed to get RTC instance not yet initialized.")},CP=n=>lo(n).init.bindEvents(),SP=n=>0===n.dom.length?(M(n),I.none()):I.some(n),PP=(n,s,a,c,u)=>{n.bind(f=>((c?__:Kb)(f.dom,c?f.dom.length:0,u),s.filter(Nr).map(g=>((n,s,a,c,u)=>{const f=n.dom,h=s.dom,g=c?f.length:h.length;c?(J1(f,h,u,!1,!c),a.setStart(h,g)):(J1(h,f,u,!1,!c),a.setEnd(h,g))})(f,g,a,c,u)))).orThunk(()=>((n,s)=>n.filter(a=>cp.isBookmarkNode(a.dom)).bind(s?gd:Zi))(s,c).or(s).filter(Nr).map(h=>((n,s,a)=>{je(n).each(c=>{const u=n.dom;s&&g_(c,se(u,0),a)?Kb(u,0,a):!s&&Pe(c,se(u,u.length),a)&&__(u,u.length,a)})})(h,c,u)))},R_=(n,s,a)=>{if(Ke(n,s)){const c=nt(n[s],u=>u!==a);0===c.length?delete n[s]:n[s]=c}};const EP=n=>!(!n||!n.ownerDocument)&&Ki(j_fromDom(n.ownerDocument),j_fromDom(n)),QN=(n,s,a,c)=>{let u,f;const{selectorChangedWithUnbind:h}=((n,s)=>{let a,c;const u=(g,_)=>vn(_,b=>n.is(b,g)),f=g=>n.getParents(g,void 0,n.getRoot());return{selectorChangedWithUnbind:(g,_)=>(a||(a={},c={},s.on("NodeChange",g=>{const _=g.element,b=f(_),S={};Ut(a,(E,T)=>{u(T,b).each(N=>{c[T]||(ue(E,V=>{V(!0,{node:N,selector:T,parents:b})}),c[T]=E),S[T]=E})}),Ut(c,(E,T)=>{S[T]||(delete c[T],ue(E,N=>{N(!1,{node:_,selector:T,parents:b})}))})})),a[g]||(a[g]=[]),a[g].push(_),u(g,f(s.selection.getStart())).each(()=>{c[g]=a[g]}),{unbind:()=>{R_(a,g,_),R_(c,g,_)}})}})(n,c),b=(xe,He)=>((n,s,a={})=>{const c=((n,s)=>({format:"html",...n,set:!0,selection:!0,content:s}))(a,s);bN(n,c).each(u=>{const f=((n,s)=>{if("raw"!==s.format){const a=n.selection.getRng(),c=n.dom.getParent(a.commonAncestorContainer,n.dom.isBlock),u=c?{context:c.nodeName.toLowerCase()}:{},f=n.parser.parse(s.content,{forced_root_block:!1,...u,...s});return Ua({validate:!1},n.schema).serialize(f)}return s.content})(n,u),h=n.selection.getRng();((n,s,a)=>{const c=I.from(s.firstChild).map(j_fromDom),u=I.from(s.lastChild).map(j_fromDom);n.deleteContents(),n.insertNode(s);const f=c.bind(Zi).filter(Nr).bind(SP),h=u.bind(gd).filter(Nr).bind(SP);PP(f,c,n,!0,a),PP(h,u,n,!1,a),n.collapse(!1)})(h,h.createContextualFragment(f),n.schema),n.selection.setRng(h),gp(n,h),vw(n,f,u)})})(c,xe,He),W=xe=>{const He=K();He.collapse(!!xe),J(He)},Z=()=>s.getSelection?s.getSelection():s.document.selection,K=()=>{let xe;const He=(Me,Ze,pt)=>{try{return Ze.compareBoundaryPoints(Me,pt)}catch{return-1}},Bt=s.document;if(Oe(c.bookmark)&&!Mu(c)){const Me=I1(c);if(Me.isSome())return Me.map(Ze=>vp(c,[Ze])[0]).getOr(Bt.createRange())}try{const Me=Z();Me&&!vh(Me.anchorNode)&&(xe=Me.rangeCount>0?Me.getRangeAt(0):Bt.createRange(),xe=vp(c,[xe])[0])}catch{}if(xe||(xe=Bt.createRange()),yh(xe.startContainer)&&xe.collapsed){const Me=n.getRoot();xe.setStart(Me,0),xe.setEnd(Me,0)}return u&&f&&(0===He(xe.START_TO_START,xe,u)&&0===He(xe.END_TO_END,xe,u)?xe=f:(u=null,f=null)),xe},J=(xe,He)=>{if(!(n=>!!n&&EP(n.startContainer)&&EP(n.endContainer))(xe))return;const Bt=Z();if(xe=c.dispatch("SetSelectionRange",{range:xe,forward:He}).range,Bt){f=xe;try{Bt.removeAllRanges(),Bt.addRange(xe)}catch{}!1===He&&Bt.extend&&(Bt.collapse(xe.endContainer,xe.endOffset),Bt.extend(xe.startContainer,xe.startOffset)),u=Bt.rangeCount>0?Bt.getRangeAt(0):null}if(!xe.collapsed&&xe.startContainer===xe.endContainer&&Bt?.setBaseAndExtent&&xe.endOffset-xe.startOffset<2&&xe.startContainer.hasChildNodes()){const Ze=xe.startContainer.childNodes[xe.startOffset];Ze&&"IMG"===Ze.nodeName&&(Bt.setBaseAndExtent(xe.startContainer,xe.startOffset,xe.endContainer,xe.endOffset),(Bt.anchorNode!==xe.startContainer||Bt.focusNode!==xe.endContainer)&&Bt.setBaseAndExtent(Ze,0,Ze,1))}c.dispatch("AfterSetSelectionRange",{range:xe,forward:He})},ge=()=>{const xe=Z(),He=xe?.anchorNode,Bt=xe?.focusNode;if(!xe||!He||!Bt||vh(He)||vh(Bt))return!0;const Me=n.createRng(),Ze=n.createRng();try{Me.setStart(He,xe.anchorOffset),Me.collapse(!0),Ze.setStart(Bt,xe.focusOffset),Ze.collapse(!0)}catch{return!0}return Me.compareBoundaryPoints(Me.START_TO_START,Ze)<=0},ln={dom:n,win:s,serializer:a,editor:c,expand:(xe={type:"word"})=>J(Jd(n).expand(K(),xe)),collapse:W,setCursorLocation:(xe,He)=>{const Bt=n.createRng();Oe(xe)&&Oe(He)?(Bt.setStart(xe,He),Bt.setEnd(xe,He),J(Bt),W(!1)):(o1(n,Bt,c.getBody(),!0),J(Bt))},getContent:xe=>((n,s={})=>((n,s,a)=>lo(n).selection.getContent(s,a))(n,s.format?s.format:"html",s))(c,xe),setContent:b,getBookmark:(xe,He)=>Ko.getBookmark(xe,He),moveToBookmark:xe=>Ko.moveToBookmark(xe),select:(xe,He)=>(((n,s,a)=>I.from(s).bind(c=>I.from(c.parentNode).map(u=>{const f=n.nodeIndex(c),h=n.createRng();return h.setStart(u,f),h.setEnd(u,f+1),a&&(o1(n,h,c,!0),o1(n,h,c,!1)),h})))(n,xe,He).each(J),xe),isCollapsed:()=>{const xe=K(),He=Z();return!(!xe||xe.item)&&(xe.compareEndPoints?0===xe.compareEndPoints("StartToEnd",xe):!He||xe.collapsed)},isEditable:()=>{const xe=K(),He=c.getBody().querySelectorAll('[data-mce-selected="1"]');return He.length>0?hr(He,Bt=>n.isEditable(Bt.parentElement)):Vb(n,xe)},isForward:ge,setNode:xe=>(b(n.getOuterHTML(xe)),xe),getNode:()=>((n,s)=>{if(!s)return n;let a=s.startContainer,c=s.endContainer;const u=s.startOffset,f=s.endOffset;let h=s.commonAncestorContainer;s.collapsed||(a===c&&f-u<2&&a.hasChildNodes()&&(h=a.childNodes[u]),ye(a)&&ye(c)&&(a=a.length===u?BI(a.nextSibling,!0):a.parentNode,c=0===f?BI(c.previousSibling,!1):c.parentNode,a&&a===c&&(h=a)));const g=ye(h)?h.parentNode:h;return _r(g)?g:n})(c.getBody(),K()),getSel:Z,setRng:J,getRng:K,getStart:xe=>LI(c.getBody(),K(),xe),getEnd:xe=>L1(c.getBody(),K(),xe),getSelectedBlocks:(xe,He)=>((n,s,a,c)=>{const u=[],f=n.getRoot(),h=n.getParent(a||LI(f,s,s.collapsed),n.isBlock),g=n.getParent(c||L1(f,s,s.collapsed),n.isBlock);if(h&&h!==f&&u.push(h),h&&g&&h!==g){let _;const b=new io(h,f);for(;(_=b.next())&&_!==g;)n.isBlock(_)&&u.push(_)}return g&&h!==g&&g!==f&&u.push(g),u})(n,K(),xe,He),normalize:()=>{const xe=K();if(!(n=>mb(n).length>1)(Z())&&r1(c)){const Bt=Mb(n,xe);return Bt.each(Me=>{J(Me,ge())}),Bt.getOr(xe)}return xe},selectorChanged:(xe,He)=>(h(xe,He),ln),selectorChangedWithUnbind:h,getScrollContainer:()=>{let xe,He=n.getRoot();for(;He&&"BODY"!==He.nodeName;){if(He.scrollHeight>He.clientHeight){xe=He;break}He=He.parentNode}return xe},scrollIntoView:(xe,He)=>{Oe(xe)?PI(c,xe,He):gp(c,K(),He)},placeCaretAt:(xe,He)=>J(fp(xe,He,c.getDoc())),getBoundingClientRect:()=>{const xe=K();return xe.collapsed?se.fromRangeStart(xe).getClientRects()[0]:xe.getBoundingClientRect()},destroy:()=>{s=u=f=null,on.destroy()}},Ko=cp(ln),on=rI(ln,c);return ln.bookmarkManager=Ko,ln.controlSelection=on,ln},MW=(n,s,a)=>{-1===de.inArray(s,a)&&(n.addAttributeFilter(a,(c,u)=>{let f=c.length;for(;f--;)c[f].attr(u,null)}),s.push(a))},RW=(n,s)=>{const a=["data-mce-selected"],c={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...n},u=s&&s.dom?s.dom:pn.DOM,f=s&&s.schema?s.schema:du(c),h=Ap(c,f);return((n,s,a)=>{n.addAttributeFilter("data-mce-tabindex",(c,u)=>{let f=c.length;for(;f--;){const h=c[f];h.attr("tabindex",h.attr("data-mce-tabindex")),h.attr(u,null)}}),n.addAttributeFilter("src,href,style",(c,u)=>{const f="data-mce-"+u,h=s.url_converter,g=s.url_converter_scope;let _=c.length;for(;_--;){const b=c[_];let S=b.attr(f);void 0!==S?(b.attr(u,S.length>0?S:null),b.attr(f,null)):(S=b.attr(u),"style"===u?S=a.serializeStyle(a.parseStyle(S),b.name):h&&(S=h.call(g,S,u,b.name)),b.attr(u,S.length>0?S:null))}}),n.addAttributeFilter("class",c=>{let u=c.length;for(;u--;){const f=c[u];let h=f.attr("class");h&&(h=h.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",h.length>0?h:null))}}),n.addAttributeFilter("data-mce-type",(c,u,f)=>{let h=c.length;for(;h--;){const g=c[h];"bookmark"===g.attr("data-mce-type")&&!f.cleanup&&(I.from(g.firstChild).exists(b=>{var S;return!Ng(null!==(S=b.value)&&void 0!==S?S:"")})?g.unwrap():g.remove())}}),n.addNodeFilter("noscript",c=>{var u;let f=c.length;for(;f--;){const h=c[f].firstChild;h&&(h.value=Ao.decode(null!==(u=h.value)&&void 0!==u?u:""))}}),n.addNodeFilter("script,style",(c,u)=>{var f;const h=_=>_.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=c.length;for(;g--;){const _=c[g],b=_.firstChild,S=null!==(f=b?.value)&&void 0!==f?f:"";if("script"===u){const E=_.attr("type");E&&_.attr("type","mce-no/type"===E?null:E.replace(/^mce\-/,"")),"xhtml"===s.element_format&&b&&S.length>0&&(b.value="// <![CDATA[\n"+h(S)+"\n// ]]>")}else"xhtml"===s.element_format&&b&&S.length>0&&(b.value="\x3c!--\n"+h(S)+"\n--\x3e")}}),n.addNodeFilter("#comment",c=>{let u=c.length;for(;u--;){const f=c[u],h=f.value;s.preserve_cdata&&0===h?.indexOf("[CDATA[")?(f.name="#cdata",f.type=4,f.value=a.decode(h.replace(/^\[CDATA\[|\]\]$/g,""))):0===h?.indexOf("mce:protected ")&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(h).substr(14))}}),n.addNodeFilter("xml:namespace,input",(c,u)=>{let f=c.length;for(;f--;){const h=c[f];7===h.type?h.remove():1===h.type&&"input"===u&&!h.attr("type")&&h.attr("type","text")}}),n.addAttributeFilter("data-mce-type",c=>{ue(c,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(n.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),n.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(c,u)=>{let f=c.length;for(;f--;)c[f].attr(u,null)}),s.remove_trailing_brs&&((n,s,a)=>{s.addNodeFilter("br",(c,u,f)=>{const h=de.extend({},a.getBlockElements()),g=a.getNonEmptyElements(),_=a.getWhitespaceElements();h.body=1;const b=S=>S.name in h||Xi(a,S);for(let S=0,E=c.length;S<E;S++){let T=c[S],N=T.parent;if(N&&b(N)&&T===N.lastChild){let V=T.prev;for(;V;){const F=V.name;if("span"!==F||"bookmark"!==V.attr("data-mce-type")){"br"===F&&(T=null);break}V=V.prev}if(T&&(T.remove(),Ep(a,g,_,N))){const F=a.getElementRule(N.name);F&&(F.removeEmpty?N.remove():F.paddEmpty&&WO(n,f,b,N))}}else{let V=T;for(;N&&N.firstChild===V&&N.lastChild===V&&(V=N,!h[N.name]);)N=N.parent;if(V===N){const F=new qr("#text",3);F.value=Jn,T.replace(F)}}}})})(s,n,n.schema)})(h,c,u),{schema:f,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:(_,b={})=>{const S={format:"html",...b},E=((n,s,a)=>((n,s)=>Oe(n)&&n.hasEventListeners("PreProcess")&&!s.no_events)(n,a)?((n,s,a)=>{let c;const u=n.dom;let f=s.cloneNode(!0);const h=document.implementation;if(h.createHTMLDocument){const g=h.createHTMLDocument("");de.each("BODY"===f.nodeName?f.childNodes:[f],_=>{g.body.appendChild(g.importNode(_,!0))}),f="BODY"!==f.nodeName?g.body.firstChild:g.body,c=u.doc,u.doc=g}return((n,s)=>{n.dispatch("PreProcess",s)})(n,{...a,node:f}),c&&(u.doc=c),f})(n,s,a):s)(s,_,S),T=((n,s,a)=>{const c=Bs(a.getInner?s.innerHTML:n.getOuterHTML(s));return a.selection||Ag(j_fromDom(s))?c:de.trim(c)})(u,E,S),N=((n,s,a)=>{const c=a.selection?{forced_root_block:!1,...a}:a,u=n.parse(s,c);return(n=>{const s=c=>"br"===c?.name,a=n.lastChild;if(s(a)){const c=a.prev;s(c)&&(a.remove(),c.remove())}})(u),u})(h,T,S);return"tree"===S.format?N:((n,s,a,c,u)=>{const f=((n,s,a)=>Ua(n,s).serialize(a))(s,a,c);return((n,s,a)=>!s.no_events&&n?((n,s)=>n.dispatch("PostProcess",s))(n,{...s,content:a}).content:a)(n,u,f)})(s,c,f,N,S)},addRules:f.addValidElements,setRules:f.setValidElements,addTempAttr:Ve(MW,h,a),getTempAttrs:Ae(a),getNodeFilters:h.getNodeFilters,getAttributeFilters:h.getAttributeFilters,removeNodeFilter:h.removeNodeFilter,removeAttributeFilter:h.removeAttributeFilter}},F5=(n,s)=>{const a=RW(n,s);return{schema:a.schema,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:a.serialize,addRules:a.addRules,setRules:a.setRules,addTempAttr:a.addTempAttr,getTempAttrs:a.getTempAttrs,getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},kw=(n,s,a={})=>{const c=((n,s)=>({format:"html",...n,set:!0,content:s}))(a,s);return bN(n,c).map(u=>{const f=((n,s,a)=>Sw(n).editor.setContent(s,a))(n,u.content,u);return vw(n,f.html,u),f.content}).getOr(s)},vf="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),tR=[],kP="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),Dw=[],nR=(n,s)=>{const a=nt(s,c=>Ke(n,c));return ri(a)},F_=(n,s)=>{const a=de.makeMap(n.plugins," "),u=nt(s,f=>Ke(a,f));return ri(u)},$5=n=>vn(Dw,s=>s.name===n).fold(()=>n,s=>s.replacedWith?`${n}, replaced by ${s.replacedWith}`:n),Fo=pn.DOM,yf=n=>I.from(n).each(s=>s.destroy()),MP=(()=>{const n={};return{add:(u,f)=>{n[u]=f},get:u=>n[u]?n[u]:{icons:{}},has:u=>Ke(n,u)}})(),Hu=Qo.ModelManager,rR=(n,s)=>s.dom[n],IP=(n,s)=>parseInt(yn(s,n),10),sR=Ve(rR,"clientWidth"),OP=Ve(rR,"clientHeight"),iR=Ve(IP,"margin-top"),H5=Ve(IP,"margin-left"),AP=n=>{const s=[],a=()=>{const T=n.theme;return T&&T.getNotificationManagerImpl?T.getNotificationManagerImpl():(()=>{const n=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:n,close:n,getArgs:n}})()},c=()=>I.from(s[0]),f=()=>{ue(s,T=>{T.reposition()})},g=T=>{Li(s,N=>N===T).each(N=>{s.splice(N,1)})},_=(T,N=!0)=>n.removed||!(n=>(n=>I.from(n).map(j_fromDom))(n.inline?n.getBody():n.getContentAreaContainer()).map(Be).getOr(!1))(n)?{}:(N&&n.dispatch("BeforeOpenNotification",{notification:T}),vn(s,V=>((T,N)=>!(T.type!==N.type||T.text!==N.text||T.progressBar||T.timeout||N.progressBar||N.timeout))(a().getArgs(V),T)).getOrThunk(()=>{n.editorManager.setActive(n);const V=a().open(T,()=>{g(V),f(),FI(n)&&c().fold(()=>n.focus(),F=>P1(j_fromDom(F.getEl())))});return(T=>{s.push(T)})(V),f(),n.dispatch("OpenNotification",{notification:{...V}}),V})),S=Ae(s);return(T=n).on("SkinLoaded",()=>{const N=jT(T);N&&_({text:N,type:"warning",timeout:0},!1),f()}),T.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(f)}),T.on("remove",()=>{ue(s.slice(),N=>{a().close(N)})}),{open:_,close:()=>{c().each(T=>{a().close(T),g(T),f()})},getNotifications:S};var T},V_=Qo.PluginManager,Lp=Qo.ThemeManager,lR=n=>{let s=[];const a=()=>{const F=n.theme;return F&&F.getWindowManagerImpl?F.getWindowManagerImpl():(()=>{const n=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:n,openUrl:n,alert:n,confirm:n,close:n}})()},c=(F,U)=>(...W)=>U?U.apply(F,W):void 0,g=F=>{(F=>{n.dispatch("CloseWindow",{dialog:F})})(F),s=nt(s,U=>U!==F),0===s.length&&n.focus()},b=F=>{n.editorManager.setActive(n),M1(n),n.ui.show();const U=F();return(F=>{s.push(F),(F=>{n.dispatch("OpenWindow",{dialog:F})})(F)})(U),U};return n.on("remove",()=>{ue(s,F=>{a().close(F)})}),{open:(F,U)=>b(()=>a().open(F,U,g)),openUrl:F=>b(()=>a().openUrl(F,g)),alert:(F,U,W)=>{const Z=a();Z.alert(F,c(W||Z,U))},confirm:(F,U,W)=>{const Z=a();Z.confirm(F,c(W||Z,U))},close:()=>{I.from(s[s.length-1]).each(F=>{a().close(F),g(F)})}}},uR=(n,s)=>{n.notificationManager.open({type:"error",text:s})},NP=(n,s)=>{n._skinLoaded?uR(n,s):n.on("SkinLoaded",()=>{uR(n,s)})},bf=(n,s,a)=>{eI(n,s,{message:a}),console.error(a)},Iw=(n,s,a)=>a?`Failed to load ${n}: ${a} from url ${s}`:`Failed to load ${n} url: ${s}`,FP=(n,...s)=>{const a=window.console;a&&(a.error?a.error(n,...s):a.log(n,...s))},Ow=n=>"content/"+n+"/content.css",Z5=(n,s)=>{const a=n.editorManager.baseURL+"/skins/content",u=`content${n.editorManager.suffix}.css`;return Xe(s,f=>(n=>tinymce.Resource.has(Ow(n)))(f)?f:(n=>/^[a-z0-9\-]+$/i.test(n))(f)&&!n.inline?`${a}/${f}/${u}`:n.documentBaseURI.toAbsolute(f))},J5=(n,s)=>{const a={};return{findAll:(u,f=ro)=>{const h=nt((n=>n?or(n.getElementsByTagName("img")):[])(u),_=>{const b=_.src;return!(_.hasAttribute("data-mce-bogus")||_.hasAttribute("data-mce-placeholder")||!b||b===It.transparentSrc)&&(vo(b,"blob:")?!n.isUploaded(b)&&f(_):!!vo(b,"data:")&&f(_))}),g=Xe(h,_=>{const b=_.src;if(Ke(a,b))return a[b].then(S=>Ye(S)?S:{image:_,blobInfo:S.blobInfo});{const S=((n,s)=>{const a=()=>Promise.reject("Invalid data URI");if(vo(s,"blob:")){const c=n.getByUri(s);return Oe(c)?Promise.resolve(c):(n=>vo(n,"blob:")?(n=>fetch(n).then(s=>s.ok?s.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${n} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})))(n):vo(n,"data:")?(n=>new Promise((s,a)=>{T_(n).bind(({type:c,data:u,base64Encoded:f})=>dw(c,u,f)).fold(()=>a("Invalid data URI"),s)}))(n):Promise.reject("Unknown URI format"))(s).then(u=>fw(u).then(f=>GA(f,!1,h=>I.some(KA(n,u,h))).getOrThunk(a)))}return vo(s,"data:")?M_(n,s).fold(a,c=>Promise.resolve(c)):Promise.reject("Unknown image data format")})(s,b).then(E=>(delete a[b],{image:_,blobInfo:E})).catch(E=>(delete a[b],E));return a[b]=S,S}});return Promise.all(g)}}},LP=()=>{let a={};const c=(T,N)=>({status:T,resultUri:N}),u=T=>T in a;return{hasBlobUri:u,getResultUri:T=>{const N=a[T];return N?N.resultUri:null},isPending:T=>!!u(T)&&1===a[T].status,isUploaded:T=>!!u(T)&&2===a[T].status,markPending:T=>{a[T]=c(1,null)},markUploaded:(T,N)=>{a[T]=c(2,N)},removeFailed:T=>{delete a[T]},destroy:()=>{a={}}}};let pR=0;const KW=(n,s)=>{const a={},u=(F,U)=>new Promise((W,Z)=>{const K=new XMLHttpRequest;K.open("POST",s.url),K.withCredentials=s.credentials,K.upload.onprogress=he=>{U(he.loaded/he.total*100)},K.onerror=()=>{Z("Image upload failed due to a XHR Transport error. Code: "+K.status)},K.onload=()=>{if(K.status<200||K.status>=300)return void Z("HTTP Error: "+K.status);const he=JSON.parse(K.responseText);he&&Ye(he.location)?W(((F,U)=>F?F.replace(/\/$/,"")+"/"+U.replace(/^\//,""):U)(s.basePath,he.location)):Z("Invalid JSON: "+K.responseText)};const J=new FormData;J.append("file",F.blob(),F.filename()),K.send(J)}),f=Zt(s.handler)?s.handler:u,g=(F,U)=>({url:U,blobInfo:F,status:!0}),_=(F,U)=>({url:"",blobInfo:F,status:!1,error:U}),b=(F,U)=>{de.each(a[F],W=>{W(U)}),delete a[F]};return{upload:(F,U)=>!s.url&&(F=>F===u)(f)?new Promise(F=>{F([])}):((F,U)=>(F=de.grep(F,W=>!n.isUploaded(W.blobUri())),Promise.all(de.map(F,W=>n.isPending(W.blobUri())?(F=>{const U=F.blobUri();return new Promise(W=>{a[U]=a[U]||[],a[U].push(W)})})(W):((F,U,W)=>(n.markPending(F.blobUri()),new Promise(Z=>{let K,J;try{const he=()=>{K&&(K.close(),J=ut)},we=ge=>{he(),n.markUploaded(F.blobUri(),ge),b(F.blobUri(),g(F,ge)),Z(g(F,ge))},ke=ge=>{he(),n.removeFailed(F.blobUri()),b(F.blobUri(),_(F,ge)),Z(_(F,ge))};J=ge=>{ge<0||ge>100||I.from(K).orThunk(()=>I.from(W).map(Ir)).each(re=>{K=re,re.progressBar.value(ge)})},U(F,J).then(we,ge=>{ke(Ye(ge)?{message:ge}:ge)})}catch(he){Z(_(F,he))}})))(W,f,U)))))(F,U)}},_R=n=>()=>n.notificationManager.open({text:n.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Aw=(n,s)=>KW(s,{url:LT(n),basePath:OS(n),credentials:Gy(n),handler:gV(n)}),Nw=n=>{const s=(()=>{let n=[];const s=E=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[E.toLowerCase()]||"dat"),c=E=>{if(!E.blob||!E.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const T=E.id||(n=>n+pR+++(()=>{const n=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+n()+n()+n()})())("blobid"),N=E.name||T,V=E.blob;return{id:Ae(T),name:Ae(N),filename:Ae(E.filename||N+"."+s(V.type)),blob:Ae(V),base64:Ae(E.base64),blobUri:Ae(E.blobUri||URL.createObjectURL(V)),uri:Ae(E.uri)}},f=E=>vn(n,E).getOrUndefined(),h=E=>f(T=>T.id()===E);return{create:(E,T,N,V,F)=>{if(Ye(E))return c({id:E,name:V,filename:F,blob:T,base64:N});if(ko(E))return c(E);throw new Error("Unknown input type")},add:E=>{h(E.id())||n.push(E)},get:h,getByUri:E=>f(T=>T.blobUri()===E),getByData:(E,T)=>f(N=>N.base64()===E&&N.blob().type===T),findFirst:f,removeByUri:E=>{n=nt(n,T=>T.blobUri()!==E||(URL.revokeObjectURL(T.blobUri()),!1))},destroy:()=>{ue(n,E=>{URL.revokeObjectURL(E.blobUri())}),n=[]}}})();let a,c;const u=LP(),f=[],h=K=>J=>n.selection?K(J):[],g=K=>K+(-1===K.indexOf("?")?"?":"&")+(new Date).getTime(),_=(K,J,he)=>{let we=0;do{we=K.indexOf(J,we),-1!==we&&(K=K.substring(0,we)+he+K.substr(we+J.length),we+=he.length-J.length+1)}while(-1!==we);return K},b=(K,J,he)=>(K=_(K,`src="${J}"`,`src="${he}"${he===It.transparentSrc?' data-mce-placeholder="1"':""}`),_(K,'data-mce-src="'+J+'"','data-mce-src="'+he+'"')),S=(K,J)=>{ue(n.undoManager.data,he=>{"fragmented"===he.type?he.fragments=Xe(he.fragments,we=>b(we,K,J)):he.content=b(he.content,K,J)})},T=()=>(a||(a=Aw(n,u)),U().then(h(K=>{const J=Xe(K,he=>he.blobInfo);return a.upload(J,_R(n)).then(h(he=>{const we=[];let ke=!1;const ge=Xe(he,(re,ae)=>{const{blobInfo:Ie,image:qe}=K[ae];let it=!1;return re.status&&FT(n)?(re.url&&!Yo(qe.src,re.url)&&(ke=!0),s.removeByUri(qe.src),Ic(n)||((K,J)=>{const he=n.convertURL(J,"src");S(K.src,J),qi(j_fromDom(K),{src:IS(n)?g(J):J,"data-mce-src":he})})(qe,re.url)):re.error&&(re.error.remove&&(S(qe.src,It.transparentSrc),we.push(qe),it=!0),((n,s)=>{NP(n,ea.translate(["Failed to upload image: {0}",s]))})(n,re.error.message)),{element:qe,status:re.status,uploadUri:re.url,blobInfo:Ie,removed:it}});return we.length>0&&!Ic(n)?n.undoManager.transact(()=>{ue(ot(we),re=>{const ae=je(re);M(re),ae.each((n=>s=>{((n,s)=>n.dom.isEmpty(s.dom)&&Oe(n.schema.getTextBlockElements()[Ft(s)]))(n,s)&&Yn(s,j_fromHtml('<br data-mce-bogus="1" />'))})(n)),s.removeByUri(re.dom.src)})}):ke&&n.undoManager.dispatchChange(),ge}))}))),N=()=>MS(n)?T():Promise.resolve([]),V=K=>hr(f,J=>J(K)),U=()=>(c||(c=J5(u,s)),c.findAll(n.getBody(),V).then(h(K=>{const J=nt(K,he=>Ye(he)?(NP(n,he),!1):"blob"!==he.uriType);return Ic(n)||ue(J,he=>{S(he.image.src,he.blobInfo.blobUri()),he.image.src=he.blobInfo.blobUri(),he.image.removeAttribute("data-mce-src")}),J}))),Z=K=>K.replace(/src="(blob:[^"]+)"/g,(J,he)=>{const we=u.getResultUri(he);if(we)return'src="'+we+'"';let ke=s.getByUri(he);return ke||(ke=$o(n.editorManager.get(),(ge,re)=>ge||re.editorUpload&&re.editorUpload.blobCache.getByUri(he),void 0)),ke?'src="data:'+ke.blob().type+";base64,"+ke.base64()+'"':J});return n.on("SetContent",()=>{MS(n)?N():U()}),n.on("RawSaveContent",K=>{K.content=Z(K.content)}),n.on("GetContent",K=>{K.source_view||"raw"===K.format||"tree"===K.format||(K.content=Z(K.content))}),n.on("PostRender",()=>{n.parser.addNodeFilter("img",K=>{ue(K,J=>{const he=J.attr("src");if(!he||s.getByUri(he))return;const we=u.getResultUri(he);we&&J.attr("src",we)})})}),{blobCache:s,addFilter:K=>{f.push(K)},uploadImages:T,uploadImagesAuto:N,scanForImages:U,destroy:()=>{s.destroy(),u.destroy(),c=a=null}}},bR={remove_similar:!0,inherit:!1},wf={selector:"td,th",...bR},wR={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...wf},tablecellverticalalign:{styles:{"vertical-align":"%value"},...wf},tablecellbordercolor:{styles:{borderColor:"%value"},...wf},tablecellclass:{classes:["%value"],...wf},tableclass:{selector:"table",classes:["%value"],...bR},tablecellborderstyle:{styles:{borderStyle:"%value"},...wf},tablecellborderwidth:{styles:{borderWidth:"%value"},...wf}},ZW=Ae(wR),BP=de.each,Ti=pn.DOM,CR=n=>Oe(n)&&ko(n),n4=(n,s)=>{const a=s&&s.schema||du({}),u=_=>{const b=Ye(_)?{name:_,classes:[],attrs:{}}:_,S=Ti.create(b.name);return((_,b)=>{b.classes.length>0&&Ti.addClass(_,b.classes.join(" ")),Ti.setAttribs(_,b.attrs)})(S,b),S},h=(_,b,S)=>{let E;const T=b[0],N=CR(T)?T.name:void 0,V=((_,b)=>{const S=a.getElementRule(_.nodeName.toLowerCase()),E=S?.parentsRequired;return!(!E||!E.length)&&(b&&zt(E,b)?b:E[0])})(_,N);if(V)N===V?(E=T,b=b.slice(1)):E=V;else if(T)E=T,b=b.slice(1);else if(!S)return _;const F=E?u(E):Ti.create("div");F.appendChild(_),S&&de.each(S,W=>{const Z=u(W);F.insertBefore(Z,_)});const U=CR(E)?E.siblings:void 0;return h(F,b,U)},g=Ti.create("div");if(n.length>0){const _=n[0],b=u(_),S=CR(_)?_.siblings:void 0;g.appendChild(h(b,n.slice(1),S))}return g},o4=n=>{let s="div";const a={name:s,classes:[],attrs:{},selector:n=de.trim(n)};return"*"!==n&&(s=n.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(c,u,f,h,g)=>{switch(u){case"#":a.attrs.id=f;break;case".":a.classes.push(f);break;case":":-1!==de.inArray("checked disabled enabled read-only required".split(" "),f)&&(a.attrs[f]=f)}if("["===h){const _=g.match(/([\w\-]+)(?:\=\"([^\"]+))?/);_&&(a.attrs[_[1]]=_[2])}return""})),a.name=s||"div",a},YW=(n,s)=>{let a="",c=zT(n);if(""===c)return"";const u=T=>Ye(T)?T.replace(/%(\w+)/g,""):"",f=(T,N)=>Ti.getStyle(N??n.getBody(),T,!0);if(Ye(s)){const T=n.formatter.get(s);if(!T)return"";s=T[0]}if("preview"in s){const T=s.preview;if(!1===T)return"";c=T||c}let g,h=s.block||s.inline||"span";const _=(n=>Ye(n)?(n=(n=n.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),de.map(n.split(/(?:>|\s+(?![^\[\]]+\]))/),s=>{const a=de.map(s.split(/(?:~\+|~|\+)/),o4),c=a.pop();return a.length&&(c.siblings=a),c}).reverse()):[])(s.selector);_.length>0?(_[0].name||(_[0].name=h),h=s.selector,g=n4(_,n)):g=n4([h],n);const b=Ti.select(h,g)[0]||g.firstChild;BP(s.styles,(T,N)=>{const V=u(T);V&&Ti.setStyle(b,N,V)}),BP(s.attributes,(T,N)=>{const V=u(T);V&&Ti.setAttrib(b,N,V)}),BP(s.classes,T=>{const N=u(T);Ti.hasClass(b,N)||Ti.addClass(b,N)}),n.dispatch("PreviewFormats"),Ti.setStyles(g,{position:"absolute",left:-65535}),n.getBody().appendChild(g);const S=f("fontSize"),E=/px$/.test(S)?parseInt(S,10):0;return BP(c.split(" "),T=>{let N=f(T,b);if(!("background-color"===T&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(N)&&(N=f(T),"#ffffff"===Ed(N).toLowerCase())||"color"===T&&"#000000"===Ed(N).toLowerCase())){if("font-size"===T&&/em|%$/.test(N)){if(0===E)return;N=parseFloat(N)/(/%$/.test(N)?100:1)*E+"px"}"border"===T&&N&&(a+="padding:0 2px;"),a+=T+":"+N+";"}}),n.dispatch("AfterPreviewFormats"),Ti.remove(g),a},r4=n=>{const s=(n=>{const s={},u=(h,g)=>{h&&(Ye(h)?(Sn(g)||(g=[g]),ue(g,_=>{Vo(_.deep)&&(_.deep=!Ci(_)),Vo(_.split)&&(_.split=!Ci(_)||Ro(_)),Vo(_.remove)&&Ci(_)&&!Ro(_)&&(_.remove="none"),Ci(_)&&Ro(_)&&(_.mixed=!0,_.block_expand=!0),Ye(_.classes)&&(_.classes=_.classes.split(/\s+/))}),s[h]=g):Ut(h,(_,b)=>{u(b,_)}))};return u((n=>{const s=n.dom,a=n.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{s.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{s.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},h={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==a?[h,u,f]:[u,h,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,h)=>$e(u)&&u.hasAttribute("href"),onformat:(u,f,h)=>{de.each(h,(g,_)=>{s.setAttrib(u,_,g)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=u?.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return de.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(n)),u(ZW()),u(HT(n)),{get:h=>Oe(h)?s[h]:s,has:h=>Ke(s,h),register:u,unregister:h=>(h&&s[h]&&delete s[h],s)}})(n),a=No({});return(n=>{n.addShortcut("meta+b","","Bold"),n.addShortcut("meta+i","","Italic"),n.addShortcut("meta+u","","Underline");for(let s=1;s<=6;s++)n.addShortcut("access+"+s,"",["FormatBlock",!1,"h"+s]);n.addShortcut("access+7","",["FormatBlock",!1,"p"]),n.addShortcut("access+8","",["FormatBlock",!1,"div"]),n.addShortcut("access+9","",["FormatBlock",!1,"address"])})(n),(n=>{n.on("mouseup keydown",s=>{((n,s,a)=>{const c=n.selection,u=n.getBody();Sx(n,null,a),(8===s||46===s)&&c.isCollapsed()&&c.getStart().innerHTML===Dp&&Sx(n,Sc(u,c.getStart()),!0),(37===s||39===s)&&Sx(n,Sc(u,c.getStart()),!0)})(n,s.keyCode,(n=>ye(n)&&Mn(n.data,Jn))(n.selection.getRng().endContainer))})})(n),Ic(n)||((n,s)=>{n.set({}),s.on("NodeChange",a=>{UA(s,a.element,n.get())}),s.on("FormatApply FormatRemove",a=>{const c=I.from(a.node).map(u=>ep(u)?u:u.startContainer).bind(u=>$e(u)?I.some(u):I.from(u.parentElement)).getOrThunk(()=>Bx(s));UA(s,c,n.get())})})(a,n),{get:s.get,has:s.has,register:s.register,unregister:s.unregister,apply:(c,u,f)=>{((n,s,a,c)=>{lo(n).formatter.apply(s,a,c)})(n,c,u,f)},remove:(c,u,f,h)=>{((n,s,a,c,u)=>{lo(n).formatter.remove(s,a,c,u)})(n,c,u,f,h)},toggle:(c,u,f)=>{((n,s,a,c)=>{lo(n).formatter.toggle(s,a,c)})(n,c,u,f)},match:(c,u,f,h)=>((n,s,a,c,u)=>lo(n).formatter.match(s,a,c,u))(n,c,u,f,h),closest:c=>((n,s)=>lo(n).formatter.closest(s))(n,c),matchAll:(c,u)=>((n,s,a)=>lo(n).formatter.matchAll(s,a))(n,c,u),matchNode:(c,u,f,h)=>((n,s,a,c,u)=>lo(n).formatter.matchNode(s,a,c,u))(n,c,u,f,h),canApply:c=>((n,s)=>lo(n).formatter.canApply(s))(n,c),formatChanged:(c,u,f,h)=>((n,s,a,c,u,f)=>lo(n).formatter.formatChanged(s,a,c,u,f))(n,a,c,u,f,h),getCssText:Ve(YW,n)}},s4=n=>{switch(n.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},a4=n=>{const s=mi(),a=No(0),c=No(0),u={data:[],typing:!1,beforeChange:()=>{((n,s,a)=>{lo(n).undoManager.beforeChange(s,a)})(n,a,s)},add:(f,h)=>((n,s,a,c,u,f,h)=>lo(n).undoManager.add(s,a,c,u,f,h))(n,u,c,a,s,f,h),dispatchChange:()=>{n.setDirty(!0);const f=mf(n);f.bookmark=Hy(n.selection),n.dispatch("change",{level:f,lastLevel:cd(u.data,c.get()).getOrUndefined()})},undo:()=>((n,s,a,c)=>lo(n).undoManager.undo(s,a,c))(n,u,a,c),redo:()=>((n,s,a)=>lo(n).undoManager.redo(s,a))(n,c,u.data),clear:()=>{((n,s,a)=>{lo(n).undoManager.clear(s,a)})(n,u,c)},reset:()=>{((n,s)=>{lo(n).undoManager.reset(s)})(n,u)},hasUndo:()=>((n,s,a)=>lo(n).undoManager.hasUndo(s,a))(n,u,c),hasRedo:()=>((n,s,a)=>lo(n).undoManager.hasRedo(s,a))(n,u,c),transact:f=>((n,s,a,c)=>lo(n).undoManager.transact(s,a,c))(n,u,a,f),ignore:f=>{((n,s,a)=>{lo(n).undoManager.ignore(s,a)})(n,a,f)},extra:(f,h)=>{((n,s,a,c,u)=>{lo(n).undoManager.extra(s,a,c,u)})(n,u,c,f,h)}};return Ic(n)||((n,s,a)=>{const c=No(!1),u=_=>{Cw(s,!1,a),s.add({},_)};n.on("init",()=>{s.add()}),n.on("BeforeExecCommand",_=>{s4(_.command)||(VN(s,a),s.beforeChange())}),n.on("ExecCommand",_=>{s4(_.command)||u(_)}),n.on("ObjectResizeStart cut",()=>{s.beforeChange()}),n.on("SaveContent ObjectResized blur",u),n.on("dragend",u),n.on("keyup",_=>{const b=_.keyCode;if(_.isDefaultPrevented())return;const S=It.os.isMacOS()&&"Meta"===_.key;(b>=33&&b<=36||b>=37&&b<=40||45===b||_.ctrlKey||S)&&(u(),n.nodeChanged()),(46===b||8===b)&&n.nodeChanged(),c.get()&&s.typing&&!gf(mf(n),s.data[0])&&(n.isDirty()||n.setDirty(!0),n.dispatch("TypingUndo"),c.set(!1),n.nodeChanged())}),n.on("keydown",_=>{const b=_.keyCode;if(!_.isDefaultPrevented()){if(!(b>=33&&b<=36||b>=37&&b<=40||45===b))return!(b<16||b>20)||224===b||91===b||s.typing||_.ctrlKey&&!_.altKey||_.metaKey?void((It.os.isMacOS()?_.metaKey:_.ctrlKey&&!_.altKey)&&s.beforeChange()):(s.beforeChange(),Cw(s,!0,a),s.add({},_),void c.set(!0));s.typing&&u(_)}}),n.on("mousedown",_=>{s.typing&&u(_)}),n.on("input",_=>{_.inputType&&((_=>"insertReplacementText"===_.inputType)(_)||(_=>"insertText"===_.inputType&&null===_.data)(_)||(_=>"insertFromPaste"===_.inputType||"insertFromDrop"===_.inputType)(_))&&u(_)}),n.on("AddUndo Undo Redo ClearUndos",_=>{_.isDefaultPrevented()||n.nodeChanged()})})(n,u,a),(n=>{n.addShortcut("meta+z","","Undo"),n.addShortcut("meta+y,meta+shift+z","","Redo")})(n),u},XW=[9,27,Fe.HOME,Fe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Fe.DOWN,Fe.UP,Fe.LEFT,Fe.RIGHT].concat(It.browser.isFirefox()?[224]:[]),c4="data-mce-placeholder",l4=n=>"keydown"===n.type||"keyup"===n.type,u4=n=>{const s=n.keyCode;return s===Fe.BACKSPACE||s===Fe.DELETE},h4=(n,s)=>({from:n,to:s}),cr=(n,s)=>{const a=j_fromDom(n),c=j_fromDom(s.container());return xp(a,c).map(u=>((n,s)=>({block:n,position:s}))(u,s))},SR=(n,s)=>di(s,u=>hu(u)||Oa(u.dom),u=>mt(u,n)).filter(Ar).getOr(n),kR=(n,s)=>{const a=((n,s)=>{const a=sr(n);return Li(a,c=>s.isBlock(Ft(c))).fold(Ae(a),c=>a.slice(0,c))})(n,s);return ue(a,M),a},Vp=(n,s,a)=>{const c=Tc(a,s);return vn(c.reverse(),u=>vr(n,u)).each(M)},g4=(n,s,a,c,u)=>{if(vr(c,a))return ta(a),Wr(a.dom);((n,s)=>0===nt(hh(s),a=>!vr(n,a)).length)(c,u)&&vr(c,s)&&Fr(u,j_fromTag("br"));const f=Us(a.dom,se.before(u.dom));return ue(kR(s,c),h=>{Fr(u,h)}),Vp(c,n,s),f},_4=(n,s,a,c)=>{if(vr(c,a)){if(vr(c,s)){const h=Kc((g=>{const _=(b,S)=>og(b).fold(()=>S,E=>((n,s)=>n.isInline(Ft(s)))(c,E)?_(E,S.concat(ul(E))):S);return _(g,[])})(a),(g,_)=>(wd(g,_),_),vc());C(s),Yn(s,h)}return M(a),Wr(s.dom)}const u=ra(a.dom);return ue(kR(s,c),f=>{Yn(a,f)}),Vp(c,n,s),u},Sf=(n,s)=>{Pu(n,s.dom).bind(a=>I.from(a.getNode())).map(j_fromDom).filter(Od).each(M)},ns=(n,s,a,c)=>(Sf(!0,s),Sf(!1,a),((n,s)=>Ki(s,n)?((n,s)=>{const a=Tc(s,n);return I.from(a[a.length-1])})(s,n):I.none())(s,a).fold(Ve(_4,n,s,a,c),Ve(g4,n,s,a,c))),Bn=(n,s,a,c,u)=>s?ns(n,c,a,u):ns(n,a,c,u),Ps=(n,s)=>{const a=j_fromDom(n.getBody());return((n,s,a,c)=>c.collapsed?((n,s,a,c)=>{const u=cr(s,se.fromRangeStart(c)),f=u.bind(h=>wi(a,s,h.position).bind(g=>cr(s,g).map(_=>((n,s,a,c)=>Nn(c.position.getNode())&&!vr(n,c.block)?Pu(!1,c.block.dom).bind(u=>u.isEqual(c.position)?wi(a,s,u).bind(f=>cr(s,f)):I.some(c)).getOr(c):c)(n,s,a,_))));return rr(u,f,h4).filter(h=>(n=>!mt(n.from.block,n.to.block))(h)&&((n,s)=>{const a=j_fromDom(n);return mt(SR(a,s.from.block),SR(a,s.to.block))})(s,h)&&(n=>!1===Pn(n.from.block.dom)&&!1===Pn(n.to.block.dom))(h)&&(n=>{const s=a=>Og(a)||lu(a.dom);return s(n.from.block)&&s(n.to.block)})(h))})(n,s,a,c):I.none())(n.schema,a.dom,s,n.selection.getRng()).map(u=>()=>{Bn(a,s,u.from.block,u.to.block,n.schema).each(f=>{n.selection.setRng(f.toRange())})})},MR=(n,s)=>{const a=j_fromDom(s),c=Ve(mt,n);return ui(a,hu,c).isSome()},w4=n=>{const s=j_fromDom(n.getBody());return((n,s)=>{const a=Us(n.dom,se.fromRangeStart(s)).isNone(),c=vs(n.dom,se.fromRangeEnd(s)).isNone();return!((n,s)=>MR(n,s.startContainer)||MR(n,s.endContainer))(n,s)&&a&&c})(s,n.selection.getRng())?(n=>I.some(()=>{n.setContent(""),n.selection.setCursorLocation()}))(n):((n,s,a)=>{const c=s.getRng();return rr(xp(n,j_fromDom(c.startContainer)),xp(n,j_fromDom(c.endContainer)),(u,f)=>mt(u,f)?I.none():I.some(()=>{c.deleteContents(),Bn(n,!0,u,f,a).each(h=>{s.setRng(h.toRange())})})).getOr(I.none())})(s,n.selection,n.schema)},jP=(n,s)=>n.selection.isCollapsed()?I.none():w4(n),Wu=(n,s,a,c,u)=>I.from(s._selectionOverrides.showCaret(n,a,c,u)),qu=(n,s)=>n.dispatch("BeforeObjectSelected",{target:s}).isDefaultPrevented()?I.none():I.some((n=>{const s=n.ownerDocument.createRange();return s.selectNode(n),s})(s)),$p=(n,s,a)=>s.collapsed?((n,s,a)=>{const c=GS(1,n.getBody(),s),u=se.fromRangeStart(c),f=u.getNode();if(qh(f))return Wu(1,n,f,!u.isAtEnd(),!1);const h=u.getNode(!0);if(qh(h))return Wu(1,n,h,!1,!1);const g=Bu(n.dom.getRoot(),u.getNode());return qh(g)?Wu(1,n,g,!1,a):I.none()})(n,s,a).getOr(s):s,ua=n=>Dc(n)||Ou(n),HP=n=>Au(n)||Hb(n),C4=(n,s,a,c,u,f)=>{Wu(c,n,f.getNode(!u),u,!0).each(h=>{if(s.collapsed){const g=s.cloneRange();u?g.setEnd(h.startContainer,h.startOffset):g.setStart(h.endContainer,h.endOffset),g.deleteContents()}else s.deleteContents();n.selection.setRng(h)}),((n,s)=>{ye(s)&&0===s.data.length&&n.remove(s)})(n.dom,a)},zP=(n,s)=>((n,s)=>{const a=n.selection.getRng();if(!ye(a.commonAncestorContainer))return I.none();const c=s?er.Forwards:er.Backwards,u=bi(n.getBody()),f=Ve(KS,s?u.next:u.prev),h=s?ua:HP,g=Wd(c,n.getBody(),a),_=f(g),b=_&&la(s,_);if(!b||!ZS(g,b))return I.none();if(h(b))return I.some(()=>C4(n,a,g.getNode(),c,s,b));const S=f(b);return S&&h(S)&&ZS(b,S)?I.some(()=>C4(n,a,g.getNode(),c,s,S)):I.none()})(n,s),WP=(n,s)=>{const a=n.getBody();return s?Wr(a).filter(Dc):ra(a).filter(Au)},Lw=n=>{const s=n.selection.getRng();return!s.collapsed&&(WP(n,!0).exists(a=>a.isEqual(se.fromRangeStart(s)))||WP(n,!1).exists(a=>a.isEqual(se.fromRangeEnd(s))))},qs=vi_generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),IR=(n,s,a,c)=>wi(s,n,a).bind(u=>(n=>Oe(n)&&(hu(j_fromDom(n))||Oh(j_fromDom(n))))(u.getNode())||((n,s,a,c,u)=>{const f=h=>u.isInline(h.nodeName.toLowerCase())&&!na(a,c,n);return _M(!s,a).fold(()=>_M(s,c).fold(mn,f),f)})(n,s,a,u,c)?I.none():s&&Pn(u.getNode())||!s&&Pn(u.getNode(!0))?((n,s,a,c,u)=>{const f=u.getNode(!a);return xp(j_fromDom(s),j_fromDom(c.getNode())).map(h=>vr(n,h)?qs.remove(h.dom):qs.moveToElement(f)).orThunk(()=>I.some(qs.moveToElement(f)))})(c,n,s,a,u):s&&Au(a)||!s&&Dc(a)?I.some(qs.moveToPosition(u)):I.none()),bn=(n,s)=>I.from(Bu(n.getBody(),s)),D4=(n,s)=>{const a=n.selection.getNode();return bn(n,a).filter(Pn).fold(()=>((n,s,a,c)=>{const u=GS(s?1:-1,n,a),f=se.fromRangeStart(u),h=j_fromDom(n);return!s&&Au(f)?I.some(qs.remove(f.getNode(!0))):s&&Dc(f)?I.some(qs.remove(f.getNode())):!s&&Dc(f)&&Ru(h,f,c)?p_(h,f,c).map(g=>qs.remove(g.getNode())):s&&Au(f)&&qb(h,f,c)?q1(h,f,c).map(g=>qs.remove(g.getNode())):((n,s,a,c)=>((n,s)=>{const a=s.getNode(!n),c=n?"after":"before";return $e(a)&&a.getAttribute("data-mce-caret")===c})(s,a)?((n,s)=>mo(s)?I.none():n&&Pn(s.nextSibling)?I.some(qs.moveToElement(s.nextSibling)):!n&&Pn(s.previousSibling)?I.some(qs.moveToElement(s.previousSibling)):I.none())(s,a.getNode(!s)).orThunk(()=>IR(n,s,a,c)):IR(n,s,a,c).bind(u=>((n,s,a)=>a.fold(c=>I.some(qs.remove(c)),c=>I.some(qs.moveToElement(c)),c=>na(s,c,n)?I.none():I.some(qs.moveToPosition(c))))(n,a,u)))(n,s,f,c)})(n.getBody(),s,n.selection.getRng(),n.schema).map(c=>()=>c.fold(((n,s)=>a=>(n._selectionOverrides.hideFakeCaret(),xi(n,s,j_fromDom(a)),!0))(n,s),((n,s)=>a=>{const c=s?se.before(a):se.after(a);return n.selection.setRng(c.toRange()),!0})(n,s),(n=>s=>(n.selection.setRng(s.toRange()),!0))(n))),()=>I.some(ut))},U_=n=>{const s=n.dom,a=n.selection,c=Bu(n.getBody(),a.getNode());if(Oa(c)&&s.isBlock(c)&&s.isEmpty(c)){const u=s.create("br",{"data-mce-bogus":"1"});s.setHTML(c,""),c.appendChild(u),a.setRng(se.before(u).toRange())}return!0},Mi=(n,s)=>n.selection.isCollapsed()?D4(n,s):((n,s)=>{const a=n.selection.getNode();return Pn(a)&&!O0(a)?bn(n,a.parentNode).filter(Pn).fold(()=>I.some(()=>{(n=>{ue(Wt(n,".mce-offscreen-selection"),M)})(j_fromDom(n.getBody())),xi(n,s,j_fromDom(n.selection.getNode())),w_(n)}),()=>I.some(ut)):Lw(n)?I.some(()=>{sx(n,n.selection.getRng(),j_fromDom(n.getBody()))}):I.none()})(n,s),Lo=(n,s)=>n.selection.isCollapsed()?((n,s)=>{const a=se.fromRangeStart(n.selection.getRng());return wi(s,n.getBody(),a).filter(c=>s?H1(c):jb(c)).bind(c=>Zh(s?0:-1,c)).map(c=>()=>n.selection.select(c))})(n,s):I.none(),Up=ye,qn=n=>Up(n)&&n.data[0]===zo,OR=n=>Up(n)&&n.data[n.data.length-1]===zo,j_=n=>{var s;return(null!==(s=n.ownerDocument)&&void 0!==s?s:document).createTextNode(zo)},Uw=(n,s)=>n?(n=>{var s;if(Up(n.previousSibling))return OR(n.previousSibling)||n.previousSibling.appendData(zo),n.previousSibling;if(Up(n))return qn(n)||n.insertData(0,zo),n;{const a=j_(n);return null===(s=n.parentNode)||void 0===s||s.insertBefore(a,n),a}})(s):(n=>{var s,a;if(Up(n.nextSibling))return qn(n.nextSibling)||n.nextSibling.insertData(0,zo),n.nextSibling;if(Up(n))return OR(n)||n.appendData(zo),n;{const c=j_(n);return n.nextSibling?null===(s=n.parentNode)||void 0===s||s.insertBefore(c,n.nextSibling):null===(a=n.parentNode)||void 0===a||a.appendChild(c),c}})(s),AR=Ve(Uw,!0),qP=Ve(Uw,!1),H_=(n,s)=>ye(n.container())?Uw(s,n.container()):Uw(s,n.getNode()),jw=(n,s)=>{const a=s.get();return a&&n.container()===a&&gi(a)},GP=(n,s)=>s.fold(a=>{Cr(n.get());const c=AR(a);return n.set(c),I.some(se(c,c.length-1))},a=>Wr(a).map(c=>{if(jw(c,n)){const u=n.get();return se(u,1)}{Cr(n.get());const u=H_(c,!0);return n.set(u),se(u,1)}}),a=>ra(a).map(c=>{if(jw(c,n)){const u=n.get();return se(u,u.length-1)}{Cr(n.get());const u=H_(c,!1);return n.set(u),se(u,u.length-1)}}),a=>{Cr(n.get());const c=qP(a);return n.set(c),I.some(se(c,1))}),KP=(n,s)=>{for(let a=0;a<n.length;a++){const c=n[a].apply(null,s);if(c.isSome())return c}return I.none()},Kr=vi_generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),NR=(n,s)=>wc(s,n)||n,I4=(n,s,a)=>{const c=CO(a),u=NR(s,c.container());return wl(n,u,c).fold(()=>vs(u,c).bind(Ve(wl,n,u)).map(f=>Kr.before(f)),I.none)},O4=(n,s)=>null===Sc(n,s),ZP=(n,s,a)=>wl(n,s,a).filter(Ve(O4,s)),A4=(n,s,a)=>{const c=b_(a);return ZP(n,s,c).bind(u=>Us(u,c).isNone()?I.some(Kr.start(u)):I.none())},RR=(n,s,a)=>{const c=CO(a);return ZP(n,s,c).bind(u=>vs(u,c).isNone()?I.some(Kr.end(u)):I.none())},Hw=(n,s,a)=>{const c=b_(a),u=NR(s,c.container());return wl(n,u,c).fold(()=>Us(u,c).bind(Ve(wl,n,u)).map(f=>Kr.after(f)),I.none)},jp=n=>!bO(YP(n)),Oc=(n,s,a)=>KP([I4,A4,RR,Hw],[n,s,a]).filter(jp),YP=n=>n.fold(pe,pe,pe,pe),zw=n=>n.fold(Ae("before"),Ae("start"),Ae("end"),Ae("after")),z_=n=>n.fold(Kr.before,Kr.before,Kr.after,Kr.after),JP=n=>n.fold(Kr.start,Kr.start,Kr.end,Kr.end),N4=(n,s,a,c,u,f)=>rr(wl(s,a,c),wl(s,a,u),(h,g)=>h!==g&&((n,s,a)=>{const c=wc(s,n),u=wc(a,n);return Oe(c)&&c===u})(a,h,g)?Kr.after(n?h:g):f).getOr(f),R4=(n,s)=>n.fold(ro,a=>!((n,s)=>zw(n)===zw(s)&&YP(n)===YP(s))(a,s)),XP=(n,s)=>n?s.fold(As(I.some,Kr.start),I.none,As(I.some,Kr.after),I.none):s.fold(I.none,As(I.some,Kr.before),I.none,As(I.some,Kr.end)),FR=(n,s,a)=>{const c=n?1:-1;return s.setRng(se(a.container(),a.offset()+c).toRange()),s.getSel().modify("move",n?"forward":"backward","word"),!0};var Ha=function(n){return n[n.Br=0]="Br",n[n.Block=1]="Block",n[n.Wrap=2]="Wrap",n[n.Eol=3]="Eol",n}(Ha||{});const W_=(n,s)=>n===er.Backwards?ka(s):s,V4=(n,s,a)=>n===er.Forwards?s.next(a):s.prev(a),sq=(n,s,a,c)=>Nn(c.getNode(s===er.Forwards))?Ha.Br:!1===na(a,c)?Ha.Block:Ha.Wrap,tE=(n,s,a,c)=>{const u=bi(a);let f=c;const h=[];for(;f;){const g=V4(s,u,f);if(!g)break;if(Nn(g.getNode(!1)))return s===er.Forwards?{positions:W_(s,h).concat([g]),breakType:Ha.Br,breakAt:I.some(g)}:{positions:W_(s,h),breakType:Ha.Br,breakAt:I.some(g)};if(g.isVisible()){if(n(f,g)){const _=sq(0,s,f,g);return{positions:W_(s,h),breakType:_,breakAt:I.some(g)}}h.push(g),f=g}else f=g}return{positions:W_(s,h),breakType:Ha.Eol,breakAt:I.none()}},Ww=(n,s,a,c)=>s(a,c).breakAt.map(u=>{const f=s(a,u).positions;return n===er.Backwards?f.concat(u):[u].concat(f)}).getOr([]),qw=(n,s)=>$o(n,(a,c)=>a.fold(()=>I.some(c),u=>rr(go(u.getClientRects()),go(c.getClientRects()),(f,h)=>{const g=Math.abs(s-f.left);return Math.abs(s-h.left)<=g?c:u}).or(a)),I.none()),lr=(n,s)=>go(s.getClientRects()).bind(a=>qw(n,a.left)),q_=Ve(tE,se.isAbove,-1),Hp=Ve(tE,se.isBelow,1),LR=Ve(Ww,-1,q_),Zr=Ve(Ww,1,Hp),nE=(n,s)=>q_(n,s).breakAt.isNone(),$4=(n,s)=>Hp(n,s).breakAt.isNone(),BR=(n,s)=>lr(LR(n,s),s),j4=(n,s)=>lr(Zr(n,s),s),oE=Pn,Gw=(n,s)=>Math.abs(n.left-s),VR=(n,s)=>Math.abs(n.right-s),z4=(n,s)=>Nm(n,(a,c)=>{const u=Math.min(Gw(a,s),VR(a,s)),f=Math.min(Gw(c,s),VR(c,s));return f===u&&(n=>Fn(n,"node"))(c)&&oE(c.node)||f<u?c:a}),iq=n=>{const s=a=>Xe(a,c=>{const u=mu(c);return u.node=n,u});if($e(n))return s(n.getClientRects());if(ye(n)){const a=n.ownerDocument.createRange();return a.setStart(n,0),a.setEnd(n,n.data.length),s(a.getClientRects())}return[]},rE=n=>Uo(n,iq);var Kw=function(n){return n[n.Up=-1]="Up",n[n.Down=1]="Down",n}(Kw||{});const W4=(n,s,a,c,u,f)=>{let h=0;const g=[],_=E=>{let T=rE([E]);-1===n&&(T=T.reverse());for(let N=0;N<T.length;N++){const V=T[N];if(!a(V,b)){if(g.length>0&&s(V,eu(g))&&h++,V.line=h,u(V))return!0;g.push(V)}}return!1},b=eu(f.getClientRects());if(!b)return g;const S=f.getNode();return S&&(_(S),((n,s,a,c)=>{let u=c;for(;u=Su(u,n,gS,s);)if(a(u))return})(n,c,_,S)),g},q4=Ve(W4,Kw.Up,Rd,gu),G4=Ve(W4,Kw.Down,gu,Rd),$R=n=>eu(n.getClientRects()),UR=n=>s=>((n,s)=>s.line>n)(n,s),sE=n=>s=>((n,s)=>s.line===n)(n,s),Tl=(n,s)=>{n.selection.setRng(s),gp(n,n.selection.getRng())},iE=(n,s,a)=>I.some($p(n,s,a)),jR=(n,s,a,c,u,f)=>{const h=s===er.Forwards,g=bi(n.getBody()),_=Ve(KS,h?g.next:g.prev),b=h?c:u;if(!a.collapsed){const V=Fh(a);if(f(V))return Wu(s,n,V,s===er.Backwards,!1);if(Lw(n)){const F=a.cloneRange();return F.collapse(s===er.Backwards),I.from(F)}}const S=Wd(s,n.getBody(),a);if(b(S))return qu(n,S.getNode(!h));let E=_(S);const T=dT(a);if(!E)return T?I.some(a):I.none();if(E=la(h,E),b(E))return Wu(s,n,E.getNode(!h),h,!1);const N=_(E);return N&&b(N)&&ZS(E,N)?Wu(s,n,N.getNode(!h),h,!1):T?iE(n,E.toRange(),!1):I.none()},HR=(n,s,a,c,u,f)=>{const h=Wd(s,n.getBody(),a),g=eu(h.getClientRects()),_=s===Kw.Down,b=n.getBody();if(!g)return I.none();if(Lw(n)){const U=_?se.fromRangeEnd(a):se.fromRangeStart(a);return(_?j4:BR)(b,U).orThunk(()=>I.from(U)).map(Z=>Z.toRange())}const E=(_?G4:q4)(b,UR(1),h),T=nt(E,sE(1)),N=g.left,V=z4(T,N);if(V&&f(V.node)){const U=Math.abs(N-V.left),W=Math.abs(N-V.right);return Wu(s,n,V.node,U<W,!1)}let F;if(F=c(h)?h.getNode():u(h)?h.getNode(!0):Fh(a),F){const U=((n,s,a,c)=>{const u=bi(s);let f,h,g,_;const b=[];let S=0;1===n?(f=u.next,h=gu,g=Rd,_=se.after(c)):(f=u.prev,h=Rd,g=gu,_=se.before(c));const E=$R(_);do{if(!_.isVisible())continue;const T=$R(_);if(g(T,E))continue;b.length>0&&h(T,eu(b))&&S++;const N=mu(T);if(N.position=_,N.line=S,a(N))return b;b.push(N)}while(_=f(_));return b})(s,b,UR(1),F);let W=z4(nt(U,sE(1)),N);if(W||(W=eu(nt(U,sE(0))),W))return iE(n,W.position.toRange(),!1)}return 0===T.length?aE(n,_).filter(_?u:c).map(U=>$p(n,U.toRange(),!1)):I.none()},aE=(n,s)=>{const a=n.selection.getRng(),c=s?se.fromRangeEnd(a):se.fromRangeStart(a),u=((n,s)=>ui(j_fromDom(n),u=>B7(u.dom),u=>u.dom===s).map(u=>u.dom).getOr(s))(c.container(),n.getBody());if(s){const f=Hp(u,c);return cs(f.positions)}{const f=q_(u,c);return go(f.positions)}},zR=(n,s,a)=>aE(n,s).filter(a).exists(c=>(n.selection.setRng(c.toRange()),!0)),Zw=(n,s)=>{const a=n.dom.createRng();a.setStart(s.container(),s.offset()),a.setEnd(s.container(),s.offset()),n.selection.setRng(a)},WR=(n,s)=>{n?s.setAttribute("data-mce-selected","inline-boundary"):s.removeAttribute("data-mce-selected")},qR=(n,s,a)=>GP(s,a).map(c=>(Zw(n,c),a)),Y4=(n,s,a)=>{const c=n.getBody(),u=((n,s,a)=>{const c=se.fromRangeStart(n);if(n.collapsed)return c;{const u=se.fromRangeEnd(n);return a?Us(s,u).getOr(u):vs(s,c).getOr(c)}})(n.selection.getRng(),c,a);return((n,s,a,c)=>{const u=la(n,c),f=Oc(s,a,u);return Oc(s,a,u).bind(Ve(XP,n)).orThunk(()=>((n,s,a,c,u)=>{const f=la(n,u);return wi(n,a,f).map(Ve(la,n)).fold(()=>c.map(z_),_=>Oc(s,a,_).map(Ve(N4,n,s,a,f,_)).filter(Ve(R4,c))).filter(jp)})(n,s,a,f,c))})(a,Ve(af,n),c,u).bind(g=>qR(n,s,g))},KR=(n,s,a)=>!!zh(n)&&Y4(n,s,a).isSome(),ZR=(n,s,a)=>!!zh(s)&&((n,s)=>{const a=s.selection.getRng(),c=n?se.fromRangeEnd(a):se.fromRangeStart(a);return!!(n=>Zt(n.selection.getSel().modify))(s)&&(n&&Rg(c)?FR(!0,s.selection,c):!(n||!uS(c))&&FR(!1,s.selection,c))})(n,s),X4=n=>{const s=No(null),a=Ve(af,n);return n.on("NodeChange",c=>{zh(n)&&(((n,s,a)=>{const c=Xe(Wt(j_fromDom(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),h=>h.dom),u=nt(c,n),f=nt(a,n);ue(Zc(u,f),Ve(WR,!1)),ue(Zc(f,u),Ve(WR,!0))})(a,n.dom,c.parents),((n,s)=>{const a=s.get();if(n.selection.isCollapsed()&&!n.composing&&a){const c=se.fromRangeStart(n.selection.getRng());se.isTextPosition(c)&&!(n=>Rg(n)||uS(n))(c)&&(Zw(n,$V(a,c)),s.set(null))}})(n,s),((n,s,a,c)=>{if(s.selection.isCollapsed()){const u=nt(c,n);ue(u,f=>{const h=se.fromRangeStart(s.selection.getRng());Oc(n,s.getBody(),h).bind(g=>qR(s,a,g))})}})(a,n,s,c.parents))}),s},cE=Ve(ZR,!0),lE=Ve(ZR,!1),uE=(n,s,a)=>{if(zh(n)){const c=aE(n,s).getOrThunk(()=>{const u=n.selection.getRng();return s?se.fromRangeEnd(u):se.fromRangeStart(u)});return Oc(Ve(af,n),n.getBody(),c).exists(u=>{const f=z_(u);return GP(a,f).exists(h=>(Zw(n,h),!0))})}return!1},fE=(n,s)=>a=>GP(s,a).map(c=>()=>Zw(n,c)),YR=(n,s,a,c)=>{const u=n.getBody(),f=Ve(af,n);n.undoManager.ignore(()=>{n.selection.setRng(((n,s)=>{const a=document.createRange();return a.setStart(n.container(),n.offset()),a.setEnd(s.container(),s.offset()),a})(a,c)),Fu(n),Oc(f,u,se.fromRangeStart(n.selection.getRng())).map(JP).bind(fE(n,s)).each(oi)}),n.nodeChanged()},hE=(n,s,a)=>{if(n.selection.isCollapsed()&&zh(n)){const c=se.fromRangeStart(n.selection.getRng());return((n,s,a,c)=>{const u=((n,s)=>wc(s,n)||n)(n.getBody(),c.container()),f=Ve(af,n),h=Oc(f,u,c);return h.bind(_=>a?_.fold(Ae(I.some(JP(_))),I.none,Ae(I.some(z_(_))),I.none):_.fold(I.none,Ae(I.some(z_(_))),I.none,Ae(I.some(JP(_))))).map(fE(n,s)).getOrThunk(()=>{const _=Cc(a,u,c),b=_.bind(S=>Oc(f,u,S));return rr(h,b,()=>wl(f,u,c).bind(S=>(n=>rr(Wr(n),ra(n),(s,a)=>{const c=la(!0,s),u=la(!1,a);return vs(n,c).forall(f=>f.isEqual(u))}).getOr(!0))(S)?I.some(()=>{xi(n,a,j_fromDom(S))}):I.none())).getOrThunk(()=>b.bind(()=>_.map(S=>()=>{a?YR(n,s,c,S):YR(n,s,S,c)})))})})(n,s,a,c)}return I.none()},nH=(n,s)=>{const a=j_fromDom(n.getBody()),c=j_fromDom(n.selection.getStart()),u=Tc(c,a);return Li(u,s).fold(Ae(u),f=>u.slice(0,f))},lq=n=>1===tl(n),QR=(n,s)=>{const a=Ve(vA,n);return Uo(s,c=>a(c)?[c.dom]:[])},XR=n=>{const s=(n=>nH(n,s=>n.schema.isBlock(Ft(s))))(n);return QR(n,s)},e2=(n,s)=>{const a=nt((n=>nH(n,s=>n.schema.isBlock(Ft(s))||(n=>tl(n)>1)(s)))(n),lq);return cs(a).bind(c=>{const u=se.fromRangeStart(n.selection.getRng());return ox(s,u,c.dom)&&!ys(c)?I.some(()=>((n,s,a,c)=>{const u=QR(s,c);if(0===u.length)xi(s,n,a);else{const f=_A(a.dom,u);s.selection.setRng(f.toRange())}})(s,n,c,a)):I.none()})},rH=(n,s)=>{const a=n.selection.getStart(),c=((n,s)=>{const a=s.parentElement;return Nn(s)&&!po(a)&&n.dom.isEmpty(a)})(n,a)||(n=>ys(j_fromDom(n)))(a)?_A(a,s):((n,s)=>{const{caretContainer:a,caretPosition:c}=gA(s);return n.insertNode(a.dom),c})(n.selection.getRng(),s);n.selection.setRng(c.toRange())},t2=n=>ye(n.startContainer),mq=n=>{const s=n.selection.getRng();return(n=>0===n.startOffset&&t2(n))(s)&&((n,s)=>{const a=s.startContainer.parentElement;return!po(a)&&vA(n,j_fromDom(a))})(n,s)&&(n=>(n=>(n=>{const s=n.startContainer.parentNode,a=n.endContainer.parentNode;return!po(s)&&!po(a)&&s.isEqualNode(a)})(n)&&(n=>{const s=n.endContainer;return n.endOffset===(ye(s)?s.length:s.childNodes.length)})(n))(n)||(n=>!n.endContainer.isEqualNode(n.commonAncestorContainer))(n))(s)},mE=(n,s)=>n.selection.isCollapsed()?e2(n,s):(n=>{if(mq(n)){const s=XR(n);return I.some(()=>{Fu(n),((n,s)=>{const a=Zc(s,XR(n));a.length>0&&rH(n,a)})(n,s)})}return I.none()})(n),G_=n=>((n=>{const s=n.selection.getRng();return s.collapsed&&(t2(s)||n.dom.isEmpty(s.startContainer))&&!(n=>((n,s)=>Qr(n,a=>sa(a.dom),a=>s.isBlock(Ft(a))))(j_fromDom(n.selection.getStart()),n.schema))(n)})(n)&&rH(n,[]),!0),gE=(n,s,a)=>Oe(a)?I.some(()=>{n._selectionOverrides.hideFakeCaret(),xi(n,s,j_fromDom(a))}):I.none(),n2=(n,s)=>n.selection.isCollapsed()?((n,s)=>{const a=s?Ou:Hb,u=Wd(s?er.Forwards:er.Backwards,n.getBody(),n.selection.getRng());return a(u)?gE(n,s,u.getNode(!s)):I.from(la(s,u)).filter(f=>a(f)&&ZS(u,f)).bind(f=>gE(n,s,f.getNode(!s)))})(n,s):((n,s)=>{const a=n.selection.getNode();return al(a)?gE(n,s,a):I.none()})(n,s),_E=n=>ji(n??"").getOr(0),o2=(n,s)=>{const a=n||(n=>"table"===Ft(n))(s)?"margin":"padding";return a+("rtl"===yn(s,"direction")?"-right":"-left")},Mo=n=>{const s=mH(n);return!n.mode.isReadOnly()&&(s.length>1||((n,s)=>hr(s,a=>{const c=o2(VT(n),a),u=bd(a,c).map(_E).getOr(0);return"false"!==n.dom.getContentEditable(a.dom)&&u>0}))(n,s))},pH=n=>cS(n)||Oh(n),mH=n=>nt(ot(n.selection.getSelectedBlocks()),s=>!pH(s)&&!(n=>je(n).exists(pH))(s)&&(n=>di(n,s=>Oa(s.dom)||Pn(s.dom)).exists(s=>Oa(s.dom)))(s)),gH=(n,s)=>{var a,c;const{dom:u}=n,f=$T(n),h=null!==(c=null===(a=/[a-z%]+$/i.exec(f))||void 0===a?void 0:a[0])&&void 0!==c?c:"px",g=_E(f),_=VT(n);ue(mH(n),b=>{((n,s,a,c,u,f)=>{const h=o2(a,j_fromDom(f)),g=_E(n.getStyle(f,h));if("outdent"===s){const _=Math.max(0,g-c);n.setStyle(f,h,_?_+u:"")}else n.setStyle(f,h,g+c+u)})(u,s,_,g,h,b.dom)})},_H=n=>gH(n,"outdent"),vH=n=>{if(n.selection.isCollapsed()&&Mo(n)){const s=n.dom,a=n.selection.getRng(),c=se.fromRangeStart(a),u=s.getParent(a.startContainer,s.isBlock);if(null!==u&&W1(j_fromDom(u),c,n.schema))return I.some(()=>_H(n))}return I.none()},r2=(n,s,a)=>nc([vH,Mi,zP,(c,u)=>hE(c,s,u),Ps,lf,Lo,n2,jP,mE],c=>c(n,a)).filter(c=>n.selection.isEditable()),Pq=(n,s)=>{n.addCommand("delete",()=>{((n,s)=>{r2(n,s,!1).fold(()=>{n.selection.isEditable()&&(Fu(n),w_(n))},oi)})(n,s)}),n.addCommand("forwardDelete",()=>{((n,s)=>{r2(n,s,!0).fold(()=>{n.selection.isEditable()&&(n=>{Xb(n,"ForwardDelete")})(n)},oi)})(n,s)})},s2=n=>void 0===n.touches||1!==n.touches.length?I.none():I.some(n.touches[0]),i2=(n,s)=>Ke(n,s.nodeName),Eq=(n,s)=>!!ye(s)||!!$e(s)&&!(i2(n.getBlockElements(),s)||js(s)||cl(n,s)||A0(s)),c2=(n,s)=>{if(ye(s)){if(0===s.data.length)return!0;if(/^\s+$/.test(s.data))return!s.nextSibling||i2(n,s.nextSibling)||A0(s.nextSibling)}return!1},bH=n=>n.dom.create(wr(n),Vd(n)),kq=n=>{const s=n.dom,a=n.selection,c=n.schema,u=c.getBlockElements(),f=a.getStart(),h=n.getBody();let g,_,b=!1;const S=wr(n);if(!f||!$e(f))return;const E=h.nodeName.toLowerCase();if(!c.isValidChild(E,S.toLowerCase())||((n,s,a)=>Pt(XI(j_fromDom(a),j_fromDom(s)),c=>i2(n,c.dom)))(u,h,f))return;const T=a.getRng(),{startContainer:N,startOffset:V,endContainer:F,endOffset:U}=T,W=Mu(n);let Z=h.firstChild;for(;Z;)if($e(Z)&&d3(c,Z),Eq(c,Z)){if(c2(u,Z)){_=Z,Z=Z.nextSibling,s.remove(_);continue}g||(g=bH(n),h.insertBefore(g,Z),b=!0),_=Z,Z=Z.nextSibling,g.appendChild(_)}else g=null,Z=Z.nextSibling;b&&W&&(T.setStart(N,V),T.setEnd(F,U),a.setRng(T),n.nodeChanged())},l2=(n,s,a)=>{const c=j_fromDom(bH(n)),u=vc();Yn(c,u),a(s,c);const f=document.createRange();return f.setStartBefore(u.dom),f.setEndBefore(u.dom),f},wH=n=>s=>-1!==(" "+s.attr("class")+" ").indexOf(n),Tq=(n,s,a)=>function(c){const u=arguments,f=u[u.length-2],h=f>0?s.charAt(f-1):"";if('"'===h)return c;if(">"===h){const g=s.lastIndexOf("<",f);if(-1!==g&&-1!==s.substring(g,f).indexOf('contenteditable="false"'))return c}return'<span class="'+a+'" data-mce-content="'+n.dom.encode(u[0])+'">'+n.dom.encode("string"==typeof u[1]?u[1]:u[0])+"</span>"},CH=(n,s)=>{s.hasAttribute("data-mce-caret")&&(Lg(s),n.selection.setRng(n.selection.getRng()),n.selection.scrollIntoView(s))},SH=(n,s)=>{const a=(n=>ol(j_fromDom(n.getBody()),"*[data-mce-caret]").map(s=>s.dom).getOrNull())(n);if(a){if("compositionstart"===s.type)return s.preventDefault(),s.stopPropagation(),void CH(n,a);Ay(a)&&(CH(n,a),n.undoManager.add())}},u2=Pn,PH=(n,s,a)=>{const c=bi(n.getBody()),u=Ve(KS,1===s?c.next:c.prev);if(a.collapsed){const f=n.dom.getParent(a.startContainer,"PRE");if(!f)return;if(!u(se.fromRangeStart(a))){const g=j_fromDom((n=>{const s=n.dom.create(wr(n));return s.innerHTML='<br data-mce-bogus="1">',s})(n));1===s?Ji(j_fromDom(f),g):Fr(j_fromDom(f),g),n.selection.select(g.dom,!0),n.selection.collapse()}}},EH=(n,s)=>((n,s)=>{const a=s?er.Forwards:er.Backwards,c=n.selection.getRng();return((n,s,a)=>jR(s,n,a,Dc,Au,u2))(a,n,c).orThunk(()=>(PH(n,a,c),I.none()))})(n,((n,s)=>{const a=s?n.getEnd(!0):n.getStart(!0);return bO(a)?!s:s})(n.selection,s)).exists(a=>(Tl(n,a),!0)),kH=(n,s)=>((n,s)=>{const a=s?1:-1,c=n.selection.getRng();return((n,s,a)=>HR(s,n,a,f=>Dc(f)||YI(f),f=>Au(f)||JI(f),u2))(a,n,c).orThunk(()=>(PH(n,a,c),I.none()))})(n,s).exists(a=>(Tl(n,a),!0)),DH=(n,s)=>zR(n,s,s?Au:Dc),bE=(n,s)=>WP(n,!s).map(a=>{const c=a.toRange(),u=n.selection.getRng();return s?c.setStart(u.startContainer,u.startOffset):c.setEnd(u.endContainer,u.endOffset),c}).exists(a=>(Tl(n,a),!0)),Jw=n=>zt(["figcaption"],Ft(n)),zp=(n,s)=>!!n.selection.isCollapsed()&&((n,s)=>{const a=j_fromDom(n.getBody()),c=se.fromRangeStart(n.selection.getRng());return((n,s,a)=>{const c=Ve(mt,s);return di(j_fromDom(n.container()),u=>a.isBlock(Ft(u)),c).filter(Jw)})(c,a,n.schema).exists(()=>{if(((n,s,a)=>s?$4(n.dom,a):nE(n.dom,a))(a,s,c)){const f=l2(n,a,s?Yn:ph);return n.selection.setRng(f),!0}return!1})})(n,s),d2=(n,s)=>((n,s)=>s?I.from(n.dom.getParent(n.selection.getNode(),"details")).map(a=>((n,s)=>{const a=n.selection.getRng(),c=se.fromRangeStart(a);return!(n.getBody().lastChild!==s||!$4(s,c)||(n.execCommand("InsertNewBlockAfter"),0))})(n,a)).getOr(!1):I.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(a=>I.from(n.dom.getParent(a,"details")).map(c=>((n,s,a)=>{const c=n.selection.getRng(),u=se.fromRangeStart(c);return!(n.getBody().firstChild!==s||!nE(a,u)||(n.execCommand("InsertNewBlockBefore"),0))})(n,c,a))).getOr(!1))(n,s),f2={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},SE=(n,s)=>s.keyCode===n.keyCode&&s.shiftKey===n.shiftKey&&s.altKey===n.altKey&&s.ctrlKey===n.ctrlKey&&s.metaKey===n.metaKey,rt=(n,...s)=>()=>n.apply(null,s),xf=(n,s)=>vn(((n,s)=>Uo((n=>Xe(n,s=>({...f2,...s})))(n),a=>SE(a,s)?[a]:[]))(n,s),a=>a.action()),PE=(n,s)=>nc(((n,s)=>Uo((n=>Xe(n,s=>({...f2,...s})))(n),a=>SE(a,s)?[a]:[]))(n,s),a=>a.action()),m2=(n,s)=>{const a=s?er.Forwards:er.Backwards,c=n.selection.getRng();return jR(n,a,c,Ou,Hb,al).exists(u=>(Tl(n,u),!0))},g2=(n,s)=>{const a=s?1:-1,c=n.selection.getRng();return HR(n,a,c,Ou,Hb,al).exists(u=>(Tl(n,u),!0))},_2=(n,s)=>zR(n,s,s?Hb:Ou),v2=vi_generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Z_={...v2,none:n=>v2.none(n)},Xw=(n,s,a)=>Uo(sr(n),c=>li(c,s)?a(c)?[c]:[]:Xw(c,s,a)),kE=(n,s)=>gr(n,"table",s),DE=(n,s,a,c,u=ro)=>{const f=1===c;if(!f&&a<=0)return Z_.first(n[0]);if(f&&a>=n.length-1)return Z_.last(n[n.length-1]);{const h=a+c,g=n[h];return u(g)?Z_.middle(s,g):DE(n,s,h,c,u)}},eC=(n,s)=>kE(n,s).bind(a=>{const c=(n=>((n,s)=>Xw(n,"th,td",ro))(n))(a);return Li(c,f=>mt(n,f)).map(f=>({index:f,all:c}))}),RH=["img","br"],FH=n=>(n=>(n=>lT.getOption(n))(n).filter(s=>0!==s.trim().length||s.indexOf(Jn)>-1).isSome())(n)||zt(RH,Ft(n))||(n=>md(n)&&"false"===wo(n,"contenteditable"))(n),S2=(n,s,a,c,u)=>{const f=Wt(j_fromDom(a),"td,th,caption").map(g=>g.dom),h=nt(((n,s)=>Uo(s,a=>{const c=((n,s)=>({left:n.left-s,top:n.top-s,right:n.right+-2,bottom:n.bottom+-2,width:n.width+s,height:n.height+s}))(mu(a.getBoundingClientRect()),-1);return[{x:c.left,y:n(c),cell:a},{x:c.right,y:n(c),cell:a}]}))(n,f),g=>s(g,u));return((n,s,a)=>$o(n,(c,u)=>c.fold(()=>I.some(u),f=>{const h=Math.sqrt(Math.abs(f.x-s)+Math.abs(f.y-a)),g=Math.sqrt(Math.abs(u.x-s)+Math.abs(u.y-a));return I.some(g<h?u:f)}),I.none()))(h,c,u).map(g=>g.cell)},$H=Ve(S2,n=>n.bottom,(n,s)=>n.y<s),P2=Ve(S2,n=>n.top,(n,s)=>n.y>s),D2=(n,s,a)=>{const c=n(s,a);return(n=>n.breakType===Ha.Wrap&&0===n.positions.length)(c)||!Nn(a.getNode())&&(n=>n.breakType===Ha.Br&&1===n.positions.length)(c)?!((n,s,a)=>a.breakAt.exists(c=>n(s,c).breakAt.isSome()))(n,s,c):c.breakAt.isNone()},tC=Ve(D2,q_),T2=Ve(D2,Hp),jH=(n,s,a,c)=>{const u=n.selection.getRng(),f=s?1:-1;return!(!mM()||!((n,s,a)=>{const c=se.fromRangeStart(s);return Pu(!n,a).exists(u=>u.isEqual(c))})(s,u,a)||(Wu(f,n,a,!s,!1).each(h=>{Tl(n,h)}),0))},zH=(n,s,a)=>{const c=((n,s)=>{const a=s.getNode(n);return Xr(a)?I.some(a):I.none()})(!!s,a),u=!1===s;c.fold(()=>Tl(n,a.toRange()),f=>Pu(u,n.getBody()).filter(h=>h.isEqual(a)).fold(()=>Tl(n,a.toRange()),h=>((n,s,a)=>{s.undoManager.transact(()=>{const c=n?Ji:Fr,u=l2(s,j_fromDom(a),c);Tl(s,u)})})(s,n,f)))},Kq=(n,s,a,c)=>{const u=n.selection.getRng(),f=se.fromRangeStart(u),h=n.getBody();if(!s&&tC(c,f)){const g=((n,s,a)=>((n,s)=>go(s.getClientRects()).bind(a=>$H(n,a.left,a.top)).bind(a=>lr((n=>ra(n).map(s=>q_(n,s).positions.concat(s)).getOr([]))(a),s)))(s,a).orThunk(()=>go(a.getClientRects()).bind(c=>qw(LR(n,se.before(s)),c.left))).getOr(se.before(s)))(h,a,f);return zH(n,s,g),!0}if(s&&T2(c,f)){const g=((n,s,a)=>((n,s)=>cs(s.getClientRects()).bind(a=>P2(n,a.left,a.top)).bind(a=>lr((n=>Wr(n).map(s=>[s].concat(Hp(n,s).positions)).getOr([]))(a),s)))(s,a).orThunk(()=>go(a.getClientRects()).bind(c=>qw(Zr(n,se.after(s)),c.left))).getOr(se.after(s)))(h,a,f);return zH(n,s,g),!0}return!1},M2=(n,s,a)=>I.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(c=>I.from(n.dom.getParent(c,"table")).map(u=>a(n,s,u,c))).getOr(!1),WH=(n,s)=>M2(n,s,jH),I2=(n,s)=>M2(n,s,Kq),qH=(n,s,a)=>a.fold(I.none,I.none,(c,u)=>(n=>sg(n,FH))(u).map(f=>(n=>{const s=up.exact(n,0,n,0);return k$(s)})(f)),c=>(n.execCommand("mceTableInsertRowAfter"),GH(n,s,c))),GH=(n,s,a)=>qH(n,s,((n,s,a)=>eC(n,void 0).fold(()=>Z_.none(n),u=>DE(u.all,n,u.index,1,s)))(a,nn)),Yq=(n,s,a)=>qH(n,s,((n,s,a)=>eC(n,void 0).fold(()=>Z_.none(),u=>DE(u.all,n,u.index,-1,s)))(a,nn)),Pf=(n,s)=>{const a=["table","li","dl"],c=j_fromDom(n.getBody()),u=g=>{const _=Ft(g);return mt(g,c)||zt(a,_)},f=n.selection.getRng();return((n,s)=>((n,s,a=mn)=>a(s)?I.none():zt(n,Ft(s))?I.some(s):ds(s,n.join(","),u=>li(u,"table")||a(u)))(["td","th"],n,s))(j_fromDom(s?f.endContainer:f.startContainer),u).map(g=>(kE(g,u).each(S=>{n.model.table.clearSelectedCells(S.dom)}),n.selection.collapse(!s),(s?GH:Yq)(n,u,g).each(S=>{n.selection.setRng(S)}),!0)).getOr(!1)},fa=(n,s)=>({container:n,offset:s}),IE=pn.DOM,OE=n=>s=>n===s?-1:0,A2=(n,s,a)=>{if(ye(n)&&s>=0)return I.some(fa(n,s));{const c=dl(IE);return I.from(c.backwards(n,s,OE(n),a)).map(u=>fa(u.container,u.container.data.length))}},N2=(n,s,a)=>{if(!ye(n))return I.none();if(s>=0&&s<=n.data.length)return I.some(fa(n,s));{const u=dl(IE);return I.from(u.backwards(n,s,OE(n),a)).bind(f=>N2(f.container,s+f.container.data.length,a))}},ZH=(n,s,a)=>{if(!ye(n))return I.none();const c=n.data;if(s<=c.length)return I.some(fa(n,s));{const u=dl(IE);return I.from(u.forwards(n,s,OE(n),a)).bind(f=>ZH(f.container,s-c.length,a))}},AE=(n,s,a,c,u)=>{const f=dl(n,(n=>s=>n.isBlock(s)||zt(["BR","IMG","HR","INPUT"],s.nodeName)||"false"===n.getContentEditable(s))(n));return I.from(f.backwards(s,a,c,u))},R2=n=>""!==n&&-1!==" \xa0\f\n\r\t\v".indexOf(n),QH=(n,s)=>n.substring(s.length),NE=(n,s,a,c=!1)=>{if(!(n=>n.collapsed&&ye(n.startContainer))(s))return I.none();const u={text:"",offset:0},h=n.getParent(s.startContainer,n.isBlock)||n.getRoot();return AE(n,s.startContainer,s.startOffset,(g,_,b)=>(u.text=b+u.text,u.offset+=_,((n,s,a,c=!1)=>{let u;const f=a.charAt(0);for(u=s-1;u>=0;u--){const h=n.charAt(u);if(!c&&R2(h))return I.none();if(f===h&&Yo(n,a,u,s))break}return I.some(u)})(u.text,u.offset,a,c).getOr(_)),h).bind(g=>{const _=s.cloneRange();if(_.setStart(g.container,g.offset),_.setEnd(s.endContainer,s.endOffset),_.collapsed)return I.none();const b=(n=>Bs(n.toString().replace(/\u00A0/g," ")))(_);return 0!==b.lastIndexOf(a)?I.none():I.some({text:QH(b,a),range:_,trigger:a})})},nC=n=>{if((n=>3===n.nodeType)(n))return fa(n,n.data.length);{const s=n.childNodes;return s.length>0?nC(s[s.length-1]):fa(n,s.length)}},RE=(n,s)=>{const a=n.childNodes;return a.length>0&&s<a.length?RE(a[s],0):a.length>0&&(n=>1===n.nodeType)(n)&&a.length===s?nC(a[a.length-1]):fa(n,s)},B2=(n,s,a,c={})=>{var u;const f=s(),g=null!==(u=n.selection.getRng().startContainer.nodeValue)&&void 0!==u?u:"",_=nt(f.lookupByTrigger(a.trigger),S=>a.text.length>=S.minChars&&S.matches.getOrThunk(()=>(n=>s=>{const a=RE(s.startContainer,s.startOffset);return!((n,s)=>{var a;const c=null!==(a=n.getParent(s.container,n.isBlock))&&void 0!==a?a:n.getRoot();return AE(n,s.container,s.offset,(u,f)=>0===f?-1:f,c).filter(u=>{const f=u.container.data.charAt(u.offset-1);return!R2(f)}).isSome()})(n,a)})(n.dom))(a.range,g,a.text));if(0===_.length)return I.none();const b=Promise.all(Xe(_,S=>S.fetch(a.text,S.maxResults,c).then(T=>({matchText:a.text,items:T,columns:S.columns,onAction:S.onAction,highlightOn:S.highlightOn}))));return I.some({lookupData:b,context:a})};var ha=function(n){return n[n.Error=0]="Error",n[n.Value=1]="Value",n}(ha||{});const Y_=(n,s,a)=>n.stype===ha.Error?s(n.serror):a(n.svalue),to_svalue=n=>({stype:ha.Value,svalue:n}),to_serror=n=>({stype:ha.Error,serror:n}),to_fold=Y_,Ku=n=>ko(n)&&zn(n).length>100?" removed due to size":JSON.stringify(n,null,2),pa=(n,s)=>to_serror([{path:n,getErrorInfo:s}]),Q_=(n,s)=>({extract:(u,f)=>Nt(f,n).fold(()=>((n,s)=>pa(n,()=>'Choice schema did not contain choice key: "'+s+'"'))(u,n),g=>((n,s,a,c)=>Nt(a,c).fold(()=>((n,s,a)=>pa(n,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Ku(s)))(n,a,c),f=>f.extract(n.concat(["branch: "+c]),s)))(u,f,s,g)),toString:()=>"chooseOn("+n+"). Possible values: "+zn(s)}),Wp=n=>(...s)=>{if(0===s.length)throw new Error("Can't merge zero objects");const a={};for(let c=0;c<s.length;c++){const u=s[c];for(const f in u)Ke(u,f)&&(a[f]=n(a[f],u[f]))}return a},sC=Wp((n,s)=>Gl(n)&&Gl(s)?sC(n,s):s),qa=(Wp((n,s)=>s),n=>(n=>({tag:"defaultedThunk",process:n}))(Ae(n))),H2_consolidateArr=n=>{const s=(n=>{const s=[],a=[];return ue(n,c=>{Y_(c,u=>a.push(u),u=>s.push(u))}),{values:s,errors:a}})(n);return s.errors.length>0?(n=>As(to_serror,Bi)(n))(s.errors):to_svalue(s.values)},jE=(n,s,a)=>{switch(n.tag){case"field":return s(n.key,n.newKey,n.presence,n.prop);case"custom":return a(n.newKey,n.instantiator)}},HE=n=>({extract:(c,u)=>((n,s)=>n.stype===ha.Error?s(n.serror):n)(n(u),f=>((n,s)=>pa(n,Ae(s)))(c,f)),toString:Ae("val")}),W2=HE(to_svalue),X_=(n,s,a,c)=>c(Nt(n,s).getOrThunk(()=>a(n))),ev=(n,s,a,c,u)=>{const f=g=>u.extract(s.concat([c]),g),h=g=>g.fold(()=>to_svalue(I.none()),_=>((n,s)=>n.stype===ha.Value?{stype:ha.Value,svalue:s(n.svalue)}:n)(u.extract(s.concat([c]),_),I.some));switch(n.tag){case"required":return((n,s,a,c)=>Nt(s,a).fold(()=>((n,s,a)=>pa(n,()=>'Could not find valid *required* value for "'+s+'" in '+Ku(a)))(n,a,s),c))(s,a,c,f);case"defaultedThunk":return X_(a,c,n.process,f);case"option":return((n,s,a)=>a(Nt(n,s)))(a,c,h);case"defaultedOptionThunk":return((n,s,a,c)=>c(Nt(n,s).map(f=>!0===f?a(n):f)))(a,c,n.process,h);case"mergeWithThunk":return X_(a,c,Ae({}),g=>{const _=sC(n.process(a),g);return f(_)})}},Ml=n=>({extract:(c,u)=>((n,s,a)=>{const c={},u=[];for(const f of a)jE(f,(h,g,_,b)=>{const S=ev(_,n,s,h,b);to_fold(S,E=>{u.push(...E)},E=>{c[g]=E})},(h,g)=>{c[h]=g(s)});return u.length>0?to_serror(u):to_svalue(c)})(c,u,n),toString:()=>"obj{\n"+Xe(n,u=>jE(u,(f,h,g,_)=>f+" -> "+_.toString(),(f,h)=>"state("+f+")")).join("\n")+"}"}),G2=n=>({extract:(c,u)=>{const f=Xe(u,(h,g)=>n.extract(c.concat(["["+g+"]"]),h));return H2_consolidateArr(f)},toString:()=>"array("+n.toString()+")"}),uz=(n,s,a)=>(n=>Y_(n,zr.error,zr.value))(((n,s,a)=>((n,s)=>n.stype===ha.Error?{stype:ha.Error,serror:s(n.serror)}:n)(s.extract([n],a),u=>({input:a,errors:u})))(n,s,a)),Zp=(n,s)=>Q_(n,Da(s,Ml)),K2=Ae(W2),Df=(n,s)=>HE(a=>{const c=typeof a;return n(a)?to_svalue(a):to_serror(`Expected type: ${s} but got: ${c}`)}),dz=Df(ni,"number"),Yp=Df(Ye,"string"),aC=Df(ti,"boolean"),cC=Df(Zt,"function"),Jp=(n,s,a,c)=>({tag:"field",key:n,newKey:s,presence:a,prop:c}),Z2=(n,s)=>({tag:"custom",newKey:n,instantiator:s}),Y2=(n,s)=>Jp(n,n,{tag:"required",process:{}},s),lC=n=>Y2(n,Yp),J2=n=>Y2(n,cC),WE=(n,s)=>Jp(n,n,{tag:"option",process:{}},s),uC=n=>WE(n,Yp),Qp=(n,s,a)=>Jp(n,n,qa(s),a),qE=(n,s)=>Qp(n,s,dz),X2=(n,s,a)=>Qp(n,s,(n=>(n=>HE(s=>n(s).fold(to_serror,to_svalue)))(s=>zt(n,s)?zr.value(s):zr.error(`Unsupported value: "${s}", choose one of "${n.join(", ")}".`)))(a)),Il=(n,s)=>Qp(n,s,aC),GE=(n,s)=>Qp(n,s,cC),tF=lC("type"),dC=J2("fetch"),Tf=J2("onAction"),KE=GE("onSetup",()=>ut),nF=uC("text"),oF=uC("icon"),gz=uC("tooltip"),fC=uC("label"),_z=Il("active",!1),vz=Il("enabled",!0),rF=Il("primary",!1),Ol=n=>Qp("type",n,Yp),yz=Ml([tF,lC("trigger"),qE("minChars",1),((n,s)=>Jp(n,n,qa(1),K2()))("columns"),qE("maxResults",10),WE("matches",cC),dC,Tf,(a=Yp,Qp("highlightOn",[],G2(a)))]),YE=[vz,gz,oF,nF,KE],JE=[_z].concat(YE),iF=[GE("predicate",mn),X2("scope","node",["node","editor"]),X2("position","selection",["node","selection","line"])],tv=YE.concat([Ol("contextformbutton"),rF,Tf,Z2("original",pe)]),Ac=JE.concat([Ol("contextformbutton"),rF,Tf,Z2("original",pe)]),hC=YE.concat([Ol("contextformbutton")]),Ga=JE.concat([Ol("contextformtogglebutton")]),Xp=Zp("type",{contextformbutton:tv,contextformtogglebutton:Ac});var a;Ml([Ol("contextform"),GE("initValue",Ae("")),fC,((n,s)=>Jp(n,n,{tag:"required",process:{}},G2(s)))("commands",Xp),WE("launch",Zp("type",{contextformbutton:hC,contextformtogglebutton:Ga}))].concat(iF));const em=n=>{const s=n.ui.registry.getAll().popups,a=Da(s,h=>(n=>uz("Autocompleter",yz,n))(h).fold(g=>{throw new Error((n=>"Errors: \n"+(n=>{const s=n.length>10?n.slice(0,10).concat([{path:[],getErrorInfo:Ae("... (only showing first ten failures)")}]):n;return Xe(s,a=>"Failed path: ("+a.path.join(" > ")+")\n"+a.getErrorInfo())})(n.errors).join("\n")+"\n\nInput object: "+Ku(n.input))(g))},pe)),c=Mt(_o(a,h=>h.trigger)),u=Do(a);return{dataset:a,triggers:c,lookupByTrigger:h=>nt(u,g=>g.trigger===h)}},aF=n=>{const s=mi(),a=No(!1),c=s.isSet,u=()=>{c()&&((n=>{n.dispatch("AutocompleterEnd")})(n),a.set(!1),s.clear())},h=$i(()=>em(n)),_=E=>{(E=>s.get().map(T=>NE(n.dom,n.selection.getRng(),T.trigger,!0).bind(N=>B2(n,h,N,E))).getOrThunk(()=>((n,s)=>{const a=s(),c=n.selection.getRng();return((n,s,a)=>nc(a.triggers,c=>NE(n,s,c)))(n.dom,c,a).bind(u=>B2(n,s,u))})(n,h)))(E).fold(u,T=>{(E=>{c()||s.set({trigger:E.trigger,matchLength:E.text.length})})(T.context),T.lookupData.then(N=>{s.get().map(V=>{const F=T.context;V.trigger===F.trigger&&(F.text.length-V.matchLength>=10?u():(s.set({...V,matchLength:F.text.length}),a.get()?(y1(n,{range:F.range}),((n,s)=>{n.dispatch("AutocompleterUpdate",s)})(n,{lookupData:N})):(a.set(!0),y1(n,{range:F.range}),((n,s)=>{n.dispatch("AutocompleterStart",s)})(n,{lookupData:N}))))})})})},S=()=>s.get().bind(({trigger:E})=>{const T=n.selection.getRng();return NE(n.dom,T,E,a.get()).filter(({range:N})=>((E,T)=>{const N=E.compareBoundaryPoints(window.Range.START_TO_START,T),V=E.compareBoundaryPoints(window.Range.END_TO_END,T);return N>=0&&V<=0})(T,N)).map(({range:N})=>N)});n.addCommand("mceAutocompleterReload",(E,T)=>{const N=ko(T)?T.fetchOptions:{};_(N)}),n.addCommand("mceAutocompleterClose",u),n.addCommand("mceAutocompleterRefreshActiveRange",()=>{S().each(E=>{y1(n,{range:E})})}),n.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>S().isSome()),((n,s)=>{const a=kg(s.load,50);n.on("input",c=>{"insertCompositionText"===c.inputType&&!n.composing||a.throttle()}),n.on("keydown",c=>{const u=c.which;8===u?a.throttle():27===u?(a.cancel(),s.cancelIfNecessary()):(38===u||40===u)&&a.cancel()},!0),n.on("remove",a.cancel)})(n,{cancelIfNecessary:u,load:_})},bz=Rs().browser.isSafari(),cF=n=>ta(j_fromDom(n)),lF=(n,s)=>{var a;return 0===n.startOffset&&n.endOffset===(null===(a=s.textContent)||void 0===a?void 0:a.length)},mC=(n,s)=>I.from(n.getParent(s.container(),"details")),uF=(n,s)=>mC(n,s).isSome(),Pz=(n,s)=>{const a=s.getNode();Vo(a)||n.selection.setCursorLocation(a,s.offset())},fF=(n,s,a)=>{const c=n.dom.getParent(s.container(),"details");if(c&&!c.open){const u=n.dom.select("summary",c)[0];u&&(a?Wr(u):ra(u)).each(h=>Pz(n,h))}else Pz(n,s)},ek=(n,s,a)=>{const{dom:c,selection:u}=n,f=n.getBody();if("character"===a){const h=se.fromRangeStart(u.getRng()),g=c.getParent(h.container(),c.isBlock),_=mC(c,h),b=g&&c.isEmpty(g),S=po(g?.previousSibling),E=po(g?.nextSibling);return!!(b&&(s?E:S)&&Cc(!s,f,h).exists(V=>uF(c,V)&&!To(_,mC(c,V))))||Cc(s,f,h).fold(mn,T=>{const N=mC(c,T);if(uF(c,T)&&!To(_,N)){if(s||fF(n,T,!1),g&&b){if(s&&S)return!0;if(!s&&E)return!0;fF(n,T,s),n.dom.remove(g)}return!0}return!1})}return!1},tk=(n,s,a,c)=>{const f=n.selection.getRng(),h=se.fromRangeStart(f),g=n.getBody();return"selection"===c?((n,s)=>{const u=s.startSummary.exists(_=>_.contains(n.startContainer)),f=s.startSummary.exists(_=>_.contains(n.endContainer)),h=s.startDetails.forall(_=>s.endDetails.forall(b=>_!==b));return(u||f)&&!(u&&f)||h})(f,s):a?((n,s)=>s.startSummary.exists(a=>((n,s)=>ra(s).exists(a=>Nn(a.getNode())&&Us(s,a).exists(c=>c.isEqual(n))||a.isEqual(n)))(n,a)))(h,s)||((n,s,a)=>a.startDetails.exists(c=>vs(n,s).forall(u=>!c.contains(u.container()))))(g,h,s):((n,s)=>s.startSummary.exists(a=>((n,s)=>Wr(s).exists(a=>a.isEqual(n)))(n,a)))(h,s)||((n,s)=>s.startDetails.exists(a=>Us(a,n).forall(c=>s.startSummary.exists(u=>!u.contains(n.container())&&u.contains(c.container())))))(h,s)},ma=(n,s,a)=>((n,s,a)=>((n,s)=>{const a=I.from(n.getParent(s.startContainer,"details")),c=I.from(n.getParent(s.endContainer,"details"));if(a.isSome()||c.isSome()){const u=a.bind(f=>I.from(n.select("summary",f)[0]));return I.some({startSummary:u,startDetails:a,endDetails:c})}return I.none()})(n.dom,n.selection.getRng()).fold(()=>ek(n,s,a),c=>tk(n,c,s,a)||ek(n,s,a)))(n,s,a)||bz&&((n,s,a)=>{const c=n.selection,u=c.getNode(),f=c.getRng(),h=se.fromRangeStart(f);return!!p7(u)&&("selection"===a&&lF(f,u)||ox(s,h,u)?cF(u):n.undoManager.transact(()=>{const g=c.getSel();let{anchorNode:_,anchorOffset:b,focusNode:S,focusOffset:E}=g??{};const T=()=>{Oe(_)&&Oe(b)&&Oe(S)&&Oe(E)&&g?.setBaseAndExtent(_,b,S,E)},V=(U,W)=>{ue(U.childNodes,Z=>{ep(Z)&&W.appendChild(Z)})},F=n.dom.create("span",{"data-mce-bogus":"1"});V(u,F),u.appendChild(F),T(),("word"===a||"line"===a)&&g?.modify("extend",s?"right":"left",a),!c.isCollapsed()&&lF(c.getRng(),F)?cF(u):(n.execCommand(s?"ForwardDelete":"Delete"),_=g?.anchorNode,b=g?.anchorOffset,S=g?.focusNode,E=g?.focusOffset,V(F,u),T()),n.dom.remove(F)}),!0)})(n,s,a)?I.some(ut):I.none(),ok=n=>(s,a,c={})=>{const u=s.getBody(),f={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:u,currentTarget:u,eventPhase:Event.AT_TARGET,originalTarget:u,explicitOriginalTarget:u,isTrusted:!1,srcElement:u,cancelable:!1,preventDefault:ut,inputType:a},h=oT(new InputEvent(n));return s.dispatch(n,{...h,...f,...c})},tm=ok("input"),gC=ok("beforeinput"),$n=Rs(),_C=$n.os,vC=_C.isMacOS()||_C.isiOS(),rk=$n.browser.isFirefox(),Gs=(n,s)=>{const a=n.dom,c=n.schema.getMoveCaretBeforeOnEnterElements();if(!s)return;if(/^(LI|DT|DD)$/.test(s.nodeName)){const f=(n=>{for(;n;){if($e(n)||ye(n)&&n.data&&/[\r\n\s]/.test(n.data))return n;n=n.nextSibling}return null})(s.firstChild);f&&/^(UL|OL|DL)$/.test(f.nodeName)&&s.insertBefore(a.doc.createTextNode(Jn),s.firstChild)}const u=a.createRng();if(s.normalize(),s.hasChildNodes()){const f=new io(s,s);let g,h=s;for(;g=f.current();){if(ye(g)){u.setStart(g,0),u.setEnd(g,0);break}if(c[g.nodeName.toLowerCase()]){u.setStartBefore(g),u.setEndBefore(g);break}h=g,g=f.next()}g||(u.setStart(h,0),u.setEnd(h,0))}else Nn(s)?s.nextSibling&&a.isBlock(s.nextSibling)?(u.setStartBefore(s),u.setEndBefore(s)):(u.setStartAfter(s),u.setEndAfter(s)):(u.setStart(s,0),u.setEnd(s,0));n.selection.setRng(u),gp(n,u)},ov=(n,s)=>{const a=n.getRoot();let c,u=s;for(;u!==a&&u&&"false"!==n.getContentEditable(u);){if("true"===n.getContentEditable(u)){c=u;break}u=u.parentNode}return u!==a?c:a},nm=n=>I.from(n.dom.getParent(n.selection.getStart(!0),n.dom.isBlock)),Mf=n=>{n.innerHTML='<br data-mce-bogus="1">'},rv=(n,s)=>{wr(n).toLowerCase()===s.tagName.toLowerCase()&&((n,s,a)=>{const c=n.dom;I.from(a.style).map(c.parseStyle).each(_=>{const S={...cg(j_fromDom(s)),..._};c.setStyles(s,S)});const u=I.from(a.class).map(_=>_.split(/\s+/)),f=I.from(s.className).map(_=>nt(_.split(/\s+/),b=>""!==b));rr(u,f,(_,b)=>{const S=nt(b,T=>!zt(_,T)),E=[..._,...S];c.setAttrib(s,"class",E.join(" "))});const h=["style","class"],g=Ns(a,(_,b)=>!zt(h,b));c.setAttribs(s,g)})(n,s,Vd(n))},yC=(n,s,a,c,u=!0,f,h)=>{const g=n.dom,_=n.schema,b=wr(n),S=a?a.nodeName.toUpperCase():"";let E=s;const T=_.getTextInlineElements();let N;N=f||"TABLE"===S||"HR"===S?g.create(f||b,h||{}):a.cloneNode(!1);let V=N;if(u){do{if(T[E.nodeName]){if(sa(E)||js(E))continue;const F=E.cloneNode(!1);g.setAttrib(F,"id",""),N.hasChildNodes()?(F.appendChild(N.firstChild),N.appendChild(F)):(V=F,N.appendChild(F))}}while((E=E.parentNode)&&E!==c)}else g.setAttrib(N,"style",null),g.setAttrib(N,"class",null);return rv(n,N),Mf(V),N},Iz=(n,s)=>{const a=n?.parentNode;return Oe(a)&&a.nodeName===s},Oz=n=>Oe(n)&&/^(OL|UL|LI)$/.test(n.nodeName),bF=n=>Oe(n)&&/^(LI|DT|DD)$/.test(n.nodeName),bC=n=>{const s=n.parentNode;return bF(s)?s:n},ak=(n,s,a)=>{let c=n[a?"firstChild":"lastChild"];for(;c&&!$e(c);)c=c[a?"nextSibling":"previousSibling"];return c===s},wF=n=>$o(_o(cg(j_fromDom(n)),(s,a)=>`${a}: ${s};`),(s,a)=>s+a,""),Nz=(n,s)=>s&&"A"===s.nodeName&&n.isEmpty(s),If=(n,s)=>n.nodeName===s||n.previousSibling&&n.previousSibling.nodeName===s,CF=(n,s)=>Oe(s)&&n.isBlock(s)&&!/^(TD|TH|CAPTION|FORM)$/.test(s.nodeName)&&!/^(fixed|absolute)/i.test(s.style.position)&&n.isEditable(s.parentNode)&&"false"!==n.getContentEditable(s),lk=(n,s,a)=>ye(s)?n?1===a&&s.data.charAt(a-1)===zo?0:a:a===s.data.length-1&&s.data.charAt(a)===zo?s.data.length:a:a,xF={insert:(n,s)=>{let a,c,u,f,h=!1;const g=n.dom,b=n.schema.getNonEmptyElements(),S=n.selection.getRng(),E=wr(n),T=j_fromDom(S.startContainer),N=su(T,S.startOffset),V=N.exists(ae=>md(ae)&&!nn(ae)),F=S.collapsed&&V,U=(ae,Ie)=>yC(n,a,we,he,pV(n),ae,Ie),W=ae=>{const Ie=lk(ae,a,c);if(ye(a)&&(ae?Ie>0:Ie<a.data.length))return!1;if((a.parentNode===we||a===we)&&h&&!ae||ae&&$e(a)&&a===we.firstChild)return!0;if(If(a,"TABLE")||If(a,"HR"))return h&&!ae||!h&&ae;const qe=new io(a,we);let it;for(ye(a)&&(ae&&0===Ie?qe.prev():!ae&&Ie===a.data.length&&qe.next());it=qe.current();){if($e(it)){if(!it.getAttribute("data-mce-bogus")){const bt=it.nodeName.toLowerCase();if(b[bt]&&"br"!==bt)return!1}}else if(ye(it)&&!fs(it.data))return!1;ae?qe.prev():qe.next()}return!0},Z=()=>{let ae;return ae=/^(H[1-6]|PRE|FIGURE)$/.test(u)&&"HGROUP"!==ke?U(E):U(),((n,s)=>{const a=mV(n);return!mo(s)&&(Ye(a)?zt(de.explode(a),s.nodeName.toLowerCase()):a)})(n,f)&&CF(g,f)&&g.isEmpty(we,void 0,{includeZwsp:!0})?ae=g.split(f,we):g.insertAfter(ae,we),Gs(n,ae),ae};Mb(g,S).each(ae=>{S.setStart(ae.startContainer,ae.startOffset),S.setEnd(ae.endContainer,ae.endOffset)}),a=S.startContainer,c=S.startOffset;const K=!(!s||!s.shiftKey),J=!(!s||!s.ctrlKey);$e(a)&&a.hasChildNodes()&&!F&&(h=c>a.childNodes.length-1,a=a.childNodes[Math.min(c,a.childNodes.length-1)]||a,c=h&&ye(a)?a.data.length:0);const he=ov(g,a);if(!he||((n,s)=>{const a=n.dom.getParent(s,"ol,ul,dl");return null!==a&&"false"===n.dom.getContentEditableParent(a)})(n,a))return;K||(a=((n,s,a,c,u)=>{var f,h;const g=n.dom,_=null!==(f=ov(g,c))&&void 0!==f?f:g.getRoot();let b=g.getParent(c,g.isBlock);if(!b||!CF(g,b)){if(b=b||_,!b.hasChildNodes()){const N=g.create(s);return rv(n,N),b.appendChild(N),a.setStart(N,0),a.setEnd(N,0),N}let E,S=c;for(;S&&S.parentNode!==b;)S=S.parentNode;for(;S&&!g.isBlock(S);)E=S,S=S.previousSibling;const T=null===(h=E?.parentElement)||void 0===h?void 0:h.nodeName;if(E&&T&&n.schema.isValidChild(T,s.toLowerCase())){const N=E.parentNode,V=g.create(s);for(rv(n,V),N.insertBefore(V,E),S=E;S&&!g.isBlock(S);){const F=S.nextSibling;V.appendChild(S),S=F}a.setStart(c,u),a.setEnd(c,u)}}return c})(n,E,S,a,c));let we=g.getParent(a,g.isBlock)||g.getRoot();f=Oe(we?.parentNode)?g.getParent(we.parentNode,g.isBlock):null,u=we?we.nodeName.toUpperCase():"";const ke=f?f.nodeName.toUpperCase():"";if("LI"!==ke||J||(we=f,f=f.parentNode,u=ke),$e(f)&&((n,s,a)=>!s&&a.nodeName.toLowerCase()===wr(n)&&n.dom.isEmpty(a)&&((n,s,a)=>{let c=s;for(;c&&c!==n&&po(c.nextSibling);){const u=c.parentElement;if(!u||!a(u))return ND(u);c=u}return!1})(n.getBody(),a,c=>Ke(n.schema.getTextBlockElements(),c.nodeName.toLowerCase())))(n,K,we))return((n,s,a)=>{var c,u,f;const h=s(wr(n)),g=((n,s)=>n.dom.getParent(s,ND))(n,a);g&&(n.dom.insertAfter(h,g),Gs(n,h),(null!==(f=null===(u=null===(c=a.parentElement)||void 0===c?void 0:c.childNodes)||void 0===u?void 0:u.length)&&void 0!==f?f:0)>1&&n.dom.remove(a))})(n,U,we);if(/^(LI|DT|DD)$/.test(u)&&$e(f)&&g.isEmpty(we))return void((n,s,a,c,u)=>{const f=n.dom,h=n.selection.getRng(),g=a.parentNode;if(a===n.getBody()||!g)return;(n=>Oz(n)&&Oz(n.parentNode))(a)&&(u="LI");const _=bF(c)?wF(c):void 0;let b=bF(c)&&_?s(u,{style:wF(c)}):s(u);if(ak(a,c,!0)&&ak(a,c,!1))if(Iz(a,"LI")){const S=bC(a);f.insertAfter(b,S),(n=>{var s;return(null===(s=n.parentNode)||void 0===s?void 0:s.firstChild)===n})(a)?f.remove(S):f.remove(a)}else f.replace(b,a);else if(ak(a,c,!0))Iz(a,"LI")?(f.insertAfter(b,bC(a)),b.appendChild(f.doc.createTextNode(" ")),b.appendChild(a)):g.insertBefore(b,a),f.remove(c);else if(ak(a,c,!1))f.insertAfter(b,bC(a)),f.remove(c);else{a=bC(a);const S=h.cloneRange();S.setStartAfter(c),S.setEndAfter(a);const E=S.extractContents();if("LI"===u&&((n,s)=>n.firstChild&&"LI"===n.firstChild.nodeName)(E)){const T=nt(Xe(b.children,j_fromDom),Kl(pr("br")));b=E.firstChild,f.insertAfter(E,a),ue(T,N=>ph(j_fromDom(b),N)),_&&b.setAttribute("style",_)}else f.insertAfter(E,a),f.insertAfter(b,a);f.remove(c)}Gs(n,b)})(n,U,f,we,E);if(!(F||we!==n.getBody()&&CF(g,we)))return;const ge=we.parentNode;let re;if(F)re=U(E),N.fold(()=>{Yn(T,j_fromDom(re))},ae=>{Fr(ae,j_fromDom(re))}),n.selection.setCursorLocation(re,0);else if(Nh(we))re=Lg(we),g.isEmpty(we)&&Mf(we),rv(n,re),Gs(n,re);else if(W(!1))re=Z();else if(W(!0)&&ge){re=ge.insertBefore(U(),we);const ae=(n=>n.dom.hasChildNodes())(j_fromDom(S.startContainer))&&S.collapsed;Gs(n,If(we,"HR")||ae?re:we)}else{const ae=(n=>{const s=n.cloneRange();return s.setStart(n.startContainer,lk(!0,n.startContainer,n.startOffset)),s.setEnd(n.endContainer,lk(!1,n.endContainer,n.endOffset)),s})(S).cloneRange();ae.setEndAfter(we);const Ie=ae.extractContents();(n=>{ue(xd(j_fromDom(n),Nr),s=>{const a=s.dom;a.nodeValue=Bs(a.data)})})(Ie),(n=>{let s=n;do{ye(s)&&(s.data=s.data.replace(/^[\r\n]+/,"")),s=s.firstChild}while(s)})(Ie),re=Ie.firstChild,g.insertAfter(Ie,we),((n,s,a)=>{var c;const u=[];if(!a)return;let f=a;for(;f=f.firstChild;){if(n.isBlock(f))return;$e(f)&&!s[f.nodeName.toLowerCase()]&&u.push(f)}let h=u.length;for(;h--;)f=u[h],(!f.hasChildNodes()||f.firstChild===f.lastChild&&""===(null===(c=f.firstChild)||void 0===c?void 0:c.nodeValue)||Nz(n,f))&&n.remove(f)})(g,b,re),((n,s)=>{s.normalize();const a=s.lastChild;(!a||$e(a)&&/^(left|right)$/gi.test(n.getStyle(a,"float",!0)))&&n.add(s,"br")})(g,we),g.isEmpty(we)&&Mf(we),re.normalize(),g.isEmpty(re)?(g.remove(re),Z()):(rv(n,re),Gs(n,re))}g.setAttrib(re,"id",""),n.dispatch("NewBlock",{newBlock:re})},fakeEventName:"insertParagraph"},rm=(n,s,a)=>{const c=n.dom.createRng();a?(c.setStartBefore(s),c.setEndBefore(s)):(c.setStartAfter(s),c.setEndAfter(s)),n.selection.setRng(c),gp(n,c)},Vz=(n,s)=>{const a=j_fromTag("br");Fr(j_fromDom(s),a),n.undoManager.add()},$z=(n,s)=>{jz(n.getBody(),s)||Ji(j_fromDom(s),j_fromTag("br"));const a=j_fromTag("br");Ji(j_fromDom(s),a),rm(n,a.dom,!1),n.undoManager.add()},jz=(n,s)=>!!(n=>Nn(n.getNode()))(se.after(s))||vs(n,se.after(s)).map(a=>Nn(a.getNode())).getOr(!1),PF=n=>n&&"A"===n.nodeName&&"href"in n,rG=n=>n.fold(mn,PF,PF,mn),EF=(n,s)=>{s.fold(ut,Ve(Vz,n),Ve($z,n),ut)},kF={insert:(n,s)=>{const a=(n=>{const s=Ve(af,n),a=se.fromRangeStart(n.selection.getRng());return Oc(s,n.getBody(),a).filter(rG)})(n);a.isSome()?a.each(Ve(EF,n)):((n,s)=>{const c=n.dom,u=n.selection.getRng();let f,h=!1;Mb(c,u).each(N=>{u.setStart(N.startContainer,N.startOffset),u.setEnd(N.endContainer,N.endOffset)});let g=u.startOffset,_=u.startContainer;if($e(_)&&_.hasChildNodes()){const N=g>_.childNodes.length-1;_=_.childNodes[Math.min(g,_.childNodes.length-1)]||_,g=N&&ye(_)?_.data.length:0}let b=c.getParent(_,c.isBlock);const S=b&&b.parentNode?c.getParent(b.parentNode,c.isBlock):null;"LI"===(S?S.nodeName.toUpperCase():"")&&!(s&&s.ctrlKey)&&(b=S),ye(_)&&g>=_.data.length&&(((n,s,a)=>{const c=new io(s,a);let u;const f=n.getNonEmptyElements();for(;u=c.next();)if(f[u.nodeName.toLowerCase()]||ye(u)&&u.length>0)return!0;return!1})(n.schema,_,b||c.getRoot())||(f=c.create("br"),u.insertNode(f),u.setStartAfter(f),u.setEndAfter(f),h=!0)),f=c.create("br"),gs(c,u,f),rm(n,f,h),n.undoManager.add()})(n,s)},fakeEventName:"insertLineBreak"},DF=(n,s)=>nm(n).filter(a=>s.length>0&&li(j_fromDom(a),s)).isSome(),Ks=vi_generate([{br:[]},{block:[]},{none:[]}]),qz=(n,s)=>(n=>DF(n,zg(n)))(n),TF=n=>(s,a)=>(n=>nm(n).filter(s=>Oh(j_fromDom(s))).isSome())(s)===n,MF=(n,s)=>(a,c)=>(n=>nm(n).fold(Ae(""),s=>s.nodeName.toUpperCase()))(a)===n.toUpperCase()===s,Gz=n=>{const s=ov(n.dom,n.selection.getStart());return mo(s)},sm=n=>MF("pre",n),im=n=>(s,a)=>fV(s)===n,dk=(n,s)=>(n=>DF(n,hV(n)))(n),Al=(n,s)=>s,sG=n=>{const s=wr(n),a=ov(n.dom,n.selection.getStart());return Oe(a)&&n.schema.isValidChild(a.nodeName,s)},Zz=n=>{const s=n.selection.getRng(),a=j_fromDom(s.startContainer),u=su(a,s.startOffset).map(f=>md(f)&&!nn(f));return s.collapsed&&u.getOr(!0)},Ii=(n,s)=>(a,c)=>$o(n,(f,h)=>f&&h(a,c),!0)?I.some(s):I.none(),am=(n,s,a)=>{s.selection.isCollapsed()||(n=>{n.execCommand("delete")})(s),(!Oe(a)||!gC(s,n.fakeEventName).isDefaultPrevented())&&(n.insert(s,a),Oe(a)&&tm(s,n.fakeEventName))},IF=(n,s)=>{const a=()=>am(kF,n,s),c=()=>am(xF,n,s),u=((n,s)=>KP([Ii([qz],Ks.none()),Ii([sm(!0),Gz],Ks.none()),Ii([MF("summary",!0)],Ks.br()),Ii([sm(!0),im(!1),Al],Ks.br()),Ii([sm(!0),im(!1)],Ks.block()),Ii([sm(!0),im(!0),Al],Ks.block()),Ii([sm(!0),im(!0)],Ks.br()),Ii([TF(!0),Al],Ks.br()),Ii([TF(!0)],Ks.block()),Ii([dk],Ks.br()),Ii([Al],Ks.br()),Ii([sG],Ks.block()),Ii([Zz],Ks.block())],[n,!(!s||!s.shiftKey)]).getOr(Ks.none()))(n,s);switch(TS(n)){case"linebreak":u.fold(a,a,ut);break;case"block":u.fold(c,c,ut);break;case"invert":u.fold(c,a,ut);break;default:u.fold(a,c,ut)}},SC=Rs(),OF=SC.os.isiOS()&&SC.browser.isSafari(),AF=(n,s)=>{s.isDefaultPrevented()||(s.preventDefault(),(n=>{n.typing&&(n.typing=!1,n.add())})(n.undoManager),n.undoManager.transact(()=>{IF(n,s)}))},t6=Rs(),NF=n=>n.stopImmediatePropagation(),RF=n=>n.keyCode===Fe.PAGE_UP||n.keyCode===Fe.PAGE_DOWN,FF=(n,s,a)=>{a&&!n.get()?s.on("NodeChange",NF,!0):!a&&n.get()&&s.off("NodeChange",NF),n.set(a)},fk=(n,s)=>{const a=s.container(),c=s.offset();return ye(a)?(a.insertData(c,n),I.some(se(a,c+n.length))):Jg(s).map(u=>{const f=j_fromText(n);return s.isAtEnd()?Ji(u,f):Fr(u,f),se(f.dom,n.length)})},s6=Ve(fk,Jn),LF=Ve(fk," "),VF=n=>s=>{n.selection.setRng(s.toRange()),n.nodeChanged()},c6=n=>{const s=se.fromRangeStart(n.selection.getRng()),a=j_fromDom(n.getBody());if(n.selection.isCollapsed()){const c=Ve(af,n),u=se.fromRangeStart(n.selection.getRng());return Oc(c,n.getBody(),u).bind((n=>s=>s.fold(a=>Us(n.dom,se.before(a)),a=>Wr(a),a=>ra(a),a=>vs(n.dom,se.after(a))))(a)).map(f=>()=>((n,s,a)=>c=>uO(n,c,a)?s6(s):LF(s))(a,s,n.schema)(f).each(VF(n)))}return I.none()},l6=n=>gn(It.browser.isFirefox()&&n.selection.isEditable()&&((n,s)=>n.isEditable(n.getParent(s,"summary")))(n.dom,n.selection.getRng().startContainer),()=>{const a=j_fromDom(n.getBody());n.selection.isCollapsed()||n.getDoc().execCommand("Delete"),((n,s,a)=>uO(n,s,a)?s6(s):LF(s))(a,se.fromRangeStart(n.selection.getRng()),n.schema).each(VF(n))}),UF=n=>rM(n)?[{keyCode:Fe.TAB,action:rt(Pf,n,!0)},{keyCode:Fe.TAB,shiftKey:!0,action:rt(Pf,n,!1)}]:[],lm=n=>{if(n.addShortcut("Meta+P","","mcePrint"),aF(n),Ic(n))return No(null);{const s=X4(n);return(n=>{n.on("beforeinput",s=>{(!n.selection.isEditable()||Pt(s.getTargetRanges(),a=>!Vb(n.dom,a)))&&s.preventDefault()})})(n),(n=>{n.on("keyup compositionstart",Ve(SH,n))})(n),((n,s)=>{n.on("keydown",a=>{a.isDefaultPrevented()||((n,s,a)=>{const c=It.os.isMacOS()||It.os.isiOS();xf([{keyCode:Fe.RIGHT,action:rt(EH,n,!0)},{keyCode:Fe.LEFT,action:rt(EH,n,!1)},{keyCode:Fe.UP,action:rt(kH,n,!1)},{keyCode:Fe.DOWN,action:rt(kH,n,!0)},...c?[{keyCode:Fe.UP,action:rt(bE,n,!1),metaKey:!0,shiftKey:!0},{keyCode:Fe.DOWN,action:rt(bE,n,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Fe.RIGHT,action:rt(WH,n,!0)},{keyCode:Fe.LEFT,action:rt(WH,n,!1)},{keyCode:Fe.UP,action:rt(I2,n,!1)},{keyCode:Fe.DOWN,action:rt(I2,n,!0)},{keyCode:Fe.UP,action:rt(I2,n,!1)},{keyCode:Fe.UP,action:rt(d2,n,!1)},{keyCode:Fe.DOWN,action:rt(d2,n,!0)},{keyCode:Fe.RIGHT,action:rt(m2,n,!0)},{keyCode:Fe.LEFT,action:rt(m2,n,!1)},{keyCode:Fe.UP,action:rt(g2,n,!1)},{keyCode:Fe.DOWN,action:rt(g2,n,!0)},{keyCode:Fe.RIGHT,action:rt(KR,n,s,!0)},{keyCode:Fe.LEFT,action:rt(KR,n,s,!1)},{keyCode:Fe.RIGHT,ctrlKey:!c,altKey:c,action:rt(cE,n,s)},{keyCode:Fe.LEFT,ctrlKey:!c,altKey:c,action:rt(lE,n,s)},{keyCode:Fe.UP,action:rt(zp,n,!1)},{keyCode:Fe.DOWN,action:rt(zp,n,!0)}],a).each(u=>{a.preventDefault()})})(n,s,a)})})(n,s),((n,s)=>{let a=!1;n.on("keydown",c=>{a=c.keyCode===Fe.BACKSPACE,c.isDefaultPrevented()||((n,s,a)=>{const c=a.keyCode===Fe.BACKSPACE?"deleteContentBackward":"deleteContentForward",u=n.selection.isCollapsed(),f=u?"character":"selection",h=g=>u?g?"word":"line":"selection";PE([{keyCode:Fe.BACKSPACE,action:rt(vH,n)},{keyCode:Fe.BACKSPACE,action:rt(Mi,n,!1)},{keyCode:Fe.DELETE,action:rt(Mi,n,!0)},{keyCode:Fe.BACKSPACE,action:rt(zP,n,!1)},{keyCode:Fe.DELETE,action:rt(zP,n,!0)},{keyCode:Fe.BACKSPACE,action:rt(hE,n,s,!1)},{keyCode:Fe.DELETE,action:rt(hE,n,s,!0)},{keyCode:Fe.BACKSPACE,action:rt(lf,n,!1)},{keyCode:Fe.DELETE,action:rt(lf,n,!0)},{keyCode:Fe.BACKSPACE,action:rt(ma,n,!1,f)},{keyCode:Fe.DELETE,action:rt(ma,n,!0,f)},...vC?[{keyCode:Fe.BACKSPACE,altKey:!0,action:rt(ma,n,!1,h(!0))},{keyCode:Fe.DELETE,altKey:!0,action:rt(ma,n,!0,h(!0))},{keyCode:Fe.BACKSPACE,metaKey:!0,action:rt(ma,n,!1,h(!1))}]:[{keyCode:Fe.BACKSPACE,ctrlKey:!0,action:rt(ma,n,!1,h(!0))},{keyCode:Fe.DELETE,ctrlKey:!0,action:rt(ma,n,!0,h(!0))}],{keyCode:Fe.BACKSPACE,action:rt(Lo,n,!1)},{keyCode:Fe.DELETE,action:rt(Lo,n,!0)},{keyCode:Fe.BACKSPACE,action:rt(n2,n,!1)},{keyCode:Fe.DELETE,action:rt(n2,n,!0)},{keyCode:Fe.BACKSPACE,action:rt(jP,n,!1)},{keyCode:Fe.DELETE,action:rt(jP,n,!0)},{keyCode:Fe.BACKSPACE,action:rt(Ps,n,!1)},{keyCode:Fe.DELETE,action:rt(Ps,n,!0)},{keyCode:Fe.BACKSPACE,action:rt(mE,n,!1)},{keyCode:Fe.DELETE,action:rt(mE,n,!0)}],a).filter(g=>n.selection.isEditable()).each(g=>{a.preventDefault(),gC(n,c).isDefaultPrevented()||(g(),tm(n,c))})})(n,s,c)}),n.on("keyup",c=>{c.isDefaultPrevented()||((n,s,a)=>{xf([{keyCode:Fe.BACKSPACE,action:rt(U_,n)},{keyCode:Fe.DELETE,action:rt(U_,n)},...vC?[{keyCode:Fe.BACKSPACE,altKey:!0,action:rt(G_,n)},{keyCode:Fe.DELETE,altKey:!0,action:rt(G_,n)},...a?[{keyCode:rk?224:91,action:rt(G_,n)}]:[]]:[{keyCode:Fe.BACKSPACE,ctrlKey:!0,action:rt(G_,n)},{keyCode:Fe.DELETE,ctrlKey:!0,action:rt(G_,n)}]],s)})(n,c,a),a=!1})})(n,s),(n=>{let s=I.none();n.on("keydown",u=>{u.keyCode===Fe.ENTER&&(OF&&(n=>{if(!n.collapsed)return!1;const s=n.startContainer;if(ye(s)){const a=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,c=s.data.charAt(n.startOffset-1);return a.test(c)}return!1})(n.selection.getRng())?(u=>{s=I.some(u.selection.getBookmark()),u.undoManager.add()})(n):AF(n,u))}),n.on("keyup",u=>{u.keyCode===Fe.ENTER&&s.each(()=>((u,f)=>{u.undoManager.undo(),s.fold(ut,h=>u.selection.moveToBookmark(h)),AF(u,f),s=I.none()})(n,u))})})(n),(n=>{n.on("keydown",s=>{s.isDefaultPrevented()||((n,s)=>{PE([{keyCode:Fe.SPACEBAR,action:rt(c6,n)},{keyCode:Fe.SPACEBAR,action:rt(l6,n)}],s).each(a=>{s.preventDefault(),gC(n,"insertText",{data:" "}).isDefaultPrevented()||(a(),tm(n,"insertText",{data:" "}))})})(n,s)})})(n),(n=>{n.on("input",s=>{s.isComposing||(n=>{const s=j_fromDom(n.getBody());n.selection.isCollapsed()&&_U(s,se.fromRangeStart(n.selection.getRng()),n.schema).each(a=>{n.selection.setRng(a.toRange())})})(n)})})(n),(n=>{n.on("keydown",s=>{s.isDefaultPrevented()||((n,s)=>{xf([...UF(n)],s).each(a=>{s.preventDefault()})})(n,s)})})(n),((n,s)=>{n.on("keydown",a=>{a.isDefaultPrevented()||((n,s,a)=>{const c=It.os.isMacOS()||It.os.isiOS();xf([{keyCode:Fe.END,action:rt(DH,n,!0)},{keyCode:Fe.HOME,action:rt(DH,n,!1)},...c?[]:[{keyCode:Fe.HOME,action:rt(bE,n,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Fe.END,action:rt(bE,n,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Fe.END,action:rt(_2,n,!0)},{keyCode:Fe.HOME,action:rt(_2,n,!1)},{keyCode:Fe.END,action:rt(uE,n,!0,s)},{keyCode:Fe.HOME,action:rt(uE,n,!1,s)}],a).each(u=>{a.preventDefault()})})(n,s,a)})})(n,s),((n,s)=>{if(t6.os.isMacOS())return;const a=No(!1);n.on("keydown",c=>{RF(c)&&FF(a,n,!0)}),n.on("keyup",c=>{c.isDefaultPrevented()||((n,s,a)=>{xf([{keyCode:Fe.PAGE_UP,action:rt(uE,n,!1,s)},{keyCode:Fe.PAGE_DOWN,action:rt(uE,n,!0,s)}],a)})(n,s,c),RF(c)&&a.get()&&(FF(a,n,!1),n.nodeChanged())})})(n,s),s}};class pk{constructor(s){let a;this.lastPath=[],this.editor=s;const c=this;"onselectionchange"in s.getDoc()||s.on("NodeChange click mouseup keyup focus",u=>{const f=s.selection.getRng(),h={startContainer:f.startContainer,startOffset:f.startOffset,endContainer:f.endContainer,endOffset:f.endOffset};("nodechange"===u.type||!x1(h,a))&&s.dispatch("SelectionChange"),a=h}),s.on("contextmenu",()=>{M1(s),s.dispatch("SelectionChange")}),s.on("SelectionChange",()=>{const u=s.selection.getStart(!0);u&&r1(s)&&!c.isSameElementPath(u)&&s.dom.isChildOf(u,s.getBody())&&s.nodeChanged({selectionChange:!0})}),s.on("mouseup",u=>{!u.isDefaultPrevented()&&r1(s)&&("IMG"===s.selection.getNode().nodeName?Si.setEditorTimeout(s,()=>{s.nodeChanged()}):s.nodeChanged())})}nodeChanged(s={}){const a=this.editor.selection;let c;if(this.editor.initialized&&a&&!qg(this.editor)&&!this.editor.mode.isReadOnly()){const u=this.editor.getBody();c=a.getStart(!0)||u,(c.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(c,u))&&(c=u);const f=[];this.editor.dom.getParent(c,h=>h===u||(f.push(h),!1)),this.editor.dispatch("NodeChange",{...s,element:c,parents:f})}}isSameElementPath(s){let a;const c=this.editor,u=ka(c.dom.getParents(s,ro,c.getBody()));if(u.length===this.lastPath.length){for(a=u.length;a>=0&&u[a]===this.lastPath[a];a--);if(-1===a)return this.lastPath=u,!0}return this.lastPath=u,!1}}const jF=_c("image"),av=_c("event"),cv=n=>s=>{s[av]=n},WF=cv(0),p6=cv(2),PC=cv(1),mk=_c("mode"),EC=n=>s=>{s[mk]=n},um=(n,s)=>EC(s)(n),gk=EC(0),_k=EC(2),_6=EC(1),GF=n=>s=>I.from(s[mk]).exists(c=>c===n),Vt=GF(0),KF=GF(1),Zu=["none","copy","link","move"],y6=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],vk=()=>{const n=new window.DataTransfer;let s="move",a="all";const c={get dropEffect(){return s},set dropEffect(u){zt(Zu,u)&&(s=u)},get effectAllowed(){return a},set effectAllowed(u){(s=>I.from(s[av]).exists(c=>0===c))(c)&&zt(y6,u)&&(a=u)},get items(){return((n,s)=>({...s,get length(){return s.length},add:(a,c)=>{if(Vt(n)){if(!Ye(a))return s.add(a);if(!Vo(c))return s.add(a,c)}return null},remove:a=>{Vt(n)&&s.remove(a)},clear:()=>{Vt(n)&&s.clear()}}))(c,n.items)},get files(){return KF(c)?Object.freeze({length:0,item:n=>null}):n.files},get types(){return n.types},setDragImage:(u,f,h)=>{Vt(c)&&(((n,s)=>{n[jF]=s})(c,{image:u,x:f,y:h}),n.setDragImage(u,f,h))},getData:u=>KF(c)?"":n.getData(u),setData:(u,f)=>{Vt(c)&&n.setData(u,f)},clearData:u=>{Vt(c)&&n.clearData(u)}};return gk(c),c},b6=(n,s)=>n.setData("text/html",s),YF="x-tinymce/html",dm=Ae(YF),kC="\x3c!-- "+YF+" --\x3e",cG=n=>kC+n,Za=n=>-1!==n.indexOf(kC),C6="%MCEPASTEBIN%",lv=n=>n.dom.get("mcepastebin"),S6=n=>Oe(n)&&"mcepastebin"===n.id,P6=n=>n===C6,tL=(n,s)=>(de.each(s,a=>{n=ql(a,RegExp)?n.replace(a,""):n.replace(a[0],a[1])}),n),E6=n=>tL(n,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(a,c,u)=>c||u?Jn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),T6=(n,s)=>({content:n,cancelled:s}),yk=(n,s)=>(n.insertContent(s,{merge:TV(n),paste:!0}),!0),bk=n=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(n),rL=(n,s,a)=>!(n.selection.isCollapsed()||!bk(s))&&((n,s,a)=>(n.undoManager.extra(()=>{a(n,s)},()=>{n.execCommand("mceInsertLink",!1,s)}),!0))(n,s,a),N6=(n,s,a)=>!!((n,s)=>bk(s)&&Pt(VS(n),a=>Mn(s.toLowerCase(),`.${a.toLowerCase()}`)))(n,s)&&((n,s,a)=>(n.undoManager.extra(()=>{a(n,s)},()=>{n.insertContent('<img src="'+s+'">')}),!0))(n,s,a),pG=(n=>{let s=0;return()=>"mceclip"+s++})(),mG=n=>{const s=vk();return b6(s,n),_k(s),s},R6=(n,s,a,c,u)=>{const f=((n,s,a)=>((n,s,a)=>{const c=((n,s,a)=>n.dispatch("PastePreProcess",{content:s,internal:a}))(n,s,a),u=((n,s)=>{const a=Ap({sanitize:oM(n),sandbox_iframes:VV(n),sandbox_iframes_exclusions:iM(n),convert_unsafe_embeds:$S(n)},n.schema);a.addNodeFilter("meta",u=>{de.each(u,f=>{f.remove()})});const c=a.parse(s,{forced_root_block:!1,isRootContent:!0});return Ua({validate:!0},n.schema).serialize(c)})(n,c.content);return n.hasEventListeners("PastePostProcess")&&!c.isDefaultPrevented()?((n,s,a)=>{const c=n.dom.create("div",{style:"display:none"},s),u=((n,s,a)=>n.dispatch("PastePostProcess",{node:s,internal:a}))(n,c,a);return T6(u.node.innerHTML,u.isDefaultPrevented())})(n,u,a):T6(u,c.isDefaultPrevented())})(n,s,a))(n,s,a);if(!f.cancelled){const h=f.content,g=()=>((n,s,a)=>{a||!MV(n)?yk(n,s):((n,s)=>{de.each([rL,N6,yk],a=>!a(n,s,yk))})(n,s)})(n,h,c);u?gC(n,"insertFromPaste",{dataTransfer:mG(h)}).isDefaultPrevented()||(g(),tm(n,"insertFromPaste")):g()}},wk=(n,s,a,c)=>{const u=a||Za(s);R6(n,(n=>n.replace(kC,""))(s),u,!1,c)},Ck=(n,s,a)=>{const c=n.dom.encode(s).replace(/\r\n/g,"\n"),f=((n,s,a)=>{const c=n.split(/\n\n/),u=((n,s)=>{let a="<"+n;const c=_o(s,(u,f)=>f+'="'+Ao.encodeAllRaw(u)+'"');return c.length&&(a+=" "+c.join(" ")),a+">"})(s,a),f="</"+s+">",h=Xe(c,_=>_.split(/\n/).join("<br />"));return 1===h.length?h[0]:Xe(h,_=>u+_+f).join("")})(au(c,bc(n)),wr(n),Vd(n));R6(n,f,!1,!0,a)},Sk=n=>{const s={};if(n&&n.types)for(let a=0;a<n.types.length;a++){const c=n.types[a];try{s[c]=n.getData(c)}catch{s[c]=""}}return s},Zs=(n,s)=>s in n&&n[s].length>0,ga=n=>Zs(n,"text/html")||Zs(n,"text/plain"),xk=(n,s,a)=>{const c=(n=>"paste"===n.type)(s)?s.clipboardData:s.dataTransfer;if(Gg(n)&&c){const u=((n,s)=>{const a=s.items?Uo(or(s.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=s.files?or(s.files):[];return nt(a.length>0?a:c,(n=>{const s=VS(n);return a=>vo(a.type,"image/")&&Pt(s,c=>(n=>{const s=n.toLowerCase(),a={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return de.hasOwn(a,s)?"image/"+a[s]:"image/"+s})(c)===a.type)})(n))})(n,c);if(u.length>0)return s.preventDefault(),(n=>Promise.all(Xe(n,s=>fw(s).then(a=>({file:s,uri:a})))))(u).then(f=>{a&&n.selection.setRng(a),ue(f,h=>{((n,s)=>{T_(s.uri).each(({data:a,type:c,base64Encoded:u})=>{const f=u?a:btoa(a),h=s.file,g=n.editorUpload.blobCache,b=g.getByData(f,c)??((n,s,a,c)=>{const u=pG(),f=IS(n)&&Oe(a.name),h=f?((n,s)=>{const a=s.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Oe(a)?n.dom.encode(a[1]):void 0})(n,a.name):u,_=s.create(u,a,c,h,f?a.name:void 0);return s.add(_),_})(n,g,h,f);wk(n,`<img src="${b.blobUri()}">`,!1,!0)})})(n,h)})}),!0}return!1},Pk=(n,s,a,c,u)=>{let f=E6(a);const h=Zs(s,dm())||Za(a),g=!h&&(n=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(n))(f),_=bk(f);(P6(f)||!f.length||g&&!_)&&(c=!0),(c||_)&&(f=Zs(s,"text/plain")&&g?s["text/plain"]:(n=>{const s=du(),a=Ap({},s);let c="";const u=s.getVoidElements(),f=de.makeMap("script noscript style textarea video audio iframe object"," "),h=s.getBlockElements(),g=_=>{const b=_.name,S=_;if("br"!==b){if("wbr"!==b){if(u[b]&&(c+=" "),f[b])return void(c+=" ");if(3===_.type&&(c+=_.value),!(_.name in s.getVoidElements())){let E=_.firstChild;if(E)do{g(E)}while(E=E.next)}h[b]&&S.next&&(c+="\n","p"===b&&(c+="\n"))}}else c+="\n"};return n=tL(n,[/<!\[[^\]]+\]>/g]),g(a.parse(n)),c})(f)),!P6(f)&&(c?Ck(n,f,u):wk(n,f,h,u))},aL=(n,s,a)=>{((n,s,a)=>{let c;n.on("keydown",f=>{(n=>Fe.metaKeyPressed(n)&&86===n.keyCode||n.shiftKey&&45===n.keyCode)(f)&&!f.isDefaultPrevented()&&(c=f.shiftKey&&86===f.keyCode)}),n.on("paste",f=>{if(f.isDefaultPrevented()||(n=>{var s,a;return It.os.isAndroid()&&0===(null===(a=null===(s=n.clipboardData)||void 0===s?void 0:s.items)||void 0===a?void 0:a.length)})(f))return;const h="text"===a.get()||c;c=!1;const g=Sk(f.clipboardData);!ga(g)&&xk(n,f,s.getLastRng()||n.selection.getRng())||(Zs(g,"text/html")?(f.preventDefault(),Pk(n,g,g["text/html"],h,!0)):Zs(g,"text/plain")&&Zs(g,"text/uri-list")?(f.preventDefault(),Pk(n,g,g["text/plain"],h,!0)):(s.create(),Si.setEditorTimeout(n,()=>{const _=s.getHtml();s.remove(),Pk(n,g,_,h,!1)},0)))})})(n,s,a),(n=>{const s=u=>vo(u,"webkit-fake-url"),a=u=>vo(u,"data:");n.parser.addNodeFilter("img",(u,f,h)=>{if(!Gg(n)&&(u=>{var f;return!0===(null===(f=u.data)||void 0===f?void 0:f.paste)})(h))for(const g of u){const _=g.attr("src");Ye(_)&&!g.attr("data-mce-object")&&_!==It.transparentSrc&&(s(_)||!IV(n)&&a(_))&&g.remove()}})})(n)},Ek=(n,s,a,c)=>{((n,s,a)=>{if(!n)return!1;try{return n.clearData(),n.setData("text/html",s),n.setData("text/plain",a),n.setData(dm(),s),!0}catch{return!1}})(n.clipboardData,s.html,s.text)?(n.preventDefault(),c()):a(s.html,c)},kk=n=>(s,a)=>{const{dom:c,selection:u}=n,f=c.create("div",{contenteditable:"false","data-mce-bogus":"all"}),h=c.create("div",{contenteditable:"true"},s);c.setStyles(f,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),f.appendChild(h),c.add(n.getBody(),f);const g=u.getRng();h.focus();const _=c.createRng();_.selectNodeContents(h),u.setRng(_),Si.setEditorTimeout(n,()=>{u.setRng(g),c.remove(f),a()},0)},Dk=n=>({html:cG(n.selection.getContent({contextual:!0})),text:n.selection.getContent({format:"text"})}),Tk=n=>!n.selection.isCollapsed()||(n=>!!n.dom.getParent(n.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",n.getBody()))(n),pL=(n,s)=>{var a,c;return Jd.getCaretRangeFromPoint(null!==(a=s.clientX)&&void 0!==a?a:0,null!==(c=s.clientY)&&void 0!==c?c:0,n.getDoc())},Mk=(n,s)=>{n.focus(),s&&n.selection.setRng(s)},Ak=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,uv=n=>de.trim(n).replace(Ak,Ed).toLowerCase(),bL=(n,s,a)=>{const c=kV(n);if(a||"all"===c||!DV(n))return s;const u=c?c.split(/[, ]/):[];if(u&&"none"!==c){const f=n.dom,h=n.selection.getNode();s=s.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(g,_,b,S)=>{const E=f.parseStyle(f.decode(b)),T={};for(let V=0;V<u.length;V++){const F=E[u[V]];let U=F,W=f.getStyle(h,u[V],!0);/color/.test(u[V])&&(U=uv(U),W=uv(W)),W!==U&&(T[u[V]]=F)}const N=f.serializeStyle(T,"span");return N?_+' style="'+N+'"'+S:_+S})}else s=s.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return s.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(f,h,g,_)=>h+' style="'+g+'"'+_)},CL=n=>{const s=No(!1),a=No(yi(n)?"text":"html"),c=(n=>{const s=No(null);return{create:()=>((n,s)=>{const{dom:a,selection:c}=n,u=n.getBody();s.set(c.getRng());const f=a.add(n.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},C6);It.browser.isFirefox()&&a.setStyle(f,"left","rtl"===a.getStyle(u,"direction",!0)?65535:-65535),a.bind(f,"beforedeactivate focusin focusout",h=>{h.stopPropagation()}),f.focus(),c.select(f,!0)})(n,s),remove:()=>((n,s)=>{const a=n.dom;if(lv(n)){let c;const u=s.get();for(;c=lv(n);)a.remove(c),a.unbind(c);u&&n.selection.setRng(u)}s.set(null)})(n,s),getEl:()=>lv(n),getHtml:()=>(n=>{const s=n.dom,a=(h,g)=>{h.appendChild(g),s.remove(g,!0)},[c,...u]=nt(n.getBody().childNodes,S6);ue(u,h=>{a(c,h)});const f=s.select("div[id=mcepastebin]",c);for(let h=f.length-1;h>=0;h--){const g=s.create("div");c.insertBefore(g,f[h]),a(g,f[h])}return c?c.innerHTML:""})(n),getLastRng:s.get}})(n);(n=>{(It.browser.isChromium()||It.browser.isSafari())&&((n,s)=>{n.on("PastePreProcess",a=>{a.content=s(n,a.content,a.internal)})})(n,bL)})(n),((n,s)=>{n.addCommand("mceTogglePlainTextPaste",()=>{((n,s)=>{"text"===s.get()?(s.set("html"),g$(n,!1)):(s.set("text"),g$(n,!0)),n.focus()})(n,s)}),n.addCommand("mceInsertClipboardContent",(a,c)=>{c.html&&wk(n,c.html,c.internal,!1),c.text&&Ck(n,c.text,!1)})})(n,a),(n=>{const s=u=>f=>{u(n,f)},a=eM(n);Zt(a)&&n.on("PastePreProcess",s(a));const c=Hd(n);Zt(c)&&n.on("PastePostProcess",s(c))})(n),n.on("PreInit",()=>{(n=>{n.on("cut",(n=>s=>{!s.isDefaultPrevented()&&Tk(n)&&n.selection.isEditable()&&Ek(s,Dk(n),kk(n),()=>{if(It.browser.isChromium()||It.browser.isFirefox()){const a=n.selection.getRng();Si.setEditorTimeout(n,()=>{n.selection.setRng(a),n.execCommand("Delete")},0)}else n.execCommand("Delete")})})(n)),n.on("copy",(n=>s=>{!s.isDefaultPrevented()&&Tk(n)&&Ek(s,Dk(n),kk(n),ut)})(n))})(n),((n,s)=>{XT(n)&&n.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Gg(n)||n.on("drop",a=>{const c=a.dataTransfer;c&&(n=>Pt(n.files,s=>/^image\//.test(s.type)))(c)&&a.preventDefault()}),n.on("drop",a=>{if(a.isDefaultPrevented())return;const c=pL(n,a);if(mo(c))return;const u=Sk(a.dataTransfer),f=Zs(u,dm());if((!ga(u)||(n=>{const s=n["text/plain"];return!!s&&0===s.indexOf("file://")})(u))&&xk(n,a,c))return;const h=u[dm()],g=h||u["text/html"]||u["text/plain"],_=((n,s,a,c)=>{const u=n.getParent(a,h=>cl(s,h));if(!po(n.getParent(a,"summary")))return!0;if(u&&Ke(c,"text/html")){const h=(new DOMParser).parseFromString(c["text/html"],"text/html").body;return!po(h.querySelector(u.nodeName.toLowerCase()))}return!1})(n.dom,n.schema,c.startContainer,u),b=s.get();b&&!_||g&&(a.preventDefault(),Si.setEditorTimeout(n,()=>{n.undoManager.transact(()=>{(h||b&&_)&&n.execCommand("Delete"),Mk(n,c);const S=E6(g);u["text/html"]?wk(n,S,f,!0):Ck(n,S,!0)})}))}),n.on("dragstart",a=>{s.set(!0)}),n.on("dragover dragend",a=>{Gg(n)&&!s.get()&&(a.preventDefault(),Mk(n,pL(n,a))),"dragend"===a.type&&s.set(!1)}),(n=>{n.on("input",s=>{const a=c=>po(c.querySelector("summary"));if("deleteByDrag"===s.inputType){const c=nt(n.dom.select("details"),a);ue(c,u=>{Nn(u.firstChild)&&u.firstChild.remove();const f=n.dom.create("summary");f.appendChild(vc().dom),u.prepend(f)})}})})(n)})(n,s),aL(n,c,a)})},gG=Nn,$6=ye,Xu=n=>Pn(n.dom),TC=n=>s=>mt(j_fromDom(n),s),xL=(n,s)=>di(j_fromDom(n),Xu,TC(s)),IC=(n,s,a)=>{const c=new io(n,s),u=a?c.next.bind(c):c.prev.bind(c);let f=n;for(let h=a?n:u();h&&!gG(h);h=u())Fa(h)&&(f=h);return f},_G=n=>{const s=((n,s,a)=>{const u=se.fromRangeStart(n).getNode(),f=((n,s,a)=>di(j_fromDom(n),c=>(n=>Oa(n.dom))(c)||a.isBlock(Ft(c)),TC(s)).getOr(j_fromDom(s)).dom)(u,s,a),h=IC(u,f,!1),g=IC(u,f,!0),_=document.createRange();return xL(h,f).fold(()=>{$6(h)?_.setStart(h,0):_.setStartBefore(h)},b=>_.setStartBefore(b.dom)),xL(g,f).fold(()=>{$6(g)?_.setEnd(g,g.data.length):_.setEndAfter(g)},b=>_.setEndAfter(b.dom)),_})(n.selection.getRng(),n.getBody(),n.schema);n.selection.setRng(kp(s))};var OC=function(n){return n.Before="before",n.After="after",n}(OC||{});const yG=(n,s)=>Math.abs(n.left-s),bG=(n,s)=>Math.abs(n.right-s),PL=(n,s)=>{const a=nt(n,c=>((n,s)=>n>=s.top&&n<=s.bottom)(s,c));return(n=>$o(n,(s,a)=>s.fold(()=>I.some(a),c=>{const u=Math.min(a.left,c.left),f=Math.min(a.top,c.top),h=Math.max(a.right,c.right),g=Math.max(a.bottom,c.bottom);return I.some({top:f,right:h,bottom:g,left:u,width:h-u,height:g-f})}),I.none()))(a).fold(()=>[[],n],c=>{const{pass:u,fail:f}=as(n,h=>((n,s)=>{const a=((n,s)=>Math.max(0,Math.min(n.bottom,s.bottom)-Math.max(n.top,s.top)))(n,s)/Math.min(n.height,s.height);return((n,s)=>n.top<s.bottom&&n.bottom>s.top)(n,s)&&a>.5})(h,c));return[u,f]})},xG=(n,s,a)=>s>n.left&&s<n.right?0:Math.min(Math.abs(n.left-s),Math.abs(n.right-s)),EL=(n,s,a,c)=>{const u=E=>Fa(E.node)?I.some(E):$e(E.node)?EL(or(E.node.childNodes),s,a,!1):I.none(),h=(E,T)=>{const N=ri(E,(V,F)=>T(V,s,a)-T(F,s,a));return nc(N,u).map(V=>c&&!ye(V.node)&&N.length>1?((E,T,N)=>u(T).filter(V=>Math.abs(N(E,s,a)-N(V,s,a))<2&&ye(V.node)))(V,N[1],T).getOr(V):V)},[g,_]=PL(rE(n),a),{pass:b,fail:S}=as(_,E=>E.top<a);return h(g,xG).orThunk(()=>h(S,Bg)).orThunk(()=>h(b,Bg))},Of=(n,s,a)=>((n,s,a)=>{const c=j_fromDom(n),u=fn(c),h=j_fromPoint(u,s,a).filter(g=>Ki(c,g)).getOr(c);return((n,s,a,c)=>{const u=(f,h)=>{const _=nt(f.dom.childNodes,Kl(b=>$e(b)&&b.classList.contains("mce-drag-container")));return h.fold(()=>EL(_,a,c,!0),b=>{const S=nt(_,E=>E!==b.dom);return EL(S,a,c,!0)}).orThunk(()=>(mt(f,n)?I.none():ru(f)).bind(S=>u(S,I.some(f))))};return u(s,I.none())})(c,h,s,a)})(n,s,a).filter(c=>ib(c.node)).map(c=>((n,s)=>({node:n.node,position:yG(n,s)<bG(n,s)?OC.Before:OC.After}))(c,s)),fm=n=>{var s,a;const c=n.getBoundingClientRect(),u=n.ownerDocument,f=u.documentElement,h=u.defaultView;return{top:c.top+(null!==(s=h?.scrollY)&&void 0!==s?s:0)-f.clientTop,left:c.left+(null!==(a=h?.scrollX)&&void 0!==a?a:0)-f.clientLeft}},Fk=n=>({target:n,srcElement:n}),EG=(n,s,a,c)=>{const u=((n,s)=>{const a=(n=>{const s=vk(),a=(n=>I.from(n[mk]))(n);return _k(n),WF(s),s.dropEffect=n.dropEffect,s.effectAllowed=n.effectAllowed,(n=>I.from(n[jF]))(n).each(c=>s.setDragImage(c.image,c.x,c.y)),ue(n.types,c=>{"Files"!==c&&s.setData(c,n.getData(c))}),ue(n.files,c=>s.items.add(c)),(n=>I.from(n[av]))(n).each(c=>{((n,s)=>{cv(s)(n)})(s,c)}),a.each(c=>{um(n,c),um(s,c)}),s})(n);return"dragstart"===s?(WF(a),gk(a)):"drop"===s?(p6(a),_k(a)):(PC(a),_6(a)),a})(a,n);return Vo(c)?((n,s,a)=>{const c=Im("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:n,composedPath:c,initEvent:c,preventDefault:ut,stopImmediatePropagation:ut,stopPropagation:ut,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:c,initMouseEvent:c,getModifierState:c,dataTransfer:a,...Fk(s)}})(n,s,u):((n,s,a,c)=>({...s,dataTransfer:c,type:n,...Fk(a)}))(n,c,s,u)},hm=Pn,RC=((...n)=>s=>{for(let a=0;a<n.length;a++)if(n[a](s))return!0;return!1})(hm,Oa),LC=(n,s,a,c)=>{const u=n.dom,f=s.cloneNode(!0);u.setStyles(f,{width:a,height:c}),u.setAttrib(f,"data-mce-selected",null);const h=u.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return u.setStyles(h,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:a,height:c}),u.setStyles(f,{margin:0,boxSizing:"border-box"}),h.appendChild(f),h},pm=(n,s)=>a=>()=>{a.scroll({[n]:("left"===n?a.scrollX:a.scrollY)+s,behavior:"smooth"})},hv=pm("left",-32),TL=pm("left",32),ML=pm("top",-32),Vk=pm("top",32),$k=n=>{n&&n.parentNode&&n.parentNode.removeChild(n)},BC=(n,s,a,c,u)=>{"dragstart"===s&&b6(c,n.dom.getOuterHTML(a));const f=EG(s,a,c,u);return n.dispatch(s,f)},jk=(n,s)=>{const a=Eg((u,f)=>((n,s,a)=>{n._selectionOverrides.hideFakeCaret(),Of(n.getBody(),s,a).fold(()=>n.selection.placeCaretAt(s,a),c=>{const u=n._selectionOverrides.showCaret(1,c.node,c.position===OC.Before,!1);u?n.selection.setRng(u):n.selection.placeCaretAt(s,a)})})(s,u,f),0);s.on("remove",a.cancel);const c=n;return u=>n.on(f=>{const h=Math.max(Math.abs(u.screenX-f.screenX),Math.abs(u.screenY-f.screenY));if(!f.dragging&&h>10){const g=BC(s,"dragstart",f.element,f.dataTransfer,u);if(Oe(g.dataTransfer)&&(f.dataTransfer=g.dataTransfer),g.isDefaultPrevented())return;f.dragging=!0,s.focus()}if(f.dragging){const g=u.currentTarget===s.getDoc().documentElement,_=((n,s)=>({pageX:s.pageX-n.relX,pageY:s.pageY+5}))(f,((n,s)=>((n,s,a)=>({pageX:a.left-n.left+s.left,pageY:a.top-n.top+s.top}))((n=>n.inline?fm(n.getBody()):{left:0,top:0})(n),(n=>{const s=n.getBody();return n.inline?{left:s.scrollLeft,top:s.scrollTop}:{left:0,top:0}})(n),((n,s)=>{if(s.target.ownerDocument!==n.getDoc()){const a=fm(n.getContentAreaContainer()),c=(n=>{const s=n.getBody(),a=n.getDoc().documentElement;return n.inline?{left:s.scrollLeft,top:s.scrollTop}:{left:s.scrollLeft||a.scrollLeft,top:s.scrollTop||a.scrollTop}})(n);return{left:s.pageX-a.left+c.left,top:s.pageY-a.top+c.top}}return{left:s.pageX,top:s.pageY}})(n,s)))(s,u));((n,s)=>{n.parentNode!==s&&s.appendChild(n)})(f.ghost,s.getBody()),((n,s,a,c,u,f,h,g,_,b,S,E)=>{let T=0,N=0;n.style.left=s.pageX+"px",n.style.top=s.pageY+"px",s.pageX+a>u&&(T=s.pageX+a-u),s.pageY+c>f&&(N=s.pageY+c-f),n.style.width=a-T+"px",n.style.height=c-N+"px";const V=_.clientHeight,F=_.clientWidth,U=h+_.getBoundingClientRect().top,W=g+_.getBoundingClientRect().left;S.on(Z=>{Z.intervalId.clear(),Z.dragging&&E&&(h+8>=V?Z.intervalId.set(Vk(b)):h-8<=0?Z.intervalId.set(ML(b)):g+8>=F?Z.intervalId.set(TL(b)):g-8<=0?Z.intervalId.set(hv(b)):U+16>=window.innerHeight?Z.intervalId.set(Vk(window)):U-16<=0?Z.intervalId.set(ML(window)):W+16>=window.innerWidth?Z.intervalId.set(TL(window)):W-16<=0&&Z.intervalId.set(hv(window)))})})(f.ghost,_,f.width,f.height,f.maxX,f.maxY,u.clientY,u.clientX,s.getContentAreaContainer(),s.getWin(),c,g),a.throttle(u.clientX,u.clientY)}})},VC=(n,s,a)=>{n.on(c=>{c.intervalId.clear(),c.dragging&&a.fold(()=>BC(s,"dragend",c.element,c.dataTransfer),u=>BC(s,"dragend",c.element,c.dataTransfer,u))}),Q6(n)},Q6=n=>{n.on(s=>{s.intervalId.clear(),$k(s.ghost)}),n.clear()},X6=n=>{const s=mi(),a=pn.DOM,c=document,u=((n,s)=>a=>{if((n=>0===n.button)(a)){const c=vn(s.dom.getParents(a.target),RC).getOr(null);if(Oe(c)&&((n,s,a)=>hm(a)&&a!==s&&n.isEditable(a.parentElement))(s.dom,s.getBody(),c)){const u=s.dom.getPos(c),f=s.getBody(),h=s.getDoc().documentElement;n.set({element:c,dataTransfer:vk(),dragging:!1,screenX:a.screenX,screenY:a.screenY,maxX:(s.inline?f.scrollWidth:h.offsetWidth)-2,maxY:(s.inline?f.scrollHeight:h.offsetHeight)-2,relX:a.pageX-u.x,relY:a.pageY-u.y,width:c.offsetWidth,height:c.offsetHeight,ghost:LC(s,c,c.offsetWidth,c.offsetHeight),intervalId:kh(100)})}}})(s,n),f=jk(s,n),h=((n,s)=>a=>{n.on(c=>{var u;if(c.intervalId.clear(),c.dragging){if(((n,s,a)=>!mo(s)&&s!==a&&!n.dom.isChildOf(s,a)&&n.dom.isEditable(s))(s,(n=>{const s=n.getSel();if(Oe(s)){const c=s.getRangeAt(0).startContainer;return ye(c)?c.parentNode:c}return null})(s.selection),c.element)){const f=null!==(u=s.getDoc().elementFromPoint(a.clientX,a.clientY))&&void 0!==u?u:s.getBody();BC(s,"drop",f,c.dataTransfer,a).isDefaultPrevented()||s.undoManager.transact(()=>{((n,s)=>{const a=n.getParent(s.parentNode,n.isBlock);$k(s),a&&a!==n.getRoot()&&n.isEmpty(a)&&ta(j_fromDom(a))})(s.dom,c.element),(n=>{const s=n.getData("text/html");return""===s?I.none():I.some(s)})(c.dataTransfer).each(g=>s.insertContent(g)),s._selectionOverrides.hideFakeCaret()})}BC(s,"dragend",s.getBody(),c.dataTransfer,a)}}),Q6(n)})(s,n),g=((n,s)=>a=>VC(n,s,I.some(a)))(s,n);n.on("mousedown",u),n.on("mousemove",f),n.on("mouseup",h),a.bind(c,"mousemove",f),a.bind(c,"mouseup",g),n.on("remove",()=>{a.unbind(c,"mousemove",f),a.unbind(c,"mouseup",g)}),n.on("keydown",_=>{_.keyCode===Fe.ESC&&VC(s,n,I.none())})},xr=Pn,e8=(n,s)=>Bu(n.getBody(),s),t8=n=>{const s=n.selection,a=n.dom,c=n.getBody(),u=HV(n,c,a.isBlock,()=>Mu(n)),f="sel-"+a.uniqueId(),h="data-mce-selected";let g;const b=ke=>ke!==c&&(xr(ke)||al(ke))&&a.isChildOf(ke,c)&&a.isEditable(ke.parentNode),E=(ke,ge,re,ae=!0)=>n.dispatch("ShowCaret",{target:ge,direction:ke,before:re}).isDefaultPrevented()?null:(ae&&s.scrollIntoView(ge,-1===ke),u.show(re,ge)),V=ke=>Vs(ke)||Fg(ke)||Ad(ke),F=ke=>V(ke.startContainer)||V(ke.endContainer),K=(ke,ge)=>{if(!ke)return null;if(ke.collapsed){if(!F(ke)){const qe=ge?1:-1,it=Wd(qe,c,ke),bt=it.getNode(!ge);if(Oe(bt)){if(ib(bt))return E(qe,bt,!!ge&&!it.isAtEnd(),!1);if(gi(bt)&&Pn(bt.nextSibling)){const en=a.createRng();return en.setStart(bt,0),en.setEnd(bt,0),en}}const Kt=it.getNode(ge);if(Oe(Kt)){if(ib(Kt))return E(qe,Kt,!ge&&!it.isAtEnd(),!1);if(gi(Kt)&&Pn(Kt.previousSibling)){const en=a.createRng();return en.setStart(Kt,1),en.setEnd(Kt,1),en}}}return null}let re=ke.startContainer,ae=ke.startOffset;const Ie=ke.endOffset;if(ye(re)&&0===ae&&xr(re.parentNode)&&(re=re.parentNode,ae=a.nodeIndex(re),re=re.parentNode),!$e(re))return null;if(Ie===ae+1&&re===ke.endContainer){const qe=re.childNodes[ae];if(b(qe))return(ke=>{const ge=ke.cloneNode(!0),re=n.dispatch("ObjectSelected",{target:ke,targetClone:ge});if(re.isDefaultPrevented())return null;const ae=((ke,ge)=>{const re=j_fromDom(n.getBody()),ae=n.getDoc(),Ie=ol(re,"#"+f).getOrThunk(()=>{const bt=j_fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ae);return Oo(bt,"id",f),Yn(re,bt),bt}),qe=a.createRng();C(Ie),y(Ie,[j_fromText(Jn,ae),j_fromDom(ge),j_fromText(Jn,ae)]),qe.setStart(Ie.dom.firstChild,1),qe.setEnd(Ie.dom.lastChild,0),dc(Ie,{top:a.getPos(ke,n.getBody()).y+"px"}),P1(Ie);const it=s.getSel();return it&&(it.removeAllRanges(),it.addRange(qe)),qe})(ke,re.targetClone),Ie=j_fromDom(ke);return ue(Wt(j_fromDom(n.getBody()),`*[${h}]`),qe=>{mt(Ie,qe)||Co(qe,h)}),a.getAttrib(ke,h)||ke.setAttribute(h,"1"),g=ke,we(),ae})(qe)}return null},J=()=>{g&&g.removeAttribute(h),ol(j_fromDom(n.getBody()),"#"+f).each(M),g=null},we=()=>{u.hide()};return Ic(n)||(n.on("click",ge=>{a.isEditable(ge.target)||(ge.preventDefault(),n.focus())}),n.on("blur NewBlock",J),n.on("ResizeWindow FullscreenStateChanged",u.reposition),n.on("tap",ge=>{const re=ge.target,ae=e8(n,re);xr(ae)?(ge.preventDefault(),qu(n,ae).each(K)):b(re)&&qu(n,re).each(K)},!0),n.on("mousedown",ge=>{const re=ge.target;if(re!==c&&"HTML"!==re.nodeName&&!a.isChildOf(re,c)||!((n,s,a)=>{const c=j_fromDom(n.getBody()),u=n.inline?c:(n=>j_fromDom(fn(n).dom.documentElement))(c),f=((n,s,a,c)=>{const u=(n=>n.dom.getBoundingClientRect())(s);return{x:a-(n?u.left+s.dom.clientLeft+H5(s):0),y:c-(n?u.top+s.dom.clientTop+iR(s):0)}})(n.inline,u,s,a);return((n,s,a)=>{const c=sR(n),u=OP(n);return s>=0&&a>=0&&s<=c&&a<=u})(u,f.x,f.y)})(n,ge.clientX,ge.clientY))return;J(),we();const ae=e8(n,re);xr(ae)?(ge.preventDefault(),qu(n,ae).each(K)):Of(c,ge.clientX,ge.clientY).each(Ie=>{var ke;ge.preventDefault(),(ke=E(1,Ie.node,Ie.position===OC.Before,!1))&&s.setRng(ke),_r(ae)?ae.focus():n.getBody().focus()})}),n.on("keypress",ge=>{Fe.modifierPressed(ge)||xr(s.getNode())&&ge.preventDefault()}),n.on("GetSelectionRange",ge=>{let re=ge.range;if(g){if(!g.parentNode)return void(g=null);re=re.cloneRange(),re.selectNode(g),ge.range=re}}),n.on("SetSelectionRange",ge=>{ge.range=(ke=>{const ge=n.schema.getVoidElements(),re=a.createRng(),ae=ke.startContainer,Ie=ke.startOffset,qe=ke.endContainer,it=ke.endOffset;return Ke(ge,ae.nodeName.toLowerCase())?0===Ie?re.setStartBefore(ae):re.setStartAfter(ae):re.setStart(ae,Ie),Ke(ge,qe.nodeName.toLowerCase())?0===it?re.setEndBefore(qe):re.setEndAfter(qe):re.setEnd(qe,it),re})(ge.range);const re=K(ge.range,ge.forward);re&&(ge.range=re)}),n.on("AfterSetSelectionRange",ge=>{const re=ge.range,ae=re.startContainer.parentElement;var ke;!F(re)&&!(ge=>$e(ge)&&"mcepastebin"===ge.id)(ae)&&we(),Oe(ke=ae)&&a.hasClass(ke,"mce-offscreen-selection")||J()}),(n=>{X6(n),JT(n)&&(n=>{const s=u=>{if(!u.isDefaultPrevented()){const f=u.dataTransfer;f&&(zt(f.types,"Files")||f.files.length>0)&&(u.preventDefault(),"drop"===u.type&&NP(n,"Dropped file type is not supported"))}},a=u=>{Fb(n,u.target)&&s(u)},c=()=>{const u=pn.DOM,f=n.dom,h=document,g=n.inline?n.getBody():n.getDoc(),_=["drop","dragover"];ue(_,b=>{u.bind(h,b,a),f.bind(g,b,s)}),n.on("remove",()=>{ue(_,b=>{u.unbind(h,b,a),f.unbind(g,b,s)})})};n.on("init",()=>{Si.setEditorTimeout(n,c,0)})})(n)})(n),(n=>{const s=Eg(()=>{if(!n.removed&&n.getBody().contains(document.activeElement)){const a=n.selection.getRng();if(a.collapsed){const c=$p(n,a,!1);n.selection.setRng(c)}}},0);n.on("focus",()=>{s.throttle()}),n.on("blur",()=>{s.cancel()})})(n),(n=>{n.on("init",()=>{n.on("focusin",s=>{const a=s.target;if(al(a)){const c=Bu(n.getBody(),a),u=Pn(c)?c:a;n.selection.getNode()!==u&&qu(n,u).each(f=>n.selection.setRng(f))}})})})(n)),{showCaret:E,showBlockCaretContainer:ke=>{ke.hasAttribute("data-mce-caret")&&(Lg(ke),s.scrollIntoView(ke))},hideFakeCaret:we,destroy:()=>{u.destroy(),g=null}}},NL=(n,s)=>{let a=s;for(let c=n.previousSibling;ye(c);c=c.previousSibling)a+=c.data.length;return a},n8=(n,s,a,c,u)=>{if(ye(a)&&(c<0||c>a.data.length))return[];const f=u&&ye(a)?[NL(a,c)]:[c];let h=a;for(;h!==s&&h.parentNode;)f.push(n.nodeIndex(h,u)),h=h.parentNode;return h===s?f.reverse():[]},RL=(n,s,a,c,u,f,h=!1)=>({start:n8(n,s,a,c,h),end:n8(n,s,u,f,h)}),o8=(n,s)=>{const a=s.slice(),c=a.pop();return ni(c)?$o(a,(f,h)=>f.bind(g=>I.from(g.childNodes[h])),I.some(n)).bind(f=>ye(f)&&(c<0||c>f.data.length)?I.none():I.some({node:f,offset:c})):I.none()},r8=(n,s)=>o8(n,s.start).bind(({node:a,offset:c})=>o8(n,s.end).map(({node:u,offset:f})=>{const h=document.createRange();return h.setStart(a,c),h.setEnd(u,f),h})),Af=(n,s,a)=>{if(s&&n.isEmpty(s)&&!a(s)){const c=s.parentNode;n.remove(s,ye(s.firstChild)&&fs(s.firstChild.data)),Af(n,c,a)}},UC=(n,s,a,c=!0)=>{const u=s.startContainer.parentNode,f=s.endContainer.parentNode;s.deleteContents(),c&&!a(s.startContainer)&&(ye(s.startContainer)&&0===s.startContainer.data.length&&n.remove(s.startContainer),ye(s.endContainer)&&0===s.endContainer.data.length&&n.remove(s.endContainer),Af(n,u,a),u!==f&&Af(n,f,a))},mv=(n,s)=>I.from(n.dom.getParent(s.startContainer,n.dom.isBlock)),jC=(n,s,a)=>{const c=n.dynamicPatternsLookup({text:a,block:s});return{...n,blockPatterns:zy(c).concat(n.blockPatterns),inlinePatterns:MT(c).concat(n.inlinePatterns)}},Bc=(n,s,a,c)=>{const u=n.createRng();return u.setStart(s,0),u.setEnd(a,c),u.toString()},FL=(n,s)=>n.create("span",{"data-mce-type":"bookmark",id:s}),gv=(n,s)=>{const a=n.createRng();return a.setStartAfter(s.start),a.setEndBefore(s.end),a},LL=(n,s,a)=>{const c=r8(n.getRoot(),a).getOrDie("Unable to resolve path range"),u=c.startContainer,f=c.endContainer,h=0===c.endOffset?f:f.splitText(c.endOffset),g=0===c.startOffset?u:u.splitText(c.startOffset),_=g.parentNode;return{prefix:s,end:h.parentNode.insertBefore(FL(n,s+"-end"),h),start:_.insertBefore(FL(n,s+"-start"),g)}},i8=(n,s,a)=>{Af(n,n.get(s.prefix+"-end"),a),Af(n,n.get(s.prefix+"-start"),a)},HC=n=>0===n.start.length,Hk=(n,s,a,c)=>{const u=s.start;return AE(n,c.container,c.offset,(n=>(s,a)=>{const u=s.data.substring(0,a),f=u.lastIndexOf(n.charAt(n.length-1)),h=u.lastIndexOf(n);return-1!==h?h+n.length:-1!==f?f+1:-1})(u),a).bind(h=>{var g,_;const b=null!==(_=null===(g=a.textContent)||void 0===g?void 0:g.indexOf(u))&&void 0!==_?_:-1;if(-1!==b&&h.offset>=b+u.length){const E=n.createRng();return E.setStart(h.container,h.offset-u.length),E.setEnd(h.container,h.offset),I.some(E)}return N2(h.container,h.offset-u.length,a).map(T=>{const N=n.createRng();return N.setStart(T.container,T.offset),N.setEnd(h.container,h.offset),N}).filter(T=>T.toString()===u).orThunk(()=>Hk(n,s,a,fa(h.container,0)))})},BL=(n,s,a,c)=>{const u=n.dom,f=u.getRoot(),h=a.pattern,g=a.position.container,_=a.position.offset;return N2(g,_-a.pattern.end.length,s).bind(b=>{const S=RL(u,f,b.container,b.offset,g,_,c);if(HC(h))return I.some({matches:[{pattern:h,startRng:S,endRng:S}],position:b});{const E=mm(n,a.remainingPatterns,b.container,b.offset,s,c),T=E.getOr({matches:[],position:b}),N=T.position;return((n,s,a,c,u,f=!1)=>{if(0===s.start.length&&!f){const h=n.createRng();return h.setStart(a,c),h.setEnd(a,c),I.some(h)}return A2(a,c,u).bind(h=>Hk(n,s,u,h).bind(_=>{var b;if(f){if(_.endContainer===h.container&&_.endOffset===h.offset)return I.none();if(0===h.offset&&(null===(b=_.endContainer.textContent)||void 0===b?void 0:b.length)===_.endOffset)return I.none()}return I.some(_)}))})(u,h,N.container,N.offset,s,E.isNone()).map(F=>{const U=((n,s,a,c=!1)=>RL(n,s,a.startContainer,a.startOffset,a.endContainer,a.endOffset,c))(u,f,F,c);return{matches:T.matches.concat([{pattern:h,startRng:U,endRng:S}]),position:fa(F.startContainer,F.startOffset)}})}})},mm=(n,s,a,c,u,f)=>{const h=n.dom;return A2(a,c,h.getRoot()).bind(g=>{const _=Bc(h,u,a,c);for(let b=0;b<s.length;b++){const S=s[b];if(!Mn(_,S.end))continue;const E=s.slice();E.splice(b,1);const T=BL(n,u,{pattern:S,remainingPatterns:E,position:g},f);if(T.isNone()&&c>0)return mm(n,s,a,c-1,u,f);if(T.isSome())return T}return I.none()})},VL=(n,s,a)=>{n.selection.setRng(a),"inline-format"===s.type?ue(s.format,c=>{n.formatter.apply(c)}):n.execCommand(s.cmd,!1,s.value)},UL=(n,s,a,c,u,f)=>{const h=mm(n,u.inlinePatterns,a,c,s,f).fold(()=>[],_=>_.matches),g=mm(n,(n=>ri(n,(s,a)=>a.end.length-s.end.length))(u.inlinePatterns),a,c,s,f).fold(()=>[],_=>_.matches);return((n,s)=>{const a=hr(n,c=>Pt(s,u=>c.pattern.start===u.pattern.start&&c.pattern.end===u.pattern.end));return n.length===s.length?a?n:s:n.length>s.length?n:s})(h,g)},zC=(n,s)=>{if(0===s.length)return;const a=n.dom,c=n.selection.getBookmark(),u=((n,s)=>{const a=_c("mce_textpattern"),c=Kc(s,(u,f)=>{const h=LL(n,a+`_end${u.length}`,f.endRng);return u.concat([{...f,endMarker:h}])},[]);return Kc(c,(u,f)=>{const h=c.length-u.length-1,g=HC(f.pattern)?f.endMarker:LL(n,a+`_start${h}`,f.startRng);return u.concat([{...f,startMarker:g}])},[])})(a,s);ue(u,f=>{const h=a.getParent(f.startMarker.start,a.isBlock),g=_=>_===h;HC(f.pattern)?((n,s,a,c)=>{const u=gv(n.dom,a);UC(n.dom,u,c),VL(n,s,u)})(n,f.pattern,f.endMarker,g):((n,s,a,c,u)=>{const f=n.dom,h=gv(f,c),g=gv(f,a);UC(f,g,u),UC(f,h,u);const b=gv(f,{prefix:a.prefix,start:a.end,end:c.start});VL(n,s,b)})(n,f.pattern,f.startMarker,f.endMarker,g),i8(a,f.endMarker,g),i8(a,f.startMarker,g)}),n.selection.moveToBookmark(c)},Wk=(n,s,a)=>((n,s,a)=>{if(ye(n)&&0>=n.length)return I.some(fa(n,0));{const c=dl(IE);return I.from(c.forwards(n,0,OE(n),a)).map(u=>fa(u.container,0))}})(s,0,s).map(c=>{const u=c.container;return ZH(u,a.start.length,s).each(f=>{const h=n.createRng();h.setStart(u,0),h.setEnd(f.container,f.offset),UC(n,h,g=>g===s)}),u}),jL=n=>(s,a)=>{const u=a.pattern,f=r8(s.dom.getRoot(),a.range).getOrDie("Unable to resolve path range");return mv(s,f).each(g=>{"block-format"===u.type?((g,_)=>{const b=_.get(g);return Sn(b)&&go(b).exists(S=>Ke(S,"block"))})(u.format,s.formatter)&&s.undoManager.transact(()=>{n(s.dom,g,u),s.formatter.apply(u.format)}):"block-command"===u.type&&s.undoManager.transact(()=>{n(s.dom,g,u),s.execCommand(u.cmd,!1,u.value)})}),!0},HL=n=>(s,a)=>{const c=(n=>ri(n,(s,a)=>a.start.length-s.start.length))(s),u=a.replace(Jn," ");return vn(c,f=>n(f,a,u))},qk=(n,s)=>(a,c,u,f,h)=>{var g;void 0===h&&(h=null!==(g=c.textContent)&&void 0!==g?g:"");const _=a.dom,b=wr(a);return _.is(c,b)?n(u.blockPatterns,h).map(S=>s&&de.trim(h).length===S.start.length?[]:[{pattern:S,range:RL(_,_.getRoot(),c,0,c,0,f)}]).getOr([]):[]},f8=jL((n,s,a)=>{Wk(n,s,a).each(c=>{const u=j_fromDom(c),f=Ig(u);(n=>/^\s[^\s]/.test(n))(f)&&((n,s)=>{lT.set(n,s)})(u,f.slice(1))})}),h8=HL((n,s,a)=>0===s.indexOf(n.start)||0===a.indexOf(n.start)),WL=qk(h8,!0),Gk=jL(Wk),m8=HL((n,s,a)=>s===n.start||a===n.start),qL=qk(m8,!1),Kk=(n,s,a)=>{for(let c=0;c<n.length;c++)if(a(n[c],s))return!0;return!1},Rf=n=>{const s=[",",".",";",":","!","?"],a=[32],c=()=>((n,s)=>({inlinePatterns:MT(n),blockPatterns:zy(n),dynamicPatternsLookup:s}))(OV(n),AV(n)),u=()=>(n=>n.options.isSet("text_patterns_lookup"))(n);n.on("keydown",h=>{if(13===h.keyCode&&!Fe.modifierPressed(h)&&n.selection.isCollapsed()){const g=SS(c(),"enter");(g.inlinePatterns.length>0||g.blockPatterns.length>0||u())&&((n,s)=>((n,s)=>{const a=n.selection.getRng();return mv(n,a).map(c=>{var u;const f=Math.max(0,a.startOffset),h=jC(s,c,null!==(u=c.textContent)&&void 0!==u?u:"");return{inlineMatches:UL(n,c,a.startContainer,f,h,!0),blockMatches:WL(n,c,h,!0)}}).filter(({inlineMatches:c,blockMatches:u})=>u.length>0||c.length>0)})(n,s).fold(mn,({inlineMatches:a,blockMatches:c})=>(n.undoManager.add(),n.undoManager.extra(()=>{n.execCommand("mceInsertNewLine")},()=>{(n=>{n.insertContent(zo,{preserve_zwsp:!0})})(n),zC(n,a),((n,s)=>{if(0===s.length)return;const a=n.selection.getBookmark();ue(s,c=>f8(n,c)),n.selection.moveToBookmark(a)})(n,c);const u=n.selection.getRng(),f=A2(u.startContainer,u.startOffset,n.dom.getRoot());n.execCommand("mceInsertNewLine"),f.each(h=>{const g=h.container;"\ufeff"===g.data.charAt(h.offset-1)&&(g.deleteData(h.offset-1,1),Af(n.dom,g.parentNode,_=>_===n.dom.getRoot()))})}),!0)))(n,g)&&h.preventDefault()}},!0),n.on("keydown",h=>{if(32===h.keyCode&&n.selection.isCollapsed()){const g=SS(c(),"space");(g.blockPatterns.length>0||u())&&((n,s)=>((n,s)=>{const a=n.selection.getRng();return mv(n,a).map(c=>{const u=Math.max(0,a.startOffset),f=Bc(n.dom,c,a.startContainer,u),h=jC(s,c,f);return qL(n,c,h,!1,f)}).filter(c=>c.length>0)})(n,s).fold(mn,a=>(n.undoManager.transact(()=>{((n,s)=>{ue(s,a=>Gk(n,a))})(n,a)}),!0)))(n,g)&&h.preventDefault()}},!0);const f=()=>{if(n.selection.isCollapsed()){const h=SS(c(),"space");(h.inlinePatterns.length>0||u())&&((n,s)=>{const a=n.selection.getRng();mv(n,a).map(c=>{const u=Math.max(0,a.startOffset-1),f=Bc(n.dom,c,a.startContainer,u),h=jC(s,c,f),g=UL(n,c,a.startContainer,u,h,!1);g.length>0&&n.undoManager.transact(()=>{zC(n,g)})})})(n,h)}};n.on("keyup",h=>{((n,s)=>Kk(n,s,(a,c)=>a===c.keyCode&&!Fe.modifierPressed(c)))(a,h)&&f()}),n.on("keypress",h=>{((n,s)=>Kk(n,s,(a,c)=>a.charCodeAt(0)===c.charCode))(s,h)&&Si.setEditorTimeout(n,f)})},Ff=pn.DOM,QL=n=>n.inline?n.getElement().nodeName.toLowerCase():void 0,XL=n=>Ns(n,s=>!1===Vo(s)),x8=n=>{const s=n.options.get,a=n.editorUpload.blobCache;return XL({allow_conditional_comments:s("allow_conditional_comments"),allow_html_data_urls:s("allow_html_data_urls"),allow_svg_data_urls:s("allow_svg_data_urls"),allow_html_in_named_anchor:s("allow_html_in_named_anchor"),allow_script_urls:s("allow_script_urls"),allow_unsafe_link_target:s("allow_unsafe_link_target"),convert_unsafe_embeds:s("convert_unsafe_embeds"),convert_fonts_to_spans:s("convert_fonts_to_spans"),fix_list_elements:s("fix_list_elements"),font_size_legacy_values:s("font_size_legacy_values"),forced_root_block:s("forced_root_block"),forced_root_block_attrs:s("forced_root_block_attrs"),preserve_cdata:s("preserve_cdata"),inline_styles:s("inline_styles"),root_name:QL(n),sandbox_iframes:s("sandbox_iframes"),sandbox_iframes_exclusions:iM(n),sanitize:s("xss_sanitization"),validate:!0,blob_cache:a,document:n.getDoc()})},P8=n=>{const s=n.options.get;return XL({custom_elements:s("custom_elements"),extended_valid_elements:s("extended_valid_elements"),invalid_elements:s("invalid_elements"),invalid_styles:s("invalid_styles"),schema:s("schema"),valid_children:s("valid_children"),valid_classes:s("valid_classes"),valid_elements:s("valid_elements"),valid_styles:s("valid_styles"),verify_html:s("verify_html"),padd_empty_block_inline_children:s("format_empty_lines")})},tB=n=>n.inline?n.ui.styleSheetLoader:n.dom.styleSheetLoader,k8=n=>{const s=tB(n),a=Zy(n),c=n.contentCSS,u=()=>{s.unloadAll(c),n.inline||n.ui.styleSheetLoader.unloadAll(a)},f=()=>{n.removed?u():n.on("remove",u)};if(n.contentStyles.length>0){let _="";de.each(n.contentStyles,b=>{_+=b+"\r\n"}),n.dom.addStyle(_)}const h=Promise.all(((n,s,a)=>{const{pass:c,fail:u}=as(s,g=>tinymce.Resource.has(Ow(g))),h=[...c.map(g=>{const _=tinymce.Resource.get(Ow(g));return Ye(_)?Promise.resolve(tB(n).loadRawCss(g,_)):Promise.resolve()}),tB(n).loadAll(u)];return n.inline?h:h.concat([n.ui.styleSheetLoader.loadAll(a)])})(n,c,a)).then(f).catch(f),g=Ky(n);return g&&((n,s)=>{const a=j_fromDom(n.getBody()),c=lc(Ia(a)),u=j_fromTag("style");Oo(u,"type","text/css"),Yn(u,j_fromText(s)),Yn(c,u),n.on("remove",()=>{M(u)})})(n,g),h},Zk=n=>{!0!==n.removed&&((n=>{Ic(n)||n.load({initial:!0,format:"html"}),n.startContent=n.getContent({format:"raw"})})(n),(n=>{n.bindPendingEventDelegates(),n.initialized=!0,(n=>{n.dispatch("Init")})(n),n.focus(!0),(n=>{const s=n.dom.getRoot();!n.inline&&(!r1(n)||n.selection.getStart(!0)===s)&&Wr(s).each(a=>{const c=a.getNode(),u=Xr(c)?Wr(c).getOr(a):a;n.selection.setRng(u.toRange())})})(n),n.nodeChanged({initial:!0});const s=xV(n);Zt(s)&&s.call(n,n),(n=>{const s=PV(n);s&&Si.setEditorTimeout(n,()=>{let a;a=!0===s?n:n.editorManager.get(s),a&&!a.destroyed&&(a.focus(),a.selection.scrollIntoView())},100)})(n)})(n))},Yk=n=>{const s=n.getElement();let a=n.getDoc();n.inline&&(Ff.addClass(s,"mce-content-body"),n.contentDocument=a=document,n.contentWindow=window,n.bodyElement=s,n.contentAreaContainer=s);const c=n.getBody();c.disabled=!0,n.readonly=KT(n),n._editableRoot=ZT(n),!n.readonly&&n.hasEditableRoot()&&(n.inline&&"static"===Ff.getStyle(c,"position",!0)&&(c.style.position="relative"),c.contentEditable="true"),c.disabled=!1,n.editorUpload=Nw(n),n.schema=du(P8(n)),n.dom=pn(a,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,update_styles:!0,root_element:n.inline?n.getBody():null,collect:n.inline,schema:n.schema,contentCssCors:_V(n),referrerPolicy:AS(n),onSetAttrib:h=>{n.dispatch("SetAttrib",h)}}),n.parser=(n=>{const s=Ap(x8(n),n.schema);return s.addAttributeFilter("src,href,style,tabindex",(a,c)=>{const u=n.dom,f="data-mce-"+c;let h=a.length;for(;h--;){const g=a[h];let _=g.attr(c);if(_&&!g.attr(f)){if(0===_.indexOf("data:")||0===_.indexOf("blob:"))continue;"style"===c?(_=u.serializeStyle(u.parseStyle(_),g.name),_.length||(_=null),g.attr(f,_),g.attr(c,_)):"tabindex"===c?(g.attr(f,_),g.attr(c,null)):g.attr(f,n.convertURL(_,c,g.name))}}}),s.addNodeFilter("script",a=>{let c=a.length;for(;c--;){const u=a[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),nM(n)&&s.addNodeFilter("#cdata",a=>{var c;let u=a.length;for(;u--;){const f=a[u];f.type=8,f.name="#comment",f.value="[CDATA["+n.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),s.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",a=>{let c=a.length;const u=n.schema.getNonEmptyElements();for(;c--;){const f=a[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new qr("br",1))}}),s})(n),n.serializer=F5((n=>{const s=n.options.get;return{...x8(n),...P8(n),...XL({remove_trailing_brs:s("remove_trailing_brs"),pad_empty_with_br:s("pad_empty_with_br"),url_converter:s("url_converter"),url_converter_scope:s("url_converter_scope"),element_format:s("element_format"),entities:s("entities"),entity_encoding:s("entity_encoding"),indent:s("indent"),indent_after:s("indent_after"),indent_before:s("indent_before")})}})(n),n),n.selection=QN(n.dom,n.getWin(),n.serializer,n),n.annotator=l$(n),n.formatter=r4(n),n.undoManager=a4(n),n._nodeChangeDispatcher=new pk(n),n._selectionOverrides=t8(n),(n=>{const s=mi(),a=No(!1),c=kg(u=>{n.dispatch("longpress",{...u,type:"longpress"}),a.set(!0)},400);n.on("touchstart",u=>{s2(u).each(f=>{c.cancel();const h={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),a.set(!1),s.set(h)})},!0),n.on("touchmove",u=>{c.cancel(),s2(u).each(f=>{s.on(h=>{((n,s)=>{const a=Math.abs(n.clientX-s.x),c=Math.abs(n.clientY-s.y);return a>5||c>5})(f,h)&&(s.clear(),a.set(!1),n.dispatch("longpresscancel"))})})},!0),n.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&s.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{a.get()?u.preventDefault():n.dispatch("tap",{...u,type:"tap"})})},!0)})(n),(n=>{(n=>{n.on("click",s=>{n.dom.getParent(s.target,"details")&&s.preventDefault()})})(n),(n=>{n.parser.addNodeFilter("details",s=>{const a=sM(n);ue(s,c=>{"expanded"===a?c.attr("open","open"):"collapsed"===a&&c.attr("open",null)})}),n.serializer.addNodeFilter("details",s=>{const a=R7(n);ue(s,c=>{"expanded"===a?c.attr("open","open"):"collapsed"===a&&c.attr("open",null)})})})(n)})(n),(n=>{const s="contenteditable",a=" "+de.trim(NV(n))+" ",c=" "+de.trim(tM(n))+" ",u=wH(a),f=wH(c),h=RV(n);h.length>0&&n.on("BeforeSetContent",g=>{((n,s,a)=>{let c=s.length,u=a.content;if("raw"!==a.format){for(;c--;)u=u.replace(s[c],Tq(n,u,tM(n)));a.content=u}})(n,h,g)}),n.parser.addAttributeFilter("class",g=>{let _=g.length;for(;_--;){const b=g[_];u(b)?b.attr(s,"true"):f(b)&&b.attr(s,"false")}}),n.serializer.addAttributeFilter(s,g=>{let _=g.length;for(;_--;){const b=g[_];!u(b)&&!f(b)||(h.length>0&&b.attr("data-mce-content")?(b.name="#text",b.type=3,b.raw=!0,b.value=b.attr("data-mce-content")):b.attr(s,null))}})})(n),Ic(n)||((n=>{n.on("mousedown",s=>{s.detail>=3&&(s.preventDefault(),_G(n))})})(n),(n=>{Rf(n)})(n));const u=lm(n);Pq(n,u),(n=>{n.on("NodeChange",Ve(kq,n))})(n),(n=>{var s;const a=n.dom,c=wr(n),u=null!==(s=Ud(n))&&void 0!==s?s:"",f=(h,g)=>{if((n=>{if(l4(n)){const s=n.keyCode;return!u4(n)&&(Fe.metaKeyPressed(n)||n.altKey||s>=112&&s<=123||zt(XW,s))}return!1})(h))return;const _=n.getBody(),b=!(n=>l4(n)&&!(u4(n)||"keyup"===n.type&&229===n.keyCode))(h)&&((n,s,a)=>{if(n.isEmpty(s,void 0,{skipBogus:!1,includeZwsp:!0})){const c=s.firstElementChild;return!c||!n.getStyle(s.firstElementChild,"padding-left")&&!n.getStyle(s.firstElementChild,"padding-right")&&a===c.nodeName.toLowerCase()}return!1})(a,_,c);(""!==a.getAttrib(_,c4)!==b||g)&&(a.setAttrib(_,c4,b?u:null),((n,s)=>{n.dispatch("PlaceholderToggle",{state:s})})(n,b),n.on(b?"keydown":"keyup",f),n.off(b?"keyup":"keydown",f))};Ui(u)&&n.on("init",h=>{f(h,!0),n.on("change SetContent ExecCommand",f),n.on("paste",g=>Si.setEditorTimeout(n,()=>f(g)))})})(n),CL(n);const f=(n=>{const s=n;return(n=>Nt(n.plugins,"rtc").bind(s=>I.from(s.setup)))(n).fold(()=>(s.rtcInstance=UN(n),I.none()),a=>(s.rtcInstance=(()=>{const n=Ae(null),s=Ae("");return{init:{bindEvents:ut},undoManager:{beforeChange:ut,add:n,undo:n,redo:n,clear:ut,reset:ut,hasUndo:mn,hasRedo:mn,transact:n,ignore:ut,extra:ut},formatter:{match:mn,matchAll:Ae([]),matchNode:Ae(void 0),canApply:mn,closest:s,apply:ut,remove:ut,toggle:ut,formatChanged:Ae({unbind:ut})},editor:{getContent:s,setContent:Ae({content:"",html:""}),insertContent:Ae(""),addVisual:ut},selection:{getContent:s},autocompleter:{addDecoration:ut,removeDecoration:ut},raw:{getModel:Ae(I.none())}}})(),I.some(()=>a().then(c=>(s.rtcInstance=(n=>{const s=b=>ko(b)?b:{},{init:a,undoManager:c,formatter:u,editor:f,selection:h,autocompleter:g,raw:_}=n;return{init:{bindEvents:a.bindEvents},undoManager:{beforeChange:c.beforeChange,add:c.add,undo:c.undo,redo:c.redo,clear:c.clear,reset:c.reset,hasUndo:c.hasUndo,hasRedo:c.hasRedo,transact:(b,S,E)=>c.transact(E),ignore:(b,S)=>c.ignore(S),extra:(b,S,E,T)=>c.extra(E,T)},formatter:{match:(b,S,E,T)=>u.match(b,s(S),T),matchAll:u.matchAll,matchNode:u.matchNode,canApply:b=>u.canApply(b),closest:b=>u.closest(b),apply:(b,S,E)=>u.apply(b,s(S)),remove:(b,S,E,T)=>u.remove(b,s(S)),toggle:(b,S,E)=>u.toggle(b,s(S)),formatChanged:(b,S,E,T,N)=>u.formatChanged(S,E,T,N)},editor:{getContent:b=>f.getContent(b),setContent:(b,S)=>({content:f.setContent(b,S),html:""}),insertContent:(b,S)=>(f.insertContent(b),""),addVisual:f.addVisual},selection:{getContent:(b,S)=>h.getContent(S)},autocompleter:{addDecoration:g.addDecoration,removeDecoration:g.removeDecoration},raw:{getModel:()=>I.some(_.getRawModel())}}})(c),c.rtc.isRemote)))))})(n);(n=>{const s=n.getDoc(),a=n.getBody();(n=>{n.dispatch("PreInit")})(n),nb(n)||(s.body.spellcheck=!1,Ff.setAttrib(a,"spellcheck","false")),n.quirks=(n=>{const s=de.each,a=Fe.BACKSPACE,c=Fe.DELETE,u=n.dom,f=n.selection,h=n.parser,g=It.browser,_=g.isFirefox(),b=g.isChromium()||g.isSafari(),S=It.deviceType.isiPhone()||It.deviceType.isiPad(),E=It.os.isMacOS()||It.os.isiOS(),T=(Me,Ze)=>{try{n.getDoc().execCommand(Me,!1,String(Ze))}catch{}},N=Me=>Me.isDefaultPrevented(),F=()=>{n.shortcuts.add("meta+a",null,"SelectAll")},U=()=>{n.inline||u.bind(n.getDoc(),"mousedown mouseup",Me=>{let Ze;if(Me.target===n.getDoc().documentElement)if(Ze=f.getRng(),n.getBody().focus(),"mousedown"===Me.type){if(Vs(Ze.startContainer))return;f.placeCaretAt(Me.clientX,Me.clientY)}else f.setRng(Ze)})},Z=()=>{Range.prototype.getClientRects||n.on("mousedown",Me=>{if(!N(Me)&&"HTML"===Me.target.nodeName){const Ze=n.getBody();Ze.blur(),Si.setEditorTimeout(n,()=>{Ze.focus()})}})},K=()=>{const Me=tb(n);n.on("click",Ze=>{const pt=Ze.target;/^(IMG|HR)$/.test(pt.nodeName)&&u.isEditable(pt)&&(Ze.preventDefault(),n.selection.select(pt),n.nodeChanged()),"A"===pt.nodeName&&u.hasClass(pt,Me)&&0===pt.childNodes.length&&u.isEditable(pt.parentNode)&&(Ze.preventDefault(),f.select(pt))})},he=()=>{n.on("keydown",Me=>{if(!N(Me)&&Me.keyCode===a&&f.isCollapsed()&&0===f.getRng().startOffset){const Ze=f.getNode().previousSibling;if(Ze&&Ze.nodeName&&"table"===Ze.nodeName.toLowerCase())return Me.preventDefault(),!1}return!0})},ke=()=>{KT(n)||n.on("BeforeExecCommand mousedown",()=>{T("StyleWithCSS",!1),T("enableInlineTableEditing",!1),Yy(n)||T("enableObjectResizing",!1)})},qe=()=>{n.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},it=()=>{n.inline||n.on("keydown",()=>{document.activeElement===document.body&&n.getWin().focus()})},bt=()=>{n.inline||(n.contentStyles.push("body {min-height: 150px}"),n.on("click",Me=>{let Ze;"HTML"===Me.target.nodeName&&(Ze=n.selection.getRng(),n.getBody().focus(),n.selection.setRng(Ze),n.selection.normalize(),n.nodeChanged())}))},Kt=()=>{E&&n.on("keydown",Me=>{Fe.metaKeyPressed(Me)&&!Me.shiftKey&&(37===Me.keyCode||39===Me.keyCode)&&(Me.preventDefault(),n.selection.getSel().modify("move",37===Me.keyCode?"backward":"forward","lineboundary"))})},en=()=>{n.on("click",Me=>{let Ze=Me.target;do{if("A"===Ze.tagName)return void Me.preventDefault()}while(Ze=Ze.parentNode)}),n.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ln=()=>{n.on("init",()=>{n.dom.bind(n.getBody(),"submit",Me=>{Me.preventDefault()})})},on=ut;return Ic(n)?(b&&(U(),K(),ln(),F(),S&&(it(),bt(),en())),_&&(Z(),ke(),qe(),Kt())):(n.on("keydown",Me=>{if(N(Me)||Me.keyCode!==Fe.BACKSPACE)return;let Ze=f.getRng();const pt=Ze.startContainer,De=Ze.startOffset,dt=u.getRoot();let _t=pt;if(Ze.collapsed&&0===De){for(;_t.parentNode&&_t.parentNode.firstChild===_t&&_t.parentNode!==dt;)_t=_t.parentNode;"BLOCKQUOTE"===_t.nodeName&&(n.formatter.toggle("blockquote",void 0,_t),Ze=u.createRng(),Ze.setStart(pt,0),Ze.setEnd(pt,0),f.setRng(Ze))}}),(()=>{const Me=pt=>{const De=u.create("body"),dt=pt.cloneContents();return De.appendChild(dt),f.serializer.serialize(De,{format:"html"})};n.on("keydown",pt=>{const De=pt.keyCode;if(!N(pt)&&(De===c||De===a)&&n.selection.isEditable()){const dt=n.selection.isCollapsed(),_t=n.getBody();if(dt&&!hs(n.schema,_t)||!dt&&!(pt=>{const De=Me(pt),dt=u.createRng();return dt.selectNode(n.getBody()),De===Me(dt)})(n.selection.getRng()))return;pt.preventDefault(),n.setContent(""),_t.firstChild&&u.isBlock(_t.firstChild)?n.selection.setCursorLocation(_t.firstChild,0):n.selection.setCursorLocation(_t,0),n.nodeChanged()}})})(),It.windowsPhone||n.on("keyup focusin mouseup",Me=>{!Fe.modifierPressed(Me)&&!(Me=>{const Ze=Me.getBody(),pt=Me.selection.getRng();return pt.startContainer===pt.endContainer&&pt.startContainer===Ze&&0===pt.startOffset&&pt.endOffset===Ze.childNodes.length})(n)&&f.normalize()},!0),b&&(U(),K(),n.on("init",()=>{T("DefaultParagraphSeparator",wr(n))}),ln(),he(),h.addNodeFilter("br",Me=>{let Ze=Me.length;for(;Ze--;)"Apple-interchange-newline"===Me[Ze].attr("class")&&Me[Ze].remove()}),S?(it(),bt(),en()):F()),_&&(n.on("keydown",Me=>{if(!N(Me)&&Me.keyCode===a){if(!n.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&0===f.getRng().startOffset){const Ze=f.getNode(),pt=Ze.previousSibling;if("HR"===Ze.nodeName)return u.remove(Ze),void Me.preventDefault();pt&&pt.nodeName&&"hr"===pt.nodeName.toLowerCase()&&(u.remove(pt),Me.preventDefault())}}}),Z(),(()=>{const Me=()=>{const pt=u.getAttribs(f.getStart().cloneNode(!1));return()=>{const De=f.getStart();De!==n.getBody()&&(u.setAttrib(De,"style",null),s(pt,dt=>{De.setAttributeNode(dt.cloneNode(!0))}))}},Ze=()=>!f.isCollapsed()&&u.getParent(f.getStart(),u.isBlock)!==u.getParent(f.getEnd(),u.isBlock);n.on("keypress",pt=>{let De;return!(!(N(pt)||8!==pt.keyCode&&46!==pt.keyCode)&&Ze()&&(De=Me(),n.getDoc().execCommand("delete",!1),De(),pt.preventDefault(),1))}),u.bind(n.getDoc(),"cut",pt=>{if(!N(pt)&&Ze()){const De=Me();Si.setEditorTimeout(n,()=>{De()})}})})(),ke(),n.on("SetContent ExecCommand",Ze=>{("setcontent"===Ze.type||"mceInsertLink"===Ze.command)&&s(u.select("a:not([data-mce-block])"),Ze=>{var pt;let De=Ze.parentNode;const dt=u.getRoot();if(De?.lastChild===Ze){for(;De&&!u.isBlock(De);){if((null===(pt=De.parentNode)||void 0===pt?void 0:pt.lastChild)!==De||De===dt)return;De=De.parentNode}u.add(De,"br",{"data-mce-bogus":1})}})}),qe(),Kt(),he())),{refreshContentEditable:on,isHidden:()=>{if(!_||n.removed)return!1;const Me=n.selection.getSel();return!Me||!Me.rangeCount||0===Me.rangeCount}}})(n),(n=>{n.dispatch("PostRender")})(n);const c=yV(n);void 0!==c&&(a.dir=c);const u=BS(n);u&&n.on("BeforeSetContent",f=>{de.each(u,h=>{f.content=f.content.replace(h,g=>"\x3c!--mce:protected "+escape(g)+"--\x3e")})}),n.on("SetContent",()=>{n.addVisual(n.getBody())}),n.on("compositionstart compositionend",f=>{n.composing="compositionstart"===f.type})})(n),(n=>{const s=US(n);!Ye(F7(n))&&(Vo(s)||"INVALID"===(n=>(n=>"gpl"===n.toLowerCase())(n)||(n=>n.length>=64&&n.length<=255)(n)?"VALID":"INVALID")(s))&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(n),f.fold(()=>{const h=(n=>{let s=!1;const a=setTimeout(()=>{s||n.setProgressState(!0)},500);return()=>{clearTimeout(a),s=!0,n.setProgressState(!1)}})(n);k8(n).then(()=>{Zk(n),h()})},h=>{n.setProgressState(!0),k8(n).then(()=>{h().then(g=>{n.setProgressState(!1),Zk(n),CP(n)},g=>{n.notificationManager.open({type:"error",text:String(g)}),Zk(n),CP(n)})})})},oB=ro,_v=pn.DOM,Lf=pn.DOM,vv=(n,s)=>({editorContainer:n,iframeContainer:s,api:{}}),et=n=>{const s=n.getElement();return n.inline?vv(null):(n=>{const s=Lf.create("div");return Lf.insertAfter(s,n),vv(s,s)})(s)},A8=function(){var n=Yr(function*(s){s.dispatch("ScriptsLoaded"),(n=>{const s=de.trim($d(n)),a=n.ui.registry.getAll().icons,c={...MP.get("default").icons,...MP.get(s).icons};Ut(c,(u,f)=>{Ke(a,f)||n.ui.registry.addIcon(f,u)})})(s),(n=>{const s=jh(n);if(Ye(s)){const a=Lp.get(s);n.theme=a(n,Lp.urls[s])||{},Zt(n.theme.init)&&n.theme.init(n,Lp.urls[s]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(s),(n=>{const s=Hh(n),a=Hu.get(s);n.model=a(n,Hu.urls[s])})(s),(n=>{const s=[];ue(Xy(n),a=>{((n,s,a)=>{const c=V_.get(a),u=V_.urls[a]||n.documentBaseUrl.replace(/\/$/,"");if(a=de.trim(a),c&&-1===de.inArray(s,a)){if(n.plugins[a])return;try{const f=c(n,u)||{};n.plugins[a]=f,Zt(f.init)&&(f.init(n,u),s.push(a))}catch(f){((n,s,a)=>{const c=ea.translate(["Failed to initialize plugin: {0}",s]);eI(n,"PluginLoadError",{message:c}),FP(c,a),NP(n,c)})(n,a,f)}}})(n,s,(n=>n.replace(/^\-/,""))(a))})})(s);const a=yield(n=>{const s=n.getElement();return n.orgDisplay=s.style.display,Ye(jh(n))?(n=>{const s=n.theme.renderUI;return s?s():et(n)})(n):Zt(jh(n))?(n=>{const s=n.getElement(),c=jh(n)(n,s);return c.editorContainer.nodeType&&(c.editorContainer.id=c.editorContainer.id||n.id+"_parent"),c.iframeContainer&&c.iframeContainer.nodeType&&(c.iframeContainer.id=c.iframeContainer.id||n.id+"_iframecontainer"),c.height=c.iframeHeight?c.iframeHeight:s.offsetHeight,c})(n):et(n)})(s);((n,s)=>{const a={show:I.from(s.show).getOr(ut),hide:I.from(s.hide).getOr(ut),isEnabled:I.from(s.isEnabled).getOr(ro),setEnabled:c=>{n.mode.isReadOnly()||I.from(s.setEnabled).each(u=>u(c))}};n.ui={...n.ui,...a}})(s,I.from(a.api).getOr({})),s.editorContainer=a.editorContainer,(n=>{n.contentCSS=n.contentCSS.concat((n=>Z5(n,Wg(n)))(n),(n=>Z5(n,Zy(n)))(n))})(s),s.inline?Yk(s):((n,s)=>{((n,s)=>{const a=n.translate("Rich Text Area"),c=Ma(j_fromDom(n.getElement()),"tabindex").bind(ji),u=((n,s,a,c)=>{const u=j_fromTag("iframe");return c.each(f=>Oo(u,"tabindex",f)),qi(u,a),qi(u,{id:n+"_ifr",frameBorder:"0",allowTransparency:"true",title:s}),Gi(u,"tox-edit-area__iframe"),u})(n.id,a,uV(n),c).dom;u.onload=()=>{u.onload=null,n.dispatch("load")},n.contentAreaContainer=s.iframeContainer,n.iframeElement=u,n.iframeHTML=(n=>{let s=AT(n)+"<html><head>";NT(n)!==n.documentBaseUrl&&(s+='<base href="'+n.documentBaseURI.getURI()+'" />'),s+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const a=RT(n),c=dV(n),u=n.translate(Wh(n));return DS(n)&&(s+='<meta http-equiv="Content-Security-Policy" content="'+DS(n)+'" />'),s+=`</head><body id="${a}" class="mce-content-body ${c}" data-id="${n.id}" aria-label="${u}"><br></body></html>`,s})(n),_v.add(s.iframeContainer,u)})(n,s),s.editorContainer&&(s.editorContainer.style.display=n.orgDisplay,n.hidden=_v.isHidden(s.editorContainer)),n.getElement().style.display="none",_v.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(n=>{const s=n.iframeElement,a=()=>{n.contentDocument=s.contentDocument,Yk(n)};if(LV(n)||It.browser.isFirefox()){const c=n.getDoc();c.open(),c.write(n.iframeHTML),c.close(),a()}else{const c=((n,s,a)=>Lr(n,"load",oB,a))(j_fromDom(s),0,()=>{c.unbind(),a()});s.srcdoc=n.iframeHTML}})(n)})(s,{editorContainer:a.editorContainer,iframeContainer:a.iframeContainer})});return function(a){return n.apply(this,arguments)}}(),Bf=pn.DOM,lB=n=>"-"===n.charAt(0),dB=(n,s,a)=>I.from(s).filter(c=>Ui(c)&&!MP.has(c)).map(c=>({url:`${n.editorManager.baseURL}/icons/${c}/icons${a}.js`,name:I.some(c)})),R8=(n,s)=>{const a=gc.ScriptLoader,c=()=>{!n.removed&&(n=>{const s=jh(n);return!Ye(s)||Oe(Lp.get(s))})(n)&&(n=>{const s=Hh(n);return Oe(Hu.get(s))})(n)&&A8(n)};((n,s)=>{const a=jh(n);if(Ye(a)&&!lB(a)&&!Ke(Lp.urls,a)){const c=A7(n),u=c?n.documentBaseURI.toAbsolute(c):`themes/${a}/theme${s}.js`;Lp.load(a,u).catch(()=>{((n,s,a)=>{bf(n,"ThemeLoadError",Iw("theme",s,a))})(n,u,a)})}})(n,s),((n,s)=>{const a=Hh(n);if("plugin"!==a&&!Ke(Hu.urls,a)){const c=wV(n),u=Ye(c)?n.documentBaseURI.toAbsolute(c):`models/${a}/model${s}.js`;Hu.load(a,u).catch(()=>{((n,s,a)=>{bf(n,"ModelLoadError",Iw("model",s,a))})(n,u,a)})}})(n,s),((n,s)=>{const a=BT(s),c=vV(s);if(!ea.hasCode(a)&&"en"!==a){const u=Ui(c)?c:`${s.editorManager.baseURL}/langs/${a}.js`;n.add(u).catch(()=>{((n,s,a)=>{bf(n,"LanguageLoadError",Iw("language",s,a))})(s,u,a)})}})(a,n),((n,s,a)=>{const c=dB(s,"default",a),u=(n=>I.from(qy(n)).filter(Ui).map(s=>({url:s,name:I.none()})))(s).orThunk(()=>dB(s,$d(s),""));ue((n=>{const s=[],a=c=>{s.push(c)};for(let c=0;c<n.length;c++)n[c].each(a);return s})([c,u]),f=>{n.add(f.url).catch(()=>{((n,s,a)=>{bf(n,"IconsLoadError",Iw("icons",s,a))})(s,f.url,f.name.getOrUndefined())})})})(a,n,s),((n,s)=>{const a=(c,u)=>{V_.load(c,u).catch(()=>{((n,s,a)=>{bf(n,"PluginLoadError",Iw("plugin",s,a))})(n,u,c)})};Ut(CV(n),(c,u)=>{a(u,c),n.options.set("plugins",Xy(n).concat(u))}),ue(Xy(n),c=>{(c=de.trim(c))&&!V_.urls[c]&&!lB(c)&&a(c,`plugins/${c}/plugin${s}.js`)})})(n,s),a.loadQueue().then(c,c)},$f=Rs().deviceType,KC=$f.isPhone(),ZC=$f.isTablet(),bv=n=>{if(mo(n))return[];{const s=Sn(n)?n:n.split(/[ ,]/),a=Xe(s,tu);return nt(a,Ui)}},wv=(n,s)=>Ke(n.sections(),s),tD=(n,s)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Nt(n,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...s?{menubar:!1}:{}}),B8=(n,s)=>{var a;const c=null!==(a=s.external_plugins)&&void 0!==a?a:{};return n&&n.external_plugins?de.extend({},n.external_plugins,c):c},Cv=(n,s,a,c,u)=>{var f;const h=n?{mobile:tD(null!==(f=u.mobile)&&void 0!==f?f:{},s)}:{},g=((n,s)=>{const a=((n,s)=>{const a={},c={};return un(n,s,ld(a),ld(c)),{t:a,f:c}})(s,(c,u)=>zt(n,u));return((n,s)=>({sections:Ae(n),options:Ae(s)}))(a.t,a.f)})(["mobile"],sC(h,u)),_=de.extend(a,c,g.options(),((n,s)=>n&&wv(s,"mobile"))(n,g)?((n,s,a={})=>{const c=n.sections(),u=Nt(c,s).getOr({});return de.extend({},a,u)})(g,"mobile"):{},{external_plugins:B8(c,g.options())});return((n,s,a,c)=>{const u=bv(a.forced_plugins),f=bv(c.plugins),h=((n,s)=>wv(n,s)?n.sections()[s]:{})(s,"mobile"),_=((n,s,a,c)=>n&&wv(s,"mobile")?c:a)(n,s,f,h.plugins?bv(h.plugins):f),b=((n,s)=>[...bv(n),...bv(s)])(u,_);return de.extend(c,{forced_plugins:u,plugins:b})})(n,g,c,_)},VG=n=>{(n=>{const a=c=>()=>{ue("left,center,right,justify".split(","),u=>{c!==u&&n.formatter.remove("align"+u)}),"none"!==c&&((c,u)=>{n.formatter.toggle(c,void 0),n.nodeChanged()})("align"+c)};n.editorCommands.addCommands({JustifyLeft:a("left"),JustifyCenter:a("center"),JustifyRight:a("right"),JustifyFull:a("justify"),JustifyNone:a("none")})})(n),(n=>{const s=a=>()=>{const c=n.selection,u=c.isCollapsed()?[n.dom.getParent(c.getNode(),n.dom.isBlock)]:c.getSelectedBlocks();return Pt(u,f=>Oe(n.formatter.matchNode(f,a)))};n.editorCommands.addCommands({JustifyLeft:s("alignleft"),JustifyCenter:s("aligncenter"),JustifyRight:s("alignright"),JustifyFull:s("alignjustify")},"state")})(n)},jG=(n,s)=>{const a=n.selection,c=n.dom;return/^ | $/.test(s)?((n,s,a,c)=>{const u=j_fromDom(n.getRoot());return a=g_(u,se.fromRangeStart(s),c)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Pe(u,se.fromRangeEnd(s),c)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(c,a.getRng(),s,n.schema):s},nD=(n,s)=>{if(n.selection.isEditable()){const{content:a,details:c}=(n=>{if("string"!=typeof n){const s=de.extend({paste:n.paste,data:{paste:n.paste}},n);return{content:n.content,details:s}}return{content:n,details:{}}})(s);bN(n,{...c,content:jG(n,a),format:"html",set:!1,selection:!0}).each(u=>{const f=((n,s,a)=>Sw(n).editor.insertContent(s,a))(n,u.content,c);vw(n,f,u),n.addVisual()})}},zG={"font-size":"size","font-family":"face"},z8=pr("font"),G8=n=>(s,a)=>I.from(a).map(j_fromDom).filter(Ar).bind(c=>((n,s,a)=>bx(j_fromDom(a),f=>(f=>bd(f,n).orThunk(()=>z8(f)?Nt(zG,n).bind(h=>Ma(f,h)):I.none()))(f),f=>mt(j_fromDom(s),f)))(n,s,c.dom).or(((n,s)=>I.from(pn.DOM.getStyle(s,n,!0)))(n,c.dom))).getOr(""),K8=G8("font-size"),Z8=As(n=>n.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),G8("font-family")),wB=n=>Wr(n.getBody()).bind(s=>{const a=s.container();return I.from(ye(a)?a.parentNode:a)}),YC=(n,s)=>((n,s)=>(n=>I.from(n.selection.getRng()).bind(s=>{const a=n.getBody();return s.startContainer===a&&0===s.startOffset?I.none():I.from(n.selection.getStart(!0))}))(n).orThunk(Ve(wB,n)).map(j_fromDom).filter(Ar).bind(s))(n,Mm(I.some,s)),CB=(n,s)=>{if(/^[0-9.]+$/.test(s)){const a=parseInt(s,10);if(a>=1&&a<=7){const c=(n=>de.explode(n.options.get("font_size_style_values")))(n),u=(n=>de.explode(n.options.get("font_size_classes")))(n);return u.length>0?u[a-1]||s:c[a-1]||s}return s}return s},SB=n=>{const s=n.split(/\s*,\s*/);return Xe(s,a=>-1===a.indexOf(" ")||vo(a,'"')||vo(a,"'")?a:`'${a}'`).join(",")},t9=(n,s)=>{const a=n.dom,c=n.selection.getRng(),u=s?n.selection.getStart():n.selection.getEnd(),f=s?c.startContainer:c.endContainer,h=ov(a,f);if(!h||!h.isContentEditable)return;const g=s?Fr:Ji,_=wr(n);((n,s,a,c)=>{const u=n.dom,f=g=>u.isBlock(g)&&g.parentElement===a,h=f(s)?s:u.getParent(c,f,a);return I.from(h).map(j_fromDom)})(n,u,h,f).each(b=>{const S=yC(n,f,b.dom,h,!1,_);g(b,j_fromDom(S)),n.selection.setCursorLocation(S,0),n.dispatch("NewBlock",{newBlock:S}),tm(n,"insertParagraph")})},DB=n=>{VG(n),(n=>{n.editorCommands.addCommands({"Cut,Copy,Paste":s=>{const a=n.getDoc();let c;try{a.execCommand(s)}catch{c=!0}if("paste"===s&&!a.queryCommandEnabled(s)&&(c=!0),c||!a.queryCommandSupported(s)){let u=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(It.os.isMacOS()||It.os.isiOS())&&(u=u.replace(/Ctrl\+/g,"\u2318+")),n.notificationManager.open({text:u,type:"error"})}}})})(n),(n=>{n.editorCommands.addCommands({mceAddUndoLevel:()=>{n.undoManager.add()},mceEndUndoLevel:()=>{n.undoManager.add()},Undo:()=>{n.undoManager.undo()},Redo:()=>{n.undoManager.redo()}})})(n),(n=>{n.editorCommands.addCommands({mceSelectNodeDepth:(s,a,c)=>{let u=0;n.dom.getParent(n.selection.getNode(),f=>!$e(f)||u++!==c||(n.selection.select(f),!1),n.getBody())},mceSelectNode:(s,a,c)=>{n.selection.select(c)},selectAll:()=>{const s=n.dom.getParent(n.selection.getStart(),Oa);if(s){const a=n.dom.createRng();a.selectNodeContents(s),n.selection.setRng(a)}}})})(n),(n=>{n.editorCommands.addCommands({mceCleanup:()=>{const s=n.selection.getBookmark();n.setContent(n.getContent()),n.selection.moveToBookmark(s)},insertImage:(s,a,c)=>{nD(n,n.dom.createHTML("img",{src:c}))},insertHorizontalRule:()=>{n.execCommand("mceInsertContent",!1,"<hr>")},insertText:(s,a,c)=>{nD(n,n.dom.encode(c))},insertHTML:(s,a,c)=>{nD(n,c)},mceInsertContent:(s,a,c)=>{nD(n,c)},mceSetContent:(s,a,c)=>{n.setContent(c)},mceReplaceContent:(s,a,c)=>{n.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,n.selection.getContent({format:"text"})))},mceNewDocument:()=>{n.setContent(EV(n))}})})(n),(n=>{const s=(a,c,u)=>{const f=Ye(u)?{href:u}:u,h=n.dom.getParent(n.selection.getNode(),"a");ko(f)&&Ye(f.href)&&(f.href=f.href.replace(/ /g,"%20"),(!h||!f.href)&&n.formatter.remove("link"),f.href&&n.formatter.apply("link",f,h))};n.editorCommands.addCommands({unlink:()=>{if(n.selection.isEditable()){if(n.selection.isCollapsed()){const a=n.dom.getParent(n.selection.getStart(),"a");return void(a&&n.dom.remove(a,!0))}n.formatter.remove("link")}},mceInsertLink:s,createLink:s})})(n),(n=>{n.editorCommands.addCommands({Indent:()=>{(n=>{gH(n,"indent")})(n)},Outdent:()=>{_H(n)}}),n.editorCommands.addCommands({Outdent:()=>Mo(n)},"state")})(n),(n=>{n.editorCommands.addCommands({InsertNewBlockBefore:()=>{(n=>{t9(n,!0)})(n)},InsertNewBlockAfter:()=>{(n=>{t9(n,!1)})(n)}})})(n),(n=>{n.editorCommands.addCommands({insertParagraph:()=>{am(xF,n)},mceInsertNewLine:(s,a,c)=>{IF(n,c)},InsertLineBreak:(s,a,c)=>{am(kF,n)}})})(n),(n=>{(n=>{const s=(a,c)=>{n.formatter.toggle(a,c),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":a=>{s(a)},"ForeColor,HiliteColor":(a,c,u)=>{s(a,{value:u})},BackColor:(a,c,u)=>{s("hilitecolor",{value:u})},FontName:(a,c,u)=>{((n,s)=>{const a=CB(n,s);n.formatter.toggle("fontname",{value:SB(a)}),n.nodeChanged()})(n,u)},FontSize:(a,c,u)=>{((n,s)=>{n.formatter.toggle("fontsize",{value:CB(n,s)}),n.nodeChanged()})(n,u)},LineHeight:(a,c,u)=>{((n,s)=>{n.formatter.toggle("lineheight",{value:String(s)}),n.nodeChanged()})(n,u)},Lang:(a,c,u)=>{var f;s(a,{value:u.code,customValue:null!==(f=u.customCode)&&void 0!==f?f:null})},RemoveFormat:a=>{n.formatter.remove(a)},mceBlockQuote:()=>{s("blockquote")},FormatBlock:(a,c,u)=>{s(Ye(u)?u:"p")},mceToggleFormat:(a,c,u)=>{s(u)}})})(n),(n=>{const s=a=>n.formatter.match(a);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":a=>s(a),mceBlockQuote:()=>s("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>(n=>YC(n,s=>Z8(n.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("FontSize",()=>(n=>YC(n,s=>K8(n.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("LineHeight",()=>(n=>YC(n,s=>{const a=j_fromDom(n.getBody());return bx(s,f=>bd(f,"line-height"),Ve(mt,a)).getOrThunk(()=>{const f=parseFloat(yn(s,"line-height")),h=parseFloat(yn(s,"font-size"));return String(f/h)})}).getOr(""))(n))})(n)})(n),(n=>{n.editorCommands.addCommands({mceRemoveNode:(s,a,c)=>{const u=c??n.selection.getNode();if(u!==n.getBody()){const f=n.selection.getBookmark();n.dom.remove(u,!0),n.selection.moveToBookmark(f)}},mcePrint:()=>{n.getWin().print()},mceFocus:(s,a,c)=>{((n,s)=>{n.removed||(s?F1(n):(n=>{const s=n.selection,a=n.getBody();let c=s.getRng();n.quirks.refreshContentEditable(),Oe(n.bookmark)&&!Mu(n)&&I1(n).each(f=>{n.selection.setRng(f),c=f});const u=((n,s)=>n.dom.getParent(s,a=>"true"===n.dom.getContentEditable(a)))(n,s.getNode());if(u&&n.dom.isChildOf(u,a))return R1(u),NI(n,c),void F1(n);n.inline||(It.browser.isOpera()||R1(a),n.getWin().focus()),(It.browser.isFirefox()||n.inline)&&(R1(a),NI(n,c)),F1(n)})(n))})(n,!0===c)},mceToggleVisualAid:()=>{n.hasVisual=!n.hasVisual,n.addVisual()}})})(n)},TB=["toggleview"],rD=n=>zt(TB,n.toLowerCase());class sD{constructor(s){this.commands={state:{},exec:{},value:{}},this.editor=s}execCommand(s,a=!1,c,u){const f=this.editor,h=s.toLowerCase(),g=u?.skip_focus;if(f.removed||("mcefocus"!==h&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(h)||g?(n=>{I1(n).each(s=>n.selection.setRng(s))})(f):f.focus()),f.dispatch("BeforeExecCommand",{command:s,ui:a,value:c}).isDefaultPrevented()))return!1;const b=this.commands.exec[h];return!!Zt(b)&&(b(h,a,c),f.dispatch("ExecCommand",{command:s,ui:a,value:c}),!0)}queryCommandState(s){if(!rD(s)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const a=s.toLowerCase(),c=this.commands.state[a];return!!Zt(c)&&c(a)}queryCommandValue(s){if(!rD(s)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const a=s.toLowerCase(),c=this.commands.value[a];return Zt(c)?c(a):""}addCommands(s,a="exec"){const c=this.commands;Ut(s,(u,f)=>{ue(f.toLowerCase().split(","),h=>{c[a][h]=u})})}addCommand(s,a,c){const u=s.toLowerCase();this.commands.exec[u]=(f,h,g)=>a.call(c??this.editor,h,g)}queryCommandSupported(s){const a=s.toLowerCase();return!!this.commands.exec[a]}addQueryStateHandler(s,a,c){this.commands.state[s.toLowerCase()]=()=>a.call(c??this.editor)}addQueryValueHandler(s,a,c){this.commands.value[s.toLowerCase()]=()=>a.call(c??this.editor)}}const $c="data-mce-contenteditable",iD=(n,s,a)=>{try{n.getDoc().execCommand(s,!1,String(a))}catch{}},JC=(n,s)=>{n.dom.contentEditable=s?"true":"false"},Uc=n=>n.readonly,jf=n=>{n.parser.addAttributeFilter("contenteditable",s=>{Uc(n)&&ue(s,a=>{a.attr($c,a.attr("contenteditable")),a.attr("contenteditable","false")})}),n.serializer.addAttributeFilter($c,s=>{Uc(n)&&ue(s,a=>{a.attr("contenteditable",a.attr($c))})}),n.serializer.addTempAttr($c)},ct=["copy"],Js=de.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class aD{static isNative(s){return!!Js[s.toLowerCase()]}constructor(s){this.bindings={},this.settings=s||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||mn}fire(s,a){return this.dispatch(s,a)}dispatch(s,a){const c=s.toLowerCase(),u=yg(c,a??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(u);const f=this.bindings[c];if(f)for(let h=0,g=f.length;h<g;h++){const _=f[h];if(!_.removed){if(_.once&&this.off(c,_.func),u.isImmediatePropagationStopped())return u;if(!1===_.func.call(this.scope,u))return u.preventDefault(),u}}return u}on(s,a,c,u){if(!1===a&&(a=mn),a){const f={func:a,removed:!1};u&&de.extend(f,u);const h=s.toLowerCase().split(" ");let g=h.length;for(;g--;){const _=h[g];let b=this.bindings[_];b||(b=[],this.toggleEvent(_,!0)),b=c?[f,...b]:[...b,f],this.bindings[_]=b}}return this}off(s,a){if(s){const c=s.toLowerCase().split(" ");let u=c.length;for(;u--;){const f=c[u];let h=this.bindings[f];if(!f)return Ut(this.bindings,(g,_)=>{this.toggleEvent(_,!1),delete this.bindings[_]}),this;if(h){if(a){const g=as(h,_=>_.func===a);h=g.fail,this.bindings[f]=h,ue(g.pass,_=>{_.removed=!0})}else h.length=0;h.length||(this.toggleEvent(s,!1),delete this.bindings[f])}}}else Ut(this.bindings,(c,u)=>{this.toggleEvent(u,!1)}),this.bindings={};return this}once(s,a,c){return this.on(s,a,c,{once:!0})}has(s){s=s.toLowerCase();const a=this.bindings[s];return!(!a||0===a.length)}}const _m=n=>(n._eventDispatcher||(n._eventDispatcher=new aD({scope:n,toggleEvent:(s,a)=>{aD.isNative(s)&&n.toggleNativeEvent&&n.toggleNativeEvent(s,a)}})),n._eventDispatcher),cD={fire(n,s,a){return this.dispatch(n,s,a)},dispatch(n,s,a){const c=this;if(c.removed&&"remove"!==n&&"detach"!==n)return yg(n.toLowerCase(),s??{},c);const u=_m(c).dispatch(n,s);if(!1!==a&&c.parent){let f=c.parent();for(;f&&!u.isPropagationStopped();)f.dispatch(n,u,!1),f=f.parent?f.parent():void 0}return u},on(n,s,a){return _m(this).on(n,s,a)},off(n,s){return _m(this).off(n,s)},once(n,s){return _m(this).once(n,s)},hasEventListeners(n){return _m(this).has(n)}},QC=pn.DOM;let Hf;const XC=(n,s)=>{if("selectionchange"===s)return n.getDoc();if(!n.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(s))return n.getDoc().documentElement;const a=NS(n);return a?(n.eventRoot||(n.eventRoot=QC.select(a)[0]),n.eventRoot):n.getBody()},lD=(n,s,a)=>{(n=>!n.hidden&&!Uc(n))(n)?n.dispatch(s,a):Uc(n)&&((n,s)=>{if((n=>"click"===n.type)(s)&&!Fe.metaKeyPressed(s)){const a=j_fromDom(s.target);((n,s)=>gr(s,"a",c=>mt(c,j_fromDom(n.getBody()))).bind(c=>Ma(c,"href")))(n,a).each(c=>{if(s.preventDefault(),/^#/.test(c)){const u=n.dom.select(`${c},[name="${Lv(c,"#")}"]`);u.length&&n.selection.scrollIntoView(u[0],!0)}else window.open(c,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else(n=>zt(ct,n.type))(s)&&n.dispatch(s.type,s)})(n,a)},zf=(n,s)=>{if(n.delegates||(n.delegates={}),n.delegates[s]||n.removed)return;const a=XC(n,s);if(NS(n)){if(Hf||(Hf={},n.editorManager.on("removeEditor",()=>{n.editorManager.activeEditor||Hf&&(Ut(Hf,(u,f)=>{n.dom.unbind(XC(n,f))}),Hf=null)})),Hf[s])return;const c=u=>{const f=u.target,h=n.editorManager.get();let g=h.length;for(;g--;){const _=h[g].getBody();(_===f||QC.isChildOf(f,_))&&lD(h[g],s,u)}};Hf[s]=c,QC.bind(a,s,c)}else{const c=u=>{lD(n,s,u)};QC.bind(a,s,c),n.delegates[s]=c}},Rn={...cD,bindPendingEventDelegates(){const n=this;de.each(n._pendingNativeEvents,s=>{zf(n,s)})},toggleNativeEvent(n,s){const a=this;"focus"===n||"blur"===n||a.removed||(s?a.initialized?zf(a,n):a._pendingNativeEvents?a._pendingNativeEvents.push(n):a._pendingNativeEvents=[n]:a.initialized&&a.delegates&&(a.dom.unbind(XC(a,n),n,a.delegates[n]),delete a.delegates[n]))},unbindAllNativeEvents(){const n=this,s=n.getBody(),a=n.dom;n.delegates&&(Ut(n.delegates,(c,u)=>{n.dom.unbind(XC(n,u),u,c)}),delete n.delegates),!n.inline&&s&&a&&(s.onload=null,a.unbind(n.getWin()),a.unbind(n.getDoc())),a&&(a.unbind(s),a.unbind(n.getContainer()))}},u9=n=>Ye(n)?{value:n.split(/[ ,]/),valid:!0}:Ht(n,Ye)?{value:n,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},uD=(n,s)=>n+(dd(s.message)?"":`. ${s.message}`),_a=n=>n.valid,Wf=(n,s,a="")=>{const c=s(n);return ti(c)?c?{value:n,valid:!0}:{valid:!1,message:a}:c},f9=["design","readonly"],Sv=(n,s,a,c)=>{const u=a[s.get()],f=a[c];try{f.activate()}catch(h){return void console.error(`problem while activating editor mode ${c}:`,h)}u.deactivate(),u.editorReadOnly!==f.editorReadOnly&&((n,s)=>{const a=j_fromDom(n.getBody());((n,s,a)=>{Xc(n,s)&&!a?uh(n,s):a&&Gi(n,s)})(a,"mce-content-readonly",s),s?(n.selection.controlSelection.hideResizeRect(),n._selectionOverrides.hideFakeCaret(),(n=>{I.from(n.selection.getNode()).each(s=>{s.removeAttribute("data-mce-selected")})})(n),n.readonly=!0,JC(a,!1),(n=>{ue(Wt(n,'*[contenteditable="true"]'),s=>{Oo(s,$c,"true"),JC(s,!1)})})(a)):(n.readonly=!1,n.hasEditableRoot()&&JC(a,!0),(n=>{ue(Wt(n,`*[${$c}="true"]`),s=>{Co(s,$c),JC(s,!0)})})(a),iD(n,"StyleWithCSS",!1),iD(n,"enableInlineTableEditing",!1),iD(n,"enableObjectResizing",!1),FI(n)&&n.focus(),(n=>{n.selection.setRng(n.selection.getRng())})(n),n.nodeChanged())})(n,f.editorReadOnly),s.set(c),((n,s)=>{n.dispatch("SwitchMode",{mode:s})})(n,c)},dD=de.each,fD=de.explode,g9={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},hD=de.makeMap("alt,ctrl,shift,meta,access"),ym=n=>{const s={},a=It.os.isMacOS()||It.os.isiOS();dD(fD(n.toLowerCase(),"+"),f=>{(n=>n in hD)(f)?s[f]=!0:/^[0-9]{2,}$/.test(f)?s.keyCode=parseInt(f,10):(s.charCode=f.charCodeAt(0),s.keyCode=g9[f]||f.toUpperCase().charCodeAt(0))});const c=[s.keyCode];let u;for(u in hD)s[u]?c.push(u):s[u]=!1;return s.id=c.join(","),s.access&&(s.alt=!0,a?s.ctrl=!0:s.shift=!0),s.meta&&(a?s.meta=!0:(s.ctrl=!0,s.meta=!1)),s};class jc{constructor(s){this.shortcuts={},this.pendingPatterns=[],this.editor=s;const a=this;s.on("keyup keypress keydown",c=>{(a.hasModifier(c)||a.isFunctionKey(c))&&!c.isDefaultPrevented()&&(dD(a.shortcuts,u=>{a.matchShortcut(c,u)&&(a.pendingPatterns=u.subpatterns.slice(0),"keydown"===c.type&&a.executeShortcutAction(u))}),a.matchShortcut(c,a.pendingPatterns[0])&&(1===a.pendingPatterns.length&&"keydown"===c.type&&a.executeShortcutAction(a.pendingPatterns[0]),a.pendingPatterns.shift()))})}add(s,a,c,u){const f=this,h=f.normalizeCommandFunc(c);return dD(fD(de.trim(s)),g=>{const _=f.createShortcut(g,a,h,u);f.shortcuts[_.id]=_}),!0}remove(s){const a=this.createShortcut(s);return!!this.shortcuts[a.id]&&(delete this.shortcuts[a.id],!0)}normalizeCommandFunc(s){const a=this,c=s;return"string"==typeof c?()=>{a.editor.execCommand(c,!1,null)}:de.isArray(c)?()=>{a.editor.execCommand(c[0],c[1],c[2])}:c}createShortcut(s,a,c,u){const f=de.map(fD(s,">"),ym);return f[f.length-1]=de.extend(f[f.length-1],{func:c,scope:u||this.editor}),de.extend(f[0],{desc:this.editor.translate(a),subpatterns:f.slice(1)})}hasModifier(s){return s.altKey||s.ctrlKey||s.metaKey}isFunctionKey(s){return"keydown"===s.type&&s.keyCode>=112&&s.keyCode<=123}matchShortcut(s,a){return!(!a||a.ctrl!==s.ctrlKey||a.meta!==s.metaKey||a.alt!==s.altKey||a.shift!==s.shiftKey||!(s.keyCode===a.keyCode||s.charCode&&s.charCode===a.charCode)||(s.preventDefault(),0))}executeShortcutAction(s){return s.func?s.func.call(s.scope):null}}const bm=()=>{const n=(()=>{const n={},s={},a={},c={},u={},f={},h={},g={},_=(S,E)=>(T,N)=>{S[T.toLowerCase()]={...N,type:E}};return{addButton:_(n,"button"),addGroupToolbarButton:_(n,"grouptoolbarbutton"),addToggleButton:_(n,"togglebutton"),addMenuButton:_(n,"menubutton"),addSplitButton:_(n,"splitbutton"),addMenuItem:_(s,"menuitem"),addNestedMenuItem:_(s,"nestedmenuitem"),addToggleMenuItem:_(s,"togglemenuitem"),addAutocompleter:_(a,"autocompleter"),addContextMenu:_(u,"contextmenu"),addContextToolbar:_(f,"contexttoolbar"),addContextForm:_(f,"contextform"),addSidebar:_(h,"sidebar"),addView:_(g,"views"),addIcon:(S,E)=>c[S.toLowerCase()]=E,getAll:()=>({buttons:n,menuItems:s,icons:c,popups:a,contextMenus:u,contextToolbars:f,sidebars:h,views:g})}})();return{addAutocompleter:n.addAutocompleter,addButton:n.addButton,addContextForm:n.addContextForm,addContextMenu:n.addContextMenu,addContextToolbar:n.addContextToolbar,addIcon:n.addIcon,addMenuButton:n.addMenuButton,addMenuItem:n.addMenuItem,addNestedMenuItem:n.addNestedMenuItem,addSidebar:n.addSidebar,addSplitButton:n.addSplitButton,addToggleButton:n.addToggleButton,addGroupToolbarButton:n.addGroupToolbarButton,addToggleMenuItem:n.addToggleMenuItem,addView:n.addView,getAll:n.getAll}},od=pn.DOM,MB=de.extend,v9=de.each;class e0{constructor(s,a,c){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=c,this.documentBaseUrl=c.documentBaseURL,MB(this,Rn);const u=this;this.id=s,this.hidden=!1;const f=((n,s)=>Cv(KC||ZC,KC,s,n,s))(c.defaultOptions,a);this.options=((n,s)=>{const a={},c={},u=(E,T,N)=>{const V=Wf(T,N);return _a(V)?(c[E]=V.value,!0):(console.warn(uD(`Invalid value passed for the ${E} option`,V)),!1)},h=E=>Ke(a,E);return{register:(E,T)=>{const N=(n=>Ye(n.processor))(T)?(n=>{const s=(()=>{switch(n){case"array":return Sn;case"boolean":return ti;case"function":return Zt;case"number":return ni;case"object":return ko;case"string":return Ye;case"string[]":return u9;case"object[]":return a=>Ht(a,ko);case"regexp":return a=>ql(a,RegExp);default:return ro}})();return a=>Wf(a,s,`The value must be a ${n}.`)})(T.processor):T.processor,V=((n,s,a)=>{if(!Vo(s)){const c=Wf(s,a);if(_a(c))return c.value;console.error(uD(`Invalid default value passed for the "${n}" option`,c))}})(E,T.default,N);a[E]={...T,default:V,processor:N},Nt(c,E).orThunk(()=>Nt(s,E)).each(U=>u(E,U,N))},isRegistered:h,get:E=>Nt(c,E).orThunk(()=>Nt(a,E).map(T=>T.default)).getOrUndefined(),set:(E,T)=>{if(h(E)){const N=a[E];return N.immutable?(console.error(`"${E}" is an immutable option and cannot be updated`),!1):u(E,T,N.processor)}return console.warn(`"${E}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:E=>{const T=h(E);return T&&delete c[E],T},isSet:E=>Ke(c,E)}})(0,f),(n=>{const s=n.options.register;s("id",{processor:"string",default:n.id}),s("selector",{processor:"string"}),s("target",{processor:"object"}),s("suffix",{processor:"string"}),s("cache_suffix",{processor:"string"}),s("base_url",{processor:"string"}),s("referrer_policy",{processor:"string",default:""}),s("language_load",{processor:"boolean",default:!0}),s("inline",{processor:"boolean",default:!1}),s("iframe_attrs",{processor:"object",default:{}}),s("doctype",{processor:"string",default:"<!DOCTYPE html>"}),s("document_base_url",{processor:"string",default:n.documentBaseUrl}),s("body_id",{processor:kS(n,"tinymce"),default:"tinymce"}),s("body_class",{processor:kS(n),default:""}),s("content_security_policy",{processor:"string",default:""}),s("br_in_pre",{processor:"boolean",default:!0}),s("forced_root_block",{processor:a=>{const c=Ye(a)&&Ui(a);return c?{value:a,valid:c}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),s("forced_root_block_attrs",{processor:"object",default:{}}),s("newline_behavior",{processor:a=>{const c=zt(["block","linebreak","invert","default"],a);return c?{value:a,valid:c}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),s("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),s("no_newline_selector",{processor:"string",default:""}),s("keep_styles",{processor:"boolean",default:!0}),s("end_container_on_empty_block",{processor:a=>ti(a)||Ye(a)?{valid:!0,value:a}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),s("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),s("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),s("font_size_classes",{processor:"string",default:""}),s("automatic_uploads",{processor:"boolean",default:!0}),s("images_reuse_filename",{processor:"boolean",default:!1}),s("images_replace_blob_uris",{processor:"boolean",default:!0}),s("icons",{processor:"string",default:""}),s("icons_url",{processor:"string",default:""}),s("images_upload_url",{processor:"string",default:""}),s("images_upload_base_path",{processor:"string",default:""}),s("images_upload_credentials",{processor:"boolean",default:!1}),s("images_upload_handler",{processor:"function"}),s("language",{processor:"string",default:"en"}),s("language_url",{processor:"string",default:""}),s("entity_encoding",{processor:"string",default:"named"}),s("indent",{processor:"boolean",default:!0}),s("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),s("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),s("indent_use_margin",{processor:"boolean",default:!1}),s("indentation",{processor:"string",default:"40px"}),s("content_css",{processor:a=>{const c=!1===a||Ye(a)||Ht(a,Ye);return c?Ye(a)?{value:Xe(a.split(","),tu),valid:c}:Sn(a)?{value:a,valid:c}:!1===a?{value:[],valid:c}:{value:a,valid:c}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:jd(n)?[]:["default"]}),s("content_style",{processor:"string"}),s("content_css_cors",{processor:"boolean",default:!1}),s("font_css",{processor:a=>{const c=Ye(a)||Ht(a,Ye);return c?{value:Sn(a)?a:Xe(a.split(","),tu),valid:c}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),s("inline_boundaries",{processor:"boolean",default:!0}),s("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),s("object_resizing",{processor:a=>{const c=ti(a)||Ye(a);return c?!1===a||PS.isiPhone()||PS.isiPad()?{value:"",valid:c}:{value:!0===a?"table,img,figure.image,div,video,iframe":a,valid:c}:{valid:!1,message:"Must be boolean or a string"}},default:!$s}),s("resize_img_proportional",{processor:"boolean",default:!0}),s("event_root",{processor:"string"}),s("service_message",{processor:"string"}),s("theme",{processor:a=>!1===a||Ye(a)||Zt(a),default:"silver"}),s("theme_url",{processor:"string"}),s("formats",{processor:"object"}),s("format_empty_lines",{processor:"boolean",default:!1}),s("format_noneditable_selector",{processor:"string",default:""}),s("preview_styles",{processor:a=>{const c=!1===a||Ye(a);return c?{value:!1===a?"":a,valid:c}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),s("custom_ui_selector",{processor:"string",default:""}),s("hidden_input",{processor:"boolean",default:!0}),s("submit_patch",{processor:"boolean",default:!0}),s("encoding",{processor:"string"}),s("add_form_submit_trigger",{processor:"boolean",default:!0}),s("add_unload_trigger",{processor:"boolean",default:!0}),s("custom_undo_redo_levels",{processor:"number",default:0}),s("disable_nodechange",{processor:"boolean",default:!1}),s("readonly",{processor:"boolean",default:!1}),s("editable_root",{processor:"boolean",default:!0}),s("plugins",{processor:"string[]",default:[]}),s("external_plugins",{processor:"object"}),s("forced_plugins",{processor:"string[]"}),s("model",{processor:"string",default:n.hasPlugin("rtc")?"plugin":"dom"}),s("model_url",{processor:"string"}),s("block_unsupported_drop",{processor:"boolean",default:!0}),s("visual",{processor:"boolean",default:!0}),s("visual_table_class",{processor:"string",default:"mce-item-table"}),s("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),s("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),s("setup",{processor:"function"}),s("init_instance_callback",{processor:"function"}),s("url_converter",{processor:"function",default:n.convertURL}),s("url_converter_scope",{processor:"object",default:n}),s("urlconverter_callback",{processor:"function"}),s("allow_conditional_comments",{processor:"boolean",default:!1}),s("allow_html_data_urls",{processor:"boolean",default:!1}),s("allow_svg_data_urls",{processor:"boolean"}),s("allow_html_in_named_anchor",{processor:"boolean",default:!1}),s("allow_script_urls",{processor:"boolean",default:!1}),s("allow_unsafe_link_target",{processor:"boolean",default:!1}),s("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),s("fix_list_elements",{processor:"boolean",default:!1}),s("preserve_cdata",{processor:"boolean",default:!1}),s("remove_trailing_brs",{processor:"boolean",default:!0}),s("pad_empty_with_br",{processor:"boolean",default:!1}),s("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),s("element_format",{processor:"string",default:"html"}),s("entities",{processor:"string"}),s("schema",{processor:"string",default:"html5"}),s("convert_urls",{processor:"boolean",default:!0}),s("relative_urls",{processor:"boolean",default:!0}),s("remove_script_host",{processor:"boolean",default:!0}),s("custom_elements",{processor:bu}),s("extended_valid_elements",{processor:"string"}),s("invalid_elements",{processor:"string"}),s("invalid_styles",{processor:bu}),s("valid_children",{processor:"string"}),s("valid_classes",{processor:bu}),s("valid_elements",{processor:"string"}),s("valid_styles",{processor:bu}),s("verify_html",{processor:"boolean",default:!0}),s("auto_focus",{processor:a=>Ye(a)||!0===a}),s("browser_spellcheck",{processor:"boolean",default:!1}),s("protect",{processor:"array"}),s("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),s("deprecation_warnings",{processor:"boolean",default:!0}),s("a11y_advanced_options",{processor:"boolean",default:!1}),s("api_key",{processor:"string"}),s("license_key",{processor:"string"}),s("paste_block_drop",{processor:"boolean",default:!1}),s("paste_data_images",{processor:"boolean",default:!0}),s("paste_preprocess",{processor:"function"}),s("paste_postprocess",{processor:"function"}),s("paste_webkit_styles",{processor:"string",default:"none"}),s("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),s("paste_merge_formats",{processor:"boolean",default:!0}),s("smart_paste",{processor:"boolean",default:!0}),s("paste_as_text",{processor:"boolean",default:!1}),s("paste_tab_spaces",{processor:"number",default:4}),s("text_patterns",{processor:a=>Ht(a,ko)||!1===a?{value:xS(!1===a?[]:a),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),s("text_patterns_lookup",{processor:a=>Zt(a)?{value:lV(a),valid:!0}:{valid:!1,message:"Must be a single function"},default:a=>[]}),s("noneditable_class",{processor:"string",default:"mceNonEditable"}),s("editable_class",{processor:"string",default:"mceEditable"}),s("noneditable_regexp",{processor:a=>Ht(a,Wy)?{value:a,valid:!0}:Wy(a)?{value:[a],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),s("table_tab_navigation",{processor:"boolean",default:!0}),s("highlight_on_focus",{processor:"boolean",default:!0}),s("xss_sanitization",{processor:"boolean",default:!0}),s("details_initial_state",{processor:a=>{const c=zt(["inherited","collapsed","expanded"],a);return c?{value:a,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),s("details_serialized_state",{processor:a=>{const c=zt(["inherited","collapsed","expanded"],a);return c?{value:a,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),s("init_content_sync",{processor:"boolean",default:!1}),s("newdocument_content",{processor:"string",default:""}),s("sandbox_iframes",{processor:"boolean",default:!0}),s("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),s("convert_unsafe_embeds",{processor:"boolean",default:!0}),n.on("ScriptsLoaded",()=>{s("directionality",{processor:"string",default:ea.isRtl()?"rtl":void 0}),s("placeholder",{processor:"string",default:ES.getAttrib(n.getElement(),"placeholder")})})})(u);const h=this.options.get;h("deprecation_warnings")&&((n,s)=>{((n,s)=>{const a=(n=>{const s=nR(n,vf),a=n.forced_root_block;return(!1===a||""===a)&&s.push("forced_root_block (false only)"),ri(s)})(n),c=(n=>F_(n,kP))(s),u=c.length>0,f=a.length>0,h="mobile"===s.theme;if(u||f||h){const g="\n- ",_=h?`\n\nThemes:${g}mobile`:"",b=u?`\n\nPlugins:${g}${c.join(g)}`:"",S=f?`\n\nOptions:${g}${a.join(g)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+_+b+S)}})(n,s),((n,s)=>{const a=(n=>nR(n,tR))(n),c=(n=>F_(n,Dw.map(s=>s.name)))(s),u=c.length>0,f=a.length>0;if(u||f){const h="\n- ",g=u?`\n\nPlugins:${h}${c.map($5).join(h)}`:"",_=f?`\n\nOptions:${h}${a.join(h)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+g+_)}})(n,s)})(a,f);const g=h("suffix");g&&(c.suffix=g),this.suffix=c.suffix;const _=h("base_url");_&&c._setBaseUrl(_),this.baseUri=c.baseURI;const b=AS(u);b&&(gc.ScriptLoader._setReferrerPolicy(b),pn.DOM.styleSheetLoader._setReferrerPolicy(b));const S=YT(u);Oe(S)&&pn.DOM.styleSheetLoader._setContentCssCors(S),Qo.languageLoad=h("language_load"),Qo.baseURL=c.baseURL,this.setDirty(!1),this.documentBaseURI=new Di(NT(u),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=jd(u),this.hasVisual=QT(u),this.shortcuts=new jc(this),this.editorCommands=new sD(this),DB(this);const E=h("cache_suffix");E&&(It.cacheSuffix=E.replace(/^[\?\&]+/,"")),this.ui={registry:bm(),styleSheetLoader:void 0,show:ut,hide:ut,setEnabled:ut,isEnabled:ro},this.mode=(n=>{const s=No("design"),a=No({design:{activate:ut,deactivate:ut,editorReadOnly:!1},readonly:{activate:ut,deactivate:ut,editorReadOnly:!0}});return(n=>{n.serializer?jf(n):n.on("PreInit",()=>{jf(n)})})(n),(n=>{n.on("ShowCaret",s=>{Uc(n)&&s.preventDefault()}),n.on("ObjectSelected",s=>{Uc(n)&&s.preventDefault()})})(n),{isReadOnly:()=>Uc(n),set:c=>((n,s,a,c)=>{if(c!==a.get()){if(!Ke(s,c))throw new Error(`Editor mode '${c}' is invalid`);n.initialized?Sv(n,a,s,c):n.on("init",()=>Sv(n,a,s,c))}})(n,a.get(),s,c),get:()=>s.get(),register:(c,u)=>{a.set(((n,s,a)=>{if(zt(f9,s))throw new Error(`Cannot override default mode ${s}`);return{...n,[s]:{...a,deactivate:()=>{try{a.deactivate()}catch(c){console.error(`problem while deactivating editor mode ${s}:`,c)}}}}})(a.get(),c,u))}}})(u),c.dispatch("SetupEditor",{editor:this});const T=SV(u);Zt(T)&&T.call(u,u)}render(){(n=>{const s=n.id;ea.setCode(BT(n));const a=()=>{Bf.unbind(window,"ready",a),n.render()};if(!Dd.Event.domLoaded)return void Bf.bind(window,"ready",a);if(!n.getElement())return;const c=j_fromDom(n.getElement()),u=Jm(c);n.on("remove",()=>{Om(c.dom.attributes,h=>Co(c,h.name)),qi(c,u)}),n.ui.styleSheetLoader=((n,s)=>Rt.forElement(n,{contentCssCors:YT(s),referrerPolicy:AS(s)}))(c,n),jd(n)?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");const f=n.getElement().form||Bf.getParent(s,"form");f&&(n.formElement=f,qT(n)&&!hi(n.getElement())&&(Bf.insertAfter(Bf.create("input",{type:"hidden",name:s}),s),n.hasHiddenInput=!0),n.formEventDelegate=h=>{n.dispatch(h.type,h)},Bf.bind(f,"submit reset",n.formEventDelegate),n.on("reset",()=>{n.resetContent()}),FS(n)&&!f.submit.nodeType&&!f.submit.length&&!f._mceOldSubmit&&(f._mceOldSubmit=f.submit,f.submit=()=>(n.editorManager.triggerSave(),n.setDirty(!1),f._mceOldSubmit(f)))),n.windowManager=lR(n),n.notificationManager=AP(n),(n=>"xml"===n.options.get("encoding"))(n)&&n.on("GetContent",h=>{h.save&&(h.content=Bf.encode(h.content))}),Qy(n)&&n.on("submit",()=>{n.initialized&&n.save()}),GT(n)&&(n._beforeUnload=()=>{n.initialized&&!n.destroyed&&!n.isHidden()&&n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),n.editorManager.add(n),R8(n,n.suffix)})(this)}focus(s){this.execCommand("mceFocus",!1,s)}hasFocus(){return Mu(this)}translate(s){return ea.translate(s)}getParam(s,a,c){const u=this.options;return u.isRegistered(s)||(Oe(c)?u.register(s,{processor:c,default:a}):u.register(s,{processor:ro,default:a})),u.isSet(s)||Vo(a)?u.get(s):a}hasPlugin(s,a){return!(!zt(Xy(this),s)||a&&void 0===V_.get(s))}nodeChanged(s){this._nodeChangeDispatcher.nodeChanged(s)}addCommand(s,a,c){this.editorCommands.addCommand(s,a,c)}addQueryStateHandler(s,a,c){this.editorCommands.addQueryStateHandler(s,a,c)}addQueryValueHandler(s,a,c){this.editorCommands.addQueryValueHandler(s,a,c)}addShortcut(s,a,c,u){this.shortcuts.add(s,a,c,u)}execCommand(s,a,c,u){return this.editorCommands.execCommand(s,a,c,u)}queryCommandState(s){return this.editorCommands.queryCommandState(s)}queryCommandValue(s){return this.editorCommands.queryCommandValue(s)}queryCommandSupported(s){return this.editorCommands.queryCommandSupported(s)}show(){const s=this;s.hidden&&(s.hidden=!1,s.inline?s.getBody().contentEditable="true":(od.show(s.getContainer()),od.hide(s.id)),s.load(),s.dispatch("show"))}hide(){const s=this;s.hidden||(s.save(),s.inline?(s.getBody().contentEditable="false",s===s.editorManager.focusedEditor&&(s.editorManager.focusedEditor=null)):(od.hide(s.getContainer()),od.setStyle(s.id,"display",s.orgDisplay)),s.hidden=!0,s.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(s,a){this.dispatch("ProgressState",{state:s,time:a})}load(s={}){const a=this,c=a.getElement();if(a.removed)return"";if(c){const u={...s,load:!0},f=hi(c)?c.value:c.innerHTML,h=a.setContent(f,u);return u.no_events||a.dispatch("LoadContent",{...u,element:c}),h}return""}save(s={}){const a=this;let c=a.getElement();if(!c||!a.initialized||a.removed)return"";const u={...s,save:!0,element:c};let f=a.getContent(u);const h={...u,content:f};if(h.no_events||a.dispatch("SaveContent",h),"raw"===h.format&&a.dispatch("RawSaveContent",h),f=h.content,hi(c))c.value=f;else{(s.is_removing||!a.inline)&&(c.innerHTML=f);const g=od.getParent(a.id,"form");g&&v9(g.elements,_=>_.name!==a.id||(_.value=f,!1))}return h.element=u.element=c=null,!1!==h.set_dirty&&a.setDirty(!1),f}setContent(s,a){return kw(this,s,a)}getContent(s){return((n,s={})=>{const c=((n,s)=>({...n,format:s,get:!0,getInner:!0}))(s,s.format?s.format:"html");return N_(n,c).fold(pe,u=>{const f=((n,s)=>Sw(n).editor.getContent(s))(n,u);return _w(n,f,u)})})(this,s)}insertContent(s,a){a&&(s=MB({content:s},a)),this.execCommand("mceInsertContent",!1,s)}resetContent(s){void 0===s?kw(this,this.startContent,{format:"raw"}):kw(this,s),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(s){const a=!this.isNotDirty;this.isNotDirty=!s,s&&s!==a&&this.dispatch("dirty")}getContainer(){const s=this;return s.container||(s.container=s.editorContainer||od.get(s.id+"_parent")),s.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=od.get(this.id)),this.targetElm}getWin(){const s=this;if(!s.contentWindow){const a=s.iframeElement;a&&(s.contentWindow=a.contentWindow)}return s.contentWindow}getDoc(){const s=this;if(!s.contentDocument){const a=s.getWin();a&&(s.contentDocument=a.document)}return s.contentDocument}getBody(){var s,a;const c=this.getDoc();return null!==(a=null!==(s=this.bodyElement)&&void 0!==s?s:c?.body)&&void 0!==a?a:null}convertURL(s,a,c){const u=this,f=u.options.get,h=N7(u);if(Zt(h))return h.call(u,s,c,!0,a);if(!f("convert_urls")||"link"===c||ko(c)&&"LINK"===c.nodeName||0===s.indexOf("file:")||0===s.length)return s;const g=new Di(s);return"http"!==g.protocol&&"https"!==g.protocol&&""!==g.protocol?s:f("relative_urls")?u.documentBaseURI.toRelative(s):s=u.documentBaseURI.toAbsolute(s,f("remove_script_host"))}addVisual(s){((n,s)=>{((n,s)=>{lo(n).editor.addVisual(s)})(n,s)})(this,s)}setEditableRoot(s){((n,s)=>{n._editableRoot!==s&&(n._editableRoot=s,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),((n,s)=>{n.dispatch("EditableRootStateChange",{state:s})})(n,s))})(this,s)}hasEditableRoot(){return(n=>this._editableRoot)()}remove(){(n=>{if(!n.removed){const{_selectionOverrides:s,editorUpload:a}=n,c=n.getBody(),u=n.getElement();c&&n.save({is_removing:!0}),n.removed=!0,n.unbindAllNativeEvents(),n.hasHiddenInput&&Oe(u?.nextSibling)&&Fo.remove(u.nextSibling),(n=>{n.dispatch("remove")})(n),n.editorManager.remove(n),!n.inline&&c&&(n=>{Fo.setStyle(n.id,"display",n.orgDisplay)})(n),(n=>{n.dispatch("detach")})(n),Fo.remove(n.getContainer()),yf(s),yf(a),n.destroy()}})(this)}destroy(s){((n,s)=>{const{selection:a,dom:c}=n;if(!n.destroyed){if(!s&&!n.removed)return void n.remove();s||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),yf(a),yf(c)),(n=>{const s=n.formElement;s&&(s._mceOldSubmit&&(s.submit=s._mceOldSubmit,delete s._mceOldSubmit),Fo.unbind(s,"submit reset",n.formEventDelegate))})(n),(n=>{const s=n;s.contentAreaContainer=s.formElement=s.container=s.editorContainer=null,s.bodyElement=s.contentDocument=s.contentWindow=null,s.iframeElement=s.targetElm=null;const a=n.selection;a&&(s.selection=a.win=a.dom=a.dom.doc=null)})(n),n.destroyed=!0}})(this,s)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ya=pn.DOM,t0=de.each;let n0,IB=!1,ss=[];const o0=n=>{const s=n.type;t0(rd.get(),a=>{switch(s){case"scroll":a.dispatch("ScrollWindow",n);break;case"resize":a.dispatch("ResizeWindow",n)}})},pD=n=>{if(n!==IB){const s=pn.DOM;n?(s.bind(window,"resize",o0),s.bind(window,"scroll",o0)):(s.unbind(window,"resize",o0),s.unbind(window,"scroll",o0)),IB=n}},OB=n=>{const s=ss;return ss=nt(ss,a=>n!==a),rd.activeEditor===n&&(rd.activeEditor=ss.length>0?ss[0]:null),rd.focusedEditor===n&&(rd.focusedEditor=null),s.length!==ss.length},b9="CSS1Compat"!==document.compatMode,rd={...cD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"0.1",releaseDate:"2024-04-10",i18n:ea,activeEditor:null,focusedEditor:null,setup(){const n=this;let s="",a="",c=Di.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(c)&&(c=c.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(c)||(c+="/"));const u=window.tinymce||window.tinyMCEPreInit;if(u)s=u.base||u.baseURL,a=u.suffix;else{const f=document.getElementsByTagName("script");for(let h=0;h<f.length;h++){const g=f[h].src||"";if(""===g)continue;const _=g.substring(g.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(g)){-1!==_.indexOf(".min")&&(a=".min"),s=g.substring(0,g.lastIndexOf("/"));break}}if(!s&&document.currentScript){const h=document.currentScript.src;-1!==h.indexOf(".min")&&(a=".min"),s=h.substring(0,h.lastIndexOf("/"))}}n.baseURL=new Di(c).toAbsolute(s),n.documentBaseURL=c,n.baseURI=new Di(n.baseURL),n.suffix=a,(n=>{n.on("AddEditor",Ve(Q7,n)),n.on("RemoveEditor",Ve(A,n))})(n)},overrideDefaults(n){const s=n.base_url;s&&this._setBaseUrl(s);const a=n.suffix;a&&(this.suffix=a),this.defaultOptions=n;const c=n.plugin_base_urls;void 0!==c&&Ut(c,(u,f)=>{Qo.PluginManager.urls[f]=u})},init(n){const s=this;let a;const c=de.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let _=S=>{a=S};const b=()=>{let S=0;const E=[];let T;Ya.unbind(window,"ready",b),(S=>{const E=n.onpageload;E&&E.apply(s,[])})(),T=Jr((S=>It.browser.isIE()||It.browser.isEdge()?(FP("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):b9?(FP("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Ye(S.selector)?Ya.select(S.selector):Oe(S.target)?[S.target]:[])(n)),de.each(T,V=>{(n=>{n&&n.initialized&&!(n.getContainer()||n.getBody()).parentNode&&(OB(n),n.unbindAllNativeEvents(),n.destroy(!0),n.removed=!0)})(s.get(V.id))}),T=de.grep(T,V=>!s.get(V.id)),0===T.length?_([]):t0(T,V=>{((S,E)=>S.inline&&E.tagName.toLowerCase()in c)(n,V)?FP("Could not initialize inline editor on invalid inline target element",V):((V,F,U)=>{const W=new e0(V,F,s);E.push(W),W.on("init",()=>{++S===T.length&&_(E)}),W.targetElm=W.targetElm||U,W.render()})((S=>{let E=S.id;return E||(E=Nt(S,"name").filter(T=>!Ya.get(T)).getOrThunk(Ya.uniqueId),S.setAttribute("id",E)),E})(V),n,V)})};return Ya.bind(window,"ready",b),new Promise(S=>{a?S(a):_=E=>{S(E)}})},get(n){return 0===arguments.length?ss.slice(0):Ye(n)?vn(ss,s=>s.id===n).getOr(null):ni(n)&&ss[n]?ss[n]:null},add(n){const s=this,a=s.get(n.id);return a===n||(null===a&&ss.push(n),pD(!0),s.activeEditor=n,s.dispatch("AddEditor",{editor:n}),n0||(n0=c=>{const u=s.dispatch("BeforeUnload");if(u.returnValue)return c.preventDefault(),c.returnValue=u.returnValue,u.returnValue},window.addEventListener("beforeunload",n0))),n},createEditor(n,s){return this.add(new e0(n,s,this))},remove(n){const s=this;let a;if(n){if(!Ye(n))return a=n,po(s.get(a.id))?null:(OB(a)&&s.dispatch("RemoveEditor",{editor:a}),0===ss.length&&window.removeEventListener("beforeunload",n0),a.remove(),pD(ss.length>0),a);t0(Ya.select(n),c=>{a=s.get(c.id),a&&s.remove(a)})}else for(let c=ss.length-1;c>=0;c--)s.remove(ss[c])},execCommand(n,s,a){var c;const u=this,f=ko(a)?null!==(c=a.id)&&void 0!==c?c:a.index:a;switch(n){case"mceAddEditor":return u.get(f)||new e0(f,a.options,u).render(),!0;case"mceRemoveEditor":{const h=u.get(f);return h&&h.remove(),!0}case"mceToggleEditor":{const h=u.get(f);return h?(h.isHidden()?h.show():h.hide(),!0):(u.execCommand("mceAddEditor",!1,a),!0)}}return!!u.activeEditor&&u.activeEditor.execCommand(n,s,a)},triggerSave:()=>{t0(ss,n=>{n.save()})},addI18n:(n,s)=>{ea.add(n,s)},translate:n=>ea.translate(n),setActive(n){const s=this.activeEditor;this.activeEditor!==n&&(s&&s.dispatch("deactivate",{relatedTarget:n}),n.dispatch("activate",{relatedTarget:s})),this.activeEditor=n},_setBaseUrl(n){this.baseURL=new Di(this.documentBaseURL).toAbsolute(n.replace(/\/+$/,"")),this.baseURI=new Di(this.baseURL)}};rd.setup();const w9=(()=>{const n=mi();return{FakeClipboardItem:f=>({items:f,types:zn(f),getType:h=>Nt(f,h).getOrUndefined()}),write:f=>{n.set(f)},read:()=>n.get().getOrUndefined(),clear:n.clear}})(),AB=Math.min,wm=Math.max,r0=Math.round,NB=(n,s,a)=>{let c=s.x,u=s.y;const f=n.w,h=n.h,g=s.w,_=s.h,b=(a||"").split("");return"b"===b[0]&&(u+=_),"r"===b[1]&&(c+=g),"c"===b[0]&&(u+=r0(_/2)),"c"===b[1]&&(c+=r0(g/2)),"b"===b[3]&&(u-=h),"r"===b[4]&&(c-=f),"c"===b[3]&&(u-=r0(h/2)),"c"===b[4]&&(c-=r0(f/2)),Cm(c,u,f,h)},Cm=(n,s,a,c)=>({x:n,y:s,w:a,h:c}),Ds={inflate:(n,s,a)=>Cm(n.x-s,n.y-a,n.w+2*s,n.h+2*a),relativePosition:NB,findBestRelativePosition:(n,s,a,c)=>{for(let u=0;u<c.length;u++){const f=NB(n,s,c[u]);if(f.x>=a.x&&f.x+f.w<=a.w+a.x&&f.y>=a.y&&f.y+f.h<=a.h+a.y)return c[u]}return null},intersect:(n,s)=>{const a=wm(n.x,s.x),c=wm(n.y,s.y),u=AB(n.x+n.w,s.x+s.w),f=AB(n.y+n.h,s.y+s.h);return u-a<0||f-c<0?null:Cm(a,c,u-a,f-c)},clamp:(n,s,a)=>{let c=n.x,u=n.y,f=n.x+n.w,h=n.y+n.h;const g=s.x+s.w,_=s.y+s.h,b=wm(0,s.x-c),S=wm(0,s.y-u),E=wm(0,f-g),T=wm(0,h-_);return c+=b,u+=S,a&&(f+=b,h+=S,c-=E,u-=T),f-=E,h-=T,Cm(c,u,f-c,h-u)},create:Cm,fromClientRect:n=>Cm(n.left,n.top,n.width,n.height)},RB=(()=>{const n={},s={},a={};return{load:(_,b)=>{const S=`Script at URL "${b}" failed to load`,E=`Script at URL "${b}" did not call \`tinymce.Resource.add('${_}', data)\` within 1 second`;if(void 0!==n[_])return n[_];{const T=new Promise((N,V)=>{const F=((n,s,a=1e3)=>{let c=!1,u=null;const f=b=>(...S)=>{c||(c=!0,null!==u&&(clearTimeout(u),u=null),b.apply(null,S))},h=f(n),g=f(s);return{start:(...b)=>{!c&&null===u&&(u=setTimeout(()=>g.apply(null,b),a))},resolve:h,reject:g}})(N,V);s[_]=F.resolve,gc.ScriptLoader.loadScript(b).then(()=>F.start(E),()=>F.reject(S))});return n[_]=T,T}},add:(_,b)=>{void 0!==s[_]&&(s[_](b),delete s[_]),n[_]=Promise.resolve(b),a[_]=b},has:_=>_ in a,get:_=>a[_],unload:_=>{delete n[_],delete a[_]}}})();let Pv;try{const n="__storage_test__";Pv=window.localStorage,Pv.setItem(n,n),Pv.removeItem(n)}catch{Pv=(()=>{let n={},s=[];const a={getItem:c=>n[c]||null,setItem:(c,u)=>{s.push(c),n[c]=String(u)},key:c=>s[c],removeItem:c=>{s=s.filter(u=>u===c),delete n[c]},clear:()=>{s=[],n={}},length:0};return Object.defineProperty(a,"length",{get:()=>s.length,configurable:!1,enumerable:!1}),a})()}const T9={geom:{Rect:Ds},util:{Delay:Si,Tools:de,VK:Fe,URI:Di,EventDispatcher:aD,Observable:cD,I18n:ea,LocalStorage:Pv,ImageUploader:n=>{const s=LP(),a=Aw(n,s);return{upload:(c,u=!0)=>a.upload(c,u?_R(n):void 0)}}},dom:{EventUtils:Dd,TreeWalker:io,TextSeeker:dl,DOMUtils:pn,ScriptLoader:gc,RangeUtils:Jd,Serializer:F5,StyleSheetLoader:pg,ControlSelection:rI,BookmarkManager:cp,Selection:QN,Event:Dd.Event},html:{Styles:Cy,Entities:Ao,Node:qr,Schema:du,DomParser:Ap,Writer:$b,Serializer:Ua},Env:It,AddOnManager:Qo,Annotator:l$,Formatter:r4,UndoManager:a4,EditorCommands:sD,WindowManager:lR,NotificationManager:AP,EditorObservable:Rn,Shortcuts:jc,Editor:e0,FocusManager:TI,EditorManager:rd,DOM:pn.DOM,ScriptLoader:gc.ScriptLoader,PluginManager:V_,ThemeManager:Lp,ModelManager:Hu,IconManager:MP,Resource:RB,FakeClipboard:w9,trim:de.trim,isArray:de.isArray,is:de.is,toArray:de.toArray,makeMap:de.makeMap,each:de.each,map:de.map,grep:de.grep,inArray:de.inArray,extend:de.extend,walk:de.walk,resolve:de.resolve,explode:de.explode,_addCacheSuffix:de._addCacheSuffix},FB=de.extend(rd,T9);(n=>{window.tinymce=n,window.tinyMCE=n})(FB),(n=>{try{tc.exports=n}catch{}})(FB)}()},156:tc=>{function xa(Yr,Hn,Pa,ei,Ea,_n,jl){try{var oo=Yr[_n](jl),Fi=oo.value}catch(Zf){return void Pa(Zf)}oo.done?Hn(Fi):Promise.resolve(Fi).then(ei,Ea)}tc.exports=function Mr(Yr){return function(){var Hn=this,Pa=arguments;return new Promise(function(ei,Ea){var _n=Yr.apply(Hn,Pa);function jl(Fi){xa(_n,ei,Ea,jl,oo,"next",Fi)}function oo(Fi){xa(_n,ei,Ea,jl,oo,"throw",Fi)}jl(void 0)})}},tc.exports.__esModule=!0,tc.exports.default=tc.exports}},tc=>{tc(tc.s=792)}]);